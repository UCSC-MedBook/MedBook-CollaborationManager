<template name="collaborationGrid" xmlns="http://www.w3.org/1999/html">
  <h3 class="collaborationGridTitle">Browse Collaborations</h3>
  {{> collaborationAdd }}
  <div class="collaboration posts list">
    {{#each collaboration}}
      {{> collaborationGridElement}}
    {{/each}}
  </div>
</template>


<template name="collaborationGridElement">
  <a name="{{name}}" class="collaboration" href="/collaboration/{{name}}">
    <div class="collaborationMarquee collaboration post">
        <a class="controls" href="/collaboration-edit/{{name}}"> <i class="fa fa-edit fa-1g" style="float:right"  title="Edit Collaboration"></i></a>
        <H2><a  href="/collaboration/{{name}}">{{name}}</a></H2>

            {{#if isPublic}}
            <h6>Posts are public to all </h6>
            {{else}}
            <h6>Posts are private to collaborators</h6>
            {{/if}}

            {{#if requiresAdministratorApprovalToJoin}}
            <h6>Users may add themselves</h6>
            {{else}}
            <h6>Users require administrator approval</h6>
            {{/if}}

        <p>
        {{description}}
        </p>
        <b>Collaborators</b> <div class="collaboration-token">{{collaborators}}</div><br/>

        {{#if isAdministrator}}
            <b>Administrators</b> <div class="collaboration-token wordwrap">{{administrators}}</div><br/>
            {{#if invitations}}
                <b>Invitations</b> <div class="collaboration-token wordwrap">{{invitations}}</div><br/>
            {{/if}}
            {{#if applications}}
                <b>Applications</b> <div class="collaboration-token wordwrap">{{applications}}</div><br/>
            {{/if}}
        {{/if}}

        {{#if isMember}}
            <button data-collaborationName="{{name}}" id="leave" name="leave" type="button" class="btn btn-default btn-lg">Leave this collaboration</button>
        {{else}}
            {{#if requiresApproval}}
            <button data-collaborationName="{{name}}" id="apply" name="apply" type="button" class="btn btn-default btn-lg">Apply for membership</button>
        {{else}}
            <button data-collaborationName="{{name}}" id="join" name="join" type="button" class="btn btn-default btn-lg">Join this collaboration</button>
            {{/if}}
        {{/if}}

    </div>
  </a>

</template>
