{"version":3,"file":"/packages/telescope-tags.js","sources":["telescope-tags/lib/tags.js","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/package-tap.i18n","telescope-tags/lib/server/publications.js","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/i18n/de.i18n.json","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/i18n/en.i18n.json","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/i18n/es.i18n.json","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/i18n/fr.i18n.json","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/i18n/it.i18n.json","telescope-tags//Users/ted/MedBook/MedBook-Telescope3/packages/telescope-tags/i18n/zh-CN.i18n.json"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mC;AACA,O;AACA,iB;AACA,kB;AACA,I;AACA,U;AACA,iB;AACA,kB;AACA,I;AACA,S;AACA,gB;AACA,I;AACA,S;AACA,gB;AACA,Q;AACA,G;;AAEA,kD;AACA,wB;AACA,G;;AAEA,gC;AACA,6C;AACA,U;AACA,8C;AACA,4C;AACA,I;AACA,C;;AAEA,2C;AACA,kB;AACA,6B;AACA,U;AACA,G;AACA,E;AACA,+C;AACA,kC;;AAEA,wF;AACA,qB;AACA,G;AACA,+B;AACA,qB;AACA,6B;AACA,oB;AACA,K;AACA,G;AACA,E;;AAEA,kD;AACA,6B;AACA,qD;AACA,mC;AACA,+D;AACA,K;AACA,oB;AACA,C;;AAEA,qD;AACA,mD;;AAEA,4B;AACA,oB;AACA,uB;AACA,uB;AACA,uB;AACA,K;;AAEA,kB;AACA,iC;AACA,2B;AACA,oD;AACA,kG;AACA,iD;AACA,2B;AACA,K;AACA,K;AACA,G;;AAEA,gC;AACA,uC;AACA,E;;;;;;;;;;;;;;;;;;ACjFA,uH;;AAEA,+D;AACA,uD;;;;;;;;;;;;;;;;;;;ACHA,yC;AACA,+B;AACA,6B;AACA,G;AACA,Y;AACA,G;;;;;;;;;;;;;;;;;;ACLA,6B;AACA,oC;AACA,iC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,6E;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,oC;AACA,iC;;AAEA,gC;AACA,yD;AACA,C;AACA,gD;AACA,wE;;;;;;;;;;;;;;;;;;;ACRA,6B;AACA,oC;AACA,iC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,6E;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,oC;AACA,iC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,6E;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,oC;AACA,iC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,4E;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,oC;AACA,iC;;AAEA,gC;AACA,yD;AACA,C;AACA,kD;AACA,qC;AACA,C;;AAEA,6D;AACA,gD;AACA,C;;AAEA,wE","sourcesContent":["categorySchema = new SimpleSchema({\n _id: {\n    type: String,\n    optional: true\n  },\n  order: {\n    type: Number,\n    optional: true\n  },\n  slug: {\n    type: String\n  },\n  name: {\n    type: String\n  },    \n});\n\nCategories = new Meteor.Collection(\"categories\", {\n  schema: categorySchema\n});\n\n// category post list parameters\nviewParameters.category = function (terms) { \n  return {\n    find: {'categories.slug': terms.category},\n    options: {sort: {sticky: -1, score: -1}}\n  };\n}\n\n// push \"categories\" modules to postHeading\npostHeading.push({\n  template: 'postCategories',\n  order: 3\n});\n  \n// push \"categoriesMenu\" template to primaryNav\nprimaryNav.push('categoriesMenu');\n\n// push \"categories\" property to addToPostSchema, so that it's later added to postSchema\naddToPostSchema.push(\n  {\n    propertyName: 'categories',\n    propertySchema: {\n      type: [categorySchema],\n      optional: true\n    }\n  }\n);\n\nvar getCheckedCategories = function (properties) {\n  properties.categories = [];\n  $('input[name=category]:checked').each(function() {\n    var categoryId = $(this).val();\n    properties.categories.push(Categories.findOne(categoryId));\n  });\n  return properties;\n}\n\npostSubmitClientCallbacks.push(getCheckedCategories);\npostEditClientCallbacks.push(getCheckedCategories);\n\nMeteor.startup(function () {\n  Categories.allow({\n    insert: isAdminById\n  , update: isAdminById\n  , remove: isAdminById\n  });\n\n  Meteor.methods({\n    category: function(category){\n      console.log(category)\n      if (!Meteor.user() || !isAdmin(Meteor.user()))\n        throw new Meteor.Error(i18n.t('you_need_to_login_and_be_an_admin_to_add_a_new_category'));\n      var categoryId=Categories.insert(category);\n      return category.name;\n    }\n  });\n});\n\ngetCategoryUrl = function(slug){\n  return getSiteUrl()+'category/'+slug;\n};","TAPi18n.packages[\"telescope-tags\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"telescope-tags\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"telescope-tags\");\n","Meteor.publish('categories', function() {\n  if(canViewById(this.userId)){\n    return Categories.find();\n  }\n  return [];\n});","var _ = Package.underscore._,\n    package_name = \"telescope-tags\",\n    namespace = \"telescope-tags\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"de\"])) {\n  TAPi18n.translations[\"de\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"de\"][namespace])) {\n  TAPi18n.translations[\"de\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"de\"][namespace], {\"categories\":\"Kategorien\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-tags\",\n    namespace = \"telescope-tags\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \nTAPi18n.addResourceBundle(\"en\", namespace, {\"categories\":\"Categories\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-tags\",\n    namespace = \"telescope-tags\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"es\"])) {\n  TAPi18n.translations[\"es\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"es\"][namespace])) {\n  TAPi18n.translations[\"es\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"es\"][namespace], {\"categories\":\"Categorías\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-tags\",\n    namespace = \"telescope-tags\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"fr\"])) {\n  TAPi18n.translations[\"fr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"fr\"][namespace])) {\n  TAPi18n.translations[\"fr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"fr\"][namespace], {\"categories\":\"Catégories\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-tags\",\n    namespace = \"telescope-tags\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"it\"])) {\n  TAPi18n.translations[\"it\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"it\"][namespace])) {\n  TAPi18n.translations[\"it\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"it\"][namespace], {\"categories\":\"Categorie\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-tags\",\n    namespace = \"telescope-tags\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"])) {\n  TAPi18n.translations[\"zh-CN\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"][namespace])) {\n  TAPi18n.translations[\"zh-CN\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"zh-CN\"][namespace], {\"categories\":\"分类\"});\n"]}