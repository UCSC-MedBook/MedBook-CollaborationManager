!function(){var n,t;(function(){t={}}).call(this),function(){(function(){var n=this,r=n._,e={},u=Array.prototype,i=Object.prototype,a=Function.prototype,o=u.push,c=u.slice,l=u.concat,f=i.toString,s=i.hasOwnProperty,p=u.forEach,v=u.map,h=u.reduce,d=u.reduceRight,g=u.filter,m=u.every,y=u.some,b=u.indexOf,_=u.lastIndexOf,w=Array.isArray,x=Object.keys,j=a.bind,A=function(n){return n instanceof A?n:this instanceof A?void(this._wrapped=n):new A(n)};"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=A),t._=A):n._=A,A.VERSION="1.5.2";var k=function(n){return"[object Arguments]"===f.call(n)};k(arguments)||(k=function(n){return!(!n||!s.call(n,"callee")||"function"!=typeof n.callee)});var O=function(n){return n.length===+n.length&&(k(n)||n.constructor!==Object)},E=A.each=A.forEach=function(n,t,r){if(null!=n)if(p&&n.forEach===p)n.forEach(t,r);else if(O(n)){for(var u=0,i=n.length;i>u;u++)if(t.call(r,n[u],u,n)===e)return}else for(var a=A.keys(n),u=0,i=a.length;i>u;u++)if(t.call(r,n[a[u]],a[u],n)===e)return};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:v&&n.map===v?n.map(t,r):(E(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var F="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=A.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(E(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(F);return r},A.reduceRight=A.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),d&&n.reduceRight===d)return e&&(t=A.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(!O(n)){var a=A.keys(n);i=a.length}if(E(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(F);return r},A.find=A.detect=function(n,t,r){var e;return M(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(E(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},A.reject=function(n,t,r){return A.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},A.every=A.all=function(n,t,r){t||(t=A.identity);var u=!0;return null==n?u:m&&n.every===m?n.every(t,r):(E(n,function(n,i,a){return(u=u&&t.call(r,n,i,a))?void 0:e}),!!u)};var M=A.some=A.any=function(n,t,r){t||(t=A.identity);var u=!1;return null==n?u:y&&n.some===y?n.some(t,r):(E(n,function(n,i,a){return u||(u=t.call(r,n,i,a))?e:void 0}),!!u)};A.contains=A.include=function(n,t){return null==n?!1:b&&n.indexOf===b?-1!=n.indexOf(t):M(n,function(n){return n===t})},A.invoke=function(n,t){var r=c.call(arguments,2),e=A.isFunction(t);return A.map(n,function(n){return(e?t:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,function(n){return n[t]})},A.where=function(n,t,r){return A.isEmpty(t)?r?void 0:[]:A[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},A.findWhere=function(n,t){return A.where(n,t,!0)},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&A.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return E(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&A.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return E(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},A.shuffle=function(n){var t,r=0,e=[];return E(n,function(n){t=A.random(r++),e[r-1]=e[t],e[t]=n}),e},A.sample=function(n,t,r){return arguments.length<2||r?n[A.random(n.length-1)]:A.shuffle(n).slice(0,Math.max(0,t))};var R=function(n){return A.isFunction(n)?n:function(t){return t[n]}};A.sortBy=function(n,t,r){var e=R(t);return A.pluck(A.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var S=function(n){return function(t,r,e){var u={},i=null==r?A.identity:R(r);return E(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};A.groupBy=S(function(n,t,r){(A.has(n,t)?n[t]:n[t]=[]).push(r)}),A.indexBy=S(function(n,t,r){n[t]=r}),A.countBy=S(function(n,t){A.has(n,t)?n[t]++:n[t]=1}),A.sortedIndex=function(n,t,r,e){r=null==r?A.identity:R(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},A.toArray=function(n){return n?A.isArray(n)?c.call(n):O(n)?A.map(n,A.identity):A.values(n):[]},A.size=function(n){return null==n?0:O(n)?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:c.call(n,0,t)},A.initial=function(n,t,r){return c.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},A.rest=A.tail=A.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,A.identity)};var I=function(n,t,r){return t&&A.every(n,A.isArray)?l.apply(r,n):(E(n,function(n){A.isArray(n)||A.isArguments(n)?t?o.apply(r,n):I(n,t,r):r.push(n)}),r)};A.flatten=function(n,t){return I(n,t,[])},A.without=function(n){return A.difference(n,c.call(arguments,1))},A.uniq=A.unique=function(n,t,r,e){A.isFunction(t)&&(e=r,r=t,t=!1);var u=r?A.map(n,r,e):n,i=[],a=[];return E(u,function(r,e){(t?e&&a[a.length-1]===r:A.contains(a,r))||(a.push(r),i.push(n[e]))}),i},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(n){var t=c.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.indexOf(t,n)>=0})})},A.difference=function(n){var t=l.apply(u,c.call(arguments,1));return A.filter(n,function(n){return!A.contains(t,n)})},A.zip=function(){for(var n=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=A.pluck(arguments,""+r);return t},A.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(b&&n.indexOf===b)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},A.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(_&&n.lastIndexOf===_)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var T=function(){};A.bind=function(n,t){var r,e;if(j&&n.bind===j)return j.apply(n,c.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return r=c.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(c.call(arguments)));T.prototype=n.prototype;var u=new T;T.prototype=null;var i=n.apply(u,r.concat(c.call(arguments)));return Object(i)===i?i:u}},A.partial=function(n){var t=c.call(arguments,1);return function(){return n.apply(this,t.concat(c.call(arguments)))}},A.bindAll=function(n){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return E(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(c.call(arguments,1)))},A.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},A.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},A.once=function(n){var t=!1,r;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}},A.wrap=function(n,t){return function(){var r=[n];return o.apply(r,arguments),t.apply(this,r)}},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},A.keys=x||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)A.has(n,r)&&t.push(r);return t},A.values=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},A.pairs=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},A.invert=function(n){for(var t={},r=A.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return E(c.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={},r=l.apply(u,c.call(arguments,1));return E(r,function(r){r in n&&(t[r]=n[r])}),t},A.omit=function(n){var t={},r=l.apply(u,c.call(arguments,1));for(var e in n)A.contains(r,e)||(t[e]=n[e]);return t},A.defaults=function(n){return E(c.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof A&&(n=n._wrapped),t instanceof A&&(t=t._wrapped);var u=f.call(n);if(u!=f.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==u){if(c=n.length,l=c==t.length)for(;c--&&(l=N(n[c],t[c],r,e)););}else{for(var s in n)if(A.has(n,s)&&(c++,!(l=A.has(t,s)&&N(n[s],t[s],r,e))))break;if(l){for(s in t)if(A.has(t,s)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};A.isEqual=function(n,t){return N(n,t,[],[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!==n.nodeType)},A.isArray=w||function(n){return"[object Array]"==f.call(n)},A.isObject=function(n){return n===Object(n)},E(["Arguments","Function","String","Number","Date","RegExp"],function(n){A["is"+n]=function(t){return f.call(t)=="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(n){return"function"==typeof n}),A.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},A.isNaN=function(n){return A.isNumber(n)&&n!=+n},A.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return s.call(n,t)},A.noConflict=function(){return n._=r,this},A.identity=function(n){return n},A.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},A.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=A.invert(q.escape);var B={escape:new RegExp("["+A.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(q.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(n){A[n]=function(t){return null==t?"":(""+t).replace(B[n],function(t){return q[n][t]})}}),A.result=function(n,t){if(null==n)return void 0;var r=n[t];return A.isFunction(r)?r.call(n):r},A.mixin=function(n){E(A.functions(n),function(t){var r=A[t]=n[t];A.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),U.call(this,r.apply(A,n))}})};var D=0;A.uniqueId=function(n){var t=++D+"";return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(n,t,r){var e;r=A.defaults({},r,A.templateSettings);var u=new RegExp([(r.escape||P).source,(r.interpolate||P).source,(r.evaluate||P).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(C,function(n){return"\\"+z[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,A);var c=function(n){return e.call(this,n,A)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},A.chain=function(n){return A(n).chain()};var U=function(n){return this._chain?A(n).chain():n};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];A.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],U.call(this,r)}}),E(["concat","join","slice"],function(n){var t=u[n];A.prototype[n]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){n=t._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:n}}();

!function(){var t=Package.underscore._,e;(function(){e={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(e.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){function n(t){return t?e._debug("Exception in callback of async function",t.stack?t.stack:t):void 0}if(e.isServer)var r=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(e.release=__meteor_runtime_config__.meteorRelease),t.extend(e,{_get:function(t){for(var e=1;e<arguments.length;e++){if(!(arguments[e]in t))return void 0;t=t[arguments[e]]}return t},_ensure:function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];n in t||(t[n]={}),t=t[n]}return t},_delete:function(t){for(var e=[t],n=!0,r=1;r<arguments.length-1;r++){var o=arguments[r];if(!(o in t)){n=!1;break}if(t=t[o],"object"!=typeof t)break;e.push(t)}for(var r=e.length-1;r>=0;r--){var o=arguments[r+1];if(n)n=!1;else for(var i in e[r][o])return;delete e[r][o]}},wrapAsync:function(o,i){return function(){for(var a=i||this,u=t.toArray(arguments),s,c=u.length-1;c>=0;--c){var l=u[c],f=typeof l;if("undefined"!==f){"function"===f&&(s=l);break}}if(!s){if(e.isClient)s=n;else{var _=new r;s=_.resolver()}++c}u[c]=e.bindEnvironment(s);var p=o.apply(a,u);return _?_.wait():p}},_inherits:function(e,n){for(var r in n)t.has(n,r)&&(e[r]=n[r]);var o=function(){this.constructor=e};return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e}});var o=!1;e._wrapAsync=function(t,n){return o||(e._debug("Meteor._wrapAsync has been renamed to Meteor.wrapAsync"),o=!0),e.wrapAsync.apply(e,arguments)}}.call(this),function(){"use strict";function t(){if(o.setImmediate){var t=function(t){o.setImmediate(t)};return t.implementation="setImmediate",t}return null}function n(){function t(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function e(e){if(e.source===o&&t(e.data,u)){var n=e.data.substring(u.length);try{a[n]&&a[n]()}finally{delete a[n]}}}if(!o.postMessage||o.importScripts)return null;var n=!0,r=o.onmessage;if(o.onmessage=function(){n=!1},o.postMessage("","*"),o.onmessage=r,!n)return null;var i=0,a={},u="Meteor._setImmediate."+Math.random()+".";o.addEventListener?o.addEventListener("message",e,!1):o.attachEvent("onmessage",e);var s=function(t){++i,a[i]=t,o.postMessage(u+i,"*")};return s.implementation="postMessage",s}function r(){var t=function(t){o.setTimeout(t,0)};return t.implementation="setTimeout",t}var o=this;e._setImmediate=t()||n()||r()}.call(this),function(){var n=function(t){if(Package.ddp){var e=Package.ddp.DDP._CurrentInvocation;if(e.get()&&e.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){e.withValue(null,t)}}return t},r=function(t,r){return e.bindEnvironment(n(r),t)};t.extend(e,{setTimeout:function(t,e){return setTimeout(r("setTimeout callback",t),e)},setInterval:function(t,e){return setInterval(r("setInterval callback",t),e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},defer:function(t){e._setImmediate(r("defer callback",t))}})}.call(this),function(){e.makeErrorType=function(t,n){var r=function(){var e=this;if(Error.captureStackTrace)Error.captureStackTrace(e,r);else{var o=new Error;o.__proto__=r.prototype,o instanceof r&&(e=o)}return n.apply(e,arguments),e.errorType=t,e};return e._inherits(r,Error),r},e.Error=e.makeErrorType("Meteor.Error",function(t,e,n){var r=this;r.error=t,r.reason=e,r.details=n,r.message=r.reason?r.reason+" ["+r.error+"]":"["+r.error+"]"}),e.Error.prototype.clone=function(){var t=this;return new e.Error(t.error,t.reason,t.details)}}.call(this),function(){e._noYieldsAllowed=function(t){return t()},e._SynchronousQueue=function(){var t=this;t._tasks=[],t._running=!1,t._runTimeout=null},t.extend(e._SynchronousQueue.prototype,{runTask:function(n){var r=this;if(!r.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");r._tasks.push(n);var o=r._tasks;r._tasks=[],r._running=!0,r._runTimeout&&(clearTimeout(r._runTimeout),r._runTimeout=null);try{for(;!t.isEmpty(o);){var i=o.shift();try{i()}catch(a){if(t.isEmpty(o))throw a;e._debug("Exception in queued task: "+a.stack)}}}finally{r._running=!1}},queueTask:function(e){var n=this;n._tasks.push(e),n._runTimeout||(n._runTimeout=setTimeout(t.bind(n.flush,n),0))},flush:function(){var t=this;t.runTask(function(){})},drain:function(){var e=this;if(e.safeToRunTask())for(;!t.isEmpty(e._tasks);)e.flush()},safeToRunTask:function(){var t=this;return!t._running}})}.call(this),function(){var t=[],n=!e.isCordova&&("loaded"===document.readyState||"complete"==document.readyState),r=1,o=function(){if(r--,!(r>0)){n=!0;var o=function(){if(e.isCordova&&(!cordova.plugins||!cordova.plugins.CordovaUpdate))return void e.setTimeout(o,20);for(;t.length;)t.shift()()};o()}};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),e.isCordova&&(r++,document.addEventListener("deviceready",o,!1)),window.addEventListener("load",o,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&o()}),window.attachEvent("load",o)),e.startup=function(r){var o=!document.addEventListener&&document.documentElement.doScroll;if(o&&window===top){try{o("left")}catch(i){return void setTimeout(function(){e.startup(r)},50)}r()}else n?r():t.push(r)}}.call(this),function(){var t=0;e._debug=function(){if(t)return void t--;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var r=Function.prototype.bind.call(console.log,console);r.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},e._suppress_log=function(e){t+=e}}.call(this),function(){var n=0,r=[];e.EnvironmentVariable=function(){this.slot=n++},t.extend(e.EnvironmentVariable.prototype,{get:function(){return r[this.slot]},getOrNullIfOutsideFiber:function(){return this.get()},withValue:function(t,e){var n=r[this.slot];try{r[this.slot]=t;var o=e()}finally{r[this.slot]=n}return o}}),e.bindEnvironment=function(n,o,i){var a=t.clone(r);if(!o||"string"==typeof o){var u=o||"callback of async function";o=function(t){e._debug("Exception in "+u+":",t&&t.stack||t)}}return function(){var e=r;try{r=a;var u=n.apply(i,t.toArray(arguments))}catch(s){o(s)}finally{r=e}return u}},e._nodeCodeMustBeInFiber=function(){}}.call(this),function(){e.absoluteUrl=function(n,r){r||"object"!=typeof n||(r=n,n=void 0),r=t.extend({},e.absoluteUrl.defaultOptions,r||{});var o=r.rootUrl;if(!o)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(o)||(o="http://"+o),/\/$/.test(o)||(o+="/"),n&&(o+=n),r.secure&&/^http:/.test(o)&&!/http:\/\/localhost[:\/]/.test(o)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(o)&&(o=o.replace(/^http:/,"https:")),r.replaceLocalhost&&(o=o.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),o},e.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(e.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),e._relativeToSiteRootUrl=function(t){return"object"==typeof __meteor_runtime_config__&&"/"===t.substr(0,1)&&(t=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+t),t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:e}}();

!function(){var a=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}();

!function(){var e=Package.meteor.Meteor,t,n;(function(){!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ot.type(e);return"function"===n||ot.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(ot.isFunction(t))return ot.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ot.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(pt.test(t))return ot.filter(t,e,n);t=ot.filter(t,e)}return ot.grep(e,function(e){return ot.inArray(e,t)>=0!==n})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=wt[e]={};return ot.each(e.match(xt)||[],function(e,n){t[n]=!0}),t}function a(){mt.addEventListener?(mt.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(mt.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(mt.addEventListener||"load"===event.type||"complete"===mt.readyState)&&(a(),ot.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(kt,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Et.test(n)?ot.parseJSON(n):n}catch(i){}ot.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!ot.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,r){if(ot.acceptData(e)){var i,o,a=ot.expando,s=e.nodeType,l=s?ot.cache:e,u=s?e[a]:e[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[a]=J.pop()||ot.guid++:a),l[u]||(l[u]=s?{}:{toJSON:ot.noop}),("object"==typeof t||"function"==typeof t)&&(r?l[u]=ot.extend(l[u],t):l[u].data=ot.extend(l[u].data,t)),o=l[u],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[ot.camelCase(t)]=n),"string"==typeof t?(i=o[t],null==i&&(i=o[ot.camelCase(t)])):i=o,i}}function d(e,t,n){if(ot.acceptData(e)){var r,i,o=e.nodeType,a=o?ot.cache:e,s=o?e[ot.expando]:ot.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){ot.isArray(t)?t=t.concat(ot.map(t,ot.camelCase)):t in r?t=[t]:(t=ot.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!u(r):!ot.isEmptyObject(r))return}(n||(delete a[s].data,u(a[s])))&&(o?ot.cleanData([e],!0):rt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function p(){return!1}function h(){try{return mt.activeElement}catch(e){}}function m(e){var t=Ot.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==Ct?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ct?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||ot.nodeName(r,t)?o.push(r):ot.merge(o,g(r,t));return void 0===t||t&&ot.nodeName(e,t)?ot.merge([e],o):o}function v(e){Lt.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ot.nodeName(e,"table")&&ot.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ot.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Jt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)ot._data(n,"globalEval",!t||ot._data(t[r],"globalEval"))}function T(e,t){if(1===t.nodeType&&ot.hasData(e)){var n,r,i,o=ot._data(e),a=ot._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)ot.event.add(t,n,s[n][r])}a.data&&(a.data=ot.extend({},a.data))}}function C(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!rt.noCloneEvent&&t[ot.expando]){i=ot._data(t);for(r in i.events)ot.removeEvent(t,r,i.handle);t.removeAttribute(ot.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),rt.html5Clone&&e.innerHTML&&!ot.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Lt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function N(t,n){var r=ot(n.createElement(t)).appendTo(n.body),i=e.getDefaultComputedStyle?e.getDefaultComputedStyle(r[0]).display:ot.css(r[0],"display");return r.detach(),i}function E(e){var t=mt,n=en[e];return n||(n=N(e,t),"none"!==n&&n||(Zt=(Zt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Zt[0].contentWindow||Zt[0].contentDocument).document,t.write(),t.close(),n=N(e,t),Zt.detach()),en[e]=n),n}function k(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=hn.length;i--;)if(t=hn[i]+n,t in e)return t;return r}function A(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=ot._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Dt(r)&&(o[a]=ot._data(r,"olddisplay",E(r.nodeName)))):o[a]||(i=Dt(r),(n&&"none"!==n||!i)&&ot._data(r,"olddisplay",i?n:ot.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function D(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function j(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ot.css(e,n+At[o],!0,i)),r?("content"===n&&(a-=ot.css(e,"padding"+At[o],!0,i)),"margin"!==n&&(a-=ot.css(e,"border"+At[o]+"Width",!0,i))):(a+=ot.css(e,"padding"+At[o],!0,i),"padding"!==n&&(a+=ot.css(e,"border"+At[o]+"Width",!0,i)));return a}function L(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=rn(e),a=rt.boxSizing()&&"border-box"===ot.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=on(e,t,o),(0>i||null==i)&&(i=e.style[t]),nn.test(i))return i;r=a&&(rt.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+j(e,t,n||(a?"border":"content"),r,o)+"px"}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function q(){return setTimeout(function(){mn=void 0}),mn=ot.now()}function _(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=At[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function M(e,t,n){for(var r,i=(wn[t]||[]).concat(wn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function F(e,t,n){var r,i,o,a,s,l,u,c,d=this,f={},p=e.style,h=e.nodeType&&Dt(e),m=ot._data(e,"fxshow");n.queue||(s=ot._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,ot.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=ot.css(e,"display"),c=E(e.nodeName),"none"===u&&(u=c),"inline"===u&&"none"===ot.css(e,"float")&&(rt.inlineBlockNeedsLayout&&"inline"!==c?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",rt.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||ot.style(e,r)}if(!ot.isEmptyObject(f)){m?"hidden"in m&&(h=m.hidden):m=ot._data(e,"fxshow",{}),o&&(m.hidden=!h),h?ot(e).show():d.done(function(){ot(e).hide()}),d.done(function(){var t;ot._removeData(e,"fxshow");for(t in f)ot.style(e,t,f[t])});for(r in f)a=M(h?m[r]:0,r,d),r in m||(m[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(e,t){var n,r,i,o,a;for(n in e)if(r=ot.camelCase(n),i=t[r],o=e[n],ot.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=ot.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function B(e,t,n){var r,i,o=0,a=xn.length,s=ot.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=mn||q(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ot.extend({},t),opts:ot.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:mn||q(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ot.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);a>o;o++)if(r=xn[o].call(u,e,c,u.opts))return r;return ot.map(c,M,u),ot.isFunction(u.opts.start)&&u.opts.start.call(e,u),ot.fx.timer(ot.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(xt)||[];if(ot.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function R(e,t,n,r){function i(s){var l;return o[s]=!0,ot.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===Xn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function W(e,t){var n,r,i=ot.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&ot.extend(!0,e,n),e}function $(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function z(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function I(e,t,n,r){var i;if(ot.isArray(t))ot.each(t,function(t,i){n||Yn.test(e)?r(e,i):I(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ot.type(t))r(e,t);else for(i in t)I(e+"["+i+"]",t[i],n,r)}function X(){try{return new e.XMLHttpRequest}catch(t){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(e){return ot.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var J=[],Y=J.slice,Q=J.concat,G=J.push,K=J.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt="".trim,rt={},it="1.11.0",ot=function(e,t){return new ot.fn.init(e,t)},at=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,lt=/-([\da-z])/gi,ut=function(e,t){return t.toUpperCase()};ot.fn=ot.prototype={jquery:it,constructor:ot,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=ot.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ot.each(this,e,t)},map:function(e){return this.pushStack(ot.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:J.sort,splice:J.splice},ot.extend=ot.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||ot.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],n=i[r],a!==n&&(u&&n&&(ot.isPlainObject(n)||(t=ot.isArray(n)))?(t?(t=!1,o=e&&ot.isArray(e)?e:[]):o=e&&ot.isPlainObject(e)?e:{},a[r]=ot.extend(u,o,n)):void 0!==n&&(a[r]=n));return a},ot.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ot.type(e)},isArray:Array.isArray||function(e){return"array"===ot.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ot.type(e)||e.nodeType||ot.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(rt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&ot.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(st,"ms-").replace(lt,ut)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:nt&&!nt.call("﻿ ")?function(e){return null==e?"":nt.call(e)}:function(e){return null==e?"":(e+"").replace(at,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ot.merge(r,"string"==typeof e?[e]:e):G.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(K)return K.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),l=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&l.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&l.push(i);return Q.apply([],l)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),ot.isFunction(e)?(n=Y.call(arguments,2),r=function(){return e.apply(t||this,n.concat(Y.call(arguments)))},r.guid=e.guid=e.guid||ot.guid++,r):void 0},now:function(){return+new Date},support:rt}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ct=function(e){function t(e,t,n,r){var i,o,a,s,l,u,d,h,m,g;if((t?t.ownerDocument||t:R)!==H&&L(t),t=t||H,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(_&&!r){if(i=yt.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&C.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(C.qsa&&(!M||!M.test(e))){if(h=d=P,m=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=f(e),(d=t.getAttribute("id"))?h=d.replace(xt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+p(u[l]);m=bt.test(e)&&c(t.parentNode)||t,g=u.join(",")}if(g)try{return Z.apply(n,m.querySelectorAll(g)),n}catch(v){}finally{d||t.removeAttribute("id")}}}return w(e.replace(lt,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>N.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[P]=!0,e}function i(e){var t=H.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)N.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&typeof e.getElementsByTagName!==V&&e}function d(){}function f(e,n){var r,i,o,a,s,l,u,c=I[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=N.preFilter;s;){(!r||(i=ut.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ct.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(lt," ")}),s=s.slice(r.length));for(a in N.filter)!(i=ht[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):I(e,l).slice(0)}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[W,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[P]||(t[P]={}),(s=l[r])&&s[0]===W&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[P]&&(i=v(i)),o&&!o[P]&&(o=v(o,a)),r(function(r,a,s,l){var u,c,d,f=[],p=[],h=a.length,m=r||x(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?m:g(m,f,e,s,l),y=n?o||(r?e:h||i)?[]:a:v;if(n&&n(v,y,s,l),i)for(u=g(y,p),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(y[p[c]]=!(v[p[c]]=d));if(r){if(o||e){if(o){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(v[c]=d);o(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=o?tt.call(r,d):f[c])>-1&&(r[u]=!(a[u]=d))}}else y=g(y===a?y.splice(h,y.length):y),o?o(null,a,y,l):Z.apply(a,y)})}function y(e){for(var t,n,r,i=e.length,o=N.relative[e[0].type],a=o||N.relative[" "],s=o?1:0,l=h(function(e){return e===t},a,!0),u=h(function(e){return tt.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==A)||((t=n).nodeType?l(e,n,r):u(e,n,r))}];i>s;s++)if(n=N.relative[e[s].type])c=[h(m(c),n)];else{if(n=N.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!N.relative[e[r].type];r++);return v(s>1&&m(c),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return m(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,d,f,p=0,h="0",m=r&&[],v=[],y=A,b=r||o&&N.find.TAG("*",u),x=W+=null==y?1:Math.random()||.1,w=b.length;for(u&&(A=a!==H&&a);h!==w&&null!=(c=b[h]);h++){if(o&&c){for(d=0;f=e[d++];)if(f(c,a,s)){l.push(c);break}u&&(W=x)}i&&((c=!f&&c)&&p--,r&&m.push(c))}if(p+=h,i&&h!==p){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(p>0)for(;h--;)m[h]||v[h]||(v[h]=G.call(l));v=g(v)}Z.apply(l,v),u&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(W=x,A=y),m};return i?r(a):a}function x(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function w(e,t,n,r){var i,o,a,s,l,u=f(e);if(!r&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&C.getById&&9===t.nodeType&&_&&N.relative[o[1].type]){if(t=(N.find.ID(a.matches[0].replace(wt,Tt),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=ht.needsContext.test(e)?0:o.length;i--&&(a=o[i],!N.relative[s=a.type]);)if((l=N.find[s])&&(r=l(a.matches[0].replace(wt,Tt),bt.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return Z.apply(n,r),n;break}}return S(e,u)(r,t,!_,n,bt.test(e)&&c(t.parentNode)||t),n}var T,C,N,E,k,S,A,D,j,L,H,q,_,M,F,O,B,P="sizzle"+-new Date,R=e.document,W=0,$=0,z=n(),I=n(),X=n(),U=function(e,t){return e===t&&(j=!0),0},V="undefined",J=1<<31,Y={}.hasOwnProperty,Q=[],G=Q.pop,K=Q.push,Z=Q.push,et=Q.slice,tt=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=it.replace("w","w#"),at="\\["+rt+"*("+it+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ot+")|)|)"+rt+"*\\]",st=":("+it+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ut=new RegExp("^"+rt+"*,"+rt+"*"),ct=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),dt=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ft=new RegExp(st),pt=new RegExp("^"+ot+"$"),ht={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,xt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),Tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply(Q=et.call(R.childNodes),R.childNodes),Q[R.childNodes.length].nodeType}catch(Ct){Z={apply:Q.length?function(e,t){K.apply(e,et.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:R,r=n.defaultView;return n!==H&&9===n.nodeType&&n.documentElement?(H=n,q=n.documentElement,_=!k(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){L()},!1):r.attachEvent&&r.attachEvent("onunload",function(){L()})),C.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=vt.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),C.getById=i(function(e){return q.appendChild(e).id=P,!n.getElementsByName||!n.getElementsByName(P).length}),C.getById?(N.find.ID=function(e,t){if(typeof t.getElementById!==V&&_){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},N.filter.ID=function(e){var t=e.replace(wt,Tt);return function(e){return e.getAttribute("id")===t}}):(delete N.find.ID,N.filter.ID=function(e){var t=e.replace(wt,Tt);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),N.find.TAG=C.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},N.find.CLASS=C.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&_?t.getElementsByClassName(e):void 0},F=[],M=[],(C.qsa=vt.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&M.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+rt+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+rt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(C.matchesSelector=vt.test(O=q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.msMatchesSelector))&&i(function(e){C.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),F.push("!=",st)}),M=M.length&&new RegExp(M.join("|")),F=F.length&&new RegExp(F.join("|")),t=vt.test(q.compareDocumentPosition),B=t||vt.test(q.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return j=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!C.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===R&&B(R,e)?-1:t===n||t.ownerDocument===R&&B(R,t)?1:D?tt.call(D,e)-tt.call(D,t):0:4&r?-1:1)}:function(e,t){if(e===t)return j=!0,0;var r,i=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:D?tt.call(D,e)-tt.call(D,t):0;if(o===s)return a(e,t);for(r=e;r=r.parentNode;)l.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===R?-1:u[i]===R?1:0},n):H},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==H&&L(e),n=n.replace(dt,"='$1']"),!(!C.matchesSelector||!_||F&&F.test(n)||M&&M.test(n)))try{var r=O.call(e,n);if(r||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==H&&L(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==H&&L(e);var n=N.attrHandle[t.toLowerCase()],r=n&&Y.call(N.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==r?r:C.attributes||!_?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!C.detectDuplicates,D=!C.sortStable&&e.slice(0),e.sort(U),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},E=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=E(t);return n},N=t.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Tt),e[3]=(e[4]||e[5]||"").replace(wt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ht.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&ft.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,Tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(c=g[P]||(g[P]={}),u=c[e]||[],p=u[0]===W&&u[1],f=u[0]===W&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[W,p,f];break}}else if(y&&(u=(t[P]||(t[P]={}))[e])&&u[0]===W)f=u[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[P]||(d[P]={}))[e]=[W,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=N.pseudos[e]||N.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[P]?o(n):o.length>1?(i=[e,e,"",n],N.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=tt.call(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(lt,"$1"));return i[P]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:r(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,Tt).toLowerCase(),function(t){var n;do if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===q},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!N.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())
},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},N.pseudos.nth=N.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})N.pseudos[T]=s(T);for(T in{submit:!0,reset:!0})N.pseudos[T]=l(T);return d.prototype=N.filters=N.pseudos,N.setFilters=new d,S=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=f(e)),n=t.length;n--;)o=y(t[n]),o[P]?r.push(o):i.push(o);o=X(e,b(i,r))}return o},C.sortStable=P.split("").sort(U).join("")===P,C.detectDuplicates=!!j,L(),C.sortDetached=i(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var dt=ot.expr.match.needsContext,ft=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pt=/^.[^:#\[\.,]*$/;ot.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ot.find.matchesSelector(r,e)?[r]:[]:ot.find.matches(e,ot.grep(t,function(e){return 1===e.nodeType}))},ot.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ot(e).filter(function(){for(t=0;i>t;t++)if(ot.contains(r[t],this))return!0}));for(t=0;i>t;t++)ot.find(e,r[t],n);return n=this.pushStack(i>1?ot.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&dt.test(e)?ot(e):e||[],!1).length}});var ht,mt=e.document,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,vt=ot.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:gt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ht).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ot?t[0]:t,ot.merge(this,ot.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:mt,!0)),ft.test(n[1])&&ot.isPlainObject(t))for(n in t)ot.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=mt.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return ht.find(e);this.length=1,this[0]=r}return this.context=mt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ot.isFunction(e)?"undefined"!=typeof ht.ready?ht.ready(e):e(ot):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ot.makeArray(e,this))};vt.prototype=ot.fn,ht=ot(mt);var yt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!ot(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ot.fn.extend({has:function(e){var t,n=ot(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ot.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=dt.test(e)||"string"!=typeof e?ot(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ot.unique(o):o)},index:function(e){return e?"string"==typeof e?ot.inArray(this[0],ot(e)):ot.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ot.unique(ot.merge(this.get(),ot(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ot.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ot.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ot.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ot.dir(e,"nextSibling")},prevAll:function(e){return ot.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ot.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ot.dir(e,"previousSibling",n)},siblings:function(e){return ot.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ot.sibling(e.firstChild)},contents:function(e){return ot.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ot.merge([],e.childNodes)}},function(e,t){ot.fn[e]=function(n,r){var i=ot.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ot.filter(r,i)),this.length>1&&(bt[e]||(i=ot.unique(i)),yt.test(e)&&(i=i.reverse())),this.pushStack(i)}});var xt=/\S+/g,wt={};ot.Callbacks=function(e){e="string"==typeof e?wt[e]||o(e):ot.extend({},e);var t,n,r,i,a,s,l=[],u=!e.once&&[],c=function(o){for(n=e.memory&&o,r=!0,a=s||0,s=0,i=l.length,t=!0;l&&i>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var r=l.length;!function o(t){ot.each(t,function(t,n){var r=ot.type(n);"function"===r?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),t?i=l.length:n&&(s=r,c(n))}return this},remove:function(){return l&&ot.each(arguments,function(e,n){for(var r;(r=ot.inArray(n,l,r))>-1;)l.splice(r,1),t&&(i>=r&&i--,a>=r&&a--)}),this},has:function(e){return e?ot.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!l||r&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ot.extend({Deferred:function(e){var t=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ot.Deferred(function(n){ot.each(t,function(t,o){var a=ot.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ot.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ot.extend(e,r):r}},i={};return r.pipe=r.then,ot.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=Y.call(arguments),r=n.length,i=1!==r||e&&ot.isFunction(e.promise)?r:0,o=1===i?e:ot.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?Y.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=new Array(r),l=new Array(r),u=new Array(r);r>t;t++)n[t]&&ot.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}});var Tt;ot.fn.ready=function(e){return ot.ready.promise().done(e),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ot.readyWait++:ot.ready(!0)},ready:function(e){if(e===!0?!--ot.readyWait:!ot.isReady){if(!mt.body)return setTimeout(ot.ready);ot.isReady=!0,e!==!0&&--ot.readyWait>0||(Tt.resolveWith(mt,[ot]),ot.fn.trigger&&ot(mt).trigger("ready").off("ready"))}}}),ot.ready.promise=function(t){if(!Tt)if(Tt=ot.Deferred(),"complete"===mt.readyState)setTimeout(ot.ready);else if(mt.addEventListener)mt.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{mt.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&mt.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!ot.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}a(),ot.ready()}}()}return Tt.promise(t)};var Ct="undefined",Nt;for(Nt in ot(rt))break;rt.ownLast="0"!==Nt,rt.inlineBlockNeedsLayout=!1,ot(function(){var e,t,n=mt.getElementsByTagName("body")[0];n&&(e=mt.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=mt.createElement("div"),n.appendChild(e).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(rt.inlineBlockNeedsLayout=3===t.offsetWidth)&&(n.style.zoom=1)),n.removeChild(e),e=t=null)}),function(){var e=mt.createElement("div");if(null==rt.deleteExpando){rt.deleteExpando=!0;try{delete e.test}catch(t){rt.deleteExpando=!1}}e=null}(),ot.acceptData=function(e){var t=ot.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kt=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ot.cache[e[ot.expando]]:e[ot.expando],!!e&&!u(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),ot.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ot.data(o),1===o.nodeType&&!ot._data(o,"parsedAttrs"))){for(n=a.length;n--;)r=a[n].name,0===r.indexOf("data-")&&(r=ot.camelCase(r.slice(5)),l(o,r,i[r]));ot._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ot.data(this,e)}):arguments.length>1?this.each(function(){ot.data(this,e,t)}):o?l(o,e,ot.data(o,e)):void 0},removeData:function(e){return this.each(function(){ot.removeData(this,e)})}}),ot.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ot._data(e,t),n&&(!r||ot.isArray(n)?r=ot._data(e,t,ot.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ot.queue(e,t),r=n.length,i=n.shift(),o=ot._queueHooks(e,t),a=function(){ot.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ot._data(e,n)||ot._data(e,n,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(e,t+"queue"),ot._removeData(e,n)})})}}),ot.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ot.queue(this[0],e):void 0===t?this:this.each(function(){var n=ot.queue(this,e,t);ot._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ot.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ot.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ot.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ot._data(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var St=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,At=["Top","Right","Bottom","Left"],Dt=function(e,t){return e=t||e,"none"===ot.css(e,"display")||!ot.contains(e.ownerDocument,e)},jt=ot.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===ot.type(n)){i=!0;for(s in n)ot.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,ot.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ot(e),n)})),t))for(;l>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o},Lt=/^(?:checkbox|radio)$/i;!function(){var e=mt.createDocumentFragment(),t=mt.createElement("div"),n=mt.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",rt.leadingWhitespace=3===t.firstChild.nodeType,rt.tbody=!t.getElementsByTagName("tbody").length,rt.htmlSerialize=!!t.getElementsByTagName("link").length,rt.html5Clone="<:nav></:nav>"!==mt.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),rt.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",rt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",rt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,rt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){rt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==rt.deleteExpando){rt.deleteExpando=!0;try{delete t.test}catch(r){rt.deleteExpando=!1}}e=t=n=null}(),function(){var t,n,r=mt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(rt[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),rt[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Ht=/^(?:input|select|textarea)$/i,qt=/^key/,_t=/^(?:mouse|contextmenu)|click/,Mt=/^(?:focusinfocus|focusoutblur)$/,Ft=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=ot._data(e);if(g){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=ot.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(e){return typeof ot===Ct||e&&ot.event.triggered===e.type?void 0:ot.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(xt)||[""],s=t.length;s--;)o=Ft.exec(t[s])||[],p=m=o[1],h=(o[2]||"").split(".").sort(),p&&(u=ot.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=ot.event.special[p]||{},d=ot.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ot.expr.match.needsContext.test(i),namespace:h.join(".")},l),(f=a[p])||(f=a[p]=[],f.delegateCount=0,u.setup&&u.setup.call(e,r,h,c)!==!1||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),ot.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=ot.hasData(e)&&ot._data(e);if(g&&(c=g.events)){for(t=(t||"").match(xt)||[""],u=t.length;u--;)if(s=Ft.exec(t[u])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=ot.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,f=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));l&&!f.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||ot.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ot.event.remove(e,p+t[u],n,r,!0);ot.isEmptyObject(c)&&(delete g.handle,ot._removeData(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,u,c,d,f=[r||mt],p=tt.call(t,"type")?t.type:t,h=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=c=r=r||mt,3!==r.nodeType&&8!==r.nodeType&&!Mt.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[ot.expando]?t:new ot.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ot.makeArray(n,[t]),u=ot.event.special[p]||{},i||!u.trigger||u.trigger.apply(r,n)!==!1)){if(!i&&!u.noBubble&&!ot.isWindow(r)){for(l=u.delegateType||p,Mt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(r.ownerDocument||mt)&&f.push(c.defaultView||c.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?l:u.bindType||p,o=(ot._data(s,"events")||{})[t.type]&&ot._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&ot.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(f.pop(),n)===!1)&&ot.acceptData(r)&&a&&r[p]&&!ot.isWindow(r)){c=r[a],c&&(r[a]=null),ot.event.triggered=p;try{r[p]()}catch(m){}ot.event.triggered=void 0,c&&(r[a]=c)}return t.result}},dispatch:function(e){e=ot.event.fix(e);var t,n,r,i,o,a=[],s=Y.call(arguments),l=(ot._data(this,"events")||{})[e.type]||[],u=ot.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=ot.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((ot.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],o=0;s>o;o++)r=t[o],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?ot(n,this).index(l)>=0:ot.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ot.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=_t.test(i)?this.mouseHooks:qt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ot.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||mt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||mt,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ot.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ot.extend(new ot.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ot.event.trigger(i,null,t):ot.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ot.removeEvent=mt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Ct&&(e[r]=null),e.detachEvent(r,n))},ot.Event=function(e,t){return this instanceof ot.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())?f:p):this.type=e,t&&ot.extend(this,t),this.timeStamp=e&&e.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(e,t)},ot.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f,this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ot.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!ot.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),rt.submitBubbles||(ot.event.special.submit={setup:function(){return ot.nodeName(this,"form")?!1:void ot.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ot.nodeName(t,"input")||ot.nodeName(t,"button")?t.form:void 0;n&&!ot._data(n,"submitBubbles")&&(ot.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ot._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ot.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ot.nodeName(this,"form")?!1:void ot.event.remove(this,"._submit")}}),rt.changeBubbles||(ot.event.special.change={setup:function(){return Ht.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ot.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,e,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ht.test(t.nodeName)&&!ot._data(t,"changeBubbles")&&(ot.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ot.event.simulate("change",this.parentNode,e,!0)}),ot._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ot.event.remove(this,"._change"),!Ht.test(this.nodeName)}}),rt.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ot.event.simulate(t,e.target,ot.event.fix(e),!0)};ot.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ot._data(r,t);i||r.addEventListener(e,n,!0),ot._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ot._data(r,t)-1;i?ot._data(r,t,i):(r.removeEventListener(e,n,!0),ot._removeData(r,t))}}}),ot.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=p;else if(!r)return this;return 1===i&&(a=r,r=function(e){return ot().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ot.guid++)),this.each(function(){ot.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ot(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){ot.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ot.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ot.event.trigger(e,t,n,!0):void 0}});var Ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Bt=/ jQuery\d+="(?:null|\d+)"/g,Pt=new RegExp("<(?:"+Ot+")[\\s/>]","i"),Rt=/^\s+/,Wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$t=/<([\w:]+)/,zt=/<tbody/i,It=/<|&#?\w+;/,Xt=/<(?:script|style|link)/i,Ut=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^$|\/(?:java|ecma)script/i,Jt=/^true\/(.*)/,Yt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:rt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Gt=m(mt),Kt=Gt.appendChild(mt.createElement("div"));Qt.optgroup=Qt.option,Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td,ot.extend({clone:function(e,t,n){var r,i,o,a,s,l=ot.contains(e.ownerDocument,e);if(rt.html5Clone||ot.isXMLDoc(e)||!Pt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Kt.innerHTML=e.outerHTML,Kt.removeChild(o=Kt.firstChild)),!(rt.noCloneEvent&&rt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ot.isXMLDoc(e)))for(r=g(o),s=g(e),a=0;null!=(i=s[a]);++a)r[a]&&C(i,r[a]);if(t)if(n)for(s=s||g(e),r=r||g(o),a=0;null!=(i=s[a]);a++)T(i,r[a]);else T(e,o);return r=g(o,"script"),r.length>0&&w(r,!l&&g(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,d=e.length,f=m(t),p=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===ot.type(o))ot.merge(p,o.nodeType?[o]:o);else if(It.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=($t.exec(o)||["",""])[1].toLowerCase(),c=Qt[l]||Qt._default,s.innerHTML=c[1]+o.replace(Wt,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!rt.leadingWhitespace&&Rt.test(o)&&p.push(t.createTextNode(Rt.exec(o)[0])),!rt.tbody)for(o="table"!==l||zt.test(o)?"<table>"!==c[1]||zt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)ot.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(ot.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else p.push(t.createTextNode(o));for(s&&f.removeChild(s),rt.appendChecked||ot.grep(g(p,"input"),v),h=0;o=p[h++];)if((!r||-1===ot.inArray(o,r))&&(a=ot.contains(o.ownerDocument,o),s=g(f.appendChild(o),"script"),a&&w(s),n))for(i=0;o=s[i++];)Vt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ot.expando,l=ot.cache,u=rt.deleteExpando,c=ot.event.special;null!=(n=e[a]);a++)if((t||ot.acceptData(n))&&(i=n[s],o=i&&l[i])){if(o.events)for(r in o.events)c[r]?ot.event.remove(n,r):ot.removeEvent(n,r,o.handle);l[i]&&(delete l[i],u?delete n[s]:typeof n.removeAttribute!==Ct?n.removeAttribute(s):n[s]=null,J.push(i))}}}),ot.fn.extend({text:function(e){return jt(this,function(e){return void 0===e?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||mt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ot.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ot.cleanData(g(n)),n.parentNode&&(t&&ot.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ot.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ot.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ot.clone(this,e,t)})},html:function(e){return jt(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Bt,""):void 0;if(!("string"!=typeof e||Xt.test(e)||!rt.htmlSerialize&&Pt.test(e)||!rt.leadingWhitespace&&Rt.test(e)||Qt[($t.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Wt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(ot.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ot.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var n,r,i,o,a,s,l=0,u=this.length,c=this,d=u-1,f=e[0],p=ot.isFunction(f);if(p||u>1&&"string"==typeof f&&!rt.checkClone&&Ut.test(f))return this.each(function(n){var r=c.eq(n);p&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(u&&(s=ot.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=ot.map(g(s,"script"),b),i=o.length;u>l;l++)r=s,l!==d&&(r=ot.clone(r,!0,!0),i&&ot.merge(o,g(r,"script"))),t.call(this[l],r,l);if(i)for(a=o[o.length-1].ownerDocument,ot.map(o,x),l=0;i>l;l++)r=o[l],Vt.test(r.type||"")&&!ot._data(r,"globalEval")&&ot.contains(a,r)&&(r.src?ot._evalUrl&&ot._evalUrl(r.src):ot.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Yt,"")));s=n=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ot.fn[e]=function(e){for(var n,r=0,i=[],o=ot(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),ot(o[r])[t](n),G.apply(i,n.get());return this.pushStack(i)}});var Zt,en={};!function(){var e,t,n=mt.createElement("div"),r="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",rt.opacity=/^0.5/.test(e.style.opacity),rt.cssFloat=!!e.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===n.style.backgroundClip,e=n=null,rt.shrinkWrapBlocks=function(){var e,n,i,o;if(null==t){if(e=mt.getElementsByTagName("body")[0],!e)return;o="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=mt.createElement("div"),i=mt.createElement("div"),e.appendChild(n).appendChild(i),t=!1,typeof i.style.zoom!==Ct&&(i.style.cssText=r+";width:1px;padding:1px;zoom:1",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t=3!==i.offsetWidth),e.removeChild(n),e=n=i=null}return t}}();var tn=/^margin/,nn=new RegExp("^("+St+")(?!px)[a-z%]+$","i"),rn,on,an=/^(top|right|bottom|left)$/;e.getComputedStyle?(rn=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},on=function(e,t,n){var r,i,o,a,s=e.style;return n=n||rn(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||ot.contains(e.ownerDocument,e)||(a=ot.style(e,t)),nn.test(a)&&tn.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""
}):mt.documentElement.currentStyle&&(rn=function(e){return e.currentStyle},on=function(e,t,n){var r,i,o,a,s=e.style;return n=n||rn(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),nn.test(a)&&!an.test(t)&&(r=s.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,r=mt.getElementsByTagName("body")[0];r&&(t=mt.createElement("div"),n=mt.createElement("div"),t.style.cssText=u,r.appendChild(t).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",ot.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){i=4===n.offsetWidth}),o=!0,a=!1,s=!0,e.getComputedStyle&&(a="1%"!==(e.getComputedStyle(n,null)||{}).top,o="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width),r.removeChild(t),n=r=null)}var n,r,i,o,a,s,l=mt.createElement("div"),u="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=l.getElementsByTagName("a")[0],n.style.cssText="float:left;opacity:.5",rt.opacity=/^0.5/.test(n.style.opacity),rt.cssFloat=!!n.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===l.style.backgroundClip,n=l=null,ot.extend(rt,{reliableHiddenOffsets:function(){if(null!=r)return r;var e,t,n,i=mt.createElement("div"),o=mt.getElementsByTagName("body")[0];if(o)return i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=mt.createElement("div"),e.style.cssText=u,o.appendChild(e).appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=i.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",r=n&&0===t[0].offsetHeight,o.removeChild(e),i=o=null,r},boxSizing:function(){return null==i&&t(),i},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==a&&t(),a},reliableMarginRight:function(){var t,n,r,i;if(null==s&&e.getComputedStyle){if(t=mt.getElementsByTagName("body")[0],!t)return;n=mt.createElement("div"),r=mt.createElement("div"),n.style.cssText=u,t.appendChild(n).appendChild(r),i=r.appendChild(mt.createElement("div")),i.style.cssText=r.style.cssText=c,i.style.marginRight=i.style.width="0",r.style.width="1px",s=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(n)}return s}})}(),ot.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var sn=/alpha\([^)]*\)/i,ln=/opacity\s*=\s*([^)]*)/,un=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+St+")(.*)$","i"),dn=new RegExp("^([+-])=("+St+")","i"),fn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:0,fontWeight:400},hn=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=on(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":rt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ot.camelCase(t),l=e.style;if(t=ot.cssProps[s]||(ot.cssProps[s]=S(l,s)),a=ot.cssHooks[t]||ot.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];if(o=typeof n,"string"===o&&(i=dn.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ot.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||ot.cssNumber[s]||(n+="px"),rt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]="",l[t]=n}catch(u){}}},css:function(e,t,n,r){var i,o,a,s=ot.camelCase(t);return t=ot.cssProps[s]||(ot.cssProps[s]=S(e.style,s)),a=ot.cssHooks[t]||ot.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=on(e,t,r)),"normal"===o&&t in pn&&(o=pn[t]),""===n||n?(i=parseFloat(o),n===!0||ot.isNumeric(i)?i||0:o):o}}),ot.each(["height","width"],function(e,t){ot.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&un.test(ot.css(e,"display"))?ot.swap(e,fn,function(){return L(e,t,r)}):L(e,t,r):void 0},set:function(e,n,r){var i=r&&rn(e);return D(e,n,r?j(e,t,r,rt.boxSizing()&&"border-box"===ot.css(e,"boxSizing",!1,i),i):0)}}}),rt.opacity||(ot.cssHooks.opacity={get:function(e,t){return ln.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ot.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ot.trim(o.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=sn.test(o)?o.replace(sn,i):o+" "+i)}}),ot.cssHooks.marginRight=k(rt.reliableMarginRight,function(e,t){return t?ot.swap(e,{display:"inline-block"},on,[e,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(e,t){ot.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+At[r]+t]=o[r]||o[r-2]||o[0];return i}},tn.test(e)||(ot.cssHooks[e+t].set=D)}),ot.fn.extend({css:function(e,t){return jt(this,function(e,t,n){var r,i,o={},a=0;if(ot.isArray(t)){for(r=rn(e),i=t.length;i>a;a++)o[t[a]]=ot.css(e,t[a],!1,r);return o}return void 0!==n?ot.style(e,t,n):ot.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Dt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ot.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.pos=t=this.options.duration?ot.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ot.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ot.fx.step[e.prop]?ot.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ot.cssProps[e.prop]]||ot.cssHooks[e.prop])?ot.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ot.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ot.fx=H.prototype.init,ot.fx.step={};var mn,gn,vn=/^(?:toggle|show|hide)$/,yn=new RegExp("^(?:([+-])=|)("+St+")([a-z%]*)$","i"),bn=/queueHooks$/,xn=[F],wn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=yn.exec(t),o=i&&i[3]||(ot.cssNumber[e]?"":"px"),a=(ot.cssNumber[e]||"px"!==o&&+r)&&yn.exec(ot.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,ot.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};ot.Animation=ot.extend(B,{tweener:function(e,t){ot.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],wn[n]=wn[n]||[],wn[n].unshift(t)},prefilter:function(e,t){t?xn.unshift(e):xn.push(e)}}),ot.speed=function(e,t,n){var r=e&&"object"==typeof e?ot.extend({},e):{complete:n||!n&&t||ot.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ot.isFunction(t)&&t};return r.duration=ot.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ot.fx.speeds?ot.fx.speeds[r.duration]:ot.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ot.isFunction(r.old)&&r.old.call(this),r.queue&&ot.dequeue(this,r.queue)},r},ot.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ot.isEmptyObject(e),o=ot.speed(t,n,r),a=function(){var t=B(this,ot.extend({},e),o);(i||ot._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ot.timers,a=ot._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&bn.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&ot.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ot._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ot.timers,a=r?r.length:0;for(n.finish=!0,ot.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ot.each(["toggle","show","hide"],function(e,t){var n=ot.fn[t];ot.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(_(t,!0),e,r,i)}}),ot.each({slideDown:_("show"),slideUp:_("hide"),slideToggle:_("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ot.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ot.timers=[],ot.fx.tick=function(){var e,t=ot.timers,n=0;for(mn=ot.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ot.fx.stop(),mn=void 0},ot.fx.timer=function(e){ot.timers.push(e),e()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){gn||(gn=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(gn),gn=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,t){return e=ot.fx?ot.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i=mt.createElement("div");i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=i.getElementsByTagName("a")[0],n=mt.createElement("select"),r=n.appendChild(mt.createElement("option")),t=i.getElementsByTagName("input")[0],e.style.cssText="top:1px",rt.getSetAttribute="t"!==i.className,rt.style=/top/.test(e.getAttribute("style")),rt.hrefNormalized="/a"===e.getAttribute("href"),rt.checkOn=!!t.value,rt.optSelected=r.selected,rt.enctype=!!mt.createElement("form").enctype,n.disabled=!0,rt.optDisabled=!r.disabled,t=mt.createElement("input"),t.setAttribute("value",""),rt.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),rt.radioValue="t"===t.value,e=t=n=r=i=null}();var Tn=/\r/g;ot.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ot.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ot(this).val()):e,null==i?i="":"number"==typeof i?i+="":ot.isArray(i)&&(i=ot.map(i,function(e){return null==e?"":e+""})),t=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=ot.valHooks[i.type]||ot.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Tn,""):null==n?"":n)}}}),ot.extend({valHooks:{option:{get:function(e){var t=ot.find.attr(e,"value");return null!=t?t:ot.text(e)}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(rt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ot.nodeName(n.parentNode,"optgroup"))){if(t=ot(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ot.makeArray(t),a=i.length;a--;)if(r=i[a],ot.inArray(ot.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(s){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(e,t){return ot.isArray(t)?e.checked=ot.inArray(ot(e).val(),t)>=0:void 0}},rt.checkOn||(ot.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Cn,Nn,En=ot.expr.attrHandle,kn=/^(?:checked|selected)$/i,Sn=rt.getSetAttribute,An=rt.input;ot.fn.extend({attr:function(e,t){return jt(this,ot.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ot.removeAttr(this,e)})}}),ot.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Ct?ot.prop(e,t,n):(1===o&&ot.isXMLDoc(e)||(t=t.toLowerCase(),r=ot.attrHooks[t]||(ot.expr.match.bool.test(t)?Nn:Cn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ot.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void ot.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(xt);if(o&&1===e.nodeType)for(;n=o[i++];)r=ot.propFix[n]||n,ot.expr.match.bool.test(n)?An&&Sn||!kn.test(n)?e[r]=!1:e[ot.camelCase("default-"+n)]=e[r]=!1:ot.attr(e,n,""),e.removeAttribute(Sn?n:r)},attrHooks:{type:{set:function(e,t){if(!rt.radioValue&&"radio"===t&&ot.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Nn={set:function(e,t,n){return t===!1?ot.removeAttr(e,n):An&&Sn||!kn.test(n)?e.setAttribute(!Sn&&ot.propFix[n]||n,n):e[ot.camelCase("default-"+n)]=e[n]=!0,n}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(e,t){var n=En[t]||ot.find.attr;En[t]=An&&Sn||!kn.test(t)?function(e,t,r){var i,o;return r||(o=En[t],En[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,En[t]=o),i}:function(e,t,n){return n?void 0:e[ot.camelCase("default-"+t)]?t.toLowerCase():null}}),An&&Sn||(ot.attrHooks.value={set:function(e,t,n){return ot.nodeName(e,"input")?void(e.defaultValue=t):Cn&&Cn.set(e,t,n)}}),Sn||(Cn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},En.id=En.name=En.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ot.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Cn.set},ot.attrHooks.contenteditable={set:function(e,t,n){Cn.set(e,""===t?!1:t,n)}},ot.each(["width","height"],function(e,t){ot.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),rt.style||(ot.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Dn=/^(?:input|select|textarea|button|object)$/i,jn=/^(?:a|area)$/i;ot.fn.extend({prop:function(e,t){return jt(this,ot.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ot.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!ot.isXMLDoc(e),o&&(t=ot.propFix[t]||t,i=ot.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ot.find.attr(e,"tabindex");return t?parseInt(t,10):Dn.test(e.nodeName)||jn.test(e.nodeName)&&e.href?0:-1}}}}),rt.hrefNormalized||ot.each(["href","src"],function(e,t){ot.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),rt.optSelected||(ot.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),rt.enctype||(ot.propFix.enctype="encoding");var Ln=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,u="string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(xt)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ln," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=ot.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(xt)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ln," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?ot.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ot.isFunction(e)?function(n){ot(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=ot(this),o=e.match(xt)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Ct||"boolean"===n)&&(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ot._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ln," ").indexOf(t)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ot.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ot.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Hn=ot.now(),qn=/\?/,_n=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=ot.trim(t+"");return i&&!ot.trim(i.replace(_n,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+i)():ot.error("Invalid JSON: "+t)},ot.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+t),n};var Mn,Fn,On=/#.*$/,Bn=/([?&])_=[^&]*/,Pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wn=/^(?:GET|HEAD)$/,$n=/^\/\//,zn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,In={},Xn={},Un="*/".concat("*");try{Fn=location.href}catch(Vn){Fn=mt.createElement("a"),Fn.href="",Fn=Fn.href}Mn=zn.exec(Fn.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fn,type:"GET",isLocal:Rn.test(Mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,ot.ajaxSettings),t):W(ot.ajaxSettings,e)},ajaxPrefilter:P(In),ajaxTransport:P(Xn),ajax:function(e,t){function n(e,t,n,r){var i,c,v,y,x,T=t;2!==b&&(b=2,s&&clearTimeout(s),u=void 0,a=r||"",w.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=$(d,w,n)),y=z(d,y,w,i),i?(d.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(ot.lastModified[o]=x),x=w.getResponseHeader("etag"),x&&(ot.etag[o]=x)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,i=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",i?h.resolveWith(f,[c,T,w]):h.rejectWith(f,[w,T,v]),w.statusCode(g),g=void 0,l&&p.trigger(i?"ajaxSuccess":"ajaxError",[w,d,i?c:v]),m.fireWith(f,[w,T]),l&&(p.trigger("ajaxComplete",[w,d]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,u,c,d=ot.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?ot(f):ot.event,h=ot.Deferred(),m=ot.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Pn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return u&&u.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Fn)+"").replace(On,"").replace($n,Mn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ot.trim(d.dataType||"*").toLowerCase().match(xt)||[""],null==d.crossDomain&&(r=zn.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===Mn[1]&&r[2]===Mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Mn[3]||("http:"===Mn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ot.param(d.data,d.traditional)),R(In,d,t,w),2===b)return w;l=d.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Wn.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(qn.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Bn.test(o)?o.replace(Bn,"$1_="+Hn++):o+(qn.test(o)?"&":"?")+"_="+Hn++)),d.ifModified&&(ot.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&w.setRequestHeader("If-None-Match",ot.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Un+"; q=0.01":""):d.accepts["*"]);for(i in d.headers)w.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===b))return w.abort();x="abort";for(i in{success:1,error:1,complete:1})w[i](d[i]);if(u=R(Xn,d,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,u.send(v,n)}catch(T){if(!(2>b))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return ot.get(e,t,n,"json")},getScript:function(e,t){return ot.get(e,void 0,t,"script")}}),ot.each(["get","post"],function(e,t){ot[t]=function(e,n,r,i){return ot.isFunction(n)&&(i=i||r,r=n,n=void 0),ot.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ot.fn[t]=function(e){return this.on(t,e)}}),ot._evalUrl=function(e){return ot.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(e){if(ot.isFunction(e))return this.each(function(t){ot(this).wrapAll(e.call(this,t))});if(this[0]){var t=ot(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ot.isFunction(e)?function(t){ot(this).wrapInner(e.call(this,t))}:function(){var t=ot(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ot.isFunction(e);return this.each(function(n){ot(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!rt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ot.css(e,"display"))},ot.expr.filters.visible=function(e){return!ot.expr.filters.hidden(e)};var Jn=/%20/g,Yn=/\[\]$/,Qn=/\r?\n/g,Gn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;ot.param=function(e,t){var n,r=[],i=function(e,t){t=ot.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(e)||e.jquery&&!ot.isPlainObject(e))ot.each(e,function(){i(this.name,this.value)});else for(n in e)I(n,e[n],t,i);return r.join("&").replace(Jn,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ot.prop(this,"elements");return e?ot.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ot(this).is(":disabled")&&Kn.test(this.nodeName)&&!Gn.test(e)&&(this.checked||!Lt.test(e))}).map(function(e,t){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(e){return{name:t.name,value:e.replace(Qn,"\r\n")}}):{name:t.name,value:n.replace(Qn,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&X()||U()}:X;var Zn=0,er={},tr=ot.ajaxSettings.xhr();e.ActiveXObject&&ot(e).on("unload",function(){for(var e in er)er[e](void 0,!0)}),rt.cors=!!tr&&"withCredentials"in tr,tr=rt.ajax=!!tr,tr&&ot.ajaxTransport(function(e){if(!e.crossDomain||rt.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++Zn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,l,u;if(t&&(i||4===o.readyState))if(delete er[a],t=void 0,o.onreadystatechange=ot.noop,i)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(c){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&r(s,l,u,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=er[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ot.globalEval(e),e}}}),ot.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ot.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=mt.head||ot("head")[0]||mt.documentElement;return{send:function(r,i){t=mt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var nr=[],rr=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=nr.pop()||ot.expando+"_"+Hn++;return this[e]=!0,e}}),ot.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(rr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&rr.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=ot.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(rr,"$1"+i):t.jsonp!==!1&&(t.url+=(qn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ot.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,nr.push(i)),a&&ot.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),ot.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||mt;var r=ft.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ot.buildFragment([e],t,i),i&&i.length&&ot(i).remove(),ot.merge([],r.childNodes))};var ir=ot.fn.load;ot.fn.load=function(e,t,n){if("string"!=typeof e&&ir)return ir.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=e.slice(s,e.length),e=e.slice(0,s)),ot.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ot.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?ot("<div>").append(ot.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},ot.expr.filters.animated=function(e){return ot.grep(ot.timers,function(t){return e===t.elem}).length};var or=e.document.documentElement;ot.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u,c=ot.css(e,"position"),d=ot(e),f={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=ot.css(e,"top"),l=ot.css(e,"left"),u=("absolute"===c||"fixed"===c)&&ot.inArray("auto",[o,l])>-1,u?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),ot.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},ot.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ot.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,ot.contains(t,i)?(typeof i.getBoundingClientRect!==Ct&&(r=i.getBoundingClientRect()),n=V(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ot.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ot.nodeName(e[0],"html")||(n=e.offset()),n.top+=ot.css(e[0],"borderTopWidth",!0),n.left+=ot.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ot.css(r,"marginTop",!0),left:t.left-n.left-ot.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||or;e&&!ot.nodeName(e,"html")&&"static"===ot.css(e,"position");)e=e.offsetParent;return e||or})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ot.fn[e]=function(r){return jt(this,function(e,r,i){var o=V(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[r]:e[r]:void(o?o.scrollTo(n?ot(o).scrollLeft():i,n?i:ot(o).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),ot.each(["top","left"],function(e,t){ot.cssHooks[t]=k(rt.pixelPosition,function(e,n){return n?(n=on(e,t),nn.test(n)?ot(e).position()[t]+"px":n):void 0
})}),ot.each({Height:"height",Width:"width"},function(e,t){ot.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ot.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return jt(this,function(t,n,r){var i;return ot.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ot.css(t,n,a):ot.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var ar=e.jQuery,sr=e.$;return ot.noConflict=function(t){return e.$===ot&&(e.$=sr),t&&e.jQuery===ot&&(e.jQuery=ar),ot},typeof t===Ct&&(e.jQuery=e.$=ot),ot})}).call(this),function(){t=n=window.jQuery.noConflict()}.call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={$:t,jQuery:n}}();

!function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,f,u=gap,i,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(a)){for(f=a.length,n=0;f>n;n+=1)i[n]=str(n,a)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+u+"]":"["+i.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(f=rep.length,n=0;f>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,a),o&&i.push(quote(r)+(gap?": ":":")+o));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o=str(r,a),o&&i.push(quote(r)+(gap?": ":":")+o));return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+u+"}":"{"+i.join(",")+"}",gap=u,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,i=Package.jquery.jQuery,n=Package.json.JSON,s=Package.underscore._;(function(){(function(){var t=this,e=t.Backbone,i=Array.prototype.slice,r=Array.prototype.splice,a;a="undefined"!=typeof exports?exports:t.Backbone={},a.VERSION="0.9.2";var o=t.jQuery||t.Zepto||t.ender;a.setDomLibrary=function(t){o=t},a.noConflict=function(){return t.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1;var h=/\s+/,c=a.Events={on:function(t,e,i){var n,s,r,a,o;if(!e)return this;for(t=t.split(h),n=this._callbacks||(this._callbacks={});s=t.shift();)o=n[s],r=o?o.tail:{},r.next=a={},r.context=i,r.callback=e,n[s]={tail:a,next:o?o.next:r};return this},off:function(t,e,i){var n,r,a,o,c,u;if(r=this._callbacks){if(!(t||e||i))return delete this._callbacks,this;for(t=t?t.split(h):s.keys(r);n=t.shift();)if(a=r[n],delete r[n],a&&(e||i))for(o=a.tail;(a=a.next)!==o;)c=a.callback,u=a.context,(e&&c!==e||i&&u!==i)&&this.on(n,c,u);return this}},trigger:function(t){var e,n,s,r,a,o,c;if(!(s=this._callbacks))return this;for(o=s.all,t=t.split(h),c=i.call(arguments,1);e=t.shift();){if(n=s[e])for(r=n.tail;(n=n.next)!==r;)n.callback.apply(n.context||this,c);if(n=o)for(r=n.tail,a=[e].concat(c);(n=n.next)!==r;)n.callback.apply(n.context||this,a)}return this}};c.bind=c.on,c.unbind=c.off;var u=a.Model=function(t,e){var i;t||(t={}),e&&e.parse&&(t=this.parse(t)),(i=P(this,"defaults"))&&(t=s.extend({},i,t)),e&&e.collection&&(this.collection=e.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)};s.extend(u.prototype,c,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return s.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){var e;if(e=this._escapedAttributes[t])return e;var i=this.get(t);return this._escapedAttributes[t]=s.escape(null==i?"":""+i)},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,r,a;if(s.isObject(t)||null==t?(n=t,i=e):(n={},n[t]=e),i||(i={}),!n)return this;if(n instanceof u&&(n=n.attributes),i.unset)for(r in n)n[r]=void 0;if(!this._validate(n,i))return!1;this.idAttribute in n&&(this.id=n[this.idAttribute]);var o=i.changes={},h=this.attributes,c=this._escapedAttributes,l=this._previousAttributes||{};for(r in n)a=n[r],(!s.isEqual(h[r],a)||i.unset&&s.has(h,r))&&(delete c[r],(i.silent?this._silent:o)[r]=!0),i.unset?delete h[r]:h[r]=a,s.isEqual(l[r],a)&&s.has(h,r)==s.has(l,r)?(delete this.changed[r],delete this._pending[r]):(this.changed[r]=a,i.silent||(this._pending[r]=!0));return i.silent||this.change(i),this},unset:function(t,e){return(e||(e={})).unset=!0,this.set(t,null,e)},clear:function(t){return(t||(t={})).unset=!0,this.set(s.clone(this.attributes),t)},fetch:function(t){t=t?s.clone(t):{};var e=this,i=t.success;return t.success=function(n,s,r){return e.set(e.parse(n,r),t)?void(i&&i(e,n)):!1},t.error=a.wrapError(t.error,e,t),(this.sync||a.sync).call(this,"read",this,t)},save:function(t,e,i){var n,r;if(s.isObject(t)||null==t?(n=t,i=e):(n={},n[t]=e),i=i?s.clone(i):{},i.wait){if(!this._validate(n,i))return!1;r=s.clone(this.attributes)}var o=s.extend({},i,{silent:!0});if(n&&!this.set(n,i.wait?o:i))return!1;var h=this,c=i.success;i.success=function(t,e,r){var a=h.parse(t,r);return i.wait&&(delete i.wait,a=s.extend(n||{},a)),h.set(a,i)?void(c?c(h,t):h.trigger("sync",h,t,i)):!1},i.error=a.wrapError(i.error,h,i);var u=this.isNew()?"create":"update",l=(this.sync||a.sync).call(this,u,this,i);return i.wait&&this.set(r,o),l},destroy:function(t){t=t?s.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(this.isNew())return n(),!1;t.success=function(s){t.wait&&n(),i?i(e,s):e.trigger("sync",e,s,t)},t.error=a.wrapError(t.error,e,t);var r=(this.sync||a.sync).call(this,"delete",this,t);return t.wait||n(),r},url:function(){var t=P(this,"urlRoot")||P(this.collection,"url")||C();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(t){t||(t={});var e=this._changing;this._changing=!0;for(var i in this._silent)this._pending[i]=!0;var n=s.extend({},t.changes,this._silent);this._silent={};for(var i in n)this.trigger("change:"+i,this,this.get(i),t);if(e)return this;for(;!s.isEmpty(this._pending);){this._pending={},this.trigger("change",this,t);for(var i in this.changed)this._pending[i]||this._silent[i]||delete this.changed[i];this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(t){return arguments.length?s.has(this.changed,t):!s.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,i=!1,n=this._previousAttributes;for(var r in t)s.isEqual(n[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=s.extend({},this.attributes,t);var i=this.validate(t,e);return i?(e&&e.error?e.error(this,i,e):this.trigger("error",this,i,e),!1):!0}});var l=a.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,{silent:!0,parse:e.parse})};s.extend(l.prototype,c,{model:u,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){var i,n,a,o,h,c,u={},l={},d=[];for(e||(e={}),t=s.isArray(t)?t.slice():[t],i=0,a=t.length;a>i;i++){if(!(o=t[i]=this._prepareModel(t[i],e)))throw new Error("Can't add an invalid model to a collection");h=o.cid,c=o.id,u[h]||this._byCid[h]||null!=c&&(l[c]||this._byId[c])?d.push(i):u[h]=l[c]=o}for(i=d.length;i--;)t.splice(d[i],1);for(i=0,a=t.length;a>i;i++)(o=t[i]).on("all",this._onModelEvent,this),this._byCid[o.cid]=o,null!=o.id&&(this._byId[o.id]=o);if(this.length+=a,n=null!=e.at?e.at:this.models.length,r.apply(this.models,[n,0].concat(t)),this.comparator&&this.sort({silent:!0}),e.silent)return this;for(i=0,a=this.models.length;a>i;i++)u[(o=this.models[i]).cid]&&(e.index=i,o.trigger("add",o,this,e));return this},remove:function(t,e){var i,n,r,a;for(e||(e={}),t=s.isArray(t)?t.slice():[t],i=0,n=t.length;n>i;i++)a=this.getByCid(t[i])||this.get(t[i]),a&&(delete this._byId[a.id],delete this._byCid[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},where:function(t){return s.isEmpty(t)?[]:this.filter(function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},sort:function(t){if(t||(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var e=s.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("reset",this,t),this},pluck:function(t){return s.map(this.models,function(e){return e.get(t)})},reset:function(t,e){t||(t=[]),e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n,s,r){e[t.add?"add":"reset"](e.parse(n,r),t),i&&i(e,n)},t.error=a.wrapError(t.error,e,t),(this.sync||a.sync).call(this,"read",this,t)},create:function(t,e){var i=this;if(e=e?s.clone(e):{},t=this._prepareModel(t,e),!t)return!1;e.wait||i.add(t,e);var n=e.success;return e.success=function(s,r,a){e.wait&&i.add(s,e),n?n(s,r):s.trigger("sync",t,r,e)},t.save(null,e),t},parse:function(t,e){return t},chain:function(){return s(this.models).chain()},_reset:function(t){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(t,e){if(e||(e={}),t instanceof u)t.collection||(t.collection=this);else{var i=t;e.collection=this,t=new this.model(i,e),t._validate(t.attributes,e)||(t=!1)}return t},_removeReference:function(t){this==t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!=t&&"remove"!=t||i==this)&&("destroy"==t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});var d=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(d,function(t){l.prototype[t]=function(){return s[t].apply(s,[this.models].concat(s.toArray(arguments)))}});var f=a.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,g=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(f.prototype,c,{initialize:function(){},route:function(t,e,i){return a.history||(a.history=new m),s.isRegExp(t)||(t=this._routeToRegExp(t)),i||(i=this[e]),a.history.route(t,s.bind(function(n){var s=this._extractParameters(t,n);i&&i.apply(this,s),this.trigger.apply(this,["route:"+e].concat(s)),a.history.trigger("route",this,e,s)},this)),this},navigate:function(t,e){a.history.navigate(t,e)},_bindRoutes:function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var i=0,n=t.length;n>i;i++)this.route(t[i][0],t[i][1],this[t[i][1]])}},_routeToRegExp:function(t){return t=t.replace(v,"\\$&").replace(p,"([^/]+)").replace(g,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var m=a.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},y=/^[#\/]/,_=/msie [\w.]+/;m.started=!1,s.extend(m.prototype,c,{interval:50,getHash:function(t){var e=t?t.location:window.location,i=e.href.match(/#(.*)$/);return i?i[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||e){t=window.location.pathname;var i=window.location.search;i&&(t+=i)}else t=this.getHash();return t.indexOf(this.options.root)||(t=t.substr(this.options.root.length)),t.replace(y,"")},start:function(t){if(m.started)throw new Error("Backbone.history has already been started");if("undefined"==typeof window)throw new Error("Backbone.History is client-only, can't start on the server");m.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),i=document.documentMode,n=_.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);n&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?o(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?o(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=window.location,a=r.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(y,""),window.history.replaceState({},document.title,r.protocol+"//"+r.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){o(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e==this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!m.started)return!1;e&&e!==!0||(e={trigger:e});var i=(t||"").replace(y,"");this.fragment!=i&&(this._hasPushState?(0!=i.indexOf(this.options.root)&&(i=this.options.root+i),this.fragment=i,window.history[e.replace?"replaceState":"pushState"]({},document.title,i)):this._wantsHashChange?(this.fragment=i,this._updateHash(window.location,i,e.replace),this.iframe&&i!=this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,i,e.replace))):window.location.assign(this.options.root+t),e.trigger&&this.loadUrl(t))},_updateHash:function(t,e,i){i?t.replace(t.toString().replace(/(javascript:|#).*$/,"")+"#"+e):t.hash=e}});var w=a.View=function(t){this.cid=s.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName"];s.extend(w.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(t,e,i){var n=document.createElement(t);return e&&o(n).attr(e),i&&o(n).html(i),n},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof o?t:o(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=P(this,"events"))){this.undelegateEvents();for(var e in t){var i=t[e];if(s.isFunction(i)||(i=this[t[e]]),!i)throw new Error('Method "'+t[e]+'" does not exist');var n=e.match(b),r=n[1],a=n[2];i=s.bind(i,this),r+=".delegateEvents"+this.cid,""===a?this.$el.bind(r,i):this.$el.delegate(a,r,i)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=s.extend({},this.options,t));for(var e=0,i=x.length;i>e;e++){var n=x[e];t[n]&&(this[n]=t[n])}this.options=t},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var t=P(this,"attributes")||{};this.id&&(t.id=this.id),this.className&&(t["class"]=this.className),this.setElement(this.make(this.tagName,t),!1)}}});var E=function(t,e){var i=A(this,t,e);return i.extend=this.extend,i};u.extend=l.extend=f.extend=w.extend=E;var k={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};a.sync=function(t,e,i){var r=k[t];i||(i={});var h={type:r,dataType:"json"};return i.url||(h.url=P(e,"url")||C()),i.data||!e||"create"!=t&&"update"!=t||(h.contentType="application/json",h.data=n.stringify(e.toJSON())),a.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),a.emulateHTTP&&("PUT"===r||"DELETE"===r)&&(a.emulateJSON&&(h.data._method=r),h.type="POST",h.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r)}),"GET"===h.type||a.emulateJSON||(h.processData=!1),o.ajax(s.extend(h,i))},a.wrapError=function(t,e,i){return function(n,s){s=n===e?s:n,t?t(e,s,i):e.trigger("error",e,s,i)}};var S=function(){},A=function(t,e,i){var n;return n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)},s.extend(n,t),S.prototype=t.prototype,n.prototype=new S,e&&s.extend(n.prototype,e),i&&s.extend(n,i),n.prototype.constructor=n,n.__super__=t.prototype,n},P=function(t,e){return t&&t[e]?s.isFunction(t[e])?t[e]():t[e]:null},C=function(){throw new Error('A "url" property or function must be specified')}}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package.backbone={}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,t;(function(){if(e.isServer)var n=Npm.require("crypto");var r=function(){function e(){var e=4022871197,n=function(n){n=n.toString();for(var t=0;t<n.length;t++){e+=n.charCodeAt(t);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return n.version="Mash 0.9",n}return function(n){var t=0,r=0,o=0,i=1;0==n.length&&(n=[+new Date]);var a=e();t=a(" "),r=a(" "),o=a(" ");for(var u=0;u<n.length;u++)t-=a(n[u]),0>t&&(t+=1),r-=a(n[u]),0>r&&(r+=1),o-=a(n[u]),0>o&&(o+=1);a=null;var d=function(){var e=2091639*t+2.3283064365386963e-10*i;return t=r,r=o,o=e-(i=0|e)};return d.uint32=function(){return 4294967296*d()},d.fract53=function(){return d()+1.1102230246251565e-16*(2097152*d()|0)},d.version="Alea 0.9",d.args=n,d}(Array.prototype.slice.call(arguments))},o="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_",a=function(e){var n=this;void 0!==e&&(n.alea=r.apply(null,e))};a.prototype.fraction=function(){var e=this;if(e.alea)return e.alea();if(n){var t=parseInt(e.hexString(8),16);return 2.3283064365386963e-10*t}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var r=new Uint32Array(1);return window.crypto.getRandomValues(r),2.3283064365386963e-10*r[0]}throw new Error("No random generator available")},a.prototype.hexString=function(e){var t=this;if(n&&!t.alea){var r=Math.ceil(e/2),o;try{o=n.randomBytes(r)}catch(i){o=n.pseudoRandomBytes(r)}var a=o.toString("hex");return a.substring(0,e)}for(var u=[],d=0;e>d;++d)u.push(t.choice("0123456789abcdef"));return u.join("")},a.prototype._randomString=function(e,n){for(var t=this,r=[],o=0;e>o;o++)r[o]=t.choice(n);return r.join("")},a.prototype.id=function(e){var n=this;return void 0===e&&(e=17),n._randomString(e,o)},a.prototype.secret=function(e){var n=this;return void 0===e&&(e=43),n._randomString(e,i)},a.prototype.choice=function(e){var n=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(n,1):e[n]};var u="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,d="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,c="undefined"!=typeof navigator&&navigator.userAgent||"";t=n||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new a:new a([new Date,u,d,c,Math.random()]),t.createWithSeeds=function(){if(0===arguments.length)throw new Error("No seeds were provided");return new a(arguments)}}).call(this),function(){e.uuid=function(){for(var e="0123456789abcdef",n=[],r=0;36>r;r++)n[r]=t.choice(e);n[14]="4",n[19]=e.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var o=n.join("");return o}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:t}}();

!function(){var e=Package.meteor.Meteor,t=Package.random.Random;(function(){var o="_localstorage_test_"+t.id(),a;try{window.localStorage&&(window.localStorage.setItem(o,o),a=window.localStorage.getItem(o),window.localStorage.removeItem(o))}catch(n){}o===a&&(e._localStorage={getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,t){window.localStorage.setItem(e,t)},removeItem:function(e){window.localStorage.removeItem(e)}}),e._localStorage||(e._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),e._localStorage={_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){var t=this._data[e];return void 0===t?null:t}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.localstorage={}}();

!function(){var t=Package.meteor.Meteor,n,e;(function(){n={},n.active=!1,n.currentComputation=null;var e=function(t){n.currentComputation=t,n.active=!!t},o=function(){return"undefined"!=typeof t?t._debug:"undefined"!=typeof console&&console.log?function(){console.log.apply(console,arguments)}:function(){}},r=function(t,n){if(p)throw n;var e;if(n.stack&&n.message){var r=n.stack.indexOf(n.message);e=r>=0&&10>=r?n.stack:n.message+("\n"===n.stack.charAt(0)?"":"\n")+n.stack}else e=n.stack||n.message;o()("Exception from Tracker "+t+" function:",e)},a=function(n){return"undefined"==typeof t||t.isClient?n:function(){var e=arguments;t._noYieldsAllowed(function(){n.apply(null,e)})}},i=1,u=[],c=!1,s=!1,f=!1,p=!1,d=[],l=function(){c||(setTimeout(n.flush,0),c=!0)},v=!1;n.Computation=function(t,n){if(!v)throw new Error("Tracker.Computation constructor is private; use Tracker.autorun");v=!1;var e=this;e.stopped=!1,e.invalidated=!1,e.firstRun=!0,e._id=i++,e._onInvalidateCallbacks=[],e._parent=n,e._func=t,e._recomputing=!1;var o=!0;try{e._compute(),o=!1}finally{e.firstRun=!1,o&&e.stop()}},n.Computation.prototype.onInvalidate=function(t){var e=this;if("function"!=typeof t)throw new Error("onInvalidate requires a function");e.invalidated?n.nonreactive(function(){a(t)(e)}):e._onInvalidateCallbacks.push(t)},n.Computation.prototype.invalidate=function(){var t=this;if(!t.invalidated){t._recomputing||t.stopped||(l(),u.push(this)),t.invalidated=!0;for(var e=0,o;o=t._onInvalidateCallbacks[e];e++)n.nonreactive(function(){a(o)(t)});t._onInvalidateCallbacks=[]}},n.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate())},n.Computation.prototype._compute=function(){var t=this;t.invalidated=!1;var o=n.currentComputation;e(t);var r=f;f=!0;try{a(t._func)(t)}finally{e(o),f=!1}},n.Computation.prototype._recompute=function(){var t=this;t._recomputing=!0;try{for(;t.invalidated&&!t.stopped;)try{t._compute()}catch(n){r("recompute",n)}}finally{t._recomputing=!1}},n.Dependency=function(){this._dependentsById={}},n.Dependency.prototype.depend=function(t){if(!t){if(!n.active)return!1;t=n.currentComputation}var e=this,o=t._id;return o in e._dependentsById?!1:(e._dependentsById[o]=t,t.onInvalidate(function(){delete e._dependentsById[o]}),!0)},n.Dependency.prototype.changed=function(){var t=this;for(var n in t._dependentsById)t._dependentsById[n].invalidate()},n.Dependency.prototype.hasDependents=function(){var t=this;for(var n in t._dependentsById)return!0;return!1},n.flush=function(t){if(s)throw new Error("Can't call Tracker.flush while flushing");if(f)throw new Error("Can't flush inside Tracker.autorun");s=!0,c=!0,p=!(!t||!t._throwFirstError);var e=!1;try{for(;u.length||d.length;){for(;u.length;){var o=u.shift();o._recompute()}if(d.length){var a=d.shift();try{a()}catch(i){r("afterFlush",i)}}}e=!0}finally{e||(s=!1,n.flush({_throwFirstError:!1})),c=!1,s=!1}},n.autorun=function(t){if("function"!=typeof t)throw new Error("Tracker.autorun requires a function argument");v=!0;var e=new n.Computation(t,n.currentComputation);return n.active&&n.onInvalidate(function(){e.stop()}),e},n.nonreactive=function(t){var o=n.currentComputation;e(null);try{return t()}finally{e(o)}},n.onInvalidate=function(t){if(!n.active)throw new Error("Tracker.onInvalidate requires a currentComputation");n.currentComputation.onInvalidate(t)},n.afterFlush=function(t){d.push(t),l()}}).call(this),function(){t.flush=n.flush,t.autorun=n.autorun,t.autosubscribe=n.autorun,n.depend=function(t){return t.depend()},e=n}.call(this),"undefined"==typeof Package&&(Package={}),Package.tracker={Tracker:n,Deps:e}}();

!function(){var n=Package.meteor.Meteor,r;(function(){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={},a=0;a<n.length;a++)e[n.charAt(a)]=a;r={},r.encode=function(n){if("string"==typeof n){var e=n;n=r.newBinary(e.length);for(var a=0;a<e.length;a++){var l=e.charCodeAt(a);if(l>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");n[a]=l}}for(var u=[],i=null,o=null,c=null,s=null,a=0;a<n.length;a++)switch(a%3){case 0:i=n[a]>>2&63,o=(3&n[a])<<4;break;case 1:o|=n[a]>>4&15,c=(15&n[a])<<2;break;case 2:c|=n[a]>>6&3,s=63&n[a],u.push(t(i)),u.push(t(o)),u.push(t(c)),u.push(t(s)),i=null,o=null,c=null,s=null}return null!=i&&(u.push(t(i)),u.push(t(o)),u.push(null==c?"=":t(c)),null==s&&u.push("=")),u.join("")};var t=function(r){return n.charAt(r)},l=function(n){return"="===n?-1:e[n]};r.newBinary=function(n){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var r=[],e=0;n>e;e++)r.push(0);return r.$Uint8ArrayPolyfill=!0,r}return new Uint8Array(new ArrayBuffer(n))},r.decode=function(n){var e=Math.floor(3*n.length/4);"="==n.charAt(n.length-1)&&(e--,"="==n.charAt(n.length-2)&&e--);for(var a=r.newBinary(e),t=null,u=null,i=null,o=0,c=0;c<n.length;c++){var s=n.charAt(c),f=l(s);switch(c%4){case 0:if(0>f)throw new Error("invalid base64 string");t=f<<2;break;case 1:if(0>f)throw new Error("invalid base64 string");t|=f>>4,a[o++]=t,u=(15&f)<<4;break;case 2:f>=0&&(u|=f>>2,a[o++]=u,i=(3&f)<<6);break;case 3:f>=0&&(a[o++]=i|f)}}return a}}).call(this),"undefined"==typeof Package&&(Package={}),Package.base64={Base64:r}}();

!function(){var n=Package.meteor.Meteor,e=Package.json.JSON,t=Package.underscore._,r=Package.base64.Base64,u,a;(function(){u={},a={};var i={};u.addType=function(n,e){if(t.has(i,n))throw new Error("Type "+n+" already present");i[n]=e};var o=function(n){return t.isNaN(n)||1/0===n||n===-1/0},f=[{matchJSONValue:function(n){return t.has(n,"$date")&&1===t.size(n)},matchObject:function(n){return n instanceof Date},toJSONValue:function(n){return{$date:n.getTime()}},fromJSONValue:function(n){return new Date(n.$date)}},{matchJSONValue:function(n){return t.has(n,"$InfNaN")&&1===t.size(n)},matchObject:o,toJSONValue:function(n){var e;return e=t.isNaN(n)?0:1/0===n?1:-1,{$InfNaN:e}},fromJSONValue:function(n){return n.$InfNaN/0}},{matchJSONValue:function(n){return t.has(n,"$binary")&&1===t.size(n)},matchObject:function(n){return"undefined"!=typeof Uint8Array&&n instanceof Uint8Array||n&&t.has(n,"$Uint8ArrayPolyfill")},toJSONValue:function(n){return{$binary:r.encode(n)}},fromJSONValue:function(n){return r.decode(n.$binary)}},{matchJSONValue:function(n){return t.has(n,"$escape")&&1===t.size(n)},matchObject:function(n){return t.isEmpty(n)||t.size(n)>2?!1:t.any(f,function(e){return e.matchJSONValue(n)})},toJSONValue:function(n){var e={};return t.each(n,function(n,t){e[t]=u.toJSONValue(n)}),{$escape:e}},fromJSONValue:function(n){var e={};return t.each(n.$escape,function(n,t){e[t]=u.fromJSONValue(n)}),e}},{matchJSONValue:function(n){return t.has(n,"$type")&&t.has(n,"$value")&&2===t.size(n)},matchObject:function(n){return u._isCustomType(n)},toJSONValue:function(e){var t=n._noYieldsAllowed(function(){return e.toJSONValue()});return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var r=e.$type;if(!t.has(i,r))throw new Error("Custom EJSON type "+r+" is not defined");var u=i[r];return n._noYieldsAllowed(function(){return u(e.$value)})}}];u._isCustomType=function(n){return n&&"function"==typeof n.toJSONValue&&"function"==typeof n.typeName&&t.has(i,n.typeName())};var c=u._adjustTypesToJSONValue=function(n){if(null===n)return null;var e=l(n);return void 0!==e?e:"object"!=typeof n?n:(t.each(n,function(e,t){if("object"==typeof e||void 0===e||o(e)){var r=l(e);return r?void(n[t]=r):void c(e)}}),n)},l=function(n){for(var e=0;e<f.length;e++){var t=f[e];if(t.matchObject(n))return t.toJSONValue(n)}return void 0};u.toJSONValue=function(n){var e=l(n);return void 0!==e?e:("object"==typeof n&&(n=u.clone(n),c(n)),n)};var s=u._adjustTypesFromJSONValue=function(n){if(null===n)return null;var e=y(n);return e!==n?e:"object"!=typeof n?n:(t.each(n,function(e,t){if("object"==typeof e){var r=y(e);if(e!==r)return void(n[t]=r);s(e)}}),n)},y=function(n){if("object"==typeof n&&null!==n&&t.size(n)<=2&&t.all(n,function(n,e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var e=0;e<f.length;e++){var r=f[e];if(r.matchJSONValue(n))return r.fromJSONValue(n)}return n};u.fromJSONValue=function(n){var e=y(n);return e===n&&"object"==typeof n?(n=u.clone(n),s(n),n):e},u.stringify=function(n,t){var r=u.toJSONValue(n);return t&&(t.canonical||t.indent)?u._canonicalStringify(r,t):e.stringify(r)},u.parse=function(n){if("string"!=typeof n)throw new Error("EJSON.parse argument should be a string");return u.fromJSONValue(e.parse(n))},u.isBinary=function(n){return!!("undefined"!=typeof Uint8Array&&n instanceof Uint8Array||n&&n.$Uint8ArrayPolyfill)},u.equals=function(n,e,r){var a,i=!(!r||!r.keyOrderSensitive);if(n===e)return!0;if(t.isNaN(n)&&t.isNaN(e))return!0;if(!n||!e)return!1;if("object"!=typeof n||"object"!=typeof e)return!1;if(n instanceof Date&&e instanceof Date)return n.valueOf()===e.valueOf();if(u.isBinary(n)&&u.isBinary(e)){if(n.length!==e.length)return!1;for(a=0;a<n.length;a++)if(n[a]!==e[a])return!1;return!0}if("function"==typeof n.equals)return n.equals(e,r);if("function"==typeof e.equals)return e.equals(n,r);if(n instanceof Array){if(!(e instanceof Array))return!1;if(n.length!==e.length)return!1;for(a=0;a<n.length;a++)if(!u.equals(n[a],e[a],r))return!1;return!0}switch(u._isCustomType(n)+u._isCustomType(e)){case 1:return!1;case 2:return u.equals(u.toJSONValue(n),u.toJSONValue(e))}var o;if(i){var f=[];return t.each(e,function(n,e){f.push(e)}),a=0,o=t.all(n,function(n,t){return a>=f.length?!1:t!==f[a]?!1:u.equals(n,e[f[a]],r)?(a++,!0):!1}),o&&a===f.length}return a=0,o=t.all(n,function(n,i){return t.has(e,i)&&u.equals(n,e[i],r)?(a++,!0):!1}),o&&t.size(e)===a},u.clone=function(n){var e;if("object"!=typeof n)return n;if(null===n)return null;if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return n;if(u.isBinary(n)){e=u.newBinary(n.length);for(var r=0;r<n.length;r++)e[r]=n[r];return e}if(t.isArray(n)||t.isArguments(n)){for(e=[],r=0;r<n.length;r++)e[r]=u.clone(n[r]);return e}return"function"==typeof n.clone?n.clone():u._isCustomType(n)?u.fromJSONValue(u.clone(u.toJSONValue(n)),!0):(e={},t.each(n,function(n,t){e[t]=u.clone(n)}),e)},u.newBinary=r.newBinary}).call(this),function(){function n(n){return e.stringify(n)}var r=function(e,u,a,i,o){var f,c,l,s,y=i,h,N=u[e];switch(typeof N){case"string":return n(N);case"number":return isFinite(N)?String(N):"null";case"boolean":return String(N);case"object":if(!N)return"null";if(y=i+a,h=[],t.isArray(N)||t.isArguments(N)){for(s=N.length,f=0;s>f;f+=1)h[f]=r(f,N,a,y,o)||"null";return l=0===h.length?"[]":y?"[\n"+y+h.join(",\n"+y)+"\n"+i+"]":"["+h.join(",")+"]"}var p=t.keys(N);return o&&(p=p.sort()),t.each(p,function(e){l=r(e,N,a,y,o),l&&h.push(n(e)+(y?": ":":")+l)}),l=0===h.length?"{}":y?"{\n"+y+h.join(",\n"+y)+"\n"+i+"}":"{"+h.join(",")+"}"}};u._canonicalStringify=function(n,e){if(e=t.extend({indent:"",canonical:!1},e),e.indent===!0)e.indent="  ";else if("number"==typeof e.indent){for(var u="",a=0;a<e.indent;a++)u+=" ";e.indent=u}return r("",{"":n},e.indent,"",e.canonical)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:u,EJSONTest:a}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,r=Package.ejson.EJSON,n,i;(function(){var o=new e.EnvironmentVariable;n=function(e,t){var r=o.getOrNullIfOutsideFiber();r&&r.checking(e);try{l(e,t)}catch(n){throw n instanceof i.Error&&n.path&&(n.message+=" in field "+n.path),n}},i={Optional:function(e){return new a(e)},OneOf:function(){return new c(t.toArray(arguments))},Any:["__any__"],Where:function(e){return new f(e)},ObjectIncluding:function(e){return new s(e)},ObjectWithValues:function(e){return new h(e)},Integer:["__integer__"],Error:e.makeErrorType("Match.Error",function(t){this.message="Match error: "+t,this.path="",this.sanitizedError=new e.Error(400,"Match failed")}),test:function(e,t){try{return l(e,t),!0}catch(r){if(r instanceof i.Error)return!1;throw r}},_failIfArgumentsAreNotAllChecked:function(e,t,r,n){var i=new p(r,n),a=o.withValue(i,function(){return e.apply(t,r)});return i.throwUnlessAllArgumentsHaveBeenChecked(),a}};var a=function(e){this.pattern=e},c=function(e){if(t.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},f=function(e){this.condition=e},s=function(e){this.pattern=e},h=function(e){this.pattern=e},u=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],l=function(e,n){if(n!==i.Any){for(var o=0;o<u.length;++o)if(n===u[o][0]){if(typeof e===u[o][1])return;throw new i.Error("Expected "+u[o][1]+", got "+typeof e)}if(null===n){if(null===e)return;throw new i.Error("Expected null, got "+r.stringify(e))}if("string"==typeof n||"number"==typeof n){if(e===n)return;throw new i.Error("Expected "+n+", got "+r.stringify(e))}if(n===i.Integer){if("number"==typeof e&&(0|e)===e)return;throw new i.Error("Expected Integer, got "+(e instanceof Object?r.stringify(e):e))}if(n===Object&&(n=i.ObjectIncluding({})),n instanceof Array){if(1!==n.length)throw Error("Bad pattern: arrays must have one type element"+r.stringify(n));if(!t.isArray(e)&&!t.isArguments(e))throw new i.Error("Expected array, got "+r.stringify(e));return void t.each(e,function(e,t){try{l(e,n[0])}catch(r){throw r instanceof i.Error&&(r.path=w(t,r.path)),r}})}if(n instanceof f){if(n.condition(e))return;throw new i.Error("Failed Match.Where validation")}if(n instanceof a&&(n=i.OneOf(void 0,n.pattern)),n instanceof c){for(var o=0;o<n.choices.length;++o)try{return void l(e,n.choices[o])}catch(p){if(!(p instanceof i.Error))throw p}throw new i.Error("Failed Match.OneOf or Match.Optional validation")}if(n instanceof Function){if(e instanceof n)return;throw new i.Error("Expected "+n.name)}var g=!1,d;if(n instanceof s&&(g=!0,n=n.pattern),n instanceof h&&(g=!0,d=[n.pattern],n={}),"object"!=typeof n)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof e)throw new i.Error("Expected object, got "+typeof e);if(null===e)throw new i.Error("Expected object, got null");if(e.constructor!==Object)throw new i.Error("Expected plain object");var y={},E={};t.each(n,function(e,t){e instanceof a?E[t]=e.pattern:y[t]=e}),t.each(e,function(e,r){try{if(t.has(y,r))l(e,y[r]),delete y[r];else if(t.has(E,r))l(e,E[r]);else{if(!g)throw new i.Error("Unknown key");d&&l(e,d[0])}}catch(n){throw n instanceof i.Error&&(n.path=w(r,n.path)),n}}),t.each(y,function(e,t){throw new i.Error("Missing key '"+t+"'")})}},p=function(e,r){var n=this;n.args=t.clone(e),n.args.reverse(),n.description=r};t.extend(p.prototype,{checking:function(e){var r=this;r._checkingOneValue(e)||(t.isArray(e)||t.isArguments(e))&&t.each(e,t.bind(r._checkingOneValue,r))},_checkingOneValue:function(e){for(var t=this,r=0;r<t.args.length;++r)if(e===t.args[r])return t.args.splice(r,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!t.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var g=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],w=function(e,r){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":(!e.match(/^[a-z_$][0-9a-z_$]*$/i)||t.contains(g,e))&&(e=JSON.stringify([e])),r&&"["!==r[0]?e+"."+r:e+r}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:n,Match:i}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,r=Package.ejson.EJSON,n;(function(){n=function(){return n.info.apply(this,arguments)};var i=0,o=[],a=0;n._intercept=function(e){i+=e},n._suppress=function(e){a+=e},n._intercepted=function(){var e=o;return o=[],i=0,e},n.outputFormat="json";var s={debug:"green",warn:"magenta",error:"red"},l="blue",c=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],u=c.concat(["app","message"]),g=function(t){var r=n.format(t),i=t.level;"undefined"!=typeof console&&console[i]?console[i](r):e._debug(r)};n._getCallerDetails=function(){var e=function(){var e=new Error,t=e.stack;return t},t=e();if(!t)return{};for(var r=t.split("\n"),n,i=1;i<r.length;++i){if(n=r[i],n.match(/^\s*at eval \(eval/))return{file:"eval"};if(!n.match(/packages\/(?:local-test:)?logging(?:\/|\.js)/))break}var o={},a=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return a?(o.line=a[2].split(":")[0],o.file=a[1].split("/").slice(-1)[0].split("?")[0],o):o},t.each(["debug","info","warn","error"],function(s){n[s]=function(l){if(a)return void a--;var u=!1;i&&(i--,u=!0);var f=!t.isObject(l)||t.isRegExp(l)||t.isDate(l)?{message:new String(l).toString()}:l;if(t.each(c,function(e){if(f[e])throw new Error("Can't set '"+e+"' in log message")}),t.has(f,"message")&&!t.isString(f.message))throw new Error("The 'message' field in log objects must be a string");if(f.omitCallerDetails||(f=t.extend(n._getCallerDetails(),f)),f.time=new Date,f.level=s,"debug"!==s)if(u)o.push(r.stringify(f));else if(e.isServer)if("colored-text"===n.outputFormat)console.log(n.format(f,{color:!0}));else{if("json"!==n.outputFormat)throw new Error("Unknown logging output format: "+n.outputFormat);console.log(r.stringify(f))}else g(f)}}),n.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=r.parse(e)}catch(n){}return t&&t.time&&t.time instanceof Date?t:null},n.format=function(n,i){n=r.clone(n),i=i||{};var o=n.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var a=n.timeInexact,c=n.level||"info",g=n.file,f=n.line,m=n.app||"",p=n.originApp,v=n.message||"",h=n.program||"",d=n.satellite,w=n.stderr||"";t.each(u,function(e){delete n[e]}),t.isEmpty(n)||(v&&(v+=" "),v+=r.stringify(n));var b=function(e){return 10>e?"0"+e:e.toString()},D=function(e){return 100>e?"0"+b(e):e.toString()},j=o.getFullYear().toString()+b(o.getMonth()+1)+b(o.getDate()),S=b(o.getHours())+":"+b(o.getMinutes())+":"+b(o.getSeconds())+"."+D(o.getMilliseconds()),k="("+-((new Date).getTimezoneOffset()/60)+")",E="";m&&(E+=m),p&&p!==m&&(E+=" via "+p),E&&(E="["+E+"] ");var x=[];h&&x.push(h),g&&x.push(g),f&&x.push(f);var y=t.isEmpty(x)?"":"("+x.join(":")+") ";d&&(y+=["[",d,"]"].join(""));var _=w?"(STDERR) ":"",C=[c.charAt(0).toUpperCase(),j,"-",S,k,a?"? ":" ",E,y,_].join(""),F=function(t,r){return i.color&&e.isServer&&r?Npm.require("cli-color")[r](t):t};return F(C,i.metaColor||l)+F(v,s[c])},n.objFromText=function(e,r){var n={message:e,level:"info",time:new Date,timeInexact:!0};return t.extend(n,r)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:n}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,r=Package.random.Random,i;(function(){i=function(e){var r=this;t.extend(r,t.defaults(t.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),r.retryTimer=null},t.extend(i.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var i=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return i*=r.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(t,r){var i=this,n=i._timeout(t);return i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=e.setTimeout(r,n),n}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.retry={Retry:i}}();

!function(){var a=Package.meteor.Meteor,e=Package.underscore._,t=Package.logging.Log,o=Package.json.JSON,n;(function(){n={};var t="Meteor_Reload",r={},i,l=null;try{l=window.sessionStorage,l?(l.setItem("__dummy__","1"),l.removeItem("__dummy__")):l=null}catch(g){l=null}n._getData=function(){return l&&l.getItem(t)},l&&(i=n._getData(),l.removeItem(t)),i||(i="{}");var c={};try{c=o.parse(i),"object"!=typeof c&&(a._debug("Got bad data on reload. Ignoring."),c={})}catch(d){a._debug("Got invalid JSON on reload. Ignoring.")}c.reload&&"object"==typeof c.data&&(r=c.data);var u=[];n._onMigrate=function(a,e){e||(e=a,a=void 0),u.push({name:a,callback:e})},n._migrationData=function(a){return r[a]};var s=function(a,t){a=a||function(){},t=t||{};for(var o={},n=e.clone(u),r=!0;n.length;){var i=n.shift(),l=i.callback(a,t);l[0]||(r=!1),l.length>1&&i.name&&(o[i.name]=l[1])}return r||t.immediateMigration?o:null};n._migrate=function(e,n){var r=s(e,n);if(null===r)return!1;try{var i=o.stringify({data:r,reload:!0})}catch(g){throw a._debug("Couldn't serialize data for migration",r),g}if(l)try{l.setItem(t,i)}catch(g){a._debug("Couldn't save data for migration to sessionStorage",g)}else a._debug("Browser does not support sessionStorage. Not saving migration state.");return!0},n._withFreshProvidersForTest=function(a){var t=e.clone(u);u=[];try{a()}finally{u=t}};var f=!1;n._reload=function(a){if(a=a||{},!f){f=!0;var t=function(){e.defer(function(){n._migrate(t,a)&&window.location.reload()})};t()}}}).call(this),function(){a._reload={onMigrate:n._onMigrate,migrationData:n._migrationData,reload:n._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:n}}();

!function(){var i=Package.meteor.Meteor,t=Package.underscore._,a=Package.json.JSON,n=Package.ejson.EJSON,e;(function(){e=function(i,t){var n=this;n._map={},n._idStringify=i||a.stringify,n._idParse=t||a.parse},t.extend(e.prototype,{get:function(i){var t=this,a=t._idStringify(i);return t._map[a]},set:function(i,t){var a=this,n=a._idStringify(i);a._map[n]=t},remove:function(i){var t=this,a=t._idStringify(i);delete t._map[a]},has:function(i){var a=this,n=a._idStringify(i);return t.has(a._map,n)},empty:function(){var i=this;return t.isEmpty(i._map)},clear:function(){var i=this;i._map={}},forEach:function(i){for(var a=this,n=t.keys(a._map),e=0;e<n.length;e++){var r=i.call(null,a._map[n[e]],a._idParse(n[e]));if(r===!1)return}},size:function(){var i=this;return t.size(i._map)},setDefault:function(i,a){var n=this,e=n._idStringify(i);return t.has(n._map,e)?n._map[e]:(n._map[e]=a,a)},clone:function(){var i=this,t=new e(i._idStringify,i._idParse);return i.forEach(function(i,a){t.set(a,n.clone(i))}),t}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["id-map"]={IdMap:e}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,r;(function(){var t=function(t,e,r,n){return{key:t,value:e,next:r,prev:n}};r=function(){var t=this;t._dict={},t._first=null,t._last=null,t._size=0;var r=e.toArray(arguments);t._stringify=function(t){return t},"function"==typeof r[0]&&(t._stringify=r.shift()),e.each(r,function(e){t.putBefore(e[0],e[1],null)})},e.extend(r.prototype,{_k:function(t){return" "+this._stringify(t)},empty:function(){var t=this;return!t._first},size:function(){var t=this;return t._size},_linkEltIn:function(t){var e=this;t.next?(t.prev=t.next.prev,t.next.prev=t,t.prev&&(t.prev.next=t)):(t.prev=e._last,e._last&&(e._last.next=t),e._last=t),(null===e._first||e._first===t.next)&&(e._first=t)},_linkEltOut:function(t){var e=this;t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===e._last&&(e._last=t.prev),t===e._first&&(e._first=t.next)},putBefore:function(e,r,n){var i=this;if(i._dict[i._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var o=n?t(e,r,i._dict[i._k(n)]):t(e,r,null);if(void 0===o.next)throw new Error("could not find item to put this one before");i._linkEltIn(o),i._dict[i._k(e)]=o,i._size++},append:function(t,e){var r=this;r.putBefore(t,e,null)},remove:function(t){var e=this,r=e._dict[e._k(t)];if(void 0===r)throw new Error("Item "+t+" not present in OrderedDict");return e._linkEltOut(r),e._size--,delete e._dict[e._k(t)],r.value},get:function(t){var e=this;return e.has(t)?e._dict[e._k(t)].value:void 0},has:function(t){var r=this;return e.has(r._dict,r._k(t))},forEach:function(t){for(var e=this,n=0,i=e._first;null!==i;){var o=t(i.value,i.key,n);if(o===r.BREAK)return;i=i.next,n++}},first:function(){var t=this;return t.empty()?void 0:t._first.key},firstValue:function(){var t=this;return t.empty()?void 0:t._first.value},last:function(){var t=this;return t.empty()?void 0:t._last.key},lastValue:function(){var t=this;return t.empty()?void 0:t._last.value},prev:function(t){var e=this;if(e.has(t)){var r=e._dict[e._k(t)];if(r.prev)return r.prev.key}return null},next:function(t){var e=this;if(e.has(t)){var r=e._dict[e._k(t)];if(r.next)return r.next.key}return null},moveBefore:function(t,e){var r=this,n=r._dict[r._k(t)],i=e?r._dict[r._k(e)]:null;if(void 0===n)throw new Error("Item to move is not present");if(void 0===i)throw new Error("Could not find element to move this one before");i!==n.next&&(r._linkEltOut(n),n.next=i,r._linkEltIn(n))},indexOf:function(t){var e=this,n=null;return e.forEach(function(i,o,u){return e._k(o)===e._k(t)?(n=u,r.BREAK):void 0}),n},_checkRep:function(){var t=this;e.each(t._dict,function(t,e){if(e.next===e)throw new Error("Next is a loop");if(e.prev===e)throw new Error("Prev is a loop")})}}),r.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:r}}();

!function(){var t=Package.meteor.Meteor,n,o;(function(){o={exports:{}}}).call(this),function(){!function(){function t(t){for(var n=[],o=[],a=0;a<t[0].length;a++)n.push(t[0][a][1]),o.push(t[0][a][0]);return n=n.sort(function(t,n){return t-n}),o=o.sort(function(t,n){return t-n}),[[n[0],o[0]],[n[n.length-1],o[o.length-1]]]}function n(t,n,o){for(var a=[[0,0]],r=0;r<o.length;r++){for(var e=0;e<o[r].length;e++)a.push(o[r][e]);a.push([0,0])}for(var i=!1,r=0,e=a.length-1;r<a.length;e=r++)a[r][0]>n!=a[e][0]>n&&t<(a[e][1]-a[r][1])*(n-a[r][0])/(a[e][0]-a[r][0])+a[r][1]&&(i=!i);return i}var a={};"undefined"!=typeof o&&o.exports&&(o.exports=a),a.lineStringsIntersect=function(t,n){for(var o=[],a=0;a<=t.coordinates.length-2;++a)for(var r=0;r<=n.coordinates.length-2;++r){var e={x:t.coordinates[a][1],y:t.coordinates[a][0]},i={x:t.coordinates[a+1][1],y:t.coordinates[a+1][0]},s={x:n.coordinates[r][1],y:n.coordinates[r][0]},c={x:n.coordinates[r+1][1],y:n.coordinates[r+1][0]},u=(c.x-s.x)*(e.y-s.y)-(c.y-s.y)*(e.x-s.x),h=(i.x-e.x)*(e.y-s.y)-(i.y-e.y)*(e.x-s.x),d=(c.y-s.y)*(i.x-e.x)-(c.x-s.x)*(i.y-e.y);if(0!=d){var l=u/d,y=h/d;l>=0&&1>=l&&y>=0&&1>=y&&o.push({type:"Point",coordinates:[e.x+l*(i.x-e.x),e.y+l*(i.y-e.y)]})}}return 0==o.length&&(o=!1),o},a.pointInBoundingBox=function(t,n){return!(t.coordinates[1]<n[0][0]||t.coordinates[1]>n[1][0]||t.coordinates[0]<n[0][1]||t.coordinates[0]>n[1][1])},a.pointInPolygon=function(o,r){for(var e="Polygon"==r.type?[r.coordinates]:r.coordinates,i=!1,s=0;s<e.length;s++)a.pointInBoundingBox(o,t(e[s]))&&(i=!0);if(!i)return!1;for(var c=!1,s=0;s<e.length;s++)n(o.coordinates[1],o.coordinates[0],e[s])&&(c=!0);return c},a.numberToRadius=function(t){return t*Math.PI/180},a.numberToDegree=function(t){return 180*t/Math.PI},a.drawCircle=function(t,n,o){for(var r=[n.coordinates[1],n.coordinates[0]],e=t/1e3/6371,i=[a.numberToRadius(r[0]),a.numberToRadius(r[1])],o=o||15,s=[[r[0],r[1]]],c=0;o>c;c++){var u=2*Math.PI*c/o,h=Math.asin(Math.sin(i[0])*Math.cos(e)+Math.cos(i[0])*Math.sin(e)*Math.cos(u)),d=i[1]+Math.atan2(Math.sin(u)*Math.sin(e)*Math.cos(i[0]),Math.cos(e)-Math.sin(i[0])*Math.sin(h));s[c]=[],s[c][1]=a.numberToDegree(h),s[c][0]=a.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},a.rectangleCentroid=function(t){var n=t.coordinates[0],o=n[0][0],a=n[0][1],r=n[2][0],e=n[2][1],i=r-o,s=e-a;return{type:"Point",coordinates:[o+i/2,a+s/2]}},a.pointDistance=function(t,n){var o=t.coordinates[0],r=t.coordinates[1],e=n.coordinates[0],i=n.coordinates[1],s=a.numberToRadius(i-r),c=a.numberToRadius(e-o),u=Math.pow(Math.sin(s/2),2)+Math.cos(a.numberToRadius(r))*Math.cos(a.numberToRadius(i))*Math.pow(Math.sin(c/2),2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return 6371*h*1e3},a.geometryWithinRadius=function(t,n,o){if("Point"==t.type)return a.pointDistance(t,n)<=o;if("LineString"==t.type||"Polygon"==t.type){var r={},e;e="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var i in e)if(r.coordinates=e[i],a.pointDistance(r,n)>o)return!1}return!0},a.area=function(t){for(var n=0,o=t.coordinates[0],a=o.length-1,r,e,i=0;i<o.length;a=i++){var r={x:o[i][1],y:o[i][0]},e={x:o[a][1],y:o[a][0]};n+=r.x*e.y,n-=r.y*e.x}return n/=2},a.centroid=function(t){for(var n,o=0,r=0,e=t.coordinates[0],i=e.length-1,s,c,u=0;u<e.length;i=u++){var s={x:e[u][1],y:e[u][0]},c={x:e[i][1],y:e[i][0]};n=s.x*c.y-c.x*s.y,o+=(s.x+c.x)*n,r+=(s.y+c.y)*n}return n=6*a.area(t),{type:"Point",coordinates:[r/n,o/n]}},a.simplify=function(t,n){n=n||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var o,a,r,e,i,s,c,u,h,d,l,y,M,f,g,x,p,v,P,b=Math.PI/180*.5,m=new Array,T=new Array,I=new Array;if(t.length<3)return t;for(o=t.length,d=360*n/(2*Math.PI*6378137),d*=d,r=0,T[0]=0,I[0]=o-1,a=1;a>0;)if(e=T[a-1],i=I[a-1],a--,i-e>1){for(l=t[i].lng()-t[e].lng(),y=t[i].lat()-t[e].lat(),Math.abs(l)>180&&(l=360-Math.abs(l)),l*=Math.cos(b*(t[i].lat()+t[e].lat())),M=l*l+y*y,s=e+1,c=e,h=-1;i>s;s++)f=t[s].lng()-t[e].lng(),g=t[s].lat()-t[e].lat(),Math.abs(f)>180&&(f=360-Math.abs(f)),f*=Math.cos(b*(t[s].lat()+t[e].lat())),x=f*f+g*g,p=t[s].lng()-t[i].lng(),v=t[s].lat()-t[i].lat(),Math.abs(p)>180&&(p=360-Math.abs(p)),p*=Math.cos(b*(t[s].lat()+t[i].lat())),P=p*p+v*v,u=x>=M+P?P:P>=M+x?x:(f*y-g*l)*(f*y-g*l)/M,u>h&&(c=s,h=u);d>h?(m[r]=e,r++):(a++,T[a-1]=c,I[a-1]=i,a++,T[a-1]=e,I[a-1]=c)}else m[r]=e,r++;m[r]=o-1,r++;for(var R=new Array,s=0;r>s;s++)R.push(t[m[s]]);return R.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},a.destinationPoint=function(t,n,o){o/=6371,n=a.numberToRadius(n);var r=a.numberToRadius(t.coordinates[0]),e=a.numberToRadius(t.coordinates[1]),i=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(n)),s=e+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(i));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[a.numberToDegree(i),a.numberToDegree(s)]}}}()}.call(this),function(){n=o.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:n}}();

!function(){var e=Package.meteor.Meteor,r=Package.underscore._,t=Package.json.JSON,n=Package.ejson.EJSON,o=Package["id-map"].IdMap,i=Package["ordered-dict"].OrderedDict,a=Package.tracker.Tracker,s=Package.tracker.Deps,c=Package.random.Random,u=Package["geojson-utils"].GeoJSON,d,f,l,h,p,v,_,m,y,g,w,b,$,I,E,O;(function(){d=function(r){var t=this;t.name=r,t._docs=new d._IdMap,t._observeQueue=new e._SynchronousQueue,t.next_qid=1,t.queries={},t._savedOriginals=null,t.paused=!1},f={},l={},d._applyChanges=function(e,t){r.each(t,function(r,t){void 0===r?delete e[t]:e[t]=r})},h=function(e){var r=new Error(e);return r.name="MinimongoError",r},d.prototype.find=function(e,r){return 0===arguments.length&&(e={}),new d.Cursor(this,e,r)},d.Cursor=function(e,r,t){var n=this;t||(t={}),n.collection=e,n.sorter=null,d._selectorIsId(r)?(n._selectorId=r,n.matcher=new f.Matcher(r,n)):(n._selectorId=void 0,n.matcher=new f.Matcher(r,n),(n.matcher.hasGeoQuery()||t.sort)&&(n.sorter=new f.Sorter(t.sort||[],{matcher:n.matcher}))),n.skip=t.skip,n.limit=t.limit,n.fields=t.fields,n.fields&&(n.projectionFn=d._compileProjection(n.fields)),n._transform=d.wrapTransform(t.transform),"undefined"!=typeof a&&(n.reactive=void 0===t.reactive?!0:t.reactive)},d.Cursor.prototype.rewind=function(){},d.prototype.findOne=function(e,r){return 0===arguments.length&&(e={}),r=r||{},r.limit=1,this.find(e,r).fetch()[0]},d.Cursor.prototype.forEach=function(e,t){var o=this,i=o._getRawObjects({ordered:!0});o.reactive&&o._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0}),r.each(i,function(r,i){r=o.projectionFn?o.projectionFn(r):n.clone(r),o._transform&&(r=o._transform(r)),e.call(t,r,i,o)})},d.Cursor.prototype.getTransform=function(){return this._transform},d.Cursor.prototype.map=function(e,r){var t=this,n=[];return t.forEach(function(o,i){n.push(e.call(r,o,i,t))}),n},d.Cursor.prototype.fetch=function(){var e=this,r=[];return e.forEach(function(e){r.push(e)}),r},d.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0},!0),e._getRawObjects({ordered:!0}).length},d.Cursor.prototype._publishCursor=function(e){var r=this;if(!r.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var t=r.collection.name;return Mongo.Collection._publishCursor(r,e,t)},d.Cursor.prototype._getCollectionName=function(){var e=this;return e.collection.name},d._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},d._observeCallbacksAreOrdered=function(e){if(e.addedAt&&e.added)throw new Error("Please specify only one of added() and addedAt()");if(e.changedAt&&e.changed)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.movedTo||e.changedAt||e.removedAt)},d.ObserveHandle=function(){},r.extend(d.Cursor.prototype,{observe:function(e){var r=this;return d._observeFromObserveChanges(r,e)},observeChanges:function(e){var t=this,o=d._observeChangesCallbacksAreOrdered(e);if(!e._allow_unordered&&!o&&(t.skip||t.limit))throw new Error("must use ordered observe (ie, 'addedBefore' instead of 'added') with skip or limit");if(t.fields&&(0===t.fields._id||t.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var i={matcher:t.matcher,sorter:o&&t.sorter,distances:t.matcher.hasGeoQuery()&&o&&new d._IdMap,resultsSnapshot:null,ordered:o,cursor:t,projectionFn:t.projectionFn},s;t.reactive&&(s=t.collection.next_qid++,t.collection.queries[s]=i),i.results=t._getRawObjects({ordered:o,distances:i.distances}),t.collection.paused&&(i.resultsSnapshot=o?[]:new d._IdMap);var c=function(e,n,o){return e?function(){var i=this,a=arguments;t.collection.paused||void 0!==n&&t.projectionFn&&(a[n]=t.projectionFn(a[n]),o&&r.isEmpty(a[n]))||t.collection._observeQueue.queueTask(function(){e.apply(i,a)})}:function(){}};if(i.added=c(e.added,1),i.changed=c(e.changed,1,!0),i.removed=c(e.removed),o&&(i.addedBefore=c(e.addedBefore,1),i.movedBefore=c(e.movedBefore)),!e._suppress_initial&&!t.collection.paused){var u=o?r.bind(r.each,null,i.results):r.bind(i.results.forEach,i.results);u(function(e){var r=n.clone(e);delete r._id,o&&i.addedBefore(e._id,r,null),i.added(e._id,r)})}var f=new d.ObserveHandle;return r.extend(f,{collection:t.collection,stop:function(){t.reactive&&delete t.collection.queries[s]}}),t.reactive&&a.active&&a.onInvalidate(function(){f.stop()}),t.collection._observeQueue.drain(),f}}),d.Cursor.prototype._getRawObjects=function(e){var r=this;e=e||{};var t=e.ordered?[]:new d._IdMap;if(void 0!==r._selectorId){if(r.skip)return t;var n=r.collection._docs.get(r._selectorId);return n&&(e.ordered?t.push(n):t.set(r._selectorId,n)),t}var o;if(r.matcher.hasGeoQuery()&&e.ordered&&(e.distances?(o=e.distances,o.clear()):o=new d._IdMap),r.collection._docs.forEach(function(n,i){var a=r.matcher.documentMatches(n);return a.result&&(e.ordered?(t.push(n),o&&void 0!==a.distance&&o.set(i,a.distance)):t.set(i,n)),!r.limit||r.skip||r.sorter||t.length!==r.limit?!0:!1}),!e.ordered)return t;if(r.sorter){var i=r.sorter.getComparator({distances:o});t.sort(i)}var a=r.skip||0,s=r.limit?r.limit+a:t.length;return t.slice(a,s)},d.Cursor.prototype._depend=function(e,t){var n=this;if(a.active){var o=new a.Dependency;o.depend();var i=r.bind(o.changed,o),s={_suppress_initial:!0,_allow_unordered:t};r.each(["added","changed","removed","addedBefore","movedBefore"],function(r){e[r]&&(s[r]=i)}),n.observeChanges(s)}},d.prototype.insert=function(t,o){var i=this;t=n.clone(t),r.has(t,"_id")||(t._id=d._useOID?new d._ObjectID:c.id());var a=t._id;if(i._docs.has(a))throw h("Duplicate _id '"+a+"'");i._saveOriginal(a,void 0),i._docs.set(a,t);var s=[];for(var u in i.queries){var f=i.queries[u],l=f.matcher.documentMatches(t);l.result&&(f.distances&&void 0!==l.distance&&f.distances.set(a,l.distance),f.cursor.skip||f.cursor.limit?s.push(u):d._insertInResults(f,t))}return r.each(s,function(e){i.queries[e]&&d._recomputeResults(i.queries[e])}),i._observeQueue.drain(),o&&e.defer(function(){o(null,a)}),a},d.prototype._eachPossiblyMatchingDoc=function(e,r){var t=this,n=d._idsMatchedBySelector(e);if(n)for(var o=0;o<n.length;++o){var i=n[o],a=t._docs.get(i);if(a){var s=r(a,i);if(s===!1)break}}else t._docs.forEach(r)},d.prototype.remove=function(t,o){var i=this;if(i.paused&&!i._savedOriginals&&n.equals(t,{})){var a=i._docs.size();return i._docs.clear(),r.each(i.queries,function(e){e.ordered?e.results=[]:e.results.clear()}),o&&e.defer(function(){o(null,a)}),a}var s=new f.Matcher(t,i),c=[];i._eachPossiblyMatchingDoc(t,function(e,r){s.documentMatches(e).result&&c.push(r)});for(var u=[],l=[],h=0;h<c.length;h++){var p=c[h],v=i._docs.get(p);r.each(i.queries,function(e,r){e.matcher.documentMatches(v).result&&(e.cursor.skip||e.cursor.limit?u.push(r):l.push({qid:r,doc:v}))}),i._saveOriginal(p,v),i._docs.remove(p)}return r.each(l,function(e){var r=i.queries[e.qid];r&&(r.distances&&r.distances.remove(e.doc._id),d._removeFromResults(r,e.doc))}),r.each(u,function(e){var r=i.queries[e];r&&d._recomputeResults(r)}),i._observeQueue.drain(),a=c.length,o&&e.defer(function(){o(null,a)}),a},d.prototype.update=function(t,o,i,a){var s=this;!a&&i instanceof Function&&(a=i,i=null),i||(i={});var c=new f.Matcher(t,s),u={};r.each(s.queries,function(e,r){!e.cursor.skip&&!e.cursor.limit||e.paused||(u[r]=n.clone(e.results))});var l={},h=0;s._eachPossiblyMatchingDoc(t,function(e,r){var t=c.documentMatches(e);return t.result&&(s._saveOriginal(r,e),s._modifyAndNotify(e,o,l,t.arrayIndices),++h,!i.multi)?!1:!0}),r.each(l,function(e,r){var t=s.queries[r];t&&d._recomputeResults(t,u[r])}),s._observeQueue.drain();var p;if(0===h&&i.upsert){var v=d._removeDollarOperators(t);d._modify(v,o,{isInsert:!0}),!v._id&&i.insertedId&&(v._id=i.insertedId),p=s.insert(v),h=1}var _;return i._returnObject?(_={numberAffected:h},void 0!==p&&(_.insertedId=p)):_=h,a&&e.defer(function(){a(null,_)}),_},d.prototype.upsert=function(e,t,n,o){var i=this;return o||"function"!=typeof n||(o=n,n={}),i.update(e,t,r.extend({},n,{upsert:!0,_returnObject:!0}),o)},d.prototype._modifyAndNotify=function(e,r,t,o){var i=this,a={};for(var s in i.queries){var c=i.queries[s];a[s]=c.ordered?c.matcher.documentMatches(e).result:c.results.has(e._id)}var u=n.clone(e);d._modify(e,r,{arrayIndices:o});for(s in i.queries){c=i.queries[s];var f=a[s],l=c.matcher.documentMatches(e),h=l.result;h&&c.distances&&void 0!==l.distance&&c.distances.set(e._id,l.distance),c.cursor.skip||c.cursor.limit?(f||h)&&(t[s]=!0):f&&!h?d._removeFromResults(c,e):!f&&h?d._insertInResults(c,e):f&&h&&d._updateInResults(c,e,u)}},d._insertInResults=function(e,r){var t=n.clone(r);if(delete t._id,e.ordered){if(e.sorter){var o=d._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,r),i=e.results[o+1];i=i?i._id:null,e.addedBefore(r._id,t,i)}else e.addedBefore(r._id,t,null),e.results.push(r);e.added(r._id,t)}else e.added(r._id,t),e.results.set(r._id,r)},d._removeFromResults=function(e,r){if(e.ordered){var t=d._findInOrderedResults(e,r);e.removed(r._id),e.results.splice(t,1)}else{var n=r._id;e.removed(r._id),e.results.remove(n)}},d._updateInResults=function(e,t,o){if(!n.equals(t._id,o._id))throw new Error("Can't change a doc's _id while updating");var i=d._makeChangedFields(t,o);if(!e.ordered)return void(r.isEmpty(i)||(e.changed(t._id,i),e.results.set(t._id,t)));var a=d._findInOrderedResults(e,t);if(r.isEmpty(i)||e.changed(t._id,i),e.sorter){e.results.splice(a,1);var s=d._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,t);if(a!==s){var c=e.results[s+1];c=c?c._id:null,e.movedBefore&&e.movedBefore(t._id,c)}}},d._recomputeResults=function(e,r){r||(r=e.results),e.distances&&e.distances.clear(),e.results=e.cursor._getRawObjects({ordered:e.ordered,distances:e.distances}),e.paused||d._diffQueryChanges(e.ordered,r,e.results,e)},d._findInOrderedResults=function(e,r){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var t=0;t<e.results.length;t++)if(e.results[t]===r)return t;throw Error("object missing from query")},d._binarySearch=function(e,r,t){for(var n=0,o=r.length;o>0;){var i=Math.floor(o/2);e(t,r[n+i])>=0?(n+=i+1,o-=i+1):o=i}return n},d._insertInSortedList=function(e,r,t){if(0===r.length)return r.push(t),0;var n=d._binarySearch(e,r,t);return r.splice(n,0,t),n},d.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals=new d._IdMap},d.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var r=e._savedOriginals;return e._savedOriginals=null,r},d.prototype._saveOriginal=function(e,r){var t=this;t._savedOriginals&&(t._savedOriginals.has(e)||t._savedOriginals.set(e,n.clone(r)))},d.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var r=this.queries[e];r.resultsSnapshot=n.clone(r.results)}}},d.prototype.resumeObservers=function(){var e=this;if(this.paused){this.paused=!1;for(var r in this.queries){var t=e.queries[r];d._diffQueryChanges(t.ordered,t.resultsSnapshot,t.results,t),t.resultsSnapshot=null}e._observeQueue.drain()}},d._idStringify=function(e){if(e instanceof d._ObjectID)return e.valueOf();if("string"==typeof e)return""===e?e:"-"===e.substr(0,1)||"~"===e.substr(0,1)||d._looksLikeObjectID(e)||"{"===e.substr(0,1)?"-"+e:e;if(void 0===e)return"-";if("object"==typeof e&&null!==e)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+t.stringify(e)},d._idParse=function(e){return""===e?e:"-"===e?void 0:"-"===e.substr(0,1)?e.substr(1):"~"===e.substr(0,1)?t.parse(e.substr(1)):d._looksLikeObjectID(e)?new d._ObjectID(e):e},d._makeChangedFields=function(e,r){var t={};return d._diffObjects(r,e,{leftOnly:function(e,r){t[e]=void 0},rightOnly:function(e,r){t[e]=r},both:function(e,r,o){n.equals(r,o)||(t[e]=o)}}),t}}).call(this),function(){d.wrapTransform=function(e){return e?function(t){if(!r.has(t,"_id"))throw new Error("can only transform documents with _id");var o=t._id,i=a.nonreactive(function(){return e(t)});if(!v(i))throw new Error("transform must return object");if(r.has(i,"_id")){if(!n.equals(i._id,o))throw new Error("transformed document can't have different _id")}else i._id=o;return i}:null}}.call(this),function(){p=function(e){return r.isArray(e)&&!n.isBinary(e)},v=d._isPlainObject=function(e){return e&&3===d._f._type(e)},_=function(e){return p(e)||v(e)},m=function(e,n){if(!v(e))return!1;var o=void 0;return r.each(e,function(r,i){var a="$"===i.substr(0,1);if(void 0===o)o=a;else if(o!==a){if(!n)throw new Error("Inconsistent operator: "+t.stringify(e));o=!1}}),!!o},y=function(e){return/^[0-9]+$/.test(e)}}.call(this),function(){f.Matcher=function(e){var r=this;r._paths={},r._hasGeoQuery=!1,r._hasWhere=!1,r._isSimple=!0,r._matchingDocument=void 0,r._selector=null,r._docMatcher=r._compileSelector(e)},r.extend(f.Matcher.prototype,{documentMatches:function(e){if(!e||"object"!=typeof e)throw Error("documentMatches needs a document");return this._docMatcher(e)},hasGeoQuery:function(){return this._hasGeoQuery},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(r){var t=this;if(r instanceof Function)return t._isSimple=!1,t._selector=r,t._recordPathUsed(""),function(e){return{result:!!r.call(e)}};if(d._selectorIsId(r))return t._selector={_id:r},t._recordPathUsed("_id"),function(e){return{result:n.equals(e._id,r)}};if(!r||"_id"in r&&!r._id)return t._isSimple=!1,k;if("boolean"==typeof r||p(r)||n.isBinary(r))throw new Error("Invalid selector: "+r);return t._selector=n.clone(r),e(r,t,{isRoot:!0})},_recordPathUsed:function(e){this._paths[e]=!0},_getPaths:function(){return r.keys(this._paths)}});var e=function(e,n,o){o=o||{};var i=[];return r.each(e,function(e,a){if("$"===a.substr(0,1)){if(!r.has(s,a))throw new Error("Unrecognized logical operator: "+a);n._isSimple=!1,i.push(s[a](e,n,o.inElemMatch))}else{o.inElemMatch||n._recordPathUsed(a);var c=$(a),u=t(e,n,o.isRoot);i.push(function(e){var r=c(e);return u(r)})}}),A(i)},t=function(e,r,t){return e instanceof RegExp?(r._isSimple=!1,o(g(e))):m(e)?i(e,r,t):o(w(e))},o=function(e,t){return t=t||{},function(n){var o=n;t.dontExpandLeafArrays||(o=I(n,t.dontIncludeLeafArrays));var i={};return i.result=r.any(o,function(r){var t=e(r.value);return"number"==typeof t&&(r.arrayIndices||(r.arrayIndices=[t]),t=!0),t&&r.arrayIndices&&(i.arrayIndices=r.arrayIndices),t}),i}};g=function(e){return function(t){return t instanceof RegExp?r.isEqual(t,e):"string"!=typeof t?!1:(e.lastIndex=0,e.test(t))}},w=function(e){if(m(e))throw Error("Can't create equalityValueSelector for operator object");return null==e?function(e){return null==e}:function(r){return d._f._equal(e,r)}};var i=function(e,t,n){var i=[];return r.each(e,function(a,s){var c=r.contains(["$lt","$lte","$gt","$gte"],s)&&r.isNumber(a),u="$ne"===s&&!r.isObject(a),d=r.contains(["$in","$nin"],s)&&r.isArray(a)&&!r.any(a,r.isObject);if("$eq"===s||c||d||u||(t._isSimple=!1),r.has(h,s))i.push(h[s](a,e,t,n));else{if(!r.has(b,s))throw new Error("Unrecognized operator: "+s);var f=b[s];i.push(o(f.compileElementSelector(a,e,t),f))}}),M(i)},a=function(t,n,o){if(!p(t)||r.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");return r.map(t,function(r){if(!v(r))throw Error("$or/$and/$nor entries need to be full objects");return e(r,n,{inElemMatch:o})})},s={$and:function(e,r,t){var n=a(e,r,t);return A(n)},$or:function(e,t,n){var o=a(e,t,n);return 1===o.length?o[0]:function(e){var t=r.any(o,function(r){return r(e).result});return{result:t}}},$nor:function(e,t,n){var o=a(e,t,n);return function(e){var t=r.all(o,function(r){return!r(e).result});return{result:t}}},$where:function(e,r){return r._recordPathUsed(""),r._hasWhere=!0,e instanceof Function||(e=Function("obj","return "+e)),function(r){return{result:e.call(r,r)}}},$comment:function(){return function(){return{result:!0}}}},c=function(e){return function(r){var t=e(r);return{result:!t.result}}},h={$not:function(e,r,n){return c(t(e,n))},$ne:function(e){return c(o(w(e)))},$nin:function(e){return c(o(b.$in.compileElementSelector(e)))},$exists:function(e){var r=o(function(e){return void 0!==e});return e?r:c(r)},$options:function(e,t){if(!r.has(t,"$regex"))throw Error("$options needs a $regex");return j},$maxDistance:function(e,r){if(!r.$near)throw Error("$maxDistance needs a $near");return j},$all:function(e,n,o){if(!p(e))throw Error("$all requires array");if(r.isEmpty(e))return k;var i=[];return r.each(e,function(e){if(m(e))throw Error("no $ expressions in $all");i.push(t(e,o))}),M(i)},$near:function(e,t,n,o){if(!o)throw Error("$near can't be inside another $ operator");n._hasGeoQuery=!0;var i,a,s;if(v(e)&&r.has(e,"$geometry"))i=e.$maxDistance,a=e.$geometry,s=function(e){return e&&e.type?"Point"===e.type?u.pointDistance(a,e):u.geometryWithinRadius(e,a,i)?0:i+1:null};else{if(i=t.$maxDistance,!p(e)&&!v(e))throw Error("$near argument must be coordinate pair or GeoJSON");a=O(e),s=function(e){return p(e)||v(e)?E(a,e):null}}return function(e){e=I(e);var t={result:!1};return r.each(e,function(e){var r=s(e.value);null===r||r>i||void 0!==t.distance&&t.distance<=r||(t.result=!0,t.distance=r,e.arrayIndices?t.arrayIndices=e.arrayIndices:delete t.arrayIndices)}),t}}},E=function(e,t){e=O(e),t=O(t);var n=e[0]-t[0],o=e[1]-t[1];return r.isNaN(n)||r.isNaN(o)?null:Math.sqrt(n*n+o*o)},O=function(e){return r.map(e,r.identity)},C=function(e){return{compileElementSelector:function(r){if(p(r))return function(){return!1};void 0===r&&(r=null);var t=d._f._type(r);return function(n){return void 0===n&&(n=null),d._f._type(n)!==t?!1:e(d._f._cmp(n,r))}}}};b={$lt:C(function(e){return 0>e}),$gt:C(function(e){return e>0}),$lte:C(function(e){return 0>=e}),$gte:C(function(e){return e>=0}),$mod:{compileElementSelector:function(e){if(!p(e)||2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw Error("argument to $mod must be an array of two numbers");var r=e[0],t=e[1];return function(e){return"number"==typeof e&&e%r===t}}},$in:{compileElementSelector:function(e){if(!p(e))throw Error("$in needs an array");var t=[];return r.each(e,function(e){if(e instanceof RegExp)t.push(g(e));else{if(m(e))throw Error("cannot nest $ under $in");t.push(w(e))}}),function(e){return void 0===e&&(e=null),r.any(t,function(r){return r(e)})}}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(e){if("string"==typeof e)e=0;else if("number"!=typeof e)throw Error("$size needs a number");return function(r){return p(r)&&r.length===e}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(e){if("number"!=typeof e)throw Error("$type needs a number");return function(r){return void 0!==r&&d._f._type(r)===e}}},$regex:{compileElementSelector:function(e,r){if(!("string"==typeof e||e instanceof RegExp))throw Error("$regex has to be a string or RegExp");var t;if(void 0!==r.$options){if(/[^gim]/.test(r.$options))throw new Error("Only the i, m, and g regexp options are supported");var n=e instanceof RegExp?e.source:e;t=new RegExp(n,r.$options)}else t=e instanceof RegExp?e:new RegExp(e);return g(t)}},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(r,n,o){if(!v(r))throw Error("$elemMatch need an object");var i,a;return m(r,!0)?(i=t(r,o),a=!1):(i=e(r,o,{inElemMatch:!0}),a=!0),function(e){if(!p(e))return!1;for(var r=0;r<e.length;++r){var t=e[r],n;if(a){if(!v(t)&&!p(t))return!1;n=t}else n=[{value:t,dontIterate:!0}];if(i(n).result)return r}return!1}}}},$=function(e,t){t=t||{};var n=e.split("."),o=n.length?n[0]:"",i=y(o),a=n.length>=2&&y(n[1]),s;n.length>1&&(s=$(n.slice(1).join(".")));var c=function(e){return e.dontIterate||delete e.dontIterate,e.arrayIndices&&!e.arrayIndices.length&&delete e.arrayIndices,e};return function(e,n){if(n||(n=[]),p(e)){if(!(i&&o<e.length))return[];n=n.concat(+o,"x")}var u=e[o];if(!s)return[c({value:u,dontIterate:p(e)&&p(u),arrayIndices:n})];if(!_(u))return p(e)?[]:[c({value:void 0,arrayIndices:n})];var d=[],f=function(e){Array.prototype.push.apply(d,e)};return f(s(u,n)),!p(u)||a&&t.forSort||r.each(u,function(e,r){v(e)&&f(s(e,n.concat(r)))}),d}},l.makeLookupFunction=$,I=function(e,t){var n=[];return r.each(e,function(e){var o=p(e.value);t&&o&&!e.dontIterate||n.push({value:e.value,arrayIndices:e.arrayIndices}),o&&!e.dontIterate&&r.each(e.value,function(r,t){n.push({value:r,arrayIndices:(e.arrayIndices||[]).concat(t)})})}),n};var k=function(e){return{result:!1}},j=function(e){return{result:!0}},S=function(e){return 0===e.length?j:1===e.length?e[0]:function(t){var n={};return n.result=r.all(e,function(e){var r=e(t);return r.result&&void 0!==r.distance&&void 0===n.distance&&(n.distance=r.distance),r.result&&r.arrayIndices&&(n.arrayIndices=r.arrayIndices),r.result}),n.result||(delete n.distance,delete n.arrayIndices),n}},A=S,M=S;d._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:p(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:n.isBinary(e)?5:e instanceof d._ObjectID?7:3},_equal:function(e,r){return n.equals(e,r,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,r){if(void 0===e)return void 0===r?0:-1;if(void 0===r)return 1;var t=d._f._type(e),n=d._f._type(r),o=d._f._typeorder(t),i=d._f._typeorder(n);if(o!==i)return i>o?-1:1;if(t!==n)throw Error("Missing type coercion logic in _cmp");if(7===t&&(t=n=2,e=e.toHexString(),r=r.toHexString()),9===t&&(t=n=1,e=e.getTime(),r=r.getTime()),1===t)return e-r;if(2===n)return r>e?-1:e===r?0:1;if(3===t){var a=function(e){var r=[];for(var t in e)r.push(t),r.push(e[t]);return r};return d._f._cmp(a(e),a(r))}if(4===t)for(var s=0;;s++){if(s===e.length)return s===r.length?0:-1;if(s===r.length)return 1;var c=d._f._cmp(e[s],r[s]);if(0!==c)return c}if(5===t){if(e.length!==r.length)return e.length-r.length;for(s=0;s<e.length;s++){if(e[s]<r[s])return-1;if(e[s]>r[s])return 1}return 0}if(8===t)return e?r?0:1:r?-1:0;if(10===t)return 0;if(11===t)throw Error("Sorting not supported on regular expression");if(13===t)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},d._removeDollarOperators=function(e){var r={};for(var t in e)"$"!==t.substr(0,1)&&(r[t]=e[t]);return r}}.call(this),function(){f.Sorter=function(n,o){var i=this;o=o||{},i._sortSpecParts=[];var a=function(e,r){if(!e)throw Error("sort keys must be non-empty");if("$"===e.charAt(0))throw Error("unsupported sort key: "+e);i._sortSpecParts.push({path:e,lookup:$(e,{forSort:!0}),ascending:r})};if(n instanceof Array)for(var s=0;s<n.length;s++)"string"==typeof n[s]?a(n[s],!0):a(n[s][0],"desc"!==n[s][1]);else{if("object"!=typeof n)throw Error("Bad sort specification: "+t.stringify(n));r.each(n,function(e,r){a(r,e>=0)})}if(i.affectedByModifier){var c={};r.each(i._sortSpecParts,function(e){c[e.path]=1}),i._selectorForAffectedByModifier=new f.Matcher(c)}i._keyComparator=e(r.map(i._sortSpecParts,function(e,r){return i._keyFieldComparator(r)})),i._keyFilter=null,o.matcher&&i._useWithMatcher(o.matcher)},r.extend(f.Sorter.prototype,{getComparator:function(r){var t=this;if(!r||!r.distances)return t._getBaseComparator();var n=r.distances;return e([t._getBaseComparator(),function(e,r){if(!n.has(e._id))throw Error("Missing distance for "+e._id);if(!n.has(r._id))throw Error("Missing distance for "+r._id);return n.get(e._id)-n.get(r._id)}])},_getPaths:function(){var e=this;return r.pluck(e._sortSpecParts,"path")},_getMinKeyFromDoc:function(e){var r=this,t=null;if(r._generateKeysFromDoc(e,function(e){return r._keyCompatibleWithSelector(e)?null===t?void(t=e):void(r._compareKeys(e,t)<0&&(t=e)):void 0}),null===t)throw Error("sort selector found no keys in doc?");return t},_keyCompatibleWithSelector:function(e){var r=this;return!r._keyFilter||r._keyFilter(e)},_generateKeysFromDoc:function(e,t){var n=this;if(0===n._sortSpecParts.length)throw new Error("can't generate keys without a spec");var o=[],i=function(e){return e.join(",")+","},a=null;if(r.each(n._sortSpecParts,function(t,n){var s=I(t.lookup(e),!0);s.length||(s=[{value:null}]);var c=!1;if(o[n]={},r.each(s,function(e){if(!e.arrayIndices){if(s.length>1)throw Error("multiple branches but no array used?");return void(o[n][""]=e.value)}c=!0;var t=i(e.arrayIndices);if(r.has(o[n],t))throw Error("duplicate path: "+t);if(o[n][t]=e.value,a&&!r.has(a,t))throw Error("cannot index parallel arrays")}),a){if(!r.has(o[n],"")&&r.size(a)!==r.size(o[n]))throw Error("cannot index parallel arrays!")}else c&&(a={},r.each(o[n],function(e,r){a[r]=!0}))}),!a){var s=r.map(o,function(e){if(!r.has(e,""))throw Error("no value in sole key case?");return e[""]});return void t(s)}r.each(a,function(e,n){var i=r.map(o,function(e){if(r.has(e,""))return e[""];if(!r.has(e,n))throw Error("missing path?");return e[n]});t(i)})},_compareKeys:function(e,r){var t=this;if(e.length!==t._sortSpecParts.length||r.length!==t._sortSpecParts.length)throw Error("Key has wrong length");return t._keyComparator(e,r)},_keyFieldComparator:function(e){var r=this,t=!r._sortSpecParts[e].ascending;return function(r,n){var o=d._f._cmp(r[e],n[e]);return t&&(o=-o),o}},_getBaseComparator:function(){var e=this;return e._sortSpecParts.length?function(r,t){var n=e._getMinKeyFromDoc(r),o=e._getMinKeyFromDoc(t);return e._compareKeys(n,o)}:function(e,r){return 0}},_useWithMatcher:function(e){var t=this;if(t._keyFilter)throw Error("called _useWithMatcher twice?");if(!r.isEmpty(t._sortSpecParts)){var n=e._selector;if(!(n instanceof Function)){var o={};r.each(t._sortSpecParts,function(e,r){o[e.path]=[]}),r.each(n,function(e,t){var n=o[t];if(n){if(e instanceof RegExp){if(e.ignoreCase||e.multiline)return;return void n.push(g(e))}return m(e)?void r.each(e,function(t,o){r.contains(["$lt","$lte","$gt","$gte"],o)&&n.push(b[o].compileElementSelector(t)),"$regex"!==o||e.$options||n.push(b.$regex.compileElementSelector(t,e))}):void n.push(w(e))}}),r.isEmpty(o[t._sortSpecParts[0].path])||(t._keyFilter=function(e){return r.all(t._sortSpecParts,function(t,n){return r.all(o[t.path],function(r){return r(e[n])})})})}}}});var e=function(e){return function(r,t){for(var n=0;n<e.length;++n){var o=e[n](r,t);if(0!==o)return o}return 0}}}.call(this),function(){d._compileProjection=function(e){d._checkSupportedProjection(e);var t=r.isUndefined(e._id)?!0:e._id,o=E(e),i=function(e,t){if(r.isArray(e))return r.map(e,function(e){return i(e,t)});var a=o.including?{}:n.clone(e);return r.each(t,function(t,s){r.has(e,s)&&(r.isObject(t)?r.isObject(e[s])&&(a[s]=i(e[s],t)):o.including?a[s]=n.clone(e[s]):delete a[s])}),a};return function(e){var n=i(e,o.tree);return t&&r.has(e,"_id")&&(n._id=e._id),!t&&r.has(n,"_id")&&delete n._id,n}},E=function(e){var t=r.keys(e).sort();t.length>0&&(1!==t.length||"_id"!==t[0])&&(t=r.reject(t,function(e){return"_id"===e}));var n=null;r.each(t,function(r){var t=!!e[r];if(null===n&&(n=t),n!==t)throw h("You cannot currently mix including and excluding fields.")});var o=O(t,function(e){return n},function(e,r,t){var n=t,o=r;throw h("both "+n+" and "+o+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:o,including:n}},O=function(e,t,n,o){return o=o||{},r.each(e,function(e){var i=o,a=e.split("."),s=r.all(a.slice(0,-1),function(t,o){if(r.has(i,t)){if(!r.isObject(i[t])&&(i[t]=n(i[t],a.slice(0,o+1).join("."),e),!r.isObject(i[t])))return!1}else i[t]={};return i=i[t],!0});if(s){var c=r.last(a);i[c]=r.has(i,c)?n(i[c],e,e):t(e)}}),o},d._checkSupportedProjection=function(e){if(!r.isObject(e)||r.isArray(e))throw h("fields option must be an object");r.each(e,function(e,t){if(r.contains(t.split("."),"$"))throw h("Minimongo doesn't support $ operator in projections yet.");if(-1===r.indexOf([1,0,!0,!1],e))throw h("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){d._modify=function(t,a,s){if(s=s||{},!v(a))throw h("Modifier must be an object");var c=m(a),u;if(c)u=n.clone(t),r.each(a,function(t,n){var a=i[n];if(s.isInsert&&"$setOnInsert"===n&&(a=i.$set),!a)throw h("Invalid modifier specified "+n);r.each(t,function(t,i){if(i.length&&"."===i[i.length-1])throw h("Invalid mod field name, may not end in a period");if("_id"===i)throw h("Mod on _id not allowed");var c=i.split("."),d=r.has(o,n),f="$rename"===n,l=e(u,c,{noCreate:o[n],forbidArray:"$rename"===n,arrayIndices:s.arrayIndices}),p=c.pop();a(l,p,t,i,u)})});else{if(a._id&&!n.equals(t._id,a._id))throw h("Cannot change the _id of a document");for(var d in a)if(/\./.test(d))throw h("When replacing document, field name may not contain '.'");u=a}r.each(r.keys(t),function(e){("_id"!==e||s.isInsert)&&delete t[e]}),r.each(u,function(e,r){t[r]=e})};var e=function(e,r,n){n=n||{};for(var o=!1,i=0;i<r.length;i++){var a=i===r.length-1,s=r[i],c=_(e);if(!c){if(n.noCreate)return void 0;var u=h("cannot use the part '"+s+"' to traverse "+e);throw u.setPropertyError=!0,u}if(e instanceof Array){if(n.forbidArray)return null;if("$"===s){if(o)throw h("Too many positional (i.e. '$') elements");if(!n.arrayIndices||!n.arrayIndices.length)throw h("The positional operator did not find the match needed from the query");s=n.arrayIndices[0],o=!0}else{if(!y(s)){if(n.noCreate)return void 0;throw h("can't append to array using string field name ["+s+"]")}s=parseInt(s)}if(a&&(r[i]=s),n.noCreate&&s>=e.length)return void 0;for(;e.length<s;)e.push(null);if(!a)if(e.length===s)e.push({});else if("object"!=typeof e[s])throw h("can't modify field '"+r[i+1]+"' of list value "+t.stringify(e[s]))}else{if(s.length&&"$"===s.substr(0,1))throw h("can't set field named "+s);if(!(s in e)){if(n.noCreate)return void 0;a||(e[s]={})}}if(a)return e;e=e[s]}},o={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},i={$inc:function(e,r,t){if("number"!=typeof t)throw h("Modifier $inc allowed for numbers only");if(r in e){if("number"!=typeof e[r])throw h("Cannot apply $inc modifier to non-number");e[r]+=t}else e[r]=t},$set:function(e,t,o){if(!r.isObject(e)){var i=h("Cannot set property on non-object field");throw i.setPropertyError=!0,i}if(null===e){var i=h("Cannot set property on null");throw i.setPropertyError=!0,i}e[t]=n.clone(o)},$setOnInsert:function(e,r,t){},$unset:function(e,r,t){void 0!==e&&(e instanceof Array?r in e&&(e[r]=null):delete e[r])},$push:function(e,r,t){if(void 0===e[r]&&(e[r]=[]),!(e[r]instanceof Array))throw h("Cannot apply $push modifier to non-array");if(!t||!t.$each)return void e[r].push(n.clone(t));var o=t.$each;if(!(o instanceof Array))throw h("$each must be an array");var i=void 0;if("$slice"in t){if("number"!=typeof t.$slice)throw h("$slice must be a numeric value");if(t.$slice>0)throw h("$slice in $push must be zero or negative");i=t.$slice}var a=void 0;if(t.$sort){if(void 0===i)throw h("$sort requires $slice to be present");a=new f.Sorter(t.$sort).getComparator();for(var s=0;s<o.length;s++)if(3!==d._f._type(o[s]))throw h("$push like modifiers using $sort require all elements to be objects")}for(var c=0;c<o.length;c++)e[r].push(n.clone(o[c]));a&&e[r].sort(a),void 0!==i&&(e[r]=0===i?[]:e[r].slice(i))},$pushAll:function(e,r,t){if(!("object"==typeof t&&t instanceof Array))throw h("Modifier $pushAll/pullAll allowed for arrays only");var n=e[r];if(void 0===n)e[r]=t;else{if(!(n instanceof Array))throw h("Cannot apply $pushAll modifier to non-array");for(var o=0;o<t.length;o++)n.push(t[o])}},$addToSet:function(e,t,o){var i=!1;if("object"==typeof o)for(var a in o){"$each"===a&&(i=!0);break}var s=i?o.$each:[o],c=e[t];if(void 0===c)e[t]=s;else{if(!(c instanceof Array))throw h("Cannot apply $addToSet modifier to non-array");r.each(s,function(e){for(var r=0;r<c.length;r++)if(d._f._equal(e,c[r]))return;
c.push(n.clone(e))})}},$pop:function(e,r,t){if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw h("Cannot apply $pop modifier to non-array");"number"==typeof t&&0>t?n.splice(0,1):n.pop()}}},$pull:function(e,r,t){if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw h("Cannot apply $pull/pullAll modifier to non-array");var o=[];if("object"!=typeof t||t instanceof Array)for(var i=0;i<n.length;i++)d._f._equal(n[i],t)||o.push(n[i]);else for(var a=new f.Matcher(t),i=0;i<n.length;i++)a.documentMatches(n[i]).result||o.push(n[i]);e[r]=o}}},$pullAll:function(e,r,t){if(!("object"==typeof t&&t instanceof Array))throw h("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw h("Cannot apply $pull/pullAll modifier to non-array");for(var o=[],i=0;i<n.length;i++){for(var a=!1,s=0;s<t.length;s++)if(d._f._equal(n[i],t[s])){a=!0;break}a||o.push(n[i])}e[r]=o}}},$rename:function(r,t,n,o,i){if(o===n)throw h("$rename source must differ from target");if(null===r)throw h("$rename source field invalid");if("string"!=typeof n)throw h("$rename target must be a string");if(void 0!==r){var a=r[t];delete r[t];var s=n.split("."),c=e(i,s,{forbidArray:!0});if(null===c)throw h("$rename target field invalid");var u=s.pop();c[u]=a}},$bit:function(e,r,t){throw h("$bit is not supported")}}}.call(this),function(){d._diffQueryChanges=function(e,r,t,n){e?d._diffQueryOrderedChanges(r,t,n):d._diffQueryUnorderedChanges(r,t,n)},d._diffQueryUnorderedChanges=function(e,r,t){if(t.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");r.forEach(function(r,o){var i=e.get(o);if(i)t.changed&&!n.equals(i,r)&&t.changed(o,d._makeChangedFields(r,i));else if(t.added){var a=n.clone(r);delete a._id,t.added(r._id,a)}}),t.removed&&e.forEach(function(e,n){r.has(n)||t.removed(n)})},d._diffQueryOrderedChanges=function(t,o,i){var a={};r.each(o,function(r){a[r._id]&&e._debug("Duplicate _id in new_results"),a[r._id]=!0});var s={};r.each(t,function(r,t){r._id in s&&e._debug("Duplicate _id in old_results"),s[r._id]=t});for(var c=[],u=0,f=o.length,l=new Array(f),h=new Array(f),p=function(e){return s[o[e]._id]},v=0;f>v;v++)if(void 0!==s[o[v]._id]){for(var _=u;_>0&&!(p(l[_-1])<p(v));)_--;h[v]=0===_?-1:l[_-1],l[_]=v,_+1>u&&(u=_+1)}for(var m=0===u?-1:l[u-1];m>=0;)c.push(m),m=h[m];c.reverse(),c.push(o.length),r.each(t,function(e){a[e._id]||i.removed&&i.removed(e._id)});var y=0;r.each(c,function(e){for(var a=o[e]?o[e]._id:null,c,u,f,l=y;e>l;l++)u=o[l],r.has(s,u._id)?(c=t[s[u._id]],f=d._makeChangedFields(u,c),r.isEmpty(f)||i.changed&&i.changed(u._id,f),i.movedBefore&&i.movedBefore(u._id,a)):(f=n.clone(u),delete f._id,i.addedBefore&&i.addedBefore(u._id,f,a),i.added&&i.added(u._id,f));a&&(u=o[e],c=t[s[u._id]],f=d._makeChangedFields(u,c),r.isEmpty(f)||i.changed&&i.changed(u._id,f)),y=e+1})},d._diffObjects=function(e,t,n){r.each(e,function(e,o){r.has(t,o)?n.both&&n.both(o,e,t[o]):n.leftOnly&&n.leftOnly(o,e)}),n.rightOnly&&r.each(t,function(t,o){r.has(e,o)||n.rightOnly(o,t)})}}.call(this),function(){d._IdMap=function(){var e=this;o.call(e,d._idStringify,d._idParse)},e._inherits(d._IdMap,o)}.call(this),function(){d._CachingChangeObserver=function(e){var t=this;e=e||{};var o=e.callbacks&&d._observeChangesCallbacksAreOrdered(e.callbacks);if(r.has(e,"ordered")){if(t.ordered=e.ordered,e.callbacks&&e.ordered!==o)throw Error("ordered option doesn't match callbacks")}else{if(!e.callbacks)throw Error("must provide ordered or callbacks");t.ordered=o}var a=e.callbacks||{};t.ordered?(t.docs=new i(d._idStringify),t.applyChange={addedBefore:function(e,r,o){var i=n.clone(r);i._id=e,a.addedBefore&&a.addedBefore.call(t,e,r,o),a.added&&a.added.call(t,e,r),t.docs.putBefore(e,i,o||null)},movedBefore:function(e,r){var n=t.docs.get(e);a.movedBefore&&a.movedBefore.call(t,e,r),t.docs.moveBefore(e,r||null)}}):(t.docs=new d._IdMap,t.applyChange={added:function(e,r){var o=n.clone(r);a.added&&a.added.call(t,e,r),o._id=e,t.docs.set(e,o)}}),t.applyChange.changed=function(e,r){var o=t.docs.get(e);if(!o)throw new Error("Unknown id for changed: "+e);a.changed&&a.changed.call(t,e,n.clone(r)),d._applyChanges(o,r)},t.applyChange.removed=function(e){a.removed&&a.removed.call(t,e),t.docs.remove(e)}},d._observeFromObserveChanges=function(e,t){var o=e.getTransform()||function(e){return e},i=!!t._suppress_initial,a;if(d._observeCallbacksAreOrdered(t)){var s=!t._no_indices;a={addedBefore:function(e,n,a){var c=this;if(!i&&(t.addedAt||t.added)){var u=o(r.extend(n,{_id:e}));if(t.addedAt){var d=s?a?c.docs.indexOf(a):c.docs.size():-1;t.addedAt(u,d,a)}else t.added(u)}},changed:function(e,r){var i=this;if(t.changedAt||t.changed){var a=n.clone(i.docs.get(e));if(!a)throw new Error("Unknown id for changed: "+e);var c=o(n.clone(a));if(d._applyChanges(a,r),a=o(a),t.changedAt){var u=s?i.docs.indexOf(e):-1;t.changedAt(a,c,u)}else t.changed(a,c)}},movedBefore:function(e,r){var i=this;if(t.movedTo){var a=s?i.docs.indexOf(e):-1,c=s?r?i.docs.indexOf(r):i.docs.size():-1;c>a&&--c,t.movedTo(o(n.clone(i.docs.get(e))),a,c,r||null)}},removed:function(e){var r=this;if(t.removedAt||t.removed){var n=o(r.docs.get(e));if(t.removedAt){var i=s?r.docs.indexOf(e):-1;t.removedAt(n,i)}else t.removed(n)}}}}else a={added:function(e,n){if(!i&&t.added){var a=r.extend(n,{_id:e});t.added(o(a))}},changed:function(e,r){var i=this;if(t.changed){var a=i.docs.get(e),s=n.clone(a);d._applyChanges(s,r),t.changed(o(s),o(n.clone(a)))}},removed:function(e){var r=this;t.removed&&t.removed(o(r.docs.get(e)))}};var c=new d._CachingChangeObserver({callbacks:a}),u=e.observeChanges(c.applyChange);return i=!1,u}}.call(this),function(){d._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},d._ObjectID=function(e){var r=this;if(e){if(e=e.toLowerCase(),!d._looksLikeObjectID(e))throw new Error("Invalid hexadecimal string for creating an ObjectID");r._str=e}else r._str=c.hexString(24)},d._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},d._ObjectID.prototype.equals=function(e){var r=this;return e instanceof d._ObjectID&&r.valueOf()===e.valueOf()},d._ObjectID.prototype.clone=function(){var e=this;return new d._ObjectID(e._str)},d._ObjectID.prototype.typeName=function(){return"oid"},d._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},d._ObjectID.prototype.valueOf=d._ObjectID.prototype.toJSONValue=d._ObjectID.prototype.toHexString=function(){return this._str},d._selectorIsId=function(e){return"string"==typeof e||"number"==typeof e||e instanceof d._ObjectID},d._selectorIsIdPerhapsAsObject=function(e){return d._selectorIsId(e)||e&&"object"==typeof e&&e._id&&d._selectorIsId(e._id)&&1===r.size(e)},d._idsMatchedBySelector=function(e){if(d._selectorIsId(e))return[e];if(!e)return null;if(r.has(e,"_id"))return d._selectorIsId(e._id)?[e._id]:e._id&&e._id.$in&&r.isArray(e._id.$in)&&!r.isEmpty(e._id.$in)&&r.all(e._id.$in,d._selectorIsId)?e._id.$in:null;if(e.$and&&r.isArray(e.$and))for(var t=0;t<e.$and.length;++t){var n=d._idsMatchedBySelector(e.$and[t]);if(n)return n}return null},n.addType("oid",function(e){return new d._ObjectID(e)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:d,Minimongo:f,MinimongoTest:l}}();

!function(){var e=Package.meteor.Meteor,t=Package.check.check,n=Package.check.Match,r=Package.random.Random,o=Package.ejson.EJSON,i=Package.json.JSON,a=Package.underscore._,s=Package.tracker.Tracker,u=Package.tracker.Deps,c=Package.logging.Log,l=Package.retry.Retry,d=Package.minimongo.LocalCollection,f=Package.minimongo.Minimongo,_,p,h,v,m,g,b,y,w,k,S,C,T;(function(){_={},p={}}).call(this),function(){h=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],o=n.arrIndexOf(r,t);return-1!==o?void(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].apply(this,n)};var o=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var a=function(e){var t=this;t._events=e||[],t._listeners={}};a.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;r<t._listeners[e].length;r++)t._listeners[e][r].apply(t,n)}},a.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},a.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+i.stringify(e)+" not listed "+i.stringify(t._events)+" in "+t)},a.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var s="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||s.length;var n,r=[];for(n=0;e>n;n++)r.push(s.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,r=Array(t+1).join("0");return(r+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var u="_jp";n.polluteGlobalNamespace=function(){u in t||(t[u]={})},n.closeFrame=function(e,t){return"c"+i.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t,r){var o;if(void 0===r)o=e.location;else{var i=/^([a-z0-9.+-]+:)/i.exec(r);if(i){var a=i[0].toLowerCase(),s=r.substring(a.length),u=/[a-z0-9\.-]+(:[0-9]+)?/.exec(s);if(u)var c=u[0]}if(!a||!c)throw new Error("relativeTo must be an absolute url");o={protocol:a,host:c}}if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=o.protocol+t),0===t.indexOf("/")&&(t=o.protocol+"//"+o.host+t),t=t.replace(/[/]+$/,"");var l=t.split("/");return("http:"===l[0]&&/:80$/.test(l[2])||"https:"===l[0]&&/:443$/.test(l[2]))&&(l[2]=l[2].replace(/:(80|443)$/,"")),t=l.join("/")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);if(-1===r)return e.slice();var o=e.slice(0,r);return o.concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,f,_=i&&i.stringify||function(e){return c.lastIndex=0,c.test(e)&&(e=e.replace(c,function(e){return l[e]})),'"'+e+'"'},p=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=_(e);return d.lastIndex=0,d.test(t)?(f||(f=p(d)),t.replace(d,function(e){return f[e]})):t};var h=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<h.length;t++){var n=h[t];e[n]=T[n]&&T[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},o=[];t||(t=h);for(var i=0;i<t.length;i++){var a=t[i];r[a]=e[a]}var s=function(e){var t=e.shift();r[t]?o.push(t):e.length>0&&s(e)};return n.websocket!==!1&&s(["websocket"]),r["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var v="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(v in t)){var r={};t[v]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[v](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var m={},g=!1,b=function(){for(var e in m)m[e](),delete m[e]},y=function(){g||(g=!0,b())};n.attachEvent("unload",y),n.unload_add=function(e){var t=n.random_string(8);return m[t]=e,g&&n.delay(b),t},n.unload_del=function(e){e in m&&delete m[e]},n.createIframe=function(t,r){var o=e.createElement("iframe"),i,a,s=function(){clearTimeout(i);try{o.onload=null}catch(e){}o.onerror=null},u=function(){o&&(s(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),n.unload_del(a))},c=function(e){o&&(u(),r(e))},l=function(e,t){try{o&&o.contentWindow&&o.contentWindow.postMessage(e,t)}catch(n){}};return o.src=t,o.style.display="none",o.style.position="absolute",o.onerror=function(){c("onerror")},o.onload=function(){clearTimeout(i),i=setTimeout(function(){c("onload timeout")},2e3)},e.body.appendChild(o),i=setTimeout(function(){c("timeout")},15e3),a=n.unload_add(u),{post:l,cleanup:u,loaded:s}},n.createHtmlfile=function(e,r){var o=new ActiveXObject("htmlfile"),i,a,s,c=function(){clearTimeout(i)},l=function(){o&&(c(),n.unload_del(a),s.parentNode.removeChild(s),s=o=null,CollectGarbage())},d=function(e){o&&(l(),r(e))},f=function(e,t){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(n){}};o.open(),o.write('<html><script>document.domain="'+document.domain+'";</script></html>'),o.close(),o.parentWindow[u]=t[u];var _=o.createElement("div");return o.body.appendChild(_),s=o.createElement("iframe"),_.appendChild(s),s.src=e,i=setTimeout(function(){d("timeout")},15e3),a=n.unload_add(l),{post:f,cleanup:l,loaded:c}};var w=function(){};w.prototype=new a(["chunk","finish"]),w.prototype._start=function(e,r,o,i){var a=this;try{a.xhr=new XMLHttpRequest}catch(s){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,r,!0)}catch(u){return a.emit("finish",0,""),void a._cleanup()}if(i&&i.no_credentials||(a.xhr.withCredentials="true"),i&&i.headers)for(var c in i.headers)a.xhr.setRequestHeader(c,i.headers[c]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(o)},w.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(r){}t.unload_ref=t.xhr=null}},w.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var k=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};k.prototype=new w;var S=n.XHRLocalObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r,{no_credentials:!0})})};S.prototype=new w;var C=n.XDRObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r)})};C.prototype=new a(["chunk","finish"]),C.prototype._start=function(e,t,r){var o=this,i=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=i.ontimeout=i.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};i.onprogress=function(){o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},o.xdr=i,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(r)}catch(s){a()}},C.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(r){}t.unload_ref=t.xdr=null}},C.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:B.enabled()?3:4};var T=function(e,t,r){if(!(this instanceof T))return new T(e,t,r);var o=this,i;o._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},r&&n.objectExtend(o._options,r),o._base_url=n.amendUrl(e),o._server=o._options.server||n.random_number_string(1e3),o._options.protocols_whitelist&&o._options.protocols_whitelist.length?i=o._options.protocols_whitelist:(i="string"==typeof t&&t.length>0?[t]:n.isArray(t)?t:null,i&&o._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),o._protocols=[],o.protocol=null,o.readyState=T.CONNECTING,o._ir=q(o._base_url),o._ir.onfinish=function(e,t){o._ir=null,e?(o._options.info&&(e=n.objectExtend(e,o._options.info)),o._options.rtt&&(t=o._options.rtt),o._applyInfo(e,t,i),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}};T.prototype=new r,T.version="0.3.4",T.CONNECTING=0,T.OPEN=1,T.CLOSING=2,T.CLOSED=3,T.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},T.prototype._dispatchOpen=function(){var e=this;e.readyState===T.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=T.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},T.prototype._dispatchMessage=function(e){var t=this;t.readyState===T.OPEN&&t.dispatchEvent(new o("message",{data:e}))},T.prototype._dispatchHeartbeat=function(e){var t=this;t.readyState===T.OPEN&&t.dispatchEvent(new o("heartbeat",{}))},T.prototype._didClose=function(e,t,r){var i=this;if(i.readyState!==T.CONNECTING&&i.readyState!==T.OPEN&&i.readyState!==T.CLOSING)throw new Error("INVALID_STATE_ERR");i._ir&&(i._ir.nuke(),i._ir=null),i._transport&&(i._transport.doCleanup(),i._transport=null);var a=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&i.readyState===T.CONNECTING&&!r){if(i._try_next_protocol(a))return;a=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}i.readyState=T.CLOSED,n.delay(function(){i.dispatchEvent(a)})},T.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var r=i.parse(e.slice(1)||"[]"),o=0;o<r.length;o++)t._dispatchMessage(r[o]);break;case"m":var r=i.parse(e.slice(1)||"null");t._dispatchMessage(r);break;case"c":var r=i.parse(e.slice(1)||"[]");t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},T.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var o=r.protocol=r._protocols.shift();if(!o)return!1;if(T[o]&&T[o].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return r._protocols.unshift(o),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(T[o]&&T[o].enabled(r._options)){var i=T[o].roundTrips||1,a=(r._options.rto||0)*i||5e3;r._transport_tref=n.delay(a,function(){r.readyState===T.CONNECTING&&r._didClose(2007,"Transport timeouted")});var s=n.random_string(8),u=r._base_url+"/"+r._server+"/"+s;return r._debug("Opening transport:",o," url:"+u," RTO:"+r._options.rto),r._transport=new T[o](r,u,r._base_url),!0}r._debug("Skipping transport:",o)}},T.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return r.readyState!==T.CONNECTING&&r.readyState!==T.OPEN?!1:(r.readyState=T.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},T.prototype.send=function(e){var t=this;if(t.readyState===T.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===T.OPEN&&t._transport.doSend(n.quote(""+e)),!0},T.prototype._applyInfo=function(t,r,o){var i=this;i._options.info=t,i._options.rtt=r,i._options.rto=n.countRTO(r),i._options.info.null_origin=!e.domain,t.base_url&&(i._base_url=n.amendUrl(t.base_url,i._base_url));var a=n.probeProtocols();i._protocols=n.detectProtocols(a,o,t),n.isSameOriginScheme(i._base_url)||2!==n.isXHRCorsCapable()||(i._protocols=["jsonp-polling"])};var E=T.websocket=function(e,r){var o=this,i=r+"/websocket";i="https"===i.slice(0,5)?"wss"+i.slice(5):"ws"+i.slice(4),o.ri=e,o.url=i;var a=t.WebSocket||t.MozWebSocket;o.ws=new a(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};E.prototype.doSend=function(e){this.ws.send("["+e+"]")},E.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},E.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},E.roundTrips=2;var O=function(){};O.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},O.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},O.prototype.send_schedule_wait=function(){var e=this,t;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=n.delay(25,function(){e.send_stop=null,e.send_schedule()})},O.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},O.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var x=function(t,r,o){var i=this;if(!("_send_form"in i)){var a=i._send_form=e.createElement("form"),s=i._send_area=e.createElement("textarea");s.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(s),e.body.appendChild(a)}var a=i._send_form,s=i._send_area,u="a"+n.random_string(8);a.target=u,a.action=t+"/jsonp_send?i="+u;var c;try{c=e.createElement('<iframe name="'+u+'">')}catch(l){c=e.createElement("iframe"),c.name=u}c.id=u,a.appendChild(c),c.style.display="none";try{s.value=r}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}a.submit();var f=function(e){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),s.value="",o(!0))};return c.onerror=c.onload=f,c.onreadystatechange=function(e){"complete"==c.readyState&&f()},f},I=function(e){return function(t,n,r){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e,t){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}},M=function(t,r){var o,i=e.createElement("script"),a,s=function(e){a&&(a.parentNode.removeChild(a),a=null),i&&(clearTimeout(o),i.parentNode.removeChild(i),i.onreadystatechange=i.onerror=i.onload=i.onclick=null,i=null,r(e),r=null)},u=!1,c=null;if(i.id="a"+n.random_string(8),i.src=t,i.type="text/javascript",i.charset="UTF-8",i.onerror=function(e){c||(c=setTimeout(function(){u||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},i.onload=function(e){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(e){if(/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){u=!0;try{i.onclick()}catch(t){}}i&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof i.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))a=e.createElement("script"),a.text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=a.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(l){}i.async=!0}"undefined"!=typeof i.async&&(i.async=!0),o=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(i,d.firstChild),a&&d.insertBefore(a,d.firstChild),s},D=T["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(x),r._schedule_recv()};D.prototype=new O,D.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=R(e.trans_url+"/jsonp",M,t)},D.enabled=function(){return!0},D.need_body=!0,D.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var R=function(e,r,o){var i="a"+n.random_string(6),a=e+"?c="+escape(u+"."+i),s=0,c=function(e){switch(s){case 0:delete t[u][i],o(e);break;case 1:o(e),s=2;break;case 2:delete t[u][i]}},l=r(a,c);t[u][i]=l;var d=function(){t[u][i]&&(s=1,t[u][i](n.closeFrame(1e3,"JSONP user aborted read")))};return d},P=function(){};P.prototype=new O,P.prototype.run=function(e,t,n,r,o){var i=this;i.ri=e,i.trans_url=t,i.send_constructor(I(o)),i.poll=new Z(e,r,t+n,o)},P.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var N=T["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",ot,n.XHRCorsObject)};N.prototype=new P,N.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},N.roundTrips=2,N.need_body=!0;var j=T["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",ot,n.XDRObject)};j.prototype=new P,j.enabled=function(){return!!t.XDomainRequest},j.roundTrips=2;var U=T["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XHRCorsObject)};U.prototype=new P,U.enabled=N.enabled,U.roundTrips=2;var A=T["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XDRObject)};A.prototype=new P,A.enabled=j.enabled,A.roundTrips=2;var B=function(){};B.prototype.i_constructor=function(e,t,r){var o=this;o.ri=e,o.origin=n.getOrigin(r),o.base_url=r,o.trans_url=t;var i=r+"/iframe.html";o.ri._options.devel&&(i+="?t="+ +new Date),o.window_id=n.random_string(8),i+="#"+o.window_id,o.iframeObj=n.createIframe(i,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},B.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},B.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",i.stringify([T.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},B.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},B.prototype.doSend=function(e){this.postMessage("m",e)},B.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var H,L=function(e,r){parent!==t?parent.postMessage(H+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},F=function(){};F.prototype._didClose=function(e,t){L("t",n.closeFrame(e,t))},F.prototype._didMessage=function(e){L("t",e)},F.prototype._doSend=function(e){this._transport.doSend(e)},F.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,T.bootstrap_iframe=function(){var r;H=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),a=e.data.slice(8,9),s=e.data.slice(9);if(o===H)switch(a){case"s":var u=i.parse(s),c=u[0],l=u[1],d=u[2],f=u[3];if(c!==T.version&&n.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+T.version+'".'),!n.flatUrl(d)||!n.flatUrl(f))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(d)||!n.isSameOriginUrl(f))return void n.log("Can't connect to different domain from within an iframe. ("+i.stringify([t.location.href,d,f])+")");r=new F,r._transport=new F[l](r,d,f);break;case"m":r._doSend(s);break;case"c":r&&r._doCleanup(),r=null}}};n.attachMessage(o),L("s")};var X=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};X.prototype=new a(["finish"]),X.prototype.doXhr=function(e,t){var r=this,o=(new Date).getTime(),a=new t("GET",e+"/info?cb="+n.random_string(10)),s=n.delay(8e3,function(){a.ontimeout()});a.onfinish=function(e,t){if(clearTimeout(s),s=null,200===e){var n=(new Date).getTime()-o,a=i.parse(t);"object"!=typeof a&&(a={}),r.emit("finish",a,n)}else r.emit("finish")},a.ontimeout=function(){a.close(),r.emit("finish")}};var V=function(t){var r=this,o=function(){var e=new B;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=i.parse(t.substr(1)),o=n[0],a=n[1];r.emit("finish",o,a)}else r.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};V.prototype=new a(["finish"]);var W=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};W.prototype=new a(["finish"]);var q=function(e){if(n.isSameOriginUrl(e))return new X(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new X(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new X(e,n.XDRObject):new W;case 3:return new V(e);default:return new W}},G=F["w-iframe-info-receiver"]=function(e,t,r){var o=new X(r,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+i.stringify([t,n])),e._didClose()}};G.prototype.doCleanup=function(){};var J=T["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};J.prototype=new B,J.enabled=function(){return"EventSource"in t&&B.enabled()},J.need_body=!0,J.roundTrips=3;var Q=F["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",et,n.XHRLocalObject)};Q.prototype=new P;var z=T["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};z.prototype=new B,z.enabled=function(){return t.XMLHttpRequest&&B.enabled()},z.need_body=!0,z.roundTrips=3;var $=F["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XHRLocalObject)};$.prototype=new P;var Y=T["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};Y.prototype=new B,Y.enabled=function(){return B.enabled()},Y.need_body=!0,Y.roundTrips=3;var K=F["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",rt,n.XHRLocalObject)};K.prototype=new P;var Z=function(e,t,n,r){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=r,o._scheduleRecv()};Z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Z.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var et=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,i){var a=i?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:a}))})}};et.prototype=new r,et.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var tt,nt=function(){if(void 0===tt)if("ActiveXObject"in t)try{tt=!!new ActiveXObject("htmlfile")}catch(e){}else tt=!1;return tt},rt=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(u+"."+r.id);var i=nt()?n.createHtmlfile:n.createIframe,a;t[u][r.id]={start:function(){a.loaded()},message:function(e){r.dispatchEvent(new o("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){a.cleanup(),r.iframe_close=a=null,delete t[u][r.id],r.dispatchEvent(new o("close",{reason:n}))},a=i(e,function(e){r.iframe_close({},"permanent")})};rt.prototype=new r,rt.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var ot=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var i=t.slice(r),a=i.indexOf("\n");if(-1===a)break;r+=a+1;var s=i.slice(0,a);n.dispatchEvent(new o("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:r}))}};return ot.prototype=new r,ot.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},T.getUtils=function(){return n},T.getIframeTransport=function(){return B},T}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return h})}.call(this),function(){p.ClientStream=function(e,t){var n=this;n.options=a.extend({retry:!0},t),n._initCommon(n.options),n.HEARTBEAT_TIMEOUT=1e5,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",a.bind(n._online,n),!1),n._launchConnection()},a.extend(p.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){var t=this;t.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),a.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(e){var t=this;t._clearConnectionAndHeartbeatTimers(),t.socket&&(t.socket.onmessage=t.socket.onclose=t.socket.onerror=t.socket.onheartbeat=function(){},t.socket.close(),t.socket=null),a.each(t.eventCallbacks.disconnect,function(t){t(e)})},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var t=this;e._debug("Connection timeout. No sockjs heartbeat received."),t._lostConnection(new _.ConnectionError("Heartbeat timed out"))},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(a.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],t=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);
return t||(e=["websocket"].concat(e)),e},_launchConnection:function(){var t=this;t._cleanup();var n=a.extend({protocols_whitelist:t._sockjsProtocolsWhitelist()},t.options._sockjsOptions);t.socket=new h(v(t.rawUrl),void 0,n),t.socket.onopen=function(e){t._connected()},t.socket.onmessage=function(e){t._heartbeat_received(),t.currentStatus.connected&&a.each(t.eventCallbacks.message,function(t){t(e.data)})},t.socket.onclose=function(){t._lostConnection()},t.socket.onerror=function(){e._debug("stream error",a.toArray(arguments),(new Date).toDateString())},t.socket.onheartbeat=function(){t._heartbeat_received()},t.connectionTimer&&clearTimeout(t.connectionTimer),t.connectionTimer=setTimeout(function(){t._lostConnection(new _.ConnectionError("DDP connection timed out"))},t.CONNECT_TIMEOUT)}})}.call(this),function(){var t=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},n=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},o=function(o,i,a){i||(i="http");var s=o.match(/^ddp(i?)\+sockjs:\/\//),u=o.match(/^http(s?):\/\//),c;if(s){var l=o.substr(s[0].length);c="i"===s[1]?i:i+"s";var d=l.indexOf("/"),f=-1===d?l:l.substr(0,d),_=-1===d?"":l.substr(d);return f=f.replace(/\*/g,function(){return Math.floor(10*r.fraction())}),c+"://"+f+_}if(u){c=u[1]?i+"s":i;var p=o.substr(u[0].length);o=c+"://"+p}return-1!==o.indexOf("://")||t(o,"/")||(o=i+"://"+o),o=e._relativeToSiteRootUrl(o),n(o,"/")?o+a:o+"/"+a};v=function(e){return o(e,"http","sockjs")},m=function(e){var t=o(e,"ws","websocket");return t},p.toSockjsUrl=v,a.extend(p.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e&&"disconnect"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(e){var t=this;e=e||{},t.CONNECT_TIMEOUT=e.connectTimeoutMs||1e4,t.eventCallbacks={},t._forcedToDisconnect=!1,t.currentStatus={status:"connecting",connected:!1,retryCount:0},t.statusListeners="undefined"!=typeof s&&new s.Dependency,t.statusChanged=function(){t.statusListeners&&t.statusListeners.changed()},t._retry=new l,t.connectionTimer=null},reconnect:function(e){var t=this;return e=e||{},e.url&&t._changeUrl(e.url),e._sockjsOptions&&(t.options._sockjsOptions=e._sockjsOptions),t.currentStatus.connected?void((e._force||e.url)&&t._lostConnection(new _.ForcedReconnectError)):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,void t._retryNow())},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(e){var t=this;t._cleanup(e),t._retryLater(e)},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(e){var t=this,n=0;t.options.retry||e&&"DDP.ForcedReconnectError"===e.errorType?(n=t._retry.retryLater(t.currentStatus.retryCount,a.bind(t._retryNow,t)),t.currentStatus.status="waiting",t.currentStatus.retryTime=(new Date).getTime()+n):(t.currentStatus.status="failed",delete t.currentStatus.retryTime),t.currentStatus.connected=!1,t.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}}),_.ConnectionError=e.makeErrorType("DDP.ConnectionError",function(e){var t=this;t.message=e}),_.ForcedReconnectError=e.makeErrorType("DDP.ForcedReconnectError",function(){})}.call(this),function(){g=function(e){var t=this;t.heartbeatInterval=e.heartbeatInterval,t.heartbeatTimeout=e.heartbeatTimeout,t._sendPing=e.sendPing,t._onTimeout=e.onTimeout,t._heartbeatIntervalHandle=null,t._heartbeatTimeoutHandle=null},a.extend(g.prototype,{stop:function(){var e=this;e._clearHeartbeatIntervalTimer(),e._clearHeartbeatTimeoutTimer()},start:function(){var e=this;e.stop(),e._startHeartbeatIntervalTimer()},_startHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle=e.setTimeout(a.bind(t._heartbeatIntervalFired,t),t.heartbeatInterval)},_startHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle=e.setTimeout(a.bind(t._heartbeatTimeoutFired,t),t.heartbeatTimeout)},_clearHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle&&(e.clearTimeout(t._heartbeatIntervalHandle),t._heartbeatIntervalHandle=null)},_clearHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle&&(e.clearTimeout(t._heartbeatTimeoutHandle),t._heartbeatTimeoutHandle=null)},_heartbeatIntervalFired:function(){var e=this;e._heartbeatIntervalHandle=null,e._sendPing(),e._startHeartbeatTimeoutTimer()},_heartbeatTimeoutFired:function(){var e=this;e._heartbeatTimeoutHandle=null,e._onTimeout()},pingReceived:function(){var e=this;e._heartbeatIntervalHandle&&(e._clearHeartbeatIntervalTimer(),e._startHeartbeatIntervalTimer())},pongReceived:function(){var e=this;e._heartbeatTimeoutHandle&&(e._clearHeartbeatTimeoutTimer(),e._startHeartbeatIntervalTimer())}})}.call(this),function(){b=["1","pre2","pre1"],p.SUPPORTED_DDP_VERSIONS=b,y=function(e){var t=this;this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection,this.randomSeed=e.randomSeed,this.randomStream=null},a.extend(y.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),w=function(t){try{var n=i.parse(t)}catch(r){return e._debug("Discarding message with invalid JSON",t),null}return null===n||"object"!=typeof n?(e._debug("Discarding non-object DDP message",t),null):(a.has(n,"cleared")&&(a.has(n,"fields")||(n.fields={}),a.each(n.cleared,function(e){n.fields[e]=void 0}),delete n.cleared),a.each(["fields","params","result"],function(e){a.has(n,e)&&(n[e]=o._adjustTypesFromJSONValue(n[e]))}),n)},k=function(e){var t=o.clone(e);if(a.has(e,"fields")){var n=[];a.each(e.fields,function(e,r){void 0===e&&(n.push(r),delete t.fields[r])}),a.isEmpty(n)||(t.cleared=n),a.isEmpty(t.fields)&&delete t.fields}if(a.each(["fields","params","result"],function(e){a.has(t,e)&&(t[e]=o._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return i.stringify(t)},_._CurrentInvocation=new e.EnvironmentVariable}.call(this),function(){function e(){return r.hexString(20)}S=function(t){var n=this;this.seed=[].concat(t.seed||e()),this.sequences={}},S.get=function(e,t){if(t||(t="default"),!e)return r;var n=e.randomStream;return n||(e.randomStream=n=new S({seed:e.randomSeed})),n._sequence(t)},_.randomStream=function(e){var t=_._CurrentInvocation.get();return S.get(t,e)},C=function(e,t){var n=S.get(e,"/rpc/"+t);return n.hexString(20)},a.extend(S.prototype,{_sequence:function(e){var t=this,n=t.sequences[e]||null;if(null===n){for(var o=t.seed.concat(e),i=0;i<o.length;i++)a.isFunction(o[i])&&(o[i]=o[i]());t.sequences[e]=n=r.createWithSeeds.apply(null,o)}return n}})}.call(this),function(){if(e.isServer)var t=Npm.require("path"),n=Npm.require("fibers"),u=Npm.require(t.join("fibers","future"));var c=function(t,n){var r=this;n=a.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(t){e._debug(t)},heartbeatInterval:35e3,heartbeatTimeout:15e3,reloadWithOutstanding:!1,supportedDDPVersions:b,retry:!0,respondToPings:!0},n),r.onReconnect=null,r._stream="object"==typeof t?t:new p.ClientStream(t,{retry:n.retry,headers:n.headers,_sockjsOptions:n._sockjsOptions,_dontPrintErrors:n._dontPrintErrors,connectTimeoutMs:n.connectTimeoutMs}),r._lastSessionId=null,r._versionSuggestion=null,r._version=null,r._stores={},r._methodHandlers={},r._nextMethodId=1,r._supportedDDPVersions=n.supportedDDPVersions,r._heartbeatInterval=n.heartbeatInterval,r._heartbeatTimeout=n.heartbeatTimeout,r._methodInvokers={},r._outstandingMethodBlocks=[],r._documentsWrittenByStub={},r._serverDocuments={},r._afterUpdateCallbacks=[],r._messagesBufferedUntilQuiescence=[],r._methodsBlockingQuiescence={},r._subsBeingRevived={},r._resetStores=!1,r._updatesForUnknownStores={},r._retryMigrate=null,r._subscriptions={},r._userId=null,r._userIdDeps=new s.Dependency,e.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(r._readyToMigrate())return[!0];if(r._retryMigrate)throw new Error("Two migrations in progress?");return r._retryMigrate=e,!1});var o=function(t){try{var o=w(t)}catch(i){return void e._debug("Exception while parsing DDP",i)}if(null===o||!o.msg)return void(o&&o.server_id||e._debug("discarding invalid livedata message",o));if("connected"===o.msg)r._version=r._versionSuggestion,r._livedata_connected(o),n.onConnected();else if("failed"==o.msg)if(a.contains(r._supportedDDPVersions,o.version))r._versionSuggestion=o.version,r._stream.reconnect({_force:!0});else{var s="DDP version negotiation failed; server requested version "+o.version;r._stream.disconnect({_permanent:!0,_error:s}),n.onDDPVersionNegotiationFailure(s)}else"ping"===o.msg?(n.respondToPings&&r._send({msg:"pong",id:o.id}),r._heartbeat&&r._heartbeat.pingReceived()):"pong"===o.msg?r._heartbeat&&r._heartbeat.pongReceived():a.include(["added","changed","removed","ready","updated"],o.msg)?r._livedata_data(o):"nosub"===o.msg?r._livedata_nosub(o):"result"===o.msg?r._livedata_result(o):"error"===o.msg?r._livedata_error(o):e._debug("discarding unknown livedata message type",o)},i=function(){var e={msg:"connect"};r._lastSessionId&&(e.session=r._lastSessionId),e.version=r._versionSuggestion||r._supportedDDPVersions[0],r._versionSuggestion=e.version,e.support=r._supportedDDPVersions,r._send(e),!a.isEmpty(r._outstandingMethodBlocks)&&a.isEmpty(r._outstandingMethodBlocks[0].methods)&&r._outstandingMethodBlocks.shift(),a.each(r._methodInvokers,function(e){e.sentMessage=!1}),r.onReconnect?r._callOnReconnectAndSendAppropriateOutstandingMethods():r._sendOutstandingMethods(),a.each(r._subscriptions,function(e,t){r._send({msg:"sub",id:t,name:e.name,params:e.params})})},u=function(){r._heartbeat&&(r._heartbeat.stop(),r._heartbeat=null)};e.isServer?(r._stream.on("message",e.bindEnvironment(o,e._debug)),r._stream.on("reset",e.bindEnvironment(i,e._debug)),r._stream.on("disconnect",e.bindEnvironment(u,e._debug))):(r._stream.on("message",o),r._stream.on("reset",i),r._stream.on("disconnect",u))},l=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};a.extend(l.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),a.extend(c.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var r={};a.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){r[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=r;var o=n._updatesForUnknownStores[e];return o&&(r.beginUpdate(o.length,!1),a.each(o,function(e){r.update(e)}),r.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),i={};if(n.length){var u=n[n.length-1];"function"==typeof u?i.onReady=n.pop():!u||"function"!=typeof u.onReady&&"function"!=typeof u.onError||(i=n.pop())}var c=a.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&o.equals(t.params,n)}),l;c?(l=c.id,c.inactive=!1,i.onReady&&(c.ready||(c.readyCallback=i.onReady)),i.onError&&(c.errorCallback=i.onError)):(l=r.id(),t._subscriptions[l]={id:l,name:e,params:o.clone(n),inactive:!1,ready:!1,readyDeps:new s.Dependency,readyCallback:i.onReady,errorCallback:i.onError,connection:t,remove:function(){delete this.connection._subscriptions[this.id],this.ready&&this.readyDeps.changed()},stop:function(){this.connection._send({msg:"unsub",id:l}),this.remove()}},t._send({msg:"sub",id:l,name:e,params:n}));var d={stop:function(){a.has(t._subscriptions,l)&&t._subscriptions[l].stop()},ready:function(){if(!a.has(t._subscriptions,l))return!1;var e=t._subscriptions[l];return e.readyDeps.depend(),e.ready}};return s.active&&s.onInvalidate(function(e){a.has(t._subscriptions,l)&&(t._subscriptions[l].inactive=!0),s.afterFlush(function(){a.has(t._subscriptions,l)&&t._subscriptions[l].inactive&&d.stop()})}),d},_subscribeAndWait:function(e,t,n){var r=this,o=new u,i=!1,a;return t=t||[],t.push({onReady:function(){i=!0,o["return"]()},onError:function(e){i?n&&n.onLateError&&n.onLateError(e):o["throw"](e)}}),a=r.subscribe.apply(r,[e].concat(t)),o.wait(),a},methods:function(e){var t=this;a.each(e,function(e,n){if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,r,i){var s=this;i||"function"!=typeof r||(i=r,r={}),r=r||{},i&&(i=e.bindEnvironment(i,"delivering result of invoking '"+t+"'")),n=o.clone(n);var c=function(){var e;return function(){return void 0===e&&(e=""+s._nextMethodId++),e}}(),d=_._CurrentInvocation.get(),f=d&&d.isSimulation,p=null,h=function(){return null===p&&(p=C(d,t)),p},v=s._methodHandlers[t];if(v){var m=function(e){s.setUserId(e)},g=new y({isSimulation:!0,userId:s.userId(),setUserId:m,randomSeed:function(){return h()}});f||s._saveOriginals();try{var b=_._CurrentInvocation.withValue(g,function(){return e.isServer?e._noYieldsAllowed(function(){return v.apply(g,o.clone(n))}):v.apply(g,o.clone(n))})}catch(w){var k=w}f||s._retrieveAndStoreOriginals(c())}if(f){if(i)return void i(k,b);if(k)throw k;return b}if(k&&!k.expected&&e._debug("Exception while simulating the effect of invoking '"+t+"'",k,k.stack),!i)if(e.isClient)i=function(n){n&&e._debug("Error invoking Method '"+t+"':",n.message)};else{var S=new u;i=S.resolver()}var T={msg:"method",method:t,params:n,id:c()};null!==p&&(T.randomSeed=p);var E=new l({methodId:c(),callback:i,connection:s,onResultReceived:r.onResultReceived,wait:!!r.wait,message:T});return r.wait?s._outstandingMethodBlocks.push({wait:!0,methods:[E]}):((a.isEmpty(s._outstandingMethodBlocks)||a.last(s._outstandingMethodBlocks).wait)&&s._outstandingMethodBlocks.push({wait:!1,methods:[]}),a.last(s._outstandingMethodBlocks).methods.push(E)),1===s._outstandingMethodBlocks.length&&E.sendMessage(),S?S.wait():r.returnStubValue?b:void 0},_saveOriginals:function(){var e=this;a.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];a.each(t._stores,function(r,o){var i=r.retrieveOriginals();i&&i.forEach(function(r,i){n.push({collection:o,id:i}),a.has(t._serverDocuments,o)||(t._serverDocuments[o]=new d._IdMap);var s=t._serverDocuments[o].setDefault(i,{});s.writtenByStubs?s.writtenByStubs[e]=!0:(s.document=r,s.flushCallbacks=[],s.writtenByStubs={},s.writtenByStubs[e]=!0)})}),a.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;a.each(a.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&e._subscriptions[n].stop()})},_send:function(e){var t=this;t._stream.send(k(e))},_lostConnection:function(e){var t=this;t._stream._lostConnection(e)},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){var e=this;return e._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!a.isEmpty(e._subsBeingRevived)||!a.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return a.any(a.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if("pre1"!==t._version&&0!==t._heartbeatInterval&&(t._heartbeat=new g({heartbeatInterval:t._heartbeatInterval,heartbeatTimeout:t._heartbeatTimeout,onTimeout:function(){t._lostConnection(new _.ConnectionError("DDP heartbeat timed out"))},sendPing:function(){t._send({msg:"ping"})}}),t._heartbeat.start()),t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},a.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&a.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(a.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(a.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],a.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),a.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;a.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!a.isEmpty(n))&&(a.each(t._stores,function(e,r){e.beginUpdate(a.has(n,r)?n[r].length:0,t._resetStores)}),t._resetStores=!1,a.each(n,function(e,n){var r=t._stores[n];r?a.each(e,function(e){r.update(e)}):(a.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),a.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],a.each(t,function(e){e()})},_pushUpdate:function(e,t,n){var r=this;a.has(e,t)||(e[t]=[]),e[t].push(n)},_getServerDoc:function(e,t){var n=this;if(!a.has(n._serverDocuments,e))return null;var r=n._serverDocuments[e];return r.get(t)||null},_process_added:function(e,t){var n=this,r=d._idParse(e.id),o=n._getServerDoc(e.collection,r);if(o){if(void 0!==o.document)throw new Error("Server sent add for existing id: "+e.id);o.document=e.fields||{},o.document._id=r}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,r=n._getServerDoc(e.collection,d._idParse(e.id));if(r){if(void 0===r.document)throw new Error("Server sent changed for nonexisting id: "+e.id);d._applyChanges(r.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,r=n._getServerDoc(e.collection,d._idParse(e.id));if(r){if(void 0===r.document)throw new Error("Server sent removed for nonexisting id:"+e.id);r.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;a.each(e.methods,function(e){a.each(n._documentsWrittenByStub[e],function(r){var o=n._getServerDoc(r.collection,r.id);if(!o)throw new Error("Lost serverDoc for "+i.stringify(r));if(!o.writtenByStubs[e])throw new Error("Doc "+i.stringify(r)+" not written by  method "+e);delete o.writtenByStubs[e],a.isEmpty(o.writtenByStubs)&&(n._pushUpdate(t,r.collection,{msg:"replace",id:d._idStringify(r.id),replace:o.document}),a.each(o.flushCallbacks,function(e){e()}),n._serverDocuments[r.collection].remove(r.id))}),delete n._documentsWrittenByStub[e];var r=n._methodInvokers[e];if(!r)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(a.bind(r.dataVisible,r))})},_process_ready:function(e,t){var n=this;a.each(e.subs,function(e){n._runWhenAllServerDocsAreFlushed(function(){var t=n._subscriptions[e];t&&(t.ready||(t.readyCallback&&t.readyCallback(),t.ready=!0,t.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},r=0,o=function(){--r,0===r&&n()};a.each(t._serverDocuments,function(e){e.forEach(function(e){var n=a.any(e.writtenByStubs,function(e,n){var r=t._methodInvokers[n];return r&&r.sentMessage});n&&(++r,e.flushCallbacks.push(o))})}),0===r&&n()},_livedata_nosub:function(t){var n=this;if(n._livedata_data(t),a.has(n._subscriptions,t.id)){var r=n._subscriptions[t.id].errorCallback;n._subscriptions[t.id].remove(),r&&t.error&&r(new e.Error(t.error.error,t.error.reason,t.error.details))}},_process_nosub:function(){},_livedata_result:function(t){var n=this;if(a.isEmpty(n._outstandingMethodBlocks))return void e._debug("Received method result but no methods outstanding");for(var r=n._outstandingMethodBlocks[0].methods,o,i=0;i<r.length&&(o=r[i],o.methodId!==t.id);i++);return o?(r.splice(i,1),void(a.has(t,"error")?o.receiveResult(new e.Error(t.error.error,t.error.reason,t.error.details)):o.receiveResult(void 0,t.result))):void e._debug("Can't match method response to original method call",t)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!a.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!a.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+i.stringify(t));a.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;a.isEmpty(e._outstandingMethodBlocks)||a.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(t){e._debug("Received error from server: ",t.reason),t.offendingMessage&&e._debug("For: ",t.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!a.isEmpty(t)){if(a.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,void e._sendOutstandingMethods();a.last(e._outstandingMethodBlocks).wait||t[0].wait||(a.each(t[0].methods,function(t){a.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),a.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return a.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),p.Connection=c,_.connect=function(e,t){var n=new c(e,t);return T.push(n),n},T=[],_._allSubscriptionsReady=function(){return a.all(T,function(e){return a.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(e.refresh=function(e){},e.isClient){var t="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(t=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var n=new l,r=function(t){if(e._debug(t),Package.reload){var r=Package.reload.Reload._migrationData("livedata")||{},o=r.DDPVersionNegotiationFailures||0;++o,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:o}]}),n.retryLater(o,function(){Package.reload.Reload._reload()})}};e.connection=_.connect(t,{onDDPVersionNegotiationFailure:r}),a.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(t){e[t]=a.bind(e.connection[t],e.connection)})}else e.connection=null;e.default_connection=e.connection,e.connect=_.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.ddp={DDP:_,LivedataTest:p}}();

!function(){var e=Package.meteor.Meteor,a=Package.logging.Log,g=Package.underscore._,o=Package.ddp.DDP,c=Package.ejson.EJSON,P;"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:P}}();

!function(){var a=Package.meteor.Meteor,e=Package.logging.Log,o=Package.underscore._,g=Package.ddp.DDP,c=Package.ejson.EJSON,n=Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.random.Random,o=Package.ejson.EJSON,t=Package.json.JSON,r=Package.underscore._,i=Package.minimongo.LocalCollection,c=Package.minimongo.Minimongo,l=Package.logging.Log,a=Package.ddp.DDP,s=Package.tracker.Tracker,d=Package.tracker.Deps,u=Package.check.check,f=Package.check.Match,_,p;(function(){p=function(){var e=this;e.noConnCollections={}};var e=function(e,n){return e in n||(n[e]=new i(e)),n[e]};r.extend(p.prototype,{open:function(n,o){var t=this;return n?o?(o._mongo_livedata_collections||(o._mongo_livedata_collections={}),e(n,o._mongo_livedata_collections)):e(n,t.noConnCollections):new i}}),p=new p}).call(this),function(){_={},_.Collection=function(o,t){var c=this;if(!(c instanceof _.Collection))throw new Error('use "new" to construct a Mongo.Collection');if(o||null===o||(e._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),o=null),null!==o&&"string"!=typeof o)throw new Error("First argument to new Mongo.Collection must be a string or null");switch(t&&t.methods&&(t={connection:t}),t&&t.manager&&!t.connection&&(t.connection=t.manager),t=r.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},t),t.idGeneration){case"MONGO":c._makeNewID=function(){var e=o?a.randomStream("/collection/"+o):n;return new _.ObjectID(e.hexString(24))};break;case"STRING":default:c._makeNewID=function(){var e=o?a.randomStream("/collection/"+o):n;return e.id()}}if(c._transform=i.wrapTransform(t.transform),c._connection=o&&null!==t.connection?t.connection?t.connection:e.isClient?e.connection:e.server:null,t._driver||(t._driver=o&&c._connection===e.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():p),c._collection=t._driver.open(o,c._connection),c._name=o,c._connection&&c._connection.registerStore){var l=c._connection.registerStore(o,{beginUpdate:function(e,n){(e>1||n)&&c._collection.pauseObservers(),n&&c._collection.remove({})},update:function(e){var n=i._idParse(e.id),o=c._collection.findOne(n);if("replace"===e.msg){var t=e.replace;return void(t?o?c._collection.update(n,t):c._collection.insert(t):o&&c._collection.remove(n))}if("added"===e.msg){if(o)throw new Error("Expected not to find a document already present for an add");c._collection.insert(r.extend({_id:n},e.fields))}else if("removed"===e.msg){if(!o)throw new Error("Expected to find a document already present for removed");c._collection.remove(n)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!o)throw new Error("Expected to find a document to change");if(!r.isEmpty(e.fields)){var l={};r.each(e.fields,function(e,n){void 0===e?(l.$unset||(l.$unset={}),l.$unset[n]=1):(l.$set||(l.$set={}),l.$set[n]=e)}),c._collection.update(n,l)}}},endUpdate:function(){c._collection.resumeObservers()},saveOriginals:function(){c._collection.saveOriginals()},retrieveOriginals:function(){return c._collection.retrieveOriginals()}});if(!l)throw new Error("There is already a collection named '"+o+"'")}c._defineMutationMethods(),Package.autopublish&&!t._preventAutopublish&&c._connection&&c._connection.publish&&c._connection.publish(null,function(){return c.find()},{is_auto:!0})},r.extend(_.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var n=this;return e.length<2?{transform:n._transform}:(u(e[1],f.Optional(f.ObjectIncluding({fields:f.Optional(f.OneOf(Object,void 0)),sort:f.Optional(f.OneOf(Object,Array,void 0)),limit:f.Optional(f.OneOf(Number,void 0)),skip:f.Optional(f.OneOf(Number,void 0))}))),r.extend({transform:n._transform},e[1]))},find:function(){var e=this,n=r.toArray(arguments);return e._collection.find(e._getFindSelector(n),e._getFindOptions(n))},findOne:function(){var e=this,n=r.toArray(arguments);return e._collection.findOne(e._getFindSelector(n),e._getFindOptions(n))}}),_.Collection._publishCursor=function(e,n,o){var t=e.observeChanges({added:function(e,t){n.added(o,e,t)},changed:function(e,t){n.changed(o,e,t)},removed:function(e){n.removed(o,e)}});n.onStop(function(){t.stop()})},_.Collection._rewriteSelector=function(e){if(i._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:n.id()};var o={};return r.each(e,function(e,n){e instanceof RegExp?o[n]=t(e):e&&e.$regex instanceof RegExp?(o[n]=t(e.$regex),void 0!==e.$options&&(o[n].$options=e.$options)):o[n]=r.contains(["$or","$and","$nor"],n)?r.map(e,function(e){return _.Collection._rewriteSelector(e)}):e}),o};var t=function(e){u(e,RegExp);var n={$regex:e.source},o="";return e.ignoreCase&&(o+="i"),e.multiline&&(o+="m"),o&&(n.$options=o),n},c=function(n,o){if(!i._selectorIsIdPerhapsAsObject(n))throw new e.Error(403,"Not permitted. Untrusted code may only "+o+" documents by ID.")};r.each(["insert","update","remove"],function(n){_.Collection.prototype[n]=function(){var o=this,t=r.toArray(arguments),i,l,s;if(t.length&&(void 0===t[t.length-1]||t[t.length-1]instanceof Function)&&(i=t.pop()),"insert"===n){if(!t.length)throw new Error("insert requires an argument");if(t[0]=r.extend({},t[0]),"_id"in t[0]){if(l=t[0]._id,!l||!("string"==typeof l||l instanceof _.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else{var d=!0;if(o._connection&&o._connection!==e.server){var u=a._CurrentInvocation.get();u||(d=!1)}d&&(l=t[0]._id=o._makeNewID())}}else if(t[0]=_.Collection._rewriteSelector(t[0]),"update"===n){var f=t[2]=r.clone(t[2])||{};if(f&&"function"!=typeof f&&f.upsert)if(f.insertedId){if(!("string"==typeof f.insertedId||f.insertedId instanceof _.ObjectID))throw new Error("insertedId must be string or ObjectID")}else f.insertedId=o._makeNewID()}var p=function(e){return"insert"===n?(!l&&e&&(l=e),l):e},h;if(i&&(h=function(e,n){i(e,!e&&p(n))}),o._connection&&o._connection!==e.server){var u=a._CurrentInvocation.get(),v=u&&u.isSimulation;!e.isClient||h||v||(h=function(o){o&&e._debug(n+" failed: "+(o.reason||o.stack))}),v||"insert"===n||c(t[0],n),s=p(o._connection.apply(o._prefix+n,t,{returnStubValue:!0},h))}else{t.push(h);try{var m=o._collection[n].apply(o._collection,t);s=p(m)}catch(g){if(i)return i(g),null;throw g}}return s}}),_.Collection.prototype.upsert=function(e,n,o,t){var i=this;return t||"function"!=typeof o||(t=o,o={}),i.update(e,n,r.extend({},o,{_returnObject:!0,upsert:!0}),t)},_.Collection.prototype._ensureIndex=function(e,n){var o=this;if(!o._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");o._collection._ensureIndex(e,n)},_.Collection.prototype._dropIndex=function(e){var n=this;if(!n._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");n._collection._dropIndex(e)},_.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},_.Collection.prototype._createCappedCollection=function(e,n){var o=this;if(!o._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");o._collection._createCappedCollection(e,n)},_.ObjectID=i._ObjectID,_.Cursor=i.Cursor,_.Collection.Cursor=_.Cursor,_.Collection.ObjectID=_.ObjectID,function(){var e=function(e,n){var o=["insert","update","remove","fetch","transform"];r.each(r.keys(n),function(n){if(!r.contains(o,n))throw new Error(e+": Invalid key: "+n)});var t=this;if(t._restricted=!0,r.each(["insert","update","remove"],function(o){if(n[o]){if(!(n[o]instanceof Function))throw new Error(e+": Value for `"+o+"` must be a function");n[o].transform=void 0===n.transform?t._transform:i.wrapTransform(n.transform),t._validators[o][e].push(n[o])}}),n.update||n.remove||n.fetch){if(n.fetch&&!(n.fetch instanceof Array))throw new Error(e+": Value for `fetch` must be an array");t._updateFetch(n.fetch)}};_.Collection.prototype.allow=function(n){e.call(this,"allow",n)},_.Collection.prototype.deny=function(n){e.call(this,"deny",n)}}(),_.Collection.prototype._defineMutationMethods=function(){var n=this;if(n._restricted=!1,n._insecure=void 0,n._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},n._name&&(n._prefix="/"+n._name+"/",n._connection)){var o={};r.each(["insert","update","remove"],function(t){o[n._prefix+t]=function(){u(arguments,[f.Any]);var o=r.toArray(arguments);try{var i=null;if("insert"!==t||r.has(o[0],"_id")||(i=n._makeNewID()),this.isSimulation)return null!==i&&(o[0]._id=i),n._collection[t].apply(n._collection,o);if("insert"!==t&&c(o[0],t),n._restricted){if(0===n._validators[t].allow.length)throw new e.Error(403,"Access denied. No allow validators set on restricted collection for method '"+t+"'.");var l="_validated"+t.charAt(0).toUpperCase()+t.slice(1);return o.unshift(this.userId),"insert"===t&&o.push(i),n[l].apply(n,o)}if(n._isInsecure())return null!==i&&(o[0]._id=i),n._collection[t].apply(n._collection,o);throw new e.Error(403,"Access denied")}catch(a){throw"MongoError"===a.name||"MinimongoError"===a.name?new e.Error(409,a.toString()):a}}}),(e.isClient||n._connection===e.server)&&n._connection.methods(o)}},_.Collection.prototype._updateFetch=function(e){var n=this;n._validators.fetchAllFields||(e?n._validators.fetch=r.union(n._validators.fetch,e):(n._validators.fetchAllFields=!0,n._validators.fetch=null))},_.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure};var l=function(e,n,t){var r=n;return e.transform&&(r=o.clone(n),null!==t&&(r._id=t),r=e.transform(r)),r};_.Collection.prototype._validatedInsert=function(n,o,t){var i=this;if(r.any(i._validators.insert.deny,function(e){return e(n,l(e,o,t))}))throw new e.Error(403,"Access denied");if(r.all(i._validators.insert.allow,function(e){return!e(n,l(e,o,t))}))throw new e.Error(403,"Access denied");null!==t&&(o._id=t),i._collection.insert.call(i._collection,o)};var s=function(e,n){return e.transform?e.transform(n):n};_.Collection.prototype._validatedUpdate=function(n,o,t,c){var l=this;if(c=c||{},!i._selectorIsIdPerhapsAsObject(o))throw new Error("validated update should be of a single ID");if(c.upsert)throw new e.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var a=[];r.each(t,function(n,o){if("$"!==o.charAt(0))throw new e.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!r.has(d,o))throw new e.Error(403,"Access denied. Operator "+o+" not allowed in a restricted collection.");r.each(r.keys(n),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),r.contains(a,e)||a.push(e)})});var u={transform:null};l._validators.fetchAllFields||(u.fields={},r.each(l._validators.fetch,function(e){u.fields[e]=1}));var f=l._collection.findOne(o,u);if(!f)return 0;var _;if(r.any(l._validators.update.deny,function(e){return _||(_=s(e,f)),e(n,_,a,t)}))throw new e.Error(403,"Access denied");if(r.all(l._validators.update.allow,function(e){return _||(_=s(e,f)),!e(n,_,a,t)}))throw new e.Error(403,"Access denied");return l._collection.update.call(l._collection,o,t,c)};var d={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};_.Collection.prototype._validatedRemove=function(n,o){var t=this,i={transform:null};t._validators.fetchAllFields||(i.fields={},r.each(t._validators.fetch,function(e){i.fields[e]=1}));var c=t._collection.findOne(o,i);if(!c)return 0;if(r.any(t._validators.remove.deny,function(e){return e(n,s(e,c))}))throw new e.Error(403,"Access denied");if(r.all(t._validators.remove.allow,function(e){return!e(n,s(e,c))}))throw new e.Error(403,"Access denied");return t._collection.remove.call(t._collection,o)},e.Collection=_.Collection}.call(this),"undefined"==typeof Package&&(Package={}),Package.mongo={Mongo:_}}();

!function(){var e=Package.meteor.Meteor,a=Package.tracker.Tracker,c=Package.tracker.Deps,a,c;"undefined"==typeof Package&&(Package={}),Package.deps={Tracker:a,Deps:c}}();

!function(){var t=Package.meteor.Meteor,e=Package.tracker.Tracker,r=Package.tracker.Deps,i,n,a;(function(){i={},n=function(t){return t},a=Array.prototype.slice}).call(this),function(){var t=Object.prototype.hasOwnProperty,e=function(e,r){for(var i in r)t.call(r,i)&&(e[i]=r[i]);return e};i.Visitor=function(t){e(this,t)},i.Visitor.def=function(t){e(this.prototype,t)},i.Visitor.extend=function(t){var r=this,n=function a(){i.Visitor.apply(this,arguments)};return n.prototype=new r,n.extend=r.extend,n.def=r.def,t&&e(n.prototype,t),n},i.Visitor.def({visit:function(t){if(null==t)return this.visitNull.apply(this,arguments);if("object"==typeof t){if(t.htmljsType)switch(t.htmljsType){case i.Tag.htmljsType:return this.visitTag.apply(this,arguments);case i.CharRef.htmljsType:return this.visitCharRef.apply(this,arguments);case i.Comment.htmljsType:return this.visitComment.apply(this,arguments);case i.Raw.htmljsType:return this.visitRaw.apply(this,arguments);default:throw new Error("Unknown htmljs type: "+t.htmljsType)}return i.isArray(t)?this.visitArray.apply(this,arguments):this.visitObject.apply(this,arguments)}if("string"==typeof t||"boolean"==typeof t||"number"==typeof t)return this.visitPrimitive.apply(this,arguments);if("function"==typeof t)return this.visitFunction.apply(this,arguments);throw new Error("Unexpected object in htmljs: "+t)},visitNull:function(t){},visitPrimitive:function(t){},visitArray:function(t){},visitComment:function(t){},visitCharRef:function(t){},visitRaw:function(t){},visitTag:function(t){},visitObject:function(t){throw new Error("Unexpected object in htmljs: "+t)},visitFunction:function(t){throw new Error("Unexpected function in htmljs: "+t)}}),i.TransformingVisitor=i.Visitor.extend(),i.TransformingVisitor.def({visitNull:n,visitPrimitive:n,visitArray:function(t){for(var e=a.call(arguments),r=t,i=0;i<t.length;i++){var n=t[i];e[0]=n;var o=this.visit.apply(this,e);o!==n&&(r===t&&(r=t.slice()),r[i]=o)}return r},visitComment:n,visitCharRef:n,visitRaw:n,visitObject:n,visitFunction:n,visitTag:function(t){var e=t.children,r=a.call(arguments);r[0]=e;var n=this.visitChildren.apply(this,r),o=t.attrs;r[0]=o;var s=this.visitAttributes.apply(this,r);if(s===o&&n===e)return t;var u=i.getTag(t.tagName).apply(null,n);return u.attrs=s,u},visitChildren:function(t){return this.visitArray.apply(this,arguments)},visitAttributes:function(t){if(i.isArray(t)){for(var r=a.call(arguments),n=t,o=0;o<t.length;o++){var s=t[o];r[0]=s;var u=this.visitAttributes.apply(this,r);u!==s&&(n===t&&(n=t.slice()),n[o]=u)}return n}if(t&&i.isConstructedObject(t))throw new Error("The basic HTML.TransformingVisitor does not support foreign objects in attributes.  Define a custom visitAttributes for this case.");var l=t,f=l;if(l){var c=[null,null];c.push.apply(c,arguments);for(var h in l){var p=l[h];c[0]=h,c[1]=p;var m=this.visitAttribute.apply(this,c);m!==p&&(f===l&&(f=e({},l)),f[h]=m)}}return f},visitAttribute:function(t,e,r){var i=a.call(arguments,2);return i[0]=e,this.visit.apply(this,i)}}),i.ToTextVisitor=i.Visitor.extend(),i.ToTextVisitor.def({visitNull:function(t){return""},visitPrimitive:function(t){var e=String(t);return this.textMode===i.TEXTMODE.RCDATA?e.replace(/&/g,"&amp;").replace(/</g,"&lt;"):this.textMode===i.TEXTMODE.ATTRIBUTE?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;"):e},visitArray:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.visit(t[r]));return e.join("")},visitComment:function(t){throw new Error("Can't have a comment here")},visitCharRef:function(t){return this.textMode===i.TEXTMODE.RCDATA||this.textMode===i.TEXTMODE.ATTRIBUTE?t.html:t.str},visitRaw:function(t){return t.value},visitTag:function(t){return this.visit(this.toHTML(t))},visitObject:function(t){throw new Error("Unexpected object in htmljs in toText: "+t)},toHTML:function(t){return i.toHTML(t)}}),i.ToHTMLVisitor=i.Visitor.extend(),i.ToHTMLVisitor.def({visitNull:function(t){return""},visitPrimitive:function(t){var e=String(t);return e.replace(/&/g,"&amp;").replace(/</g,"&lt;")},visitArray:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.visit(t[r]));return e.join("")},visitComment:function(t){return"<!--"+t.sanitizedValue+"-->"},visitCharRef:function(t){return t.html},visitRaw:function(t){return t.value},visitTag:function(t){var e=[],r=t.tagName,n=t.children,a=t.attrs;if(a){a=i.flattenAttributes(a);for(var o in a)if("value"===o&&"textarea"===r)n=[a[o],n];else{var s=this.toText(a[o],i.TEXTMODE.ATTRIBUTE);e.push(" "+o+'="'+s+'"')}}var u="<"+r+e.join("")+">",l=[],f;if("textarea"===r){for(var c=0;c<n.length;c++)l.push(this.toText(n[c],i.TEXTMODE.RCDATA));f=l.join(""),"\n"===f.slice(0,1)&&(f="\n"+f)}else{for(var c=0;c<n.length;c++)l.push(this.visit(n[c]));f=l.join("")}var h=u+f;return(n.length||!i.isVoidElement(r))&&(h+="</"+r+">"),h},visitObject:function(t){throw new Error("Unexpected object in htmljs in toHTML: "+t)},toText:function(t,e){return i.toText(t,e)}})}.call(this),function(){i.Tag=function(){},i.Tag.prototype.tagName="",i.Tag.prototype.attrs=null,i.Tag.prototype.children=Object.freeze?Object.freeze([]):[],i.Tag.prototype.htmljsType=i.Tag.htmljsType=["Tag"];var t=function(t){var e=function(){var t=this instanceof i.Tag?this:new e,r=0,n=arguments.length&&arguments[0];if(n&&"object"==typeof n)if(i.isConstructedObject(n)){if(n instanceof i.Attrs){var o=n.value;1===o.length?t.attrs=o[0]:o.length>1&&(t.attrs=o),r++}}else t.attrs=n,r++;return r<arguments.length&&(t.children=a.call(arguments,r)),t};return e.prototype=new i.Tag,e.prototype.constructor=e,e.prototype.tagName=t,e},e=i.Attrs=function(){var t=this instanceof e?this:new e;return t.value=a.call(arguments),t};i.getTag=function(e){var r=i.getSymbolName(e);if(r===e)throw new Error("Use the lowercase or camelCase form of '"+e+"' here");return i[r]||(i[r]=t(e)),i[r]},i.ensureTag=function(t){i.getTag(t)},i.isTagEnsured=function(t){return i.isKnownElement(t)},i.getSymbolName=function(t){return t.toUpperCase().replace(/-/g,"_")},i.knownElementNames="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption center cite code col colgroup command data datagrid datalist dd del details dfn dir div dl dt em embed eventsource fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins isindex kbd keygen label legend li link main map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),i.knownSVGElementNames="altGlyph altGlyphDef altGlyphItem animate animateColor animateMotion animateTransform circle clipPath color-profile cursor defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font font-face font-face-format font-face-name font-face-src font-face-uri foreignObject g glyph glyphRef hkern image line linearGradient marker mask metadata missing-glyph path pattern polygon polyline radialGradient rect script set stop style svg switch symbol text textPath title tref tspan use view vkern".split(" "),i.knownElementNames=i.knownElementNames.concat(i.knownSVGElementNames),i.voidElementNames="area base br col command embed hr img input keygen link meta param source track wbr".split(" ");var r={yes:!0},n=function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=r;return e},o=n(i.voidElementNames),s=n(i.knownElementNames),u=n(i.knownSVGElementNames);i.isKnownElement=function(t){return s[t]===r},i.isKnownSVGElement=function(t){return u[t]===r},i.isVoidElement=function(t){return o[t]===r};for(var l=0;l<i.knownElementNames.length;l++)i.ensureTag(i.knownElementNames[l]);var f=i.CharRef=function(t){if(!(this instanceof f))return new f(t);if(!(t&&t.html&&t.str))throw new Error("HTML.CharRef must be constructed with ({html:..., str:...})");this.html=t.html,this.str=t.str};f.prototype.htmljsType=f.htmljsType=["CharRef"];var c=i.Comment=function(t){if(!(this instanceof c))return new c(t);if("string"!=typeof t)throw new Error("HTML.Comment must be constructed with a string");this.value=t,this.sanitizedValue=t.replace(/^-|--+|-$/g,"")};c.prototype.htmljsType=c.htmljsType=["Comment"];var h=i.Raw=function(t){if(!(this instanceof h))return new h(t);if("string"!=typeof t)throw new Error("HTML.Raw must be constructed with a string");this.value=t};h.prototype.htmljsType=h.htmljsType=["Raw"],i.isArray=function(t){return t instanceof Array},i.isConstructedObject=function(t){return t&&"object"==typeof t&&t.constructor!==Object&&!Object.prototype.hasOwnProperty.call(t,"constructor")},i.isNully=function(t){if(null==t)return!0;if(i.isArray(t)){for(var e=0;e<t.length;e++)if(!i.isNully(t[e]))return!1;return!0}return!1},i.isValidAttributeName=function(t){return/^[:_A-Za-z][:_A-Za-z0-9.\-]*/.test(t)},i.flattenAttributes=function(t){if(!t)return t;var e=i.isArray(t);if(e&&0===t.length)return null;for(var r={},n=0,a=e?t.length:1;a>n;n++){var o=e?t[n]:t;if("object"!=typeof o||i.isConstructedObject(o))throw new Error("Expected plain JS object as attrs, found: "+o);for(var s in o){if(!i.isValidAttributeName(s))throw new Error("Illegal HTML attribute name: "+s);var u=o[s];i.isNully(u)||(r[s]=u)}}return r},i.toHTML=function(t){return(new i.ToHTMLVisitor).visit(t)},i.TEXTMODE={STRING:1,RCDATA:2,ATTRIBUTE:3},i.toText=function(t,e){if(!e)throw new Error("textMode required for HTML.toText");if(e!==i.TEXTMODE.STRING&&e!==i.TEXTMODE.RCDATA&&e!==i.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+e);var r=new i.ToTextVisitor({textMode:e});return r.visit(t)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.htmljs={HTML:i}}();

!function(){var e=Package.meteor.Meteor,n=Package.tracker.Tracker,o=Package.tracker.Deps,r=Package.minimongo.LocalCollection,t=Package.minimongo.Minimongo,i=Package.underscore._,a=Package.random.Random,c,u,f,d;(function(){var e=function(){c._suppressWarnings?c._suppressWarnings--:("undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments),c._loggedWarnings++)},o=r._idStringify,t=r._idParse;c={_suppressWarnings:0,_loggedWarnings:0,observe:function(e,o){var r=null,t=null,a=[],c=n.autorun(function(){var c=e();n.nonreactive(function(){var e;if(t&&(a=i.map(r.fetch(),function(e){return{_id:e._id,item:e}}),t.stop(),t=null),c)if(c instanceof Array)e=f(a,c,o);else{if(!l(c))throw s();var n=d(a,c,o);e=n[0],t=n[1]}else e=u(a,o);v(a,e,o),r=c,a=e})});return{stop:function(){c.stop(),t&&t.stop()}}},fetch:function(e){if(e){if(e instanceof Array)return e;if(l(e))return e.fetch();throw s()}return[]}};var s=function(){return new Error("{{#each}} currently only accepts arrays, cursors or falsey values.")},l=function(e){return e&&i.isObject(e)&&i.isFunction(e.observe)&&i.isFunction(e.fetch)},v=function(e,n,r){var a=Package.minimongo.LocalCollection._diffQueryOrderedChanges,c=[],u=[],f={},d={},s={},l=e.length;i.each(n,function(e,n){u.push({_id:e._id}),d[o(e._id)]=n}),i.each(e,function(e,n){c.push({_id:e._id}),f[o(e._id)]=n,s[o(e._id)]=n}),a(c,u,{addedBefore:function(e,t,a){var c=a?s[o(a)]:l;i.each(s,function(e,n){e>=c&&s[n]++}),l++,s[o(e)]=c,r.addedAt(e,n[d[o(e)]].item,c,a)},movedBefore:function(e,t){var a=s[o(e)],c=t?s[o(t)]:l-1;i.each(s,function(e,n){e>=a&&c>=e?s[n]--:a>=e&&e>=c&&s[n]++}),s[o(e)]=c,r.movedTo(e,n[d[o(e)]].item,a,c,t)},removed:function(n){var t=s[o(n)];i.each(s,function(e,n){e>=t&&s[n]--}),delete s[o(n)],l--,r.removedAt(n,e[f[o(n)]].item,t)}}),i.each(d,function(o,a){var c=t(a);if(i.has(f,a)){var u=n[o].item,d=e[f[a]].item;("object"==typeof u||u!==d)&&r.changedAt(c,u,d,o)}})};u=function(e,n){return[]},f=function(n,r,t){var c={},u=i.map(r,function(n,t){var i;if("string"==typeof n)i="-"+n;else if("number"==typeof n||"boolean"==typeof n||void 0===n)i=n;else{if("object"!=typeof n)throw new Error("{{#each}} doesn't support arrays with elements of type "+typeof n);i=n&&n._id||t}var u=o(i);return c[u]?("object"==typeof n&&"_id"in n&&e("duplicate id "+i+" in",r),i=a.id()):c[u]=!0,{_id:i,item:n}});return u},d=function(e,n,o){var r=!0,t=[],i=n.observe({addedAt:function(e,n,i){if(r){if(null!==i)throw new Error("Expected initial data from observe in order");t.push({_id:e._id,item:e})}else o.addedAt(e._id,e,n,i)},changedAt:function(e,n,r){o.changedAt(e._id,e,n,r)},removedAt:function(e,n){o.removedAt(e._id,e,n)},movedTo:function(e,n,r,t){o.movedTo(e._id,e,n,r,t)}});return r=!1,[t,i]}}).call(this),"undefined"==typeof Package&&(Package={}),Package["observe-sequence"]={ObserveSequence:c}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,r;(function(){r=function(e,n){return this instanceof r?(this.curValue=e,this.equalsFunc=n,void(this.dep=new t.Dependency)):new r(e,n)},r._isEqual=function(e,t){var n=e,r=t;return n!==r?!1:!n||"number"==typeof n||"boolean"==typeof n||"string"==typeof n},r.prototype.get=function(){return t.active&&this.dep.depend(),this.curValue},r.prototype.set=function(e){var t=this.curValue;(this.equalsFunc||r._isEqual)(t,e)||(this.curValue=e,this.dep.changed())},r.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"},r.prototype._numListeners=function(){var e=0;for(var t in this.dep._dependentsById)e++;return e}}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-var"]={ReactiveVar:r}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,n=Package.jquery.jQuery,r=Package.tracker.Tracker,i=Package.tracker.Deps,a=Package.underscore._,o=Package.htmljs.HTML,s=Package["observe-sequence"].ObserveSequence,u=Package["reactive-var"].ReactiveVar,l,c,d,f,p,h;(function(){l={},l._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),l._warn=function(e){e="Warning: "+e,"undefined"!=typeof Log&&Log&&Log.warn?Log.warn(e):"undefined"!=typeof console&&console.log&&console.log(e)}}).call(this),function(){var e={};l._DOMBackend=e;var t="undefined"!=typeof n?n:"undefined"!=typeof Package?Package.jquery&&Package.jquery.jQuery:null;if(!t)throw new Error("jQuery not found");e._$jq=t,e.parseHTML=function(e){return t.parseHTML(e)||[]},e.Events={delegateEvents:function(e,n,r,i){t(e).on(n,r,i)},undelegateEvents:function(e,n,r){t(e).off(n,"**",r)},bindEventCapturer:function(n,r,i,a){var o=t(n),s=function(e){e=t.event.fix(e),e.currentTarget=e.target;var r=t(e.currentTarget);r.is(o.find(i))&&a.call(n,e)};a._meteorui_wrapper=s,r=e.Events.parseEventType(r),n.addEventListener(r,s,!0)},unbindEventCapturer:function(t,n,r){n=e.Events.parseEventType(n),t.removeEventListener(n,r._meteorui_wrapper,!0)},parseEventType:function(e){var t=e.indexOf(".");return t>=0?e.slice(0,t):e}};var r=function(){},i=function(e){this.next=this,this.prev=this,this.func=e};i.prototype.linkBefore=function(e){this.prev=e.prev,this.next=e,e.prev.next=this,e.prev=this},i.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},i.prototype.go=function(){var e=this.func;e&&e()},i.prototype.stop=i.prototype.unlink,e.Teardown={_JQUERY_EVENT_NAME:"blaze_teardown_watcher",_CB_PROP:"$blaze_teardown_callbacks",onElementTeardown:function(n,a){var o=new i(a),s=e.Teardown._CB_PROP;return n[s]||(n[s]=new i,t(n).on(e.Teardown._JQUERY_EVENT_NAME,r)),o.linkBefore(n[s]),o},tearDownElement:function(e){for(var n=[],r=e.getElementsByTagName("*"),i=0;i<r.length;i++)n.push(r[i]);n.push(e),t.cleanData(n)}},t.event.special[e.Teardown._JQUERY_EVENT_NAME]={setup:function(){},teardown:function(){var t=this,n=t[e.Teardown._CB_PROP];if(n){for(var r=n.next;r!==n;)r.go(),r=r.next;n.go(),t[e.Teardown._CB_PROP]=null}}},e.findBySelector=function(e,n){return t(e,n)}}.call(this),function(){var e=Object.freeze?Object.freeze([]):[];l._DOMRange=function(n){if(!(this instanceof t))return new t(n);var r=n||e;if(!r||"number"!=typeof r.length)throw new Error("Expected array");for(var i=0;i<r.length;i++)this._memberIn(r[i]);this.members=r,this.emptyRangePlaceholder=null,this.attached=!1,this.parentElement=null,this.parentRange=null,this.attachedCallbacks=e};var t=l._DOMRange;t._USE_COMMENT_PLACEHOLDERS=function(){var e=!1,t=document.createTextNode("");try{t.someProp=!0}catch(n){e=!0}return e}(),t._insert=function(e,n,r,i){var a=e;a instanceof t?a.attach(n,r,i):i?t._moveNodeWithHooks(a,n,r):t._insertNodeWithHooks(a,n,r)},t._remove=function(e){var n=e;n instanceof t?n.detach():t._removeNodeWithHooks(n)},t._removeNodeWithHooks=function(e){e.parentNode&&(1===e.nodeType&&e.parentNode._uihooks&&e.parentNode._uihooks.removeElement?e.parentNode._uihooks.removeElement(e):e.parentNode.removeChild(e))},t._insertNodeWithHooks=function(e,t,n){n=n||null,1===e.nodeType&&t._uihooks&&t._uihooks.insertElement?t._uihooks.insertElement(e,n):t.insertBefore(e,n)},t._moveNodeWithHooks=function(e,t,n){e.parentNode===t&&(n=n||null,1===e.nodeType&&t._uihooks&&t._uihooks.moveElement?t._uihooks.moveElement(e,n):t.insertBefore(e,n))},t.forElement=function(e){if(1!==e.nodeType)throw new Error("Expected element, found: "+e);for(var t=null;e&&!t;)t=e.$blaze_range||null,t||(e=e.parentNode);return t},t.prototype.attach=function(e,n,r,i){if((r||i)&&(this.parentElement!==e||!this.attached))throw new Error("Can only move or replace an attached DOMRange, and only under the same parent element");var a=this.members;if(a.length){this.emptyRangePlaceholder=null;for(var o=0;o<a.length;o++)t._insert(a[o],e,n,r)}else{var s=t._USE_COMMENT_PLACEHOLDERS?document.createComment(""):document.createTextNode("");this.emptyRangePlaceholder=s,e.insertBefore(s,n||null)}if(this.attached=!0,this.parentElement=e,!r&&!i)for(var o=0;o<this.attachedCallbacks.length;o++){var u=this.attachedCallbacks[o];u.attached&&u.attached(this,e)}},t.prototype.setMembers=function(e){var t=e;if(!t||"number"!=typeof t.length)throw new Error("Expected array");for(var n=this.members,r=0;r<n.length;r++)this._memberOut(n[r]);for(var r=0;r<t.length;r++)this._memberIn(t[r]);if(this.attached){if(t.length||n.length){var i=this.lastNode().nextSibling,a=this.parentElement;this.detach(!0),this.members=t,this.attach(a,i,!1,!0)}}else this.members=t},t.prototype.firstNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var e=this.members[0];return e instanceof t?e.firstNode():e},t.prototype.lastNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var e=this.members[this.members.length-1];return e instanceof t?e.lastNode():e},t.prototype.detach=function(e){if(!this.attached)throw new Error("Must be attached");var n=this.parentElement,r=this.members;if(r.length)for(var i=0;i<r.length;i++)t._remove(r[i]);else{var a=this.emptyRangePlaceholder;this.parentElement.removeChild(a),this.emptyRangePlaceholder=null}if(!e){this.attached=!1,this.parentElement=null;for(var i=0;i<this.attachedCallbacks.length;i++){var o=this.attachedCallbacks[i];o.detached&&o.detached(this,n)}}},t.prototype.addMember=function(e,n,r){var i=this.members;if(!(n>=0&&n<=i.length))throw new Error("Bad index in range.addMember: "+n);if(r||this._memberIn(e),this.attached)if(0===i.length)this.setMembers([e]);else{var a;if(n===i.length)a=this.lastNode().nextSibling;else{var o=i[n];a=o instanceof t?o.firstNode():o}i.splice(n,0,e),t._insert(e,this.parentElement,a,r)}else i.splice(n,0,e)},t.prototype.removeMember=function(n,r){var i=this.members;if(!(n>=0&&n<i.length))throw new Error("Bad index in range.removeMember: "+n);if(r)i.splice(n,1);else{var a=i[n];this._memberOut(a),1===i.length?this.setMembers(e):(i.splice(n,1),this.attached&&t._remove(a))}},t.prototype.moveMember=function(e,t){var n=this.members[e];this.removeMember(e,!0),this.addMember(n,t,!0)},t.prototype.getMember=function(e){var t=this.members;if(!(e>=0&&e<t.length))throw new Error("Bad index in range.getMember: "+e);return this.members[e]},t.prototype._memberIn=function(e){e instanceof t?e.parentRange=this:1===e.nodeType&&(e.$blaze_range=this)},t._destroy=function(e,n){e instanceof t?e.view&&l._destroyView(e.view,n):n||1!==e.nodeType||e.$blaze_range&&(l._destroyNode(e),e.$blaze_range=null)},t.prototype._memberOut=t._destroy,t.prototype.destroyMembers=function(e){for(var t=this.members,n=0;n<t.length;n++)this._memberOut(t[n],e)},t.prototype.destroy=function(e){t._destroy(this,e)},t.prototype.containsElement=function(e){if(!this.attached)throw new Error("Must be attached");if(!l._elementContains(this.parentElement,e))return!1;for(;e.parentNode!==this.parentElement;)e=e.parentNode;for(var t=e.$blaze_range;t&&t!==this;)t=t.parentRange;return t===this},t.prototype.containsRange=function(e){if(!this.attached)throw new Error("Must be attached");if(!e.attached)return!1;if(e.parentElement!==this.parentElement)return this.containsElement(e.parentElement);if(e===this)return!1;for(;e&&e!==this;)e=e.parentRange;return e===this},t.prototype.onAttached=function(e){this.onAttachedDetached({attached:e})},t.prototype.onAttachedDetached=function(t){this.attachedCallbacks===e&&(this.attachedCallbacks=[]),this.attachedCallbacks.push(t)},t.prototype.$=function(e){var t=this,n=this.parentElement;if(!n)throw new Error("Can't select in removed DomRange");if(11===n.nodeType)throw new Error("Can't use $ on an offscreen range");var r=l._DOMBackend.findBySelector(e,n),i=function(e){return"number"==typeof e&&(e=this),t.containsElement(e)};if(r.filter)r=r.filter(i);else{for(var a=[],o=0;o<r.length;o++){var s=r[o];i(s)&&a.push(s)}r=a}return r},l._elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)}}.call(this),function(){var e=l._EventSupport={},t=l._DOMBackend,n=e.eventsToDelegate={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1},r=e.EVENT_MODE={TBD:0,BUBBLING:1,CAPTURING:2},i=1,o=function(e,o,s,u,l){this.elem=e,this.type=o,this.selector=s,this.handler=u,this.recipient=l,this.id=i++,this.mode=r.TBD,this.delegatedHandler=function(e){return function(t){return e.selector||t.currentTarget===t.target?e.handler.apply(e.recipient,arguments):void 0}}(this);var c=e.addEventListener&&!a.has(n,t.Events.parseEventType(o));c?this.capturingHandler=function(e){return function(n){if(e.mode===r.TBD){if(n.bubbles)return e.mode=r.BUBBLING,void t.Events.unbindEventCapturer(e.elem,e.type,e.capturingHandler);e.mode=r.CAPTURING,t.Events.undelegateEvents(e.elem,e.type,e.delegatedHandler)}e.delegatedHandler(n)}}(this):this.mode=r.BUBBLING};e.HandlerRec=o,o.prototype.bind=function(){this.mode!==r.BUBBLING&&t.Events.bindEventCapturer(this.elem,this.type,this.selector||"*",this.capturingHandler),this.mode!==r.CAPTURING&&t.Events.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)},o.prototype.unbind=function(){this.mode!==r.BUBBLING&&t.Events.unbindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==r.CAPTURING&&t.Events.undelegateEvents(this.elem,this.type,this.delegatedHandler)},e.listen=function(e,t,n,r,i,a){try{e=e}finally{}var s=[];t.replace(/[^ /]+/g,function(e){s.push(e)});for(var u=[],l=0,c=s.length;c>l;l++){var d=s[l],f=e.$blaze_events;f||(f=e.$blaze_events={});var p=f[d];p||(p=f[d]={},p.handlers=[]);var h=p.handlers,m=new o(e,d,n,r,i);if(u.push(m),m.bind(),h.push(m),a)for(var w=a(i);w;w=a(w))for(var v=0,_=h.length;_>v;v++){var g=h[v];g.recipient===w&&(g.unbind(),g.bind(),h.splice(v,1),h.push(g),v--,_--)}}return{stop:function(){var t=e.$blaze_events;if(t){for(var n=0;n<u.length;n++){var r=u[n],i=t[r.type];if(i)for(var a=i.handlers,o=a.length-1;o>=0;o--)a[o]===r&&(r.unbind(),a.splice(o,1))}u.length=0}}}}}.call(this),function(){var n=!1;l._allowJavascriptUrls=function(){n=!0},l._javascriptUrlsAllowed=function(){return n},f=function(e,t){this.name=e,this.value=t},l._AttributeHandler=f,f.prototype.update=function(e,t,n){null===n?null!==t&&e.removeAttribute(this.name):e.setAttribute(this.name,n)},f.extend=function(e){var t=this,n=function r(){f.apply(this,arguments)};return n.prototype=new t,n.extend=t.extend,e&&a.extend(n.prototype,e),n};var r=f.extend({update:function(e,t,n){if(!this.getCurrentValue||!this.setValue||!this.parseValue)throw new Error("Missing methods in subclass of 'DiffingAttributeHandler'");var r=t?this.parseValue(t):{},i=n?this.parseValue(n):{},o=this.getCurrentValue(e),s=o?this.parseValue(o):{};a.each(a.keys(r),function(e){e in i||delete s[e]}),a.each(a.keys(i),function(e){s[e]=i[e]}),this.setValue(e,a.values(s).join(" "))}}),i=r.extend({getCurrentValue:function(e){return e.className},setValue:function(e,t){e.className=t},parseValue:function(e){var t={};return a.each(e.split(" "),function(e){e&&(t[e]=e)}),t}}),o=i.extend({getCurrentValue:function(e){return e.className.baseVal},setValue:function(e,t){e.setAttribute("class",t)}}),s=r.extend({getCurrentValue:function(e){return e.getAttribute("style")},setValue:function(e,t){""===t?e.removeAttribute("style"):e.setAttribute("style",t)},parseValue:function(e){for(var n={},r=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*(?:\'(?:\\\'|.)*?\'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+[;\s]*/g,i=r.exec(e);i;)n[" "+i[1]]=i[0].trim?i[0].trim():t.trim(i[0]),i=r.exec(e);return n}}),u=f.extend({update:function(e,t,n){var r=this.name;null==n?null!=t&&(e[r]=!1):e[r]=!0}}),c=f.extend({update:function(e,t,n){n!==e.value&&(e.value=n)}}),d=f.extend({update:function(e,t,n){var r="http://www.w3.org/1999/xlink";null===n?null!==t&&e.removeAttributeNS(r,this.name):e.setAttributeNS(r,this.name,this.value)}}),m=function(e){return"ownerSVGElement"in e},w=function(e,t){var n={FORM:["action"],BODY:["background"],BLOCKQUOTE:["cite"],Q:["cite"],DEL:["cite"],INS:["cite"],OBJECT:["classid","codebase","data","usemap"],APPLET:["codebase"],A:["href"],AREA:["href"],LINK:["href"],BASE:["href"],IMG:["longdesc","src","usemap"],FRAME:["longdesc","src"],IFRAME:["longdesc","src"],HEAD:["profile"],SCRIPT:["src"],INPUT:["src","usemap","formaction"],BUTTON:["formaction"],BASE:["href"],MENUITEM:["icon"],HTML:["manifest"],VIDEO:["poster"]};if("itemid"===t)return!0;var r=n[e]||[];return a.contains(r,t)};if(e.isClient)var v=document.createElement("A");var _=function(t){if(e.isClient)return v.href=t,(v.protocol||"").toLowerCase();throw new Error("getUrlProtocol not implemented on the server")},g=f.prototype.update,E=f.extend({update:function(e,t,n){var r=this,i=arguments;if(l._javascriptUrlsAllowed())g.apply(r,i);else{var a="javascript:"===_(n);a?(l._warn("URLs that use the 'javascript:' protocol are not allowed in URL attribute values. Call Blaze._allowJavascriptUrls() to enable them."),g.apply(r,[e,t,null])):g.apply(r,i)}}});p=function(e,t,n){return"class"===t?m(e)?new o(t,n):new i(t,n):"style"===t?new s(t,n):"OPTION"===e.tagName&&"selected"===t||"INPUT"===e.tagName&&"checked"===t?new u(t,n):"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName||"value"!==t?"xlink:"===t.substring(0,6)?new d(t.substring(6),n):w(e.tagName,t)?new E(t,n):new f(t,n):new c(t,n)},h=function(e){this.elem=e,this.handlers={}},h.prototype.update=function(e){var t=this.elem,n=this.handlers;for(var r in n)if(!a.has(e,r)){var i=n[r],o=i.value;i.value=null,i.update(t,o,null),delete n[r]}for(var r in e){var i=null,o,s=e[r];a.has(n,r)?(i=n[r],o=i.value):null!==s&&(i=p(t,r,s),n[r]=i,o=null),o!==s&&(i.value=s,i.update(t,o,s),null===s&&delete n[r])}}}.call(this),function(){l._DOMMaterializer=o.Visitor.extend(),l._DOMMaterializer.def({visitNull:function(e,t){return t},visitPrimitive:function(e,t){var n=String(e);return t.push(document.createTextNode(n)),t},visitCharRef:function(e,t){return this.visitPrimitive(e.str,t)},visitArray:function(e,t){for(var n=0;n<e.length;n++)this.visit(e[n],t);return t},visitComment:function(e,t){return t.push(document.createComment(e.sanitizedValue)),t},visitRaw:function(e,t){for(var n=l._DOMBackend.parseHTML(e.value),r=0;r<n.length;r++)t.push(n[r]);return t},visitTag:function(t,n){var i=this,s=t.tagName,u;u=(o.isKnownSVGElement(s)||e(t))&&document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s);var c=t.attrs,d=t.children;if("textarea"===s&&t.children.length&&!(c&&"value"in c)){if("function"==typeof c||o.isArray(c))throw new Error("Can't have reactive children of TEXTAREA node; use the 'value' attribute instead.");c=a.extend({},c||null),c.value=l._expand(d,i.parentView),d=[]}if(c){var f=new h(u),p=function(){var e=i.parentView,t=l._expandAttributes(c,e),n=o.flattenAttributes(t),r={};for(var a in n)r[a]=l._toText(n[a],e,o.TEXTMODE.STRING);f.update(r)},m;m=i.parentView?i.parentView.autorun(p):r.nonreactive(function(){return r.autorun(function(){r._withCurrentView(i.parentView,p)})}),l._DOMBackend.Teardown.onElementTeardown(u,function g(){m.stop()})}for(var w=i.visit(d,[]),v=0;v<w.length;v++){var _=w[v];_ instanceof l._DOMRange?_.attach(u):u.appendChild(_)}return n.push(u),n},visitObject:function(e,t){return e instanceof l.Template&&(e=e.constructView()),e instanceof l.View?(t.push(l._materializeView(e,this.parentView)),t):o.Visitor.prototype.visitObject.call(this,e)}});var e=function(e){return"a"===e.tagName&&e.attrs&&void 0!==e.attrs["xlink:href"]}}.call(this),function(){var t;l._throwNextException=!1,l._reportException=function(n,r){if(l._throwNextException)throw l._throwNextException=!1,n;t||(t=function(){return"undefined"!=typeof e?e._debug:"undefined"!=typeof console&&console.log?console.log:function(){}}),t()(r||"Exception caught in template:",n.stack||n.message)},l._wrapCatchingExceptions=function(e,t){return"function"!=typeof e?e:function(){try{return e.apply(this,arguments)}catch(n){l._reportException(n,"Exception in "+t+":")}}}}.call(this),function(){l.View=function(e,t){return this instanceof l.View?("function"==typeof e&&(t=e,e=""),this.name=e,this._render=t,this._callbacks={created:null,rendered:null,destroyed:null},this.isCreated=!1,this._isCreatedForExpansion=!1,this.isRendered=!1,this._isAttached=!1,this.isDestroyed=!1,this._isInRender=!1,this.parentView=null,this._domrange=null,void(this.renderCount=0)):new l.View(e,t)},l.View.prototype._render=function(){return null},l.View.prototype.onViewCreated=function(e){this._callbacks.created=this._callbacks.created||[],this._callbacks.created.push(e)},l.View.prototype._onViewRendered=function(e){this._callbacks.rendered=this._callbacks.rendered||[],this._callbacks.rendered.push(e)},l.View.prototype.onViewReady=function(e){var t=this,n=function(){r.afterFlush(function(){t.isDestroyed||l._withCurrentView(t,function(){e.call(t)})})};t._onViewRendered(function i(){t.isDestroyed||(t._domrange.attached?n():t._domrange.onAttached(n))})},l.View.prototype.onViewDestroyed=function(e){this._callbacks.destroyed=this._callbacks.destroyed||[],this._callbacks.destroyed.push(e)},l.View.prototype.autorun=function(e,t){var n=this;if(!n.isCreated)throw new Error("View#autorun must be called from the created callback at the earliest");if(this._isInRender)throw new Error("Can't call View#autorun from inside render(); try calling it from the created or rendered callback");if(r.active)throw new Error("Can't call View#autorun from a Tracker Computation; try calling it from the created or rendered callback");var i=r.autorun(function a(r){return l._withCurrentView(t||n,function(){return e.call(n,r)})});return n.onViewDestroyed(function(){i.stop()}),i},l.View.prototype.firstNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.firstNode()},l.View.prototype.lastNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.lastNode()},l._fireCallbacks=function(e,t){l._withCurrentView(e,function(){r.nonreactive(function n(){for(var n=e._callbacks[t],r=0,i=n&&n.length;i>r;r++)n[r].call(e)})})},l._createView=function(e,t,n){if(e.isCreated)throw new Error("Can't render the same View twice");e.parentView=t||null,e.isCreated=!0,n&&(e._isCreatedForExpansion=!0),l._fireCallbacks(e,"created")},l._materializeView=function(e,t){l._createView(e,t);var n,i;return r.nonreactive(function(){e.autorun(function a(t){e.renderCount++,e._isInRender=!0;var a=e._render();e._isInRender=!1,r.nonreactive(function o(){var r=new l._DOMMaterializer({parentView:e}),o=r.visit(a,[]);(t.firstRun||!l._isContentEqual(i,a))&&(t.firstRun?(n=new l._DOMRange(o),e._domrange=n,n.view=e,e.isRendered=!0):n.setMembers(o),l._fireCallbacks(e,"rendered"))}),i=a,r.onInvalidate(function(){n.destroyMembers()})});var t=null;n.onAttached(function o(n,r){e._isAttached=!0,t=l._DOMBackend.Teardown.onElementTeardown(r,function i(){l._destroyView(e,!0)})}),e.onViewDestroyed(function(){t&&t.stop(),t=null})}),n},l._expandView=function(e,t){l._createView(e,t,!0),e._isInRender=!0;var n=l._withCurrentView(e,function(){return e._render()});e._isInRender=!1;var i=l._expand(n,e);return r.active?r.onInvalidate(function(){l._destroyView(e)}):l._destroyView(e),i},l._HTMLJSExpander=o.TransformingVisitor.extend(),l._HTMLJSExpander.def({visitObject:function(e){return e instanceof l.Template&&(e=e.constructView()),e instanceof l.View?l._expandView(e,this.parentView):o.TransformingVisitor.prototype.visitObject.call(this,e)},visitAttributes:function(e){return"function"==typeof e&&(e=l._withCurrentView(this.parentView,e)),o.TransformingVisitor.prototype.visitAttributes.call(this,e)},visitAttribute:function(e,t,n){return"function"==typeof t&&(t=l._withCurrentView(this.parentView,t)),o.TransformingVisitor.prototype.visitAttribute.call(this,e,t,n)}});var e=function(){var e=l.currentView;return e&&e._isInRender?e:null};l._expand=function(t,n){return n=n||e(),new l._HTMLJSExpander({parentView:n}).visit(t)},l._expandAttributes=function(t,n){return n=n||e(),new l._HTMLJSExpander({parentView:n}).visitAttributes(t)},l._destroyView=function(e,t){e.isDestroyed||(e.isDestroyed=!0,l._fireCallbacks(e,"destroyed"),e._domrange&&e._domrange.destroyMembers(t))},l._destroyNode=function(e){1===e.nodeType&&l._DOMBackend.Teardown.tearDownElement(e)},l._isContentEqual=function(e,t){return e instanceof o.Raw?t instanceof o.Raw&&e.value===t.value:null==e?null==t:e===t&&("number"==typeof e||"boolean"==typeof e||"string"==typeof e)},l.currentView=null,l._withCurrentView=function(e,t){var n=l.currentView;try{return l.currentView=e,t()}finally{l.currentView=n}};var t=function(e){if(null===e)throw new Error("Can't render null");if("undefined"==typeof e)throw new Error("Can't render undefined");if(!(e instanceof l.View||e instanceof l.Template||"function"==typeof e))try{(new o.Visitor).visit(e)}catch(t){throw new Error("Expected Template or View")}},n=function(e){if(t(e),e instanceof l.Template)return e.constructView();if(e instanceof l.View)return e;var n=e;return"function"!=typeof n&&(n=function(){return e}),l.View("render",n)},i=function(e){return t(e),"function"!=typeof e?function(){return e}:e};l.render=function(t,r,i,a){if(r||l._warn("Blaze.render without a parent element is deprecated. You must specify where to insert the rendered content."),i instanceof l.View&&(a=i,i=null),r&&"number"!=typeof r.nodeType)throw new Error("'parentElement' must be a DOM node");if(i&&"number"!=typeof i.nodeType)throw new Error("'nextNode' must be a DOM node");a=a||e();var o=n(t);return l._materializeView(o,a),r&&o._domrange.attach(r,i),o},l.insert=function(e,t,n){if(l._warn("Blaze.insert has been deprecated.  Specify where to insert the rendered content in the call to Blaze.render."),!(e&&e._domrange instanceof l._DOMRange))throw new Error("Expected template rendered with Blaze.render");e._domrange.attach(t,n)},l.renderWithData=function(e,t,n,r,a){return l.render(l._TemplateWith(t,i(e)),n,r,a)},l.remove=function(e){if(!(e&&e._domrange instanceof l._DOMRange))throw new Error("Expected template rendered with Blaze.render");if(!e.isDestroyed){var t=e._domrange;t.attached&&!t.parentRange&&t.detach(),t.destroy()}},l.toHTML=function(t,r){return r=r||e(),o.toHTML(l._expandView(n(t),r))},l.toHTMLWithData=function(t,n,r){return r=r||e(),o.toHTML(l._expandView(l._TemplateWith(n,i(t)),r))},l._toText=function(t,n,r){if("function"==typeof t)throw new Error("Blaze._toText doesn't take a function, just HTMLjs");if(null==n||n instanceof l.View||(r=n,n=null),n=n||e(),!r)throw new Error("textMode required");if(r!==o.TEXTMODE.STRING&&r!==o.TEXTMODE.RCDATA&&r!==o.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+r);return o.toText(l._expand(t,n),r)},l.getData=function(e){var t;if(e)if(e instanceof l.View){var n=e;t="with"===n.name?n:l.getView(n,"with")}else{if("number"!=typeof e.nodeType)throw new Error("Expected DOM element or View");if(1!==e.nodeType)throw new Error("Expected DOM element");t=l.getView(e,"with")}else t=l.getView("with");return t?t.dataVar.get():null},l.getElementData=function(e){if(l._warn("Blaze.getElementData has been deprecated.  Use Blaze.getData(element) instead."),1!==e.nodeType)throw new Error("Expected DOM element");return l.getData(e)},l.getView=function(e,t){var n=t;if("string"==typeof e&&(n=e,e=null),e){if(e instanceof l.View)return l._getParentView(e,n);if("number"==typeof e.nodeType)return l._getElementView(e,n);throw new Error("Expected DOM element or View")}return l._getCurrentView(n)},l._getCurrentView=function(e){var t=l.currentView;if(!t)throw new Error("There is no current view");if(e){for(;t&&t.name!==e;)t=t.parentView;return t||null}return t},l._getParentView=function(e,t){var n=e.parentView;if(t)for(;n&&n.name!==t;)n=n.parentView;return n||null},l._getElementView=function(e,t){for(var n=l._DOMRange.forElement(e),r=null;n&&!r;)r=n.view||null,r||(n=n.parentRange?n.parentRange:l._DOMRange.forElement(n.parentElement));if(t){for(;r&&r.name!==t;)r=r.parentView;return r||null}return r},l._addEventMap=function(e,t,n){n=n||null;var r=[];if(!e._domrange)throw new Error("View must have a DOMRange");e._domrange.onAttached(function i(o,s){a.each(t,function(t,i){var u=i.split(/,\s+/);a.each(u,function(i){var a=i.split(/\s+/);if(0!==a.length){var u=a.shift(),c=a.join(" ");r.push(l._EventSupport.listen(s,u,c,function(r){if(!o.containsElement(r.currentTarget))return null;var i=n||this,a=arguments;return l._withCurrentView(e,function(){return t.apply(i,a)})},o,function(e){return e.parentRange}))}})})}),e.onViewDestroyed(function(){a.each(r,function(e){e.stop()}),r.length=0})}}.call(this),function(){l._calculateCondition=function(e){return e instanceof Array&&0===e.length&&(e=!1),!!e},l.With=function(e,t){var n=l.View("with",t);return n.dataVar=new u,n.onViewCreated(function(){"function"==typeof e?n.autorun(function(){n.dataVar.set(e())},n.parentView):n.dataVar.set(e)}),n},l.If=function(e,t,n,r){var i=new u,a=l.View(r?"unless":"if",function(){return i.get()?t():n?n():null});return a.__conditionVar=i,a.onViewCreated(function(){this.autorun(function(){var t=l._calculateCondition(e());i.set(r?!t:t)},this.parentView)}),a},l.Unless=function(e,t,n){return l.If(e,t,n,!0)},l.Each=function(e,t,n){var i=l.View("each",function(){var e=this.initialSubviews;return this.initialSubviews=null,this._isCreatedForExpansion&&(this.expandedValueDep=new r.Dependency,this.expandedValueDep.depend()),e});return i.initialSubviews=[],i.numItems=0,i.inElseMode=!1,i.stopHandle=null,i.contentFunc=t,i.elseFunc=n,i.argVar=new u,i.onViewCreated(function(){i.autorun(function(){i.argVar.set(e())},i.parentView),i.stopHandle=s.observe(function(){return i.argVar.get()},{addedAt:function(e,t,n){r.nonreactive(function(){var e=l.With(t,i.contentFunc);if(i.numItems++,i.expandedValueDep)i.expandedValueDep.changed();else if(i._domrange){i.inElseMode&&(i._domrange.removeMember(0),i.inElseMode=!1);var r=l._materializeView(e,i);i._domrange.addMember(r,n)}else i.initialSubviews.splice(n,0,e)})},removedAt:function(e,t,n){r.nonreactive(function(){i.numItems--,i.expandedValueDep?i.expandedValueDep.changed():i._domrange?(i._domrange.removeMember(n),i.elseFunc&&0===i.numItems&&(i.inElseMode=!0,i._domrange.addMember(l._materializeView(l.View("each_else",i.elseFunc),i),0))):i.initialSubviews.splice(n,1)})},changedAt:function(e,t,n,a){r.nonreactive(function(){var e;i.expandedValueDep?i.expandedValueDep.changed():e=i._domrange?i._domrange.getMember(a).view:i.initialSubviews[a],e.dataVar.set(t)})},movedTo:function(e,t,n,a){r.nonreactive(function(){if(i.expandedValueDep)i.expandedValueDep.changed();else if(i._domrange)i._domrange.moveMember(n,a);else{var e=i.initialSubviews,t=e[n];e.splice(n,1),e.splice(a,0,t)}})}}),i.elseFunc&&0===i.numItems&&(i.inElseMode=!0,i.initialSubviews[0]=l.View("each_else",i.elseFunc))}),i.onViewDestroyed(function(){i.stopHandle&&i.stopHandle.stop()}),i},l._TemplateWith=function(e,t){var n,r=e;"function"!=typeof e&&(r=function(){return e});var i=function(){var e=null;return n.parentView&&"InOuterTemplateScope"===n.parentView.name&&(e=n.parentView.originalParentView),e?l._withCurrentView(e,r):r()};return n=l.With(i,t),n.__isTemplateWith=!0,n},l._InOuterTemplateScope=function(e,t){var n=l.View("InOuterTemplateScope",t),r=e.parentView;return r.__isTemplateWith&&(r=r.parentView),n.onViewCreated(function(){this.originalParentView=this.parentView,this.parentView=r}),n},l.InOuterTemplateScope=l._InOuterTemplateScope}.call(this),function(){l._globalHelpers={},l.registerHelper=function(e,t){l._globalHelpers[e]=t};var e=function(e,t){return"function"!=typeof e?e:function(){return e.apply(t,arguments)}},t=function(e){return"function"==typeof e?function(){var t=l.getData();return null==t&&(t={}),e.apply(t,arguments)}:e};l._OLDSTYLE_HELPER={};var n=l._getTemplateHelper=function(e,t){var n=!1;if(e.__helpers.has(t)){var r=e.__helpers.get(t);if(r!==l._OLDSTYLE_HELPER)return r;n=!0}return t in e?(n||(e.__helpers.set(t,l._OLDSTYLE_HELPER),e._NOWARN_OLDSTYLE_HELPERS||l._warn("Assigning helper with `"+e.viewName+"."+t+" = ...` is deprecated.  Use `"+e.viewName+".helpers(...)` instead.")),e[t]):null},r=function(e){return l._wrapCatchingExceptions(e,"template helper")};l.View.prototype.lookup=function(e,i){var a=this.template,o=i&&i.template,s;if(/^\./.test(e)){if(!/^(\.)+$/.test(e))throw new Error("id starting with dot must be a series of dots");return l._parentData(e.length-1,!0)}return a&&null!=(s=n(a,e))?r(t(s)):o&&e in l.Template&&l.Template[e]instanceof l.Template?l.Template[e]:null!=l._globalHelpers[e]?r(t(l._globalHelpers[e])):function(){var t=arguments.length>0,n=l.getData();if(o&&(!n||!n[e]))throw new Error("No such template: "+e);if(t&&(!n||!n[e]))throw new Error("No such function: "+e);if(!n)return null;var r=n[e];if("function"!=typeof r){if(t)throw new Error("Can't call non-function: "+r);return r}return r.apply(n,arguments)};return null},l._parentData=function(e,t){for(var n=l.getView("with"),r=0;e>r&&n;r++)n=l.getView(n,"with");return n?t?function(){return n.dataVar.get()}:n.dataVar.get():null},l.View.prototype.lookupTemplate=function(e){return this.lookup(e,{template:!0})}}.call(this),function(){l.Template=function(e,n){if(!(this instanceof l.Template))return new l.Template(e,n);if("function"==typeof e&&(n=e,e=""),"string"!=typeof e)throw new Error("viewName must be a String (or omitted)");if("function"!=typeof n)throw new Error("renderFunction must be a function");this.viewName=e,this.renderFunction=n,this.__helpers=new t,this.__eventMaps=[]};var e=l.Template,t=function(){};t.prototype.get=function(e){return this[" "+e]},t.prototype.set=function(e,t){this[" "+e]=t},t.prototype.has=function(e){return" "+e in this},l.isTemplate=function(e){return e instanceof l.Template},e.prototype.constructView=function(t,n){var r=this,i=l.View(r.viewName,r.renderFunction);return i.template=r,i.templateContentBlock=t?new e("(contentBlock)",t):null,i.templateElseBlock=n?new e("(elseBlock)",n):null,(r.__eventMaps||"object"==typeof r.events)&&i._onViewRendered(function(){1===i.renderCount&&(r.__eventMaps.length||"object"!=typeof r.events||e.prototype.events.call(r,r.events),a.each(r.__eventMaps,function(e){l._addEventMap(i,e,i)}))}),i._templateInstance=new l.TemplateInstance(i),i.templateInstance=function(){var e=i._templateInstance;return e.data=l.getData(i),i._domrange&&!i.isDestroyed?(e.firstNode=i._domrange.firstNode(),e.lastNode=i._domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e},r.created&&i.onViewCreated(function(){r.created.call(i.templateInstance())}),r.rendered&&i.onViewReady(function(){r.rendered.call(i.templateInstance())}),r.destroyed&&i.onViewDestroyed(function(){r.destroyed.call(i.templateInstance())}),i},l.TemplateInstance=function(e){if(!(this instanceof l.TemplateInstance))return new l.TemplateInstance(e);if(!(e instanceof l.View))throw new Error("View required");e._templateInstance=this,this.view=e,this.data=null,this.firstNode=null,this.lastNode=null},l.TemplateInstance.prototype.$=function(e){var t=this.view;if(!t._domrange)throw new Error("Can't use $ on template instance with no DOM");return t._domrange.$(e)},l.TemplateInstance.prototype.findAll=function(e){return Array.prototype.slice.call(this.$(e))},l.TemplateInstance.prototype.find=function(e){var t=this.$(e);return t[0]||null},l.TemplateInstance.prototype.autorun=function(e){return this.view.autorun(e)},e.prototype.helpers=function(e){for(var t in e)this.__helpers.set(t,e[t])},e.prototype.events=function(e){var t=this,n={};for(var r in e)n[r]=function(e,t){return function(e){var n=this,r=l.getData(e.currentTarget);
null==r&&(r={});var i=Array.prototype.slice.call(arguments),a=n.templateInstance();return i.splice(1,0,a),t.apply(r,i)}}(r,e[r]);t.__eventMaps.push(n)},e.instance=function(){for(var e=l.currentView;e&&!e.template;)e=e.parentView;return e?e.templateInstance():null},e.currentData=l.getData,e.parentData=l._parentData,e.registerHelper=l.registerHelper}.call(this),function(){c=l,l.ReactiveVar=u,c._templateInstance=l.Template.instance,d={},d.registerHelper=l.registerHelper,d._escape=l._escape,d.SafeString=function(e){this.string=e},d.SafeString.prototype.toString=function(){return this.string.toString()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.blaze={Blaze:l,UI:c,Handlebars:d}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,o=Package.tracker.Tracker,t=Package.tracker.Deps,i=Package.random.Random,r=Package.ddp.DDP,a=Package.mongo.Mongo,c,l,u,s,g,f,d,m,_,p,k,h,v,w;(function(){c={},c._options={};var o=90,t=3600;u=6e5,s=1e4,c.config=function(o){if(e.isServer?__meteor_runtime_config__.accountsConfigCalled=!0:__meteor_runtime_config__.accountsConfigCalled||e._debug("Accounts.config was called on the client but not on the server; some configuration options may not take effect."),n.has(o,"oauthSecretKey")){if(e.isClient)throw new Error("The oauthSecretKey option may only be specified on the server");if(!Package["oauth-encryption"])throw new Error("The oauth-encryption package must be loaded to set oauthSecretKey");Package["oauth-encryption"].OAuthEncryption.loadKey(o.oauthSecretKey),o=n.omit(o,"oauthSecretKey")}var t=["sendVerificationEmail","forbidClientAccountCreation","restrictCreationByEmailDomain","loginExpirationInDays"];n.each(n.keys(o),function(e){if(!n.contains(t,e))throw new Error("Accounts.config: Invalid key: "+e)}),n.each(t,function(e){if(e in o){if(e in c._options)throw new Error("Can't set `"+e+"` more than once");c._options[e]=o[e]}}),e.isServer&&maybeStopExpireTokensInterval()},e.isClient&&(c.connection=e.connection,"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL&&(c.connection=r.connect(__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL))),e.users=new a.Collection("users",{_preventAutopublish:!0,connection:e.isClient?c.connection:e.connection}),e.startup(function(){var e=Package["service-configuration"].ServiceConfiguration;c.loginServiceConfiguration=e.configurations,c.ConfigError=e.ConfigError}),c.LoginCancelledError=function(e){this.message=e},c.LoginCancelledError.numericError=145546287,c.LoginCancelledError.prototype=new Error,c.LoginCancelledError.prototype.name="Accounts.LoginCancelledError",g=function(){return 24*(c._options.loginExpirationInDays||o)*60*60*1e3},c._tokenExpiration=function(e){return new Date(new Date(e).getTime()+g())},c._tokenExpiresSoon=function(e){var n=.1*g(),o=1e3*t;return n>o&&(n=o),new Date>new Date(e)-n}}).call(this),function(){f=!0;var o=["reset-password","verify-email","enroll-account"],t=function(e,t){n.each(o,function(n){var o;d=new RegExp("^\\#\\/"+n+"\\/(.*)$"),m=e.match(d),m&&(o=m[1],"reset-password"===n?c._resetPasswordToken=o:"verify-email"===n?c._verifyEmailToken=o:"enroll-account"===n&&(c._enrollAccountToken=o),t(o,n))})},i={},r=function(){c._enableAutoLogin()};t(window.location.hash,function(n,o){f=!1,window.location.hash="",e.startup(function(){i[o]&&i[o](n,r)})}),l={attemptToMatchHash:t},c.onResetPasswordLink=function(n){i["reset-password"]&&e._debug("Accounts.onResetPasswordLink was called more than once. Only one callback added will be executed."),i["reset-password"]=n},c.onEmailVerificationLink=function(n){i["verify-email"]&&e._debug("Accounts.onEmailVerificationLink was called more than once. Only one callback added will be executed."),i["verify-email"]=n},c.onEnrollmentLink=function(n){i["enroll-account"]&&e._debug("Accounts.onEnrollmentLink was called more than once. Only one callback added will be executed."),i["enroll-account"]=n}}.call(this),function(){e.userId=function(){return c.connection.userId()};var t=!1,i=new o.Dependency;c._setLoggingIn=function(e){t!==e&&(t=e,i.changed())},e.loggingIn=function(){return i.depend(),t},e.user=function(){var n=e.userId();return n?e.users.findOne(n):null},c.callLoginMethod=function(e){e=n.extend({methodName:"login",methodArguments:[{}],_suppressLoggingIn:!1},e),n.each(["validateResult","userCallback"],function(n){e[n]||(e[n]=function(){})});var o=n.once(e.userCallback),t=!1,i=function(e,n){c.connection.onReconnect=!e&&n&&n.token?function(){t=!0;var e=v();e&&(n={token:e,tokenExpires:w()}),n.tokenExpires||(n.tokenExpires=c._tokenExpiration(new Date)),c._tokenExpiresSoon(n.tokenExpires)?_():c.callLoginMethod({methodArguments:[{resume:n.token}],_suppressLoggingIn:!0,userCallback:function(e){var t=v();e&&t&&t===n.token&&_(),o(e)}})}:null},r=function(n,i){if(!t){if(c._setLoggingIn(!1),n||!i)return n=n||new Error("No result from call to "+e.methodName),void o(n);try{e.validateResult(i)}catch(r){return void o(r)}p(i.id,i.token,i.tokenExpires),o()}};e._suppressLoggingIn||c._setLoggingIn(!0),c.connection.apply(e.methodName,e.methodArguments,{wait:!0,onResultReceived:i},r)},_=function(){h(),c.connection.setUserId(null),c.connection.onReconnect=null},p=function(e,n,o){k(e,n,o),c.connection.setUserId(e)},e.logout=function(e){c.connection.apply("logout",[],{wait:!0},function(n,o){n?e&&e(n):(_(),e&&e())})},e.logoutOtherClients=function(n){c.connection.apply("getNewToken",[],{wait:!0},function(n,o){n||k(e.userId(),o.token,o.tokenExpires)}),c.connection.apply("removeOtherTokens",[],{wait:!0},function(e){n&&n(e)})};var r=c.connection.subscribe("meteor.loginServiceConfiguration");c.loginServicesConfigured=function(){return r.ready()};var a=[],l=null;c.onPageLoadLogin=function(e){l?e(l):a.push(e)},c._pageLoadLogin=function(o){return l?void e._debug("Ignoring unexpected duplicate page load login attempt info"):(n.each(a,function(e){e(o)}),a=[],void(l=o))},Package.blaze&&(Package.blaze.Blaze.Template.registerHelper("currentUser",function(){return e.user()}),Package.blaze.Blaze.Template.registerHelper("loggingIn",function(){return e.loggingIn()}))}.call(this),function(){var n;e.loginWithToken=function(e,n){c.callLoginMethod({methodArguments:[{resume:e}],userCallback:n})},c._enableAutoLogin=function(){f=!0,g()};var o="Meteor.loginToken",t="Meteor.loginTokenExpires",r="Meteor.userId";c._isolateLoginTokenForTest=function(){o+=i.id(),r+=i.id()},k=function(i,a,l){e._localStorage.setItem(r,i),e._localStorage.setItem(o,a),l||(l=c._tokenExpiration(new Date)),e._localStorage.setItem(t,l),n=a},h=function(){e._localStorage.removeItem(r),e._localStorage.removeItem(o),e._localStorage.removeItem(t),n=null},v=c._storedLoginToken=function(){return e._localStorage.getItem(o)},w=function(){return e._localStorage.getItem(t)};var a=function(){return e._localStorage.getItem(r)},l=function(){var n=e._localStorage.getItem(t);n&&c._tokenExpiresSoon(new Date(n))&&h()};if(f){l();var u=v();if(u){var s=a();s&&c.connection.setUserId(s),e.loginWithToken(u,function(n){n&&(e._debug("Error logging in with token: "+n),_()),c._pageLoadLogin({type:"resume",allowed:!n,error:n,methodName:"login",methodArguments:[{resume:u}]})})}}n=u;var g=function(){if(f){var o=v();n!=o&&(o?e.loginWithToken(o,function(e){e&&_()}):e.logout()),n=o}};setInterval(g,3e3)}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-base"]={Accounts:c,AccountsTest:l}}();

!function(){var r=Package.meteor.Meteor,n;(function(){n=function(){function r(r){function n(r,n){var t=(65535&r)+(65535&n),e=(r>>16)+(n>>16)+(t>>16);return e<<16|65535&t}function t(r,n){return r>>>n|r<<32-n}function e(r,n){return r>>>n}function o(r,n,t){return r&n^~r&t}function a(r,n,t){return r&n^r&t^n&t}function u(r){return t(r,2)^t(r,13)^t(r,22)}function f(r){return t(r,6)^t(r,11)^t(r,25)}function c(r){return t(r,7)^t(r,18)^e(r,3)}function i(r){return t(r,17)^t(r,19)^e(r,10)}function h(r,t){var e=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64),C,d,v,A,l,m,S,y,k,P,w,s;r[t>>5]|=128<<24-t%32,r[(t+64>>9<<4)+15]=t;for(var k=0;k<r.length;k+=16){C=h[0],d=h[1],v=h[2],A=h[3],l=h[4],m=h[5],S=h[6],y=h[7];for(var P=0;64>P;P++)g[P]=16>P?r[P+k]:n(n(n(i(g[P-2]),g[P-7]),c(g[P-15])),g[P-16]),w=n(n(n(n(y,f(l)),o(l,m,S)),e[P]),g[P]),s=n(u(C),a(C,d,v)),y=S,S=m,m=l,l=n(A,w),A=v,v=d,d=C,C=n(w,s);h[0]=n(C,h[0]),h[1]=n(d,h[1]),h[2]=n(v,h[2]),h[3]=n(A,h[3]),h[4]=n(l,h[4]),h[5]=n(m,h[5]),h[6]=n(S,h[6]),h[7]=n(y,h[7])}return h}function g(r){for(var n=Array(),t=(1<<v)-1,e=0;e<r.length*v;e+=v)n[e>>5]|=(r.charCodeAt(e/v)&t)<<24-e%32;return n}function C(r){for(var n="",t=0;t<r.length;t++){var e=r.charCodeAt(t);128>e?n+=String.fromCharCode(e):e>127&&2048>e?(n+=String.fromCharCode(e>>6|192),n+=String.fromCharCode(63&e|128)):(n+=String.fromCharCode(e>>12|224),n+=String.fromCharCode(e>>6&63|128),n+=String.fromCharCode(63&e|128))}return n}function d(r){for(var n=A?"0123456789ABCDEF":"0123456789abcdef",t="",e=0;e<4*r.length;e++)t+=n.charAt(r[e>>2]>>8*(3-e%4)+4&15)+n.charAt(r[e>>2]>>8*(3-e%4)&15);return t}var v=8,A=0;return r=C(r),d(h(g(r),r.length*v))}return r}()}).call(this),"undefined"==typeof Package&&(Package={}),Package.sha={SHA256:n}}();

!function(){var t=Package.meteor.Meteor,i=Package.random.Random,r=Package.check.check,o=Package.check.Match,s=Package.sha.SHA256,e=Package.underscore._,h,n;(function(){n=function(){function t(t,i,r){null!=t&&("number"==typeof t?this.fromNumber(t,i,r):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function i(){return new t(null)}function r(t,i,r,o,s,e){for(;--e>=0;){var h=i*this[t++]+r[o]+s;s=Math.floor(h/67108864),r[o++]=67108863&h}return s}function o(t,i,r,o,s,e){for(var h=32767&i,n=i>>15;--e>=0;){var u=32767&this[t],f=this[t++]>>15,a=n*u+f*h;u=h*u+((32767&a)<<15)+r[o]+(1073741823&s),s=(u>>>30)+(a>>>15)+n*f+(s>>>30),r[o++]=1073741823&u}return s}function s(t,i,r,o,s,e){for(var h=16383&i,n=i>>14;--e>=0;){var u=16383&this[t],f=this[t++]>>14,a=n*u+f*h;u=h*u+((16383&a)<<14)+r[o]+s,s=(u>>28)+(a>>14)+n*f,r[o++]=268435455&u}return s}function e(t){return ir.charAt(t)}function h(t,i){var r=rr[t.charCodeAt(i)];return null==r?-1:r}function n(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function f(t){var r=i();return r.fromInt(t),r}function a(i,r){var o;if(16==r)o=4;else if(8==r)o=3;else if(256==r)o=8;else if(2==r)o=1;else if(32==r)o=5;else{if(4!=r)return void this.fromRadix(i,r);o=2}this.t=0,this.s=0;for(var s=i.length,e=!1,n=0;--s>=0;){var u=8==o?255&i[s]:h(i,s);0>u?"-"==i.charAt(s)&&(e=!0):(e=!1,0==n?this[this.t++]=u:n+o>this.DB?(this[this.t-1]|=(u&(1<<this.DB-n)-1)<<n,this[this.t++]=u>>this.DB-n):this[this.t-1]|=u<<n,n+=o,n>=this.DB&&(n-=this.DB))}8==o&&0!=(128&i[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),e&&t.ZERO.subTo(this,this)}function p(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function c(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r=(1<<i)-1,o,s=!1,h="",n=this.t,u=this.DB-n*this.DB%i;if(n-->0)for(u<this.DB&&(o=this[n]>>u)>0&&(s=!0,h=e(o));n>=0;)i>u?(o=(this[n]&(1<<u)-1)<<i-u,o|=this[--n]>>(u+=this.DB-i)):(o=this[n]>>(u-=i)&r,0>=u&&(u+=this.DB,--n)),o>0&&(s=!0),s&&(h+=e(o));return s?h:"0"}function m(){var r=i();return t.ZERO.subTo(this,r),r}function l(){return this.s<0?this.negate():this}function v(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(i=r-t.t,0!=i)return i;for(;--r>=0;)if(0!=(i=this[r]-t[r]))return i;return 0}function T(t){var i=1,r;return 0!=(r=t>>>16)&&(t=r,i+=16),0!=(r=t>>8)&&(t=r,i+=8),0!=(r=t>>4)&&(t=r,i+=4),0!=(r=t>>2)&&(t=r,i+=2),0!=(r=t>>1)&&(t=r,i+=1),i}function y(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)}function d(t,i){var r;for(r=this.t-1;r>=0;--r)i[r+t]=this[r];for(r=t-1;r>=0;--r)i[r]=0;i.t=this.t+t,i.s=this.s}function D(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s}function g(t,i){var r=t%this.DB,o=this.DB-r,s=(1<<o)-1,e=Math.floor(t/this.DB),h=this.s<<r&this.DM,n;for(n=this.t-1;n>=0;--n)i[n+e+1]=this[n]>>o|h,h=(this[n]&s)<<r;for(n=e-1;n>=0;--n)i[n]=0;i[e]=h,i.t=this.t+e+1,i.s=this.s,i.clamp()}function B(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(i.t=0);var o=t%this.DB,s=this.DB-o,e=(1<<o)-1;i[0]=this[r]>>o;for(var h=r+1;h<this.t;++h)i[h-r-1]|=(this[h]&e)<<s,i[h-r]=this[h]>>o;o>0&&(i[this.t-r-1]|=(this.s&e)<<s),i.t=this.t-r,i.clamp()}function b(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]-t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o-=t[r],i[r++]=o&this.DM,o>>=this.DB;o-=t.s}i.s=0>o?-1:0,-1>o?i[r++]=this.DV+o:o>0&&(i[r++]=o),i.t=r,i.clamp()}function S(i,r){var o=this.abs(),s=i.abs(),e=o.t;for(r.t=e+s.t;--e>=0;)r[e]=0;for(e=0;e<s.t;++e)r[e+o.t]=o.am(0,s[e],r,e,0,o.t);r.s=0,r.clamp(),this.s!=i.s&&t.ZERO.subTo(r,r)}function E(t){for(var i=this.abs(),r=t.t=2*i.t;--r>=0;)t[r]=0;for(r=0;r<i.t-1;++r){var o=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,o,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()}function w(r,o,s){var e=r.abs();if(!(e.t<=0)){var h=this.abs();if(h.t<e.t)return null!=o&&o.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=i());var n=i(),u=this.s,f=r.s,a=this.DB-T(e[e.t-1]);a>0?(e.lShiftTo(a,n),h.lShiftTo(a,s)):(e.copyTo(n),h.copyTo(s));var p=n.t,c=n[p-1];if(0!=c){var m=c*(1<<this.F1)+(p>1?n[p-2]>>this.F2:0),l=this.FV/m,v=(1<<this.F1)/m,y=1<<this.F2,d=s.t,D=d-p,g=null==o?i():o;for(n.dlShiftTo(D,g),s.compareTo(g)>=0&&(s[s.t++]=1,s.subTo(g,s)),t.ONE.dlShiftTo(p,g),g.subTo(n,n);n.t<p;)n[n.t++]=0;for(;--D>=0;){var B=s[--d]==c?this.DM:Math.floor(s[d]*l+(s[d-1]+y)*v);if((s[d]+=n.am(0,B,s,D,0,p))<B)for(n.dlShiftTo(D,g),s.subTo(g,s);s[d]<--B;)s.subTo(g,s)}null!=o&&(s.drShiftTo(p,o),u!=f&&t.ZERO.subTo(o,o)),s.t=p,s.clamp(),a>0&&s.rShiftTo(a,s),0>u&&t.ZERO.subTo(s,s)}}}function M(r){var o=i();return this.abs().divRemTo(r,null,o),this.s<0&&o.compareTo(t.ZERO)>0&&r.subTo(o,o),o}function A(t){this.m=t}function R(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function O(t){return t}function C(t){t.divRemTo(this.m,null,t)}function F(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function V(t,i){t.squareTo(i),this.reduce(i)}function N(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return i=i*(2-(15&t)*i)&15,i=i*(2-(255&t)*i)&255,i=i*(2-((65535&t)*i&65535))&65535,i=i*(2-t*i%this.DV)%this.DV,i>0?this.DV-i:-i}function k(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function q(r){var o=i();return r.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),r.s<0&&o.compareTo(t.ZERO)>0&&this.m.subTo(o,o),o}function P(t){var r=i();return t.copyTo(r),this.reduce(r),r}function L(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],o=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=i+this.m.t,t[r]+=this.m.am(0,o,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function x(t,i){t.squareTo(i),this.reduce(i)}function I(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function Z(){return 0==(this.t>0?1&this[0]:this.s)}function z(r,o){if(r>4294967295||1>r)return t.ONE;var s=i(),e=i(),h=o.convert(this),n=T(r)-1;for(h.copyTo(s);--n>=0;)if(o.sqrTo(s,e),(r&1<<n)>0)o.mulTo(e,h,s);else{var u=s;s=e,e=u}return o.revert(s)}function U(t,i){var r;return r=256>t||i.isEven()?new A(i):new k(i),this.exp(t,r)}function j(){var t=i();return this.copyTo(t),t}function H(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function _(){return 0==this.t?this.s:this[0]<<24>>24}function G(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var r=this.chunkSize(t),o=Math.pow(t,r),s=f(o),e=i(),h=i(),n="";for(this.divRemTo(s,e,h);e.signum()>0;)n=(o+h.intValue()).toString(t).substr(1)+n,e.divRemTo(s,e,h);return h.intValue().toString(t)+n}function W(i,r){this.fromInt(0),null==r&&(r=10);for(var o=this.chunkSize(r),s=Math.pow(r,o),e=!1,n=0,u=0,f=0;f<i.length;++f){var a=h(i,f);0>a?"-"==i.charAt(f)&&0==this.signum()&&(e=!0):(u=r*u+a,++n>=o&&(this.dMultiply(s),this.dAddOffset(u,0),n=0,u=0))}n>0&&(this.dMultiply(Math.pow(r,n)),this.dAddOffset(u,0)),e&&t.ZERO.subTo(this,this)}function X(i,r,o){if("number"==typeof r)if(2>i)this.fromInt(1);else for(this.fromNumber(i,o),this.testBit(i-1)||this.bitwiseTo(t.ONE.shiftLeft(i-1),ei,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>i&&this.subTo(t.ONE.shiftLeft(i-1),this);else{var s=new Array,e=7&i;s.length=(i>>3)+1,r.nextBytes(s),e>0?s[0]&=(1<<e)-1:s[0]=0,this.fromString(s,256)}}function Y(){var t=this.t,i=new Array;i[0]=this.s;var r=this.DB-t*this.DB%8,o,s=0;if(t-->0)for(r<this.DB&&(o=this[t]>>r)!=(this.s&this.DM)>>r&&(i[s++]=o|this.s<<this.DB-r);t>=0;)8>r?(o=(this[t]&(1<<r)-1)<<8-r,o|=this[--t]>>(r+=this.DB-8)):(o=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&o)&&(o|=-256),0==s&&(128&this.s)!=(128&o)&&++s,(s>0||o!=this.s)&&(i[s++]=o);return i}function $(t){return 0==this.compareTo(t)}function ti(t){return this.compareTo(t)<0?this:t}function ii(t){return this.compareTo(t)>0?this:t}function ri(t,i,r){var o,s,e=Math.min(t.t,this.t);for(o=0;e>o;++o)r[o]=i(this[o],t[o]);if(t.t<this.t){for(s=t.s&this.DM,o=e;o<this.t;++o)r[o]=i(this[o],s);r.t=this.t}else{for(s=this.s&this.DM,o=e;o<t.t;++o)r[o]=i(s,t[o]);r.t=t.t}r.s=i(this.s,t.s),r.clamp()}function oi(t,i){return t&i}function si(t){var r=i();return this.bitwiseTo(t,oi,r),r}function ei(t,i){return t|i}function hi(t){var r=i();return this.bitwiseTo(t,ei,r),r}function ni(t,i){return t^i}function ui(t){var r=i();return this.bitwiseTo(t,ni,r),r}function fi(t,i){return t&~i}function ai(t){var r=i();return this.bitwiseTo(t,fi,r),r}function pi(){for(var t=i(),r=0;r<this.t;++r)t[r]=this.DM&~this[r];return t.t=this.t,t.s=~this.s,t}function ci(t){var r=i();return 0>t?this.rShiftTo(-t,r):this.lShiftTo(t,r),r}function mi(t){var r=i();return 0>t?this.lShiftTo(-t,r):this.rShiftTo(t,r),r}function li(t){if(0==t)return-1;var i=0;return 0==(65535&t)&&(t>>=16,i+=16),0==(255&t)&&(t>>=8,i+=8),0==(15&t)&&(t>>=4,i+=4),0==(3&t)&&(t>>=2,i+=2),0==(1&t)&&++i,i}function vi(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+li(this[t]);return this.s<0?this.t*this.DB:-1}function Ti(t){for(var i=0;0!=t;)t&=t-1,++i;return i}function yi(){for(var t=0,i=this.s&this.DM,r=0;r<this.t;++r)t+=Ti(this[r]^i);return t}function di(t){var i=Math.floor(t/this.DB);return i>=this.t?0!=this.s:0!=(this[i]&1<<t%this.DB)}function Di(i,r){var o=t.ONE.shiftLeft(i);return this.bitwiseTo(o,r,o),o}function gi(t){return this.changeBit(t,ei)}function Bi(t){return this.changeBit(t,fi)}function bi(t){return this.changeBit(t,ni)}function Si(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]+t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o+=t[r],i[r++]=o&this.DM,o>>=this.DB;o+=t.s}i.s=0>o?-1:0,o>0?i[r++]=o:-1>o&&(i[r++]=this.DV+o),i.t=r,i.clamp()}function Ei(t){var r=i();return this.addTo(t,r),r}function wi(t){var r=i();return this.subTo(t,r),r}function Mi(t){var r=i();return this.multiplyTo(t,r),r}function Ai(t){var r=i();return this.divRemTo(t,r,null),r}function Ri(t){var r=i();return this.divRemTo(t,null,r),r}function Oi(t){var r=i(),o=i();return this.divRemTo(t,r,o),new Array(r,o)}function Ci(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Fi(t,i){for(;this.t<=i;)this[this.t++]=0;for(this[i]+=t;this[i]>=this.DV;)this[i]-=this.DV,++i>=this.t&&(this[this.t++]=0),++this[i]}function Vi(){}function Ni(t){return t}function ki(t,i,r){t.multiplyTo(i,r)}function qi(t,i){t.squareTo(i)}function Pi(t){return this.exp(t,new Vi)}function Li(t,i,r){var o=Math.min(this.t+t.t,i);for(r.s=0,r.t=o;o>0;)r[--o]=0;var s;for(s=r.t-this.t;s>o;++o)r[o+this.t]=this.am(0,t[o],r,o,0,this.t);for(s=Math.min(t.t,i);s>o;++o)this.am(0,t[o],r,o,0,i-o);r.clamp()}function xi(t,i,r){--i;var o=r.t=this.t+t.t-i;for(r.s=0;--o>=0;)r[o]=0;for(o=Math.max(i-this.t,0);o<t.t;++o)r[this.t+o-i]=this.am(i-o,t[o],r,0,0,this.t+o-i);r.clamp(),r.drShiftTo(1,r)}function Ii(r){this.r2=i(),this.q3=i(),t.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function Zi(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var r=i();return t.copyTo(r),this.reduce(r),r}function zi(t){return t}function Ui(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function ji(t,i){t.squareTo(i),this.reduce(i)}function Hi(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function _i(t,r){var o=t.bitLength(),s,e=f(1),h;if(0>=o)return e;s=18>o?1:48>o?3:144>o?4:768>o?5:6,h=8>o?new A(r):r.isEven()?new Ii(r):new k(r);var n=new Array,u=3,a=s-1,p=(1<<s)-1;if(n[1]=h.convert(this),s>1){var c=i();for(h.sqrTo(n[1],c);p>=u;)n[u]=i(),h.mulTo(c,n[u-2],n[u]),u+=2}var m=t.t-1,l,v=!0,y=i(),d;for(o=T(t[m])-1;m>=0;){for(o>=a?l=t[m]>>o-a&p:(l=(t[m]&(1<<o+1)-1)<<a-o,m>0&&(l|=t[m-1]>>this.DB+o-a)),u=s;0==(1&l);)l>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),v)n[l].copyTo(e),v=!1;else{for(;u>1;)h.sqrTo(e,y),h.sqrTo(y,e),u-=2;u>0?h.sqrTo(e,y):(d=e,e=y,y=d),h.mulTo(y,n[l],e)}for(;m>=0&&0==(t[m]&1<<o);)h.sqrTo(e,y),d=e,e=y,y=d,--o<0&&(o=this.DB-1,--m)}return h.revert(e)}function Gi(t){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var o=i;i=r,r=o}var s=i.getLowestSetBit(),e=r.getLowestSetBit();if(0>e)return i;for(e>s&&(e=s),e>0&&(i.rShiftTo(e,i),r.rShiftTo(e,r));i.signum()>0;)(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r));return e>0&&r.lShiftTo(e,r),r}function Ji(t){if(0>=t)return 0;var i=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==i)r=this[0]%t;else for(var o=this.t-1;o>=0;--o)r=(i*r+this[o])%t;return r}function Ki(i){var r=i.isEven();if(this.isEven()&&r||0==i.signum())return t.ZERO;for(var o=i.clone(),s=this.clone(),e=f(1),h=f(0),n=f(0),u=f(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),r?(e.isEven()&&h.isEven()||(e.addTo(this,e),h.subTo(i,h)),e.rShiftTo(1,e)):h.isEven()||h.subTo(i,h),h.rShiftTo(1,h);for(;s.isEven();)s.rShiftTo(1,s),r?(n.isEven()&&u.isEven()||(n.addTo(this,n),u.subTo(i,u)),n.rShiftTo(1,n)):u.isEven()||u.subTo(i,u),u.rShiftTo(1,u);o.compareTo(s)>=0?(o.subTo(s,o),r&&e.subTo(n,e),h.subTo(u,h)):(s.subTo(o,s),r&&n.subTo(e,n),u.subTo(h,u))}return 0!=s.compareTo(t.ONE)?t.ZERO:u.compareTo(i)>=0?u.subtract(i):u.signum()<0?(u.addTo(i,u),u.signum()<0?u.add(i):u):u}function Qi(t){var i,r=this.abs();if(1==r.t&&r[0]<=er[er.length-1]){for(i=0;i<er.length;++i)if(r[0]==er[i])return!0;return!1}if(r.isEven())return!1;for(i=1;i<er.length;){for(var o=er[i],s=i+1;s<er.length&&hr>o;)o*=er[s++];for(o=r.modInt(o);s>i;)if(o%er[i++]==0)return!1}return r.millerRabin(t)}function Wi(r){var o=this.subtract(t.ONE),s=o.getLowestSetBit();if(0>=s)return!1;var e=o.shiftRight(s);r=r+1>>1,r>er.length&&(r=er.length);for(var h=i(),n=0;r>n;++n){h.fromInt(er[n]);var u=h.modPow(e,this);if(0!=u.compareTo(t.ONE)&&0!=u.compareTo(o)){for(var f=1;f++<s&&0!=u.compareTo(o);)if(u=u.modPowInt(2,this),0==u.compareTo(t.ONE))return!1;if(0!=u.compareTo(o))return!1}}return!0}var Xi,Yi=0xdeadbeefcafe,$i=15715070==(16777215&Yi);t.prototype.am=s,Xi=28,t.prototype.DB=Xi,t.prototype.DM=(1<<Xi)-1,t.prototype.DV=1<<Xi;var tr=52;t.prototype.FV=Math.pow(2,tr),t.prototype.F1=tr-Xi,t.prototype.F2=2*Xi-tr;var ir="0123456789abcdefghijklmnopqrstuvwxyz",rr=new Array,or,sr;for(or="0".charCodeAt(0),sr=0;9>=sr;++sr)rr[or++]=sr;for(or="a".charCodeAt(0),sr=10;36>sr;++sr)rr[or++]=sr;for(or="A".charCodeAt(0),sr=10;36>sr;++sr)rr[or++]=sr;A.prototype.convert=R,A.prototype.revert=O,A.prototype.reduce=C,A.prototype.mulTo=F,A.prototype.sqrTo=V,k.prototype.convert=q,k.prototype.revert=P,k.prototype.reduce=L,k.prototype.mulTo=I,k.prototype.sqrTo=x,t.prototype.copyTo=n,t.prototype.fromInt=u,t.prototype.fromString=a,t.prototype.clamp=p,t.prototype.dlShiftTo=d,t.prototype.drShiftTo=D,t.prototype.lShiftTo=g,t.prototype.rShiftTo=B,t.prototype.subTo=b,t.prototype.multiplyTo=S,t.prototype.squareTo=E,t.prototype.divRemTo=w,t.prototype.invDigit=N,t.prototype.isEven=Z,t.prototype.exp=z,t.prototype.toString=c,t.prototype.negate=m,t.prototype.abs=l,t.prototype.compareTo=v,t.prototype.bitLength=y,t.prototype.mod=M,t.prototype.modPowInt=U,t.ZERO=f(0),t.ONE=f(1),Vi.prototype.convert=Ni,Vi.prototype.revert=Ni,Vi.prototype.mulTo=ki,Vi.prototype.sqrTo=qi,Ii.prototype.convert=Zi,Ii.prototype.revert=zi,Ii.prototype.reduce=Ui,Ii.prototype.mulTo=Hi,Ii.prototype.sqrTo=ji;var er=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],hr=(1<<26)/er[er.length-1];return t.prototype.chunkSize=J,t.prototype.toRadix=Q,t.prototype.fromRadix=W,t.prototype.fromNumber=X,t.prototype.bitwiseTo=ri,t.prototype.changeBit=Di,t.prototype.addTo=Si,t.prototype.dMultiply=Ci,t.prototype.dAddOffset=Fi,t.prototype.multiplyLowerTo=Li,t.prototype.multiplyUpperTo=xi,t.prototype.modInt=Ji,t.prototype.millerRabin=Wi,t.prototype.clone=j,t.prototype.intValue=H,t.prototype.byteValue=_,t.prototype.shortValue=G,t.prototype.signum=K,t.prototype.toByteArray=Y,t.prototype.equals=$,t.prototype.min=ti,t.prototype.max=ii,t.prototype.and=si,t.prototype.or=hi,t.prototype.xor=ui,t.prototype.andNot=ai,t.prototype.not=pi,t.prototype.shiftLeft=ci,t.prototype.shiftRight=mi,t.prototype.getLowestSetBit=vi,t.prototype.bitCount=yi,t.prototype.testBit=di,t.prototype.setBit=gi,t.prototype.clearBit=Bi,t.prototype.flipBit=bi,t.prototype.add=Ei,t.prototype.subtract=wi,t.prototype.multiply=Mi,t.prototype.divide=Ai,t.prototype.remainder=Ri,t.prototype.divideAndRemainder=Oi,t.prototype.modPow=_i,t.prototype.modInverse=Ki,t.prototype.pow=Pi,t.prototype.gcd=Gi,t.prototype.isProbablePrime=Qi,t}()}).call(this),function(){h={},h.generateVerifier=function(t,o){var s=r(o),e=o&&o.salt||i.secret(),h,u=o&&o.hashedIdentityAndPassword;u||(h=o&&o.identity||i.secret(),u=s.hash(h+":"+t));var f=s.hash(e+u),a=new n(f,16),p=s.g.modPow(a,s.N);return{identity:h,salt:e,verifier:p.toString(16)}},h.matchVerifier={identity:String,salt:String,verifier:String};var t={hash:function(t){return s(t).toLowerCase()},N:new n("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new n("2")};t.k=new n(t.hash(t.N.toString(16)+t.g.toString(16)),16);var r=function(i){if(!i)return t;var r=e.extend({},t);return e.each(["N","g","k"],function(t){if(i[t])if("string"==typeof i[t])r[t]=new n(i[t],16);else{if(!(i[t]instanceof n))throw new Error("Invalid parameter: "+t);r[t]=i[t]}}),i.hash&&(r.hash=function(t){return i.hash(t).toLowerCase()}),!i.k&&(i.N||i.g||i.hash)&&(r.k=r.hash(r.N.toString(16)+r.g.toString(16))),r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.srp={SRP:h}}();

!function(){var r=Package.meteor.Meteor,e=Package["accounts-base"].Accounts,o=Package.srp.SRP,a=Package.sha.SHA256,s=Package.check.check,t=Package.check.Match,n=Package.underscore._,d=Package.ddp.DDP;(function(){r.loginWithPassword=function(r,a,s){"string"==typeof r&&(r=-1===r.indexOf("@")?{username:r}:{email:r}),e.callLoginMethod({methodArguments:[{user:r,password:o(a)}],userCallback:function(e,o){e&&400===e.error&&"old password format"===e.reason?t({upgradeError:e,userSelector:r,plaintextPassword:a},s):e?s&&s(e):s&&s()}})};var o=function(r){return{digest:a(r),algorithm:"sha-256"}},t=function(s,t){var n;try{n=EJSON.parse(s.upgradeError.details)}catch(d){}n&&"srp"===n.format?e.callLoginMethod({methodArguments:[{user:s.userSelector,srp:a(n.identity+":"+s.plaintextPassword),password:o(s.plaintextPassword)}],userCallback:t}):t&&t(new r.Error(400,"Password is old. Please reset your password."))};e.createUser=function(a,s){if(a=n.clone(a),"string"!=typeof a.password)throw new Error("Must set options.password");return a.password?(a.password=o(a.password),void e.callLoginMethod({methodName:"createUser",methodArguments:[a],userCallback:s})):void s(new r.Error(400,"Password may not be empty"))},e.changePassword=function(a,n,d){return r.user()?(s(n,String),n?void e.connection.apply("changePassword",[a?o(a):null,o(n)],function(o,s){o||!s?o&&400===o.error&&"old password format"===o.reason?t({upgradeError:o,userSelector:{id:r.userId()},plaintextPassword:a},function(r){r?d&&d(r):e.changePassword(a,n,d)}):d&&d(o||new Error("No result from changePassword.")):d&&d()}):void d(new r.Error(400,"Password may not be empty"))):void(d&&d(new Error("Must be logged in to change password.")))},e.forgotPassword=function(r,o){if(!r.email)throw new Error("Must pass options.email");e.connection.call("forgotPassword",r,o)},e.resetPassword=function(a,t,n){return s(a,String),s(t,String),t?void e.callLoginMethod({methodName:"resetPassword",methodArguments:[a,o(t)],userCallback:n}):void n(new r.Error(400,"Password may not be empty"))},e.verifyEmail=function(r,o){if(!r)throw new Error("Need to pass token");e.callLoginMethod({methodName:"verifyEmail",methodArguments:[r],userCallback:o})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-password"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,r,a;(function(){r={};var e=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")};r._encodeParams=function(r){var a=[];return n.each(r,function(n,r){a.length&&a.push("&"),a.push(e(r),"=",e(n))}),a.join("").replace(/%20/g,"+")},a=function(e,n,a,c){var t=e,o=n?n.slice(1):null;if("string"==typeof a&&(o=String(a)),c){o=o||"";var u=r._encodeParams(c);o&&u&&(o+="&"),o+=u}var i=t;return null!==o&&(i+="?"+o),i}}).call(this),function(){r._constructUrl=function(e,n,r){var c=/^(.*?)(\?.*)?$/.exec(e);return a(c[1],c[2],n,r)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.url={URL:r}}();

!function(){var e=Package.meteor.Meteor,t=Package.reload.Reload,o=Package.base64.Base64,r=Package.url.URL,n,i;(function(){var r={};n={},n.showPopup=function(e,t,o){throw new Error("OAuth.showPopup must be implemented on this arch.")},n._loginStyle=function(t,o,r){if(e.isCordova)return"popup";var n=r&&r.loginStyle||o.loginStyle||"popup";if(!_.contains(["popup","redirect"],n))throw new Error("Invalid login style: "+n);if("redirect"===n)try{sessionStorage.setItem("Meteor.oauth.test","test"),sessionStorage.removeItem("Meteor.oauth.test")}catch(i){n="popup"}return n},n._stateParam=function(t,r){var n={loginStyle:t,credentialToken:r,isCordova:e.isCordova};return"redirect"===t&&(n.redirectUrl=""+window.location),o.encode(JSON.stringify(n))},n.saveDataForRedirect=function(e,o){t._onMigrate("oauth",function(){return[!0,{loginService:e,credentialToken:o}]}),t._migrate(null,{immediateMigration:!0})},n.getDataAfterRedirect=function(){var o=t._migrationData("oauth");if(!o||!o.credentialToken)return null;var r=o.credentialToken,i=n._storageTokenPrefix+r,a;try{a=sessionStorage.getItem(i),sessionStorage.removeItem(i)}catch(c){e._debug("error retrieving credentialSecret",c)}return{loginService:o.loginService,credentialToken:r,credentialSecret:a}},n.launchLogin=function(e){if(!e.loginService)throw new Error("loginService required");if("popup"===e.loginStyle)n.showPopup(e.loginUrl,_.bind(e.credentialRequestCompleteCallback,null,e.credentialToken),e.popupOptions);else{if("redirect"!==e.loginStyle)throw new Error("invalid login style");n.saveDataForRedirect(e.loginService,e.credentialToken),window.location=e.loginUrl}},n.initiateLogin=function(e,t,o,r){n.showPopup(t,_.bind(o,null,e),r)},n._handleCredentialSecret=function(e,t){if(check(e,String),check(t,String),_.has(r,e))throw new Error("Duplicate credential token from OAuth login");r[e]=t},n._retrieveCredentialSecret=function(t){var o=r[t];if(o)delete r[t];else{var i=n._storageTokenPrefix+t;o=e._localStorage.getItem(i),e._localStorage.removeItem(i)}return o}}).call(this),function(){n.showPopup=function(t,o,r){var n=e(t,r&&r.width||650,r&&r.height||331),i=setInterval(function(){try{var e=n.closed||void 0===n.closed}catch(t){return}e&&(clearInterval(i),o())},100)};var e=function(e,t,o){var r="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,n="undefined"!=typeof window.screenY?window.screenY:window.screenTop,i="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,a="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,c=r+(i-t)/2,l=n+(a-o)/2,d="width="+t+",height="+o+",left="+c+",top="+l+",scrollbars=yes",u=window.open(e,"Login",d);return u.focus&&u.focus(),u}}.call(this),function(){n._storageTokenPrefix="Meteor.oauth.credentialSecret-",n._redirectUri=function(t,o,n,i){var a=o.loginStyle?null:"close",c=!1,l=!1;if(n&&(n=_.clone(n),c=n.cordova,l=n.android,delete n.cordova,delete n.android,_.isEmpty(n)&&(n=void 0)),e.isServer&&c){var d=process.env.MOBILE_ROOT_URL||__meteor_runtime_config__.ROOT_URL;if(l){var u=Npm.require("url"),s=u.parse(d);"localhost"===s.hostname&&(s.hostname="10.0.2.2",delete s.host),d=u.format(s)}i=_.extend({},i,{rootUrl:d})}return r._constructUrl(e.absoluteUrl("_oauth/"+t,i),a,n)}}.call(this),function(){i=n}.call(this),"undefined"==typeof Package&&(Package={}),Package.oauth={OAuth:n,Oauth:i}}();

!function(){var e=Package.meteor.Meteor,r=Package.underscore._,a=Package.random.Random,t=Package.check.check,n=Package.check.Match,o=Package["accounts-base"].Accounts,c=Package.oauth.OAuth,u=Package.oauth.Oauth;(function(){o.oauth={};var a={};o.oauth.registerService=function(t){if(r.has(a,t))throw new Error("Duplicate service: "+t);a[t]=!0,e.server&&e.users._ensureIndex("services."+t+".id",{unique:1,sparse:1})},o.oauth.serviceNames=function(){return r.keys(a)}}).call(this),function(){var a=function(r){return r&&r instanceof e.Error&&r.error===o.LoginCancelledError.numericError?new o.LoginCancelledError(r.reason):r};e.startup(function(){var e=c.getDataAfterRedirect();if(e){var t="login",n=[{oauth:r.pick(e,"credentialToken","credentialSecret")}];o.callLoginMethod({methodArguments:n,userCallback:function(r){r=a(r),o._pageLoadLogin({type:e.loginService,allowed:!r,error:r,methodName:t,methodArguments:n})}})}}),o.oauth.tryLoginAfterPopupClosed=function(e,r){var t=c._retrieveCredentialSecret(e)||null;o.callLoginMethod({methodArguments:[{oauth:{credentialToken:e,credentialSecret:t}}],userCallback:r&&function(e){r(a(e))}})},o.oauth.credentialRequestCompleteHandler=function(e){return function(r){r&&r instanceof Error?e&&e(r):o.oauth.tryLoginAfterPopupClosed(r,e)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-oauth"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.url.URL,a,r,o;(function(){r=function(t,e){var n=500,a=function(t,e){return t.length>e?t.slice(0,e)+"...":t},r="failed ["+t+"]";return e&&(r+=" "+a(e.replace(/\n/g," "),n)),new Error(r)},o=function(t){var n=(t.headers["content-type"]||";").split(";")[0];if(e.include(["application/json","text/javascript"],n))try{t.data=JSON.parse(t.content)}catch(a){t.data=null}else t.data=null},a={},a.get=function(){return a.call.apply(this,["GET"].concat(e.toArray(arguments)))},a.post=function(){return a.call.apply(this,["POST"].concat(e.toArray(arguments)))},a.put=function(){return a.call.apply(this,["PUT"].concat(e.toArray(arguments)))},a.del=function(){return a.call.apply(this,["DELETE"].concat(e.toArray(arguments)))}}).call(this),function(){a.call=function(a,c,s,i){if(i||"function"!=typeof s||(i=s,s=null),s=s||{},"function"!=typeof i)throw new Error("Can't make a blocking HTTP call from the client; callback required.");a=(a||"").toUpperCase();var u={},l=s.content;s.data&&(l=JSON.stringify(s.data),u["Content-Type"]="application/json");var p,f;if(l||"GET"===a||"HEAD"===a?p=s.params:f=s.params,c=n._constructUrl(c,s.query,p),s.followRedirects===!1)throw new Error("Option followRedirects:false not supported on client.");var d,h;if(s.auth){var y=s.auth.indexOf(":");if(0>y)throw new Error('auth option should be of the form "username:password"');d=s.auth.substring(0,y),h=s.auth.substring(y+1)}f&&(l=n._encodeParams(f)),e.extend(u,s.headers||{}),i=function(t){return function(e,n){e&&n&&(e.response=n),t(e,n)}}(i),i=e.once(i);try{var g;if("undefined"!=typeof XMLHttpRequest)g=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw new Error("Can't create XMLHttpRequest");g=new ActiveXObject("Microsoft.XMLHttp")}g.open(a,c,!0,d,h);for(var v in u)g.setRequestHeader(v,u[v]);var w=!1,m;s.timeout&&(m=t.setTimeout(function(){w=!0,g.abort()},s.timeout)),g.onreadystatechange=function(n){if(4===g.readyState)if(m&&t.clearTimeout(m),w)i(new Error("timeout"));else if(g.status){var a={};a.statusCode=g.status,a.content=g.responseText,a.headers={};var c=g.getAllResponseHeaders();""===c&&g.getResponseHeader("content-type")&&(c="content-type: "+g.getResponseHeader("content-type"));var s=c.split(/\r?\n/);e.each(s,function(t){var e=/^(.*?):(?:\s+)(.*)$/.exec(t);e&&3===e.length&&(a.headers[e[1].toLowerCase()]=e[2])}),o(a);var u=null;a.statusCode>=400&&(u=r(a.statusCode,a.content)),i(u,a)}else i(new Error("network"))},g.send(l)}catch(E){i(E)}}}.call(this),function(){t.http=a}.call(this),"undefined"==typeof Package&&(Package={}),Package.http={HTTP:a}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,t=Package.blaze.Blaze,o=Package.blaze.UI,a=Package.blaze.Handlebars,d=Package.htmljs.HTML,c;(function(){c=t.Template;var e="__proto__ name".split(" ");c.__checkName=function(t){if(t in c||n.contains(e,t)){if(c[t]instanceof c&&"body"!==t)throw new Error("There are multiple templates named '"+t+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+t)}},c.__define__=function(e,n){c.__checkName(e),c[e]=new c("Template."+e,n),c[e]._NOWARN_OLDSTYLE_HELPERS=!0},c.body=new c("body",function(){for(var e=c.body.contentViews,n=0;n<e.length;n++)e[n].template=c.body;return e}),c.body.contentViews=[],c.body.view=null,c.body.addContent=function(e){var n="body_content_"+c.body.contentViews.length;c.body.contentViews.push(t.View(n,e))},c.body.renderToDocument=function(){if(!c.body.view){var e=t.render(c.body,document.body);c.body.view=e}},o.body=c.body,c.__body__=c.body,c.__body__.__contentParts=c.body.contentViews,c.__body__.__instantiate=c.body.renderToDocument}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:c}}();

!function(){var o=Package.meteor.Meteor,n=Package["accounts-base"].Accounts,e=Package.mongo.Mongo,i;(function(){"undefined"==typeof i&&(i={}),i.configurations=new e.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0,connection:o.isClient?n.connection:o.connection}),i.ConfigError=function(e){this.message=o.isClient&&!n.loginServicesConfigured()?"Login service configuration not yet loaded":e?"Service "+e+" not configured":"Service not configured"},i.ConfigError.prototype=new Error,i.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this),"undefined"==typeof Package&&(Package={}),Package["service-configuration"]={ServiceConfiguration:i}}();

!function(){var a=Package.meteor.Meteor,e=Package.random.Random,o=Package["service-configuration"].ServiceConfiguration,c=Package.oauth.OAuth,g=Package.oauth.Oauth,n=Package.mongo.Mongo;"undefined"==typeof Package&&(Package={}),Package.oauth1={}}();

!function(){var e=Package.meteor.Meteor,t=Package.http.HTTP,a=Package.templating.Template,i=Package.oauth.OAuth,n=Package.oauth.Oauth,r=Package.random.Random,o=Package["service-configuration"].ServiceConfiguration,l=Package.blaze.Blaze,c=Package.blaze.UI,s=Package.blaze.Handlebars,u=Package.htmljs.HTML,g;(function(){a.__checkName("configureLoginServiceDialogForTwitter"),a.configureLoginServiceDialogForTwitter=new a("Template.configureLoginServiceDialogForTwitter",function(){var e=this;return[u.Raw("<p>\n    First, you'll need to register your app on Twitter. Follow these steps:\n  </p>\n  "),u.OL("\n    ",u.Raw('<li>\n      Visit <a href="https://dev.twitter.com/apps/new" target="_blank">https://dev.twitter.com/apps/new</a>\n    </li>'),"\n    ",u.LI("\n      Set Callback URL to: ",u.SPAN({"class":"url"},l.View(function(){return Spacebars.mustache(e.lookup("siteUrl"))}),"_oauth/twitter"),"\n    "),"\n    ",u.Raw('<li>\n      Select "Create your Twitter application".\n    </li>'),"\n    ",u.Raw('<li>\n      On the Settings tab, enable "Allow this application to be used to Sign in with Twitter" and click\n      "Update settings".\n    </li>'),"\n    ",u.Raw('<li>\n      Switch to the "Keys and Access Tokens" tab.\n    </li>'),"\n  ")]})}).call(this),function(){a.configureLoginServiceDialogForTwitter.helpers({siteUrl:function(){return e.absoluteUrl({replaceLocalhost:!0})}}),a.configureLoginServiceDialogForTwitter.fields=function(){return[{property:"consumerKey",label:"API key"},{property:"secret",label:"API secret"}]}}.call(this),function(){g={},g.requestCredential=function(t,a){a||"function"!=typeof t||(a=t,t={});var n=o.configurations.findOne({service:"twitter"});if(!n)return void(a&&a(new o.ConfigError));var l=r.secret(),c=i._loginStyle("twitter",n,t),s="_oauth/twitter/?requestTokenAndRedirect=true&state="+i._stateParam(c,l);e.isCordova&&(s+="&cordova=true",/Android/i.test(navigator.userAgent)&&(s+="&android=true"));var u=e.absoluteUrl(s);i.launchLogin({loginService:"twitter",loginStyle:c,loginUrl:u,credentialRequestCompleteCallback:a,credentialToken:l})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.twitter={Twitter:g}}();

!function(){var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,a=Package.twitter.Twitter,i=Package.http.HTTP;(function(){if(t.oauth.registerService("twitter"),e.isClient)e.loginWithTwitter=function(e,i){i||"function"!=typeof e||(i=e,e=null);var r=t.oauth.credentialRequestCompleteHandler(i);a.requestCredential(e,r)};else{var i=_.map(a.whitelistedFields.concat(["id","screenName"]),function(e){return"services.twitter."+e});t.addAutopublishFields({forLoggedInUser:i,forOtherUsers:i})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-twitter"]={}}();

!function(){var a=Package.meteor.Meteor,e=Package.templating.Template,t=Package.underscore._,i=Package.blaze.Blaze,n=Package.blaze.UI,c=Package.blaze.Handlebars,l=Package.htmljs.HTML,r;(function(){r={}}).call(this),function(){r._initialSubscriptionsStarted=!1;var e=function(){r._initialSubscriptionsStarted=!0},t=function(){a._setImmediate(function(){e()})};a.startup(function(){t()})}.call(this),"undefined"==typeof Package&&(Package={}),Package.spiderable={Spiderable:r}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.email={}}();

!function(){var a=Package.meteor.Meteor,e=Package["service-configuration"].ServiceConfiguration,c=Package.oauth.OAuth,o=Package.oauth.Oauth;"undefined"==typeof Package&&(Package={}),Package.oauth2={}}();

!function(){var e=Package.meteor.Meteor,a=Package.oauth.OAuth,o=Package.oauth.Oauth,n=Package.templating.Template,i=Package.random.Random,t=Package["service-configuration"].ServiceConfiguration,r=Package.blaze.Blaze,l=Package.blaze.UI,c=Package.blaze.Handlebars,s=Package.htmljs.HTML,p;(function(){n.__checkName("configureLoginServiceDialogForFacebook"),n.configureLoginServiceDialogForFacebook=new n("Template.configureLoginServiceDialogForFacebook",function(){var e=this;return[s.Raw("<p>\n    First, you'll need to register your app on Facebook. Follow these steps:\n  </p>\n  "),s.OL("\n    ",s.Raw('<li>\n      Visit <a href="https://developers.facebook.com/apps" target="_blank">https://developers.facebook.com/apps</a>\n    </li>'),"\n    ",s.Raw('<li>\n      Click "Add a New App".\n    </li>'),"\n    ",s.Raw('<li>\n      Select "Website" and type a name for your app.\n    </li>'),"\n    ",s.Raw('<li>\n      Click "Create New Facebook App ID".\n    </li>'),"\n    ",s.Raw('<li>\n      Select a category in the dropdown and click "Create App ID".\n    </li>'),"\n    ",s.LI('\n      Under "Tell us about your website", set Site URL to: ',s.SPAN({"class":"url"},r.View(function(){return Spacebars.mustache(e.lookup("siteUrl"))})),' and click "Next".\n    '),"\n    ",s.Raw('<li>\n      Click "Skip to Developer Dashboard".\n    </li>'),"\n    ",s.Raw('<li>\n      Go to the "Settings" tab and add an email address under "Contact Email". Click "Save Changes".\n    </li>'),"\n    ",s.Raw('<li>\n      Go to the "Status &amp; Review" tab and select Yes for "Do you want to make this app and\n      all its live features available to the general public?". Click "Confirm".\n    </li>'),"\n    ",s.Raw("<li>\n      Go back to the Dashboard tab.\n    </li>"),"\n  ")]})}).call(this),function(){n.configureLoginServiceDialogForFacebook.helpers({siteUrl:function(){return e.absoluteUrl()}}),n.configureLoginServiceDialogForFacebook.fields=function(){return[{property:"appId",label:"App ID"},{property:"secret",label:"App Secret"}]}}.call(this),function(){p={},p.requestCredential=function(e,o){o||"function"!=typeof e||(o=e,e={});var n=t.configurations.findOne({service:"facebook"});if(!n)return void(o&&o(new t.ConfigError));var r=i.secret(),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent),c=l?"touch":"popup",s="email";e&&e.requestPermissions&&(s=e.requestPermissions.join(","));var p=a._loginStyle("facebook",n,e),u="https://www.facebook.com/dialog/oauth?client_id="+n.appId+"&redirect_uri="+a._redirectUri("facebook",n)+"&display="+c+"&scope="+s+"&state="+a._stateParam(p,r);a.launchLogin({loginService:"facebook",loginStyle:p,loginUrl:u,credentialRequestCompleteCallback:o,credentialToken:r})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.facebook={Facebook:p}}();

!function(){var e=Package.meteor.Meteor,o=Package["accounts-base"].Accounts,a=Package.facebook.Facebook;(function(){o.oauth.registerService("facebook"),e.isClient?e.loginWithFacebook=function(e,c){c||"function"!=typeof e||(c=e,e=null);var t=o.oauth.credentialRequestCompleteHandler(c);a.requestCredential(e,t)}:o.addAutopublishFields({forLoggedInUser:["services.facebook"],forOtherUsers:["services.facebook.id","services.facebook.username","services.facebook.gender"]})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-facebook"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,a=Package.tracker.Tracker,i=Package.tracker.Deps,n=Package.ejson.EJSON,r;(function(){var e=function(e){return void 0===e?"undefined":n.stringify(e)},i=function(e){return void 0===e||"undefined"===e?void 0:n.parse(e)};r=function(e){if(e)if("string"==typeof e)r._registerDictForMigrate(e,this),this.keys=r._loadMigratedDict(e)||{};else{if("object"!=typeof e)throw new Error("Invalid ReactiveDict argument: "+e);this.keys=e}else this.keys={};this.keyDeps={},this.keyValueDeps={}},t.extend(r.prototype,{set:function(a,i){var n=this;i=e(i);var r="undefined";if(t.has(n.keys,a)&&(r=n.keys[a]),i!==r){n.keys[a]=i;var s=function(e){e&&e.changed()};s(n.keyDeps[a]),n.keyValueDeps[a]&&(s(n.keyValueDeps[a][r]),s(n.keyValueDeps[a][i]))}},setDefault:function(e,t){var a=this;void 0===a.keys[e]&&a.set(e,t)},get:function(e){var t=this;return t._ensureKey(e),t.keyDeps[e].depend(),i(t.keys[e])},equals:function(r,s){var c=this,o=null;if("undefined"!=typeof Mongo&&(o=Mongo.ObjectID),!("string"==typeof s||"number"==typeof s||"boolean"==typeof s||"undefined"==typeof s||s instanceof Date||o&&s instanceof o||null===s))throw new Error("ReactiveDict.equals: value must be scalar");var u=e(s);if(a.active){c._ensureKey(r),t.has(c.keyValueDeps[r],u)||(c.keyValueDeps[r][u]=new a.Dependency);var d=c.keyValueDeps[r][u].depend();d&&a.onInvalidate(function(){c.keyValueDeps[r][u].hasDependents()||delete c.keyValueDeps[r][u]})}var f=void 0;return t.has(c.keys,r)&&(f=i(c.keys[r])),n.equals(f,s)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new a.Dependency,t.keyValueDeps[e]={})},_getMigrationData:function(){return this.keys}})}).call(this),function(){if(r._migratedDictData={},r._dictsToMigrate={},r._loadMigratedDict=function(e){return t.has(r._migratedDictData,e)?r._migratedDictData[e]:null},r._registerDictForMigrate=function(e,a){if(t.has(r._dictsToMigrate,e))throw new Error("Duplicate ReactiveDict name: "+e);r._dictsToMigrate[e]=a},e.isClient&&Package.reload){var a=Package.reload.Reload._migrationData("reactive-dict");a&&a.dicts&&(r._migratedDictData=a.dicts),Package.reload.Reload._onMigrate("reactive-dict",function(){var e=r._dictsToMigrate,t={};for(var a in e)t[a]=e[a]._getMigrationData();return[!0,{dicts:t}]})}}.call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:r}}();

!function(){var e=Package.meteor.Meteor,a=Package.underscore._,c=Package["reactive-dict"].ReactiveDict,n=Package.ejson.EJSON,i;(function(){i=new c("session")}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:i}}();

!function(){var n=Package.meteor.Meteor,e=Package.tracker.Tracker,o=Package.tracker.Deps,i=Package["service-configuration"].ServiceConfiguration,t=Package["accounts-base"].Accounts,s=Package.underscore._,r=Package.templating.Template,a=Package.session.Session,l=Package.blaze.Blaze,u=Package.blaze.UI,c=Package.blaze.Handlebars,g=Package.htmljs.HTML,d,p,f,m,w,b,k,_;(function(){t.ui={},t.ui._options={requestPermissions:{},requestOfflineToken:{},forceApprovalPrompt:{}},t.ui.config=function(n){var e=["passwordSignupFields","requestPermissions","requestOfflineToken","forceApprovalPrompt"];if(s.each(s.keys(n),function(n){if(!s.contains(e,n))throw new Error("Accounts.ui.config: Invalid key: "+n)}),n.passwordSignupFields){if(!s.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY","EMAIL_ONLY"],n.passwordSignupFields))throw new Error("Accounts.ui.config: Invalid option for `passwordSignupFields`: "+n.passwordSignupFields);if(t.ui._options.passwordSignupFields)throw new Error("Accounts.ui.config: Can't set `passwordSignupFields` more than once");t.ui._options.passwordSignupFields=n.passwordSignupFields}n.requestPermissions&&s.each(n.requestPermissions,function(n,e){if(t.ui._options.requestPermissions[e])throw new Error("Accounts.ui.config: Can't set `requestPermissions` more than once for "+e);if(!(n instanceof Array))throw new Error("Accounts.ui.config: Value for `requestPermissions` must be an array");t.ui._options.requestPermissions[e]=n}),n.requestOfflineToken&&s.each(n.requestOfflineToken,function(n,e){if("google"!==e)throw new Error("Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.");if(t.ui._options.requestOfflineToken[e])throw new Error("Accounts.ui.config: Can't set `requestOfflineToken` more than once for "+e);t.ui._options.requestOfflineToken[e]=n}),n.forceApprovalPrompt&&s.each(n.forceApprovalPrompt,function(n,e){if("google"!==e)throw new Error("Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.");if(t.ui._options.forceApprovalPrompt[e])throw new Error("Accounts.ui.config: Can't set `forceApprovalPrompt` more than once for "+e);t.ui._options.forceApprovalPrompt[e]=n})},d=function(){return t.ui._options.passwordSignupFields||"EMAIL_ONLY"}}).call(this),function(){r.__checkName("loginButtons"),r.loginButtons=new r("Template.loginButtons",function(){var n=this;return g.DIV({id:"login-buttons","class":function(){return["login-buttons-dropdown-align-",Spacebars.mustache(n.lookup("align"))]}},"\n    ",l.If(function(){return Spacebars.call(n.lookup("currentUser"))},function(){return["\n      ",l.If(function(){return Spacebars.call(n.lookup("loggingIn"))},function(){return["\n        \n        ",l.If(function(){return Spacebars.call(n.lookup("dropdown"))},function(){return["\n          ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n        "]},function(){return["\n          ",g.DIV({"class":"login-buttons-with-only-one-button"},"\n            ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggingInSingleLoginButton")),"\n          "),"\n        "]}),"\n      "]},function(){return["\n        ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedIn")),"\n      "]}),"\n    "]},function(){return["\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOut")),"\n    "]}),"\n  ")}),r.__checkName("_loginButtonsLoggedIn"),r._loginButtonsLoggedIn=new r("Template._loginButtonsLoggedIn",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("dropdown"))},function(){return["\n    ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedInDropdown")),"\n  "]},function(){return["\n    ",g.DIV({"class":"login-buttons-with-only-one-button"},"\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedInSingleLogoutButton")),"\n    "),"\n  "]})}),r.__checkName("_loginButtonsLoggedOut"),r._loginButtonsLoggedOut=new r("Template._loginButtonsLoggedOut",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("services"))},function(){return[" \n    ",l.If(function(){return Spacebars.call(n.lookup("configurationLoaded"))},function(){return["\n      ",l.If(function(){return Spacebars.call(n.lookup("dropdown"))},function(){return[" \n        ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOutDropdown")),"\n      "]},function(){return["\n        ",Spacebars.With(function(){return Spacebars.call(n.lookup("singleService"))},function(){return[" \n          ",g.DIV({"class":"login-buttons-with-only-one-button"},"\n            ",l.If(function(){return Spacebars.call(n.lookup("loggingIn"))},function(){return["\n              ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggingInSingleLoginButton")),"\n            "]},function(){return["\n              ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOutSingleLoginButton")),"\n            "]}),"\n          "),"\n        "]}),"\n      "]}),"\n    "]}),"\n  "]},function(){return["\n    ",g.DIV({"class":"no-services"},"No login services configured"),"\n  "]})}),r.__checkName("_loginButtonsMessages"),r._loginButtonsMessages=new r("Template._loginButtonsMessages",function(){var n=this;return[l.If(function(){return Spacebars.call(n.lookup("errorMessage"))},function(){return["\n    ",g.DIV({"class":"message error-message"},l.View(function(){return Spacebars.mustache(n.lookup("errorMessage"))})),"\n  "]}),"\n  ",l.If(function(){return Spacebars.call(n.lookup("infoMessage"))},function(){return["\n    ",g.DIV({"class":"message info-message"},l.View(function(){return Spacebars.mustache(n.lookup("infoMessage"))})),"\n  "]})]}),r.__checkName("_loginButtonsLoggingIn"),r._loginButtonsLoggingIn=new r("Template._loginButtonsLoggingIn",function(){var n=this;return[Spacebars.include(n.lookupTemplate("_loginButtonsLoggingInPadding")),g.Raw('\n  <div class="loading">&nbsp;</div>\n  '),Spacebars.include(n.lookupTemplate("_loginButtonsLoggingInPadding"))]}),r.__checkName("_loginButtonsLoggingInPadding"),r._loginButtonsLoggingInPadding=new r("Template._loginButtonsLoggingInPadding",function(){var n=this;return l.Unless(function(){return Spacebars.call(n.lookup("dropdown"))},function(){return["\n    \n    ",g.DIV({"class":"login-buttons-padding"},"\n      ",g.DIV({"class":"login-button single-login-button",style:"visibility: hidden;",id:"login-buttons-logout"},g.CharRef({html:"&nbsp;",str:" "})),"\n    "),"\n  "]},function(){return["\n    \n    ",g.DIV({"class":"login-buttons-padding"}),"\n  "]})})}.call(this),function(){r.__checkName("_loginButtonsLoggedOutSingleLoginButton"),r._loginButtonsLoggedOutSingleLoginButton=new r("Template._loginButtonsLoggedOutSingleLoginButton",function(){var n=this;return g.DIV({"class":"login-text-and-button"},"\n    ",g.DIV({"class":function(){return["login-button single-login-button ",l.Unless(function(){return Spacebars.call(n.lookup("configured"))},function(){return"configure-button"})]},id:function(){return["login-buttons-",Spacebars.mustache(n.lookup("name"))]}},"\n      ",g.DIV({"class":"login-image",id:function(){return["login-buttons-image-",Spacebars.mustache(n.lookup("name"))]}}),"\n      ",l.If(function(){return Spacebars.call(n.lookup("configured"))},function(){return["\n        ",g.SPAN({"class":function(){return["text-besides-image sign-in-text-",Spacebars.mustache(n.lookup("name"))]}},"Sign in with ",l.View(function(){return Spacebars.mustache(n.lookup("capitalizedName"))})),"\n      "]},function(){return["\n        ",g.SPAN({"class":function(){return["text-besides-image configure-text-",Spacebars.mustache(n.lookup("name"))]}},"Configure ",l.View(function(){return Spacebars.mustache(n.lookup("capitalizedName"))})," Login"),"\n      "]}),"\n    "),"\n  ")}),r.__checkName("_loginButtonsLoggingInSingleLoginButton"),r._loginButtonsLoggingInSingleLoginButton=new r("Template._loginButtonsLoggingInSingleLoginButton",function(){var n=this;return g.DIV({"class":"login-text-and-button"},"\n    ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n  ")}),r.__checkName("_loginButtonsLoggedInSingleLogoutButton"),r._loginButtonsLoggedInSingleLogoutButton=new r("Template._loginButtonsLoggedInSingleLogoutButton",function(){var n=this;return g.DIV({"class":"login-text-and-button"},"\n    ",g.DIV({"class":"login-display-name"},"\n      ",l.View(function(){return Spacebars.mustache(n.lookup("displayName"))}),"\n    "),g.Raw('\n    <div class="login-button single-login-button" id="login-buttons-logout">Sign Out</div>\n  '))})}.call(this),function(){r.__checkName("_loginButtonsLoggedInDropdown"),r._loginButtonsLoggedInDropdown=new r("Template._loginButtonsLoggedInDropdown",function(){var n=this;return g.DIV({"class":"login-link-and-dropdown-list"},"\n    ",g.A({"class":"login-link-text",id:"login-name-link"},"\n      ",l.View(function(){return Spacebars.mustache(n.lookup("displayName"))})," ▾\n    "),"\n\n    ",l.If(function(){return Spacebars.call(n.lookup("dropdownVisible"))},function(){return["\n      ",g.DIV({id:"login-dropdown-list","class":"accounts-dialog"},"\n        ",g.A({"class":"login-close-text"},"Close"),"\n        ",g.DIV({"class":"login-close-text-clear"}),"\n\n        ",l.If(function(){return Spacebars.call(n.lookup("inMessageOnlyFlow"))},function(){return["\n          ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),"\n        "]},function(){return["\n          ",l.If(function(){return Spacebars.call(n.lookup("inChangePasswordFlow"))},function(){return["\n            ",Spacebars.include(n.lookupTemplate("_loginButtonsChangePassword")),"\n          "]},function(){return["\n            ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedInDropdownActions")),"\n          "]}),"\n        "]}),"\n      "),"\n    "]}),"\n  ")}),r.__checkName("_loginButtonsLoggedInDropdownActions"),r._loginButtonsLoggedInDropdownActions=new r("Template._loginButtonsLoggedInDropdownActions",function(){var n=this;return[l.If(function(){return Spacebars.call(n.lookup("allowChangingPassword"))},function(){return["\n    ",g.DIV({"class":"login-button",id:"login-buttons-open-change-password"},"\n      Change password\n    "),"\n  "]}),g.Raw('\n\n  <div class="login-button" id="login-buttons-logout">\n    Sign out\n  </div>\n\n  '),Spacebars.include(n.lookupTemplate("_loginButtonsMessages"))]}),r.__checkName("_loginButtonsLoggedOutDropdown"),r._loginButtonsLoggedOutDropdown=new r("Template._loginButtonsLoggedOutDropdown",function(){var n=this;return g.DIV({"class":function(){return["login-link-and-dropdown-list ",Spacebars.mustache(n.lookup("additionalClasses"))]}},"\n    ",l.If(function(){return Spacebars.call(n.lookup("dropdownVisible"))},function(){return["\n      \n      ",g.A({"class":"login-link-text",id:"login-sign-in-link"},"Sign in ▾"),"\n      ",g.DIV({id:"login-dropdown-list","class":"accounts-dialog"},"\n        ",g.A({"class":"login-close-text"},"Close"),"\n        ",l.If(function(){return Spacebars.call(n.lookup("loggingIn"))},function(){return["\n          ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n        "]}),"\n        ",g.DIV({"class":"login-close-text-clear"}),"\n        ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOutAllServices")),"\n      "),"\n    "]},function(){return["\n      ",l.If(function(){return Spacebars.call(n.lookup("loggingIn"))},function(){return["\n        \n        ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n      "]},function(){return["\n        ",g.A({"class":"login-link-text",id:"login-sign-in-link"},"Sign in ▾"),"\n      "]}),"\n    "]}),"\n  ")}),r.__checkName("_loginButtonsLoggedOutAllServices"),r._loginButtonsLoggedOutAllServices=new r("Template._loginButtonsLoggedOutAllServices",function(){var n=this;return[l.Each(function(){return Spacebars.call(n.lookup("services"))},function(){return["\n    ",l.If(function(){return Spacebars.call(n.lookup("isPasswordService"))},function(){return["\n      ",l.If(function(){return Spacebars.call(n.lookup("hasOtherServices"))},function(){return[" \n        ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOutPasswordServiceSeparator")),"\n      "]}),"\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOutPasswordService")),"\n    "]},function(){return["\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsLoggedOutSingleLoginButton")),"\n    "]}),"\n  "]}),"\n\n  ",l.Unless(function(){return Spacebars.call(n.lookup("hasPasswordService"))},function(){return["\n    ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),"\n  "]})]}),r.__checkName("_loginButtonsLoggedOutPasswordServiceSeparator"),r._loginButtonsLoggedOutPasswordServiceSeparator=new r("Template._loginButtonsLoggedOutPasswordServiceSeparator",function(){var n=this;return g.Raw('<div class="or">\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n    <span class="or-text">or</span>\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n  </div>')}),r.__checkName("_loginButtonsLoggedOutPasswordService"),r._loginButtonsLoggedOutPasswordService=new r("Template._loginButtonsLoggedOutPasswordService",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("inForgotPasswordFlow"))},function(){return["\n    ",Spacebars.include(n.lookupTemplate("_forgotPasswordForm")),"\n  "]},function(){return["\n    ",g.DIV({"class":"login-form login-password-form"},"\n      ",l.Each(function(){return Spacebars.call(n.lookup("fields"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("_loginButtonsFormField")),"\n      "]}),"\n\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),"\n\n      ",g.DIV({"class":"login-button login-button-form-submit",id:"login-buttons-password"},"\n        ",l.If(function(){return Spacebars.call(n.lookup("inSignupFlow"))},function(){return"\n          Create account\n        "},function(){return"\n          Sign in\n        "}),"\n      "),"\n\n      ",l.If(function(){return Spacebars.call(n.lookup("inLoginFlow"))},function(){return["\n        ",l.If(function(){return Spacebars.call(n.lookup("showCreateAccountLink"))},function(){return["\n          ",g.DIV({"class":"additional-link-container"},"\n            ",g.A({id:"signup-link","class":"additional-link"},"Create account"),"\n          "),"\n        "]}),"\n\n        ",l.If(function(){return Spacebars.call(n.lookup("showForgotPasswordLink"))},function(){return["\n          ",g.DIV({"class":"additional-link-container"},"\n            ",g.A({id:"forgot-password-link","class":"additional-link"},"Forgot password"),"\n          "),"\n        "]}),"\n      "]}),"\n\n      ",l.If(function(){return Spacebars.call(n.lookup("inSignupFlow"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("_loginButtonsBackToLoginLink")),"\n      "]}),"\n    "),"\n  "]})}),r.__checkName("_forgotPasswordForm"),r._forgotPasswordForm=new r("Template._forgotPasswordForm",function(){var n=this;return g.DIV({"class":"login-form"},g.Raw('\n    <div id="forgot-password-email-label-and-input"> \n      <label id="forgot-password-email-label" for="forgot-password-email">Email</label>\n      <input id="forgot-password-email" type="email">\n    </div>\n\n    '),Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),g.Raw('\n\n    <div class="login-button login-button-form-submit" id="login-buttons-forgot-password">\n      Reset password\n    </div>\n\n    '),Spacebars.include(n.lookupTemplate("_loginButtonsBackToLoginLink")),"\n  ")}),r.__checkName("_loginButtonsBackToLoginLink"),r._loginButtonsBackToLoginLink=new r("Template._loginButtonsBackToLoginLink",function(){var n=this;return g.Raw('<div class="additional-link-container">\n    <a id="back-to-login-link" class="additional-link">Sign in</a>\n  </div>')}),r.__checkName("_loginButtonsFormField"),r._loginButtonsFormField=new r("Template._loginButtonsFormField",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("visible"))},function(){return["\n    ",g.DIV({id:function(){return["login-",Spacebars.mustache(n.lookup("fieldName")),"-label-and-input"]}},"\n      ",g.LABEL({id:function(){return["login-",Spacebars.mustache(n.lookup("fieldName")),"-label"]},"for":function(){return["login-",Spacebars.mustache(n.lookup("fieldName"))]}},"\n        ",l.View(function(){return Spacebars.mustache(n.lookup("fieldLabel"))}),"\n      "),"\n      ",g.INPUT({id:function(){return["login-",Spacebars.mustache(n.lookup("fieldName"))]},type:function(){return Spacebars.mustache(n.lookup("inputType"))}}),"\n    "),"\n  "]})}),r.__checkName("_loginButtonsChangePassword"),r._loginButtonsChangePassword=new r("Template._loginButtonsChangePassword",function(){var n=this;return[l.Each(function(){return Spacebars.call(n.lookup("fields"))},function(){return["\n    ",Spacebars.include(n.lookupTemplate("_loginButtonsFormField")),"\n  "]}),"\n\n  ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),g.Raw('\n\n  <div class="login-button login-button-form-submit" id="login-buttons-do-change-password">\n    Change password\n  </div>')]})}.call(this),function(){r.body.addContent(function(){var n=this;return[Spacebars.include(n.lookupTemplate("_resetPasswordDialog")),"\n  ",Spacebars.include(n.lookupTemplate("_justResetPasswordDialog")),"\n  ",Spacebars.include(n.lookupTemplate("_enrollAccountDialog")),"\n  ",Spacebars.include(n.lookupTemplate("_justVerifiedEmailDialog")),"\n  ",Spacebars.include(n.lookupTemplate("_configureLoginServiceDialog")),"\n  ",Spacebars.include(n.lookupTemplate("_configureLoginOnDesktopDialog")),g.Raw("\n\n  <!-- if we're not showing a dropdown, we need some other place to show messages -->\n  "),Spacebars.include(n.lookupTemplate("_loginButtonsMessagesDialog"))]}),n.startup(r.body.renderToDocument),r.__checkName("_resetPasswordDialog"),r._resetPasswordDialog=new r("Template._resetPasswordDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("inResetPasswordFlow"))},function(){return["\n    ",g.DIV({"class":"hide-background"}),"\n\n    ",g.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      ",g.LABEL({id:"reset-password-new-password-label","for":"reset-password-new-password"},"\n        New password\n      "),"\n\n      ",g.DIV({"class":"reset-password-new-password-wrapper"},"\n        ",g.INPUT({id:"reset-password-new-password",type:"password"}),"\n      "),"\n\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),"\n\n      ",g.DIV({"class":"login-button login-button-form-submit",id:"login-buttons-reset-password-button"},"\n        Set password\n      "),"\n\n      ",g.A({"class":"accounts-close",id:"login-buttons-cancel-reset-password"},g.CharRef({html:"&times;",str:"×"})),"\n    "),"\n  "]})}),r.__checkName("_justResetPasswordDialog"),r._justResetPasswordDialog=new r("Template._justResetPasswordDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("visible"))},function(){return["\n    ",g.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      Password reset.\n      You are now logged in as ",l.View(function(){return Spacebars.mustache(n.lookup("displayName"))}),".\n      ",g.DIV({"class":"login-button",id:"just-verified-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})}),r.__checkName("_enrollAccountDialog"),r._enrollAccountDialog=new r("Template._enrollAccountDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("inEnrollAccountFlow"))},function(){return["\n    ",g.DIV({"class":"hide-background"}),"\n\n    ",g.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      ",g.LABEL({id:"enroll-account-password-label","for":"enroll-account-password"},"\n        Choose a password\n      "),"\n\n      ",g.DIV({"class":"enroll-account-password-wrapper"},"\n        ",g.INPUT({id:"enroll-account-password",type:"password"}),"\n      "),"\n\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),"\n\n      ",g.DIV({"class":"login-button login-button-form-submit",id:"login-buttons-enroll-account-button"},"\n        Create account\n      "),"\n\n      ",g.A({"class":"accounts-close",id:"login-buttons-cancel-enroll-account"},g.CharRef({html:"&times;",str:"×"})),"\n    "),"\n  "]})}),r.__checkName("_justVerifiedEmailDialog"),r._justVerifiedEmailDialog=new r("Template._justVerifiedEmailDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("visible"))},function(){return["\n    ",g.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      Email verified.\n      You are now logged in as ",l.View(function(){return Spacebars.mustache(n.lookup("displayName"))}),".\n      ",g.DIV({"class":"login-button",id:"just-verified-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})}),r.__checkName("_configureLoginServiceDialog"),r._configureLoginServiceDialog=new r("Template._configureLoginServiceDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("visible"))},function(){return["\n    ",g.DIV({id:"configure-login-service-dialog","class":"accounts-dialog accounts-centered-dialog"},"\n      ",Spacebars.include(n.lookupTemplate("configurationSteps")),"\n\n      ",g.P("\n        Now, copy over some details.\n      "),"\n      ",g.P("\n        ",g.TABLE("\n          ",g.COLGROUP("\n            ",g.COL({span:"1","class":"configuration_labels"}),"\n            ",g.COL({span:"1","class":"configuration_inputs"}),"\n          "),"\n          ",l.Each(function(){return Spacebars.call(n.lookup("configurationFields"))},function(){return["\n            ",g.TR("\n              ",g.TD("\n                ",g.LABEL({"for":function(){return["configure-login-service-dialog-",Spacebars.mustache(n.lookup("property"))]}},l.View(function(){return Spacebars.mustache(n.lookup("label"))})),"\n              "),"\n              ",g.TD("\n                ",g.INPUT({id:function(){return["configure-login-service-dialog-",Spacebars.mustache(n.lookup("property"))]},type:"text"}),"\n              "),"\n            "),"\n          "]}),"\n        "),"\n      "),"\n      ",g.P({"class":"new-section"},"\n        Choose the login style:\n      "),"\n      ",g.P("\n        ",g.CharRef({html:"&emsp;",str:" "}),g.INPUT({id:"configure-login-service-dialog-popupBasedLogin",type:"radio",checked:"checked",name:"loginStyle",value:"popup"}),"\n        ",g.LABEL({"for":"configure-login-service-dialog-popupBasedLogin"},"Popup-based login (recommended for most applications)"),"\n\n        ",g.BR(),g.CharRef({html:"&emsp;",str:" "}),g.INPUT({id:"configure-login-service-dialog-redirectBasedLogin",type:"radio",name:"loginStyle",value:"redirect"}),"\n        ",g.LABEL({"for":"configure-login-service-dialog-redirectBasedLogin"},"\n          Redirect-based login (special cases explained\n          ",g.A({href:"https://github.com/meteor/meteor/wiki/OAuth-for-mobile-Meteor-clients#popup-versus-redirect-flow",target:"_blank"},"here"),")\n        "),"\n      "),"\n      ",g.DIV({"class":"new-section"},"\n        ",g.DIV({"class":"login-button configure-login-service-dismiss-button"},"\n          I'll do this later\n        "),"\n        ",g.A({"class":"accounts-close configure-login-service-dismiss-button"},g.CharRef({html:"&times;",str:"×"})),"\n\n        ",g.DIV({"class":function(){return["login-button login-button-configure ",l.If(function(){return Spacebars.call(n.lookup("saveDisabled"))},function(){return"login-button-disabled"})]},id:"configure-login-service-dialog-save-configuration"},"\n          Save Configuration\n        "),"\n      "),"\n    "),"\n  "]})}),r.__checkName("_loginButtonsMessagesDialog"),r._loginButtonsMessagesDialog=new r("Template._loginButtonsMessagesDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("visible"))},function(){return["\n    ",g.DIV({"class":"accounts-dialog accounts-centered-dialog",id:"login-buttons-message-dialog"},"\n      ",Spacebars.include(n.lookupTemplate("_loginButtonsMessages")),"\n      ",g.DIV({"class":"login-button",id:"messages-dialog-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})}),r.__checkName("_configureLoginOnDesktopDialog"),r._configureLoginOnDesktopDialog=new r("Template._configureLoginOnDesktopDialog",function(){var n=this;return l.If(function(){return Spacebars.call(n.lookup("visible"))},function(){return["\n    ",g.DIV({"class":"accounts-dialog accounts-centered-dialog",id:"configure-on-desktop-dialog"},"\n      ",g.P("\n        Please configure login on a desktop browser.\n      "),"\n      ",g.DIV({"class":"login-button",id:"configure-on-desktop-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})})}.call(this),function(){var e=["dropdownVisible","inSignupFlow","inForgotPasswordFlow","inChangePasswordFlow","inMessageOnlyFlow","errorMessage","infoMessage","resetPasswordToken","enrollAccountToken","justVerifiedEmail","justResetPassword","configureLoginServiceDialogVisible","configureLoginServiceDialogServiceName","configureLoginServiceDialogSaveDisabled","configureOnDesktopVisible"],o=function(n){if(!s.contains(e,n))throw new Error("Invalid key in loginButtonsSession: "+n)},i="Meteor.loginButtons.";t._loginButtonsSession={set:function(n,e){if(o(n),s.contains(["errorMessage","infoMessage"],n))throw new Error("Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().");this._set(n,e)},_set:function(n,e){a.set(i+n,e)},get:function(n){return o(n),a.get(i+n)},closeDropdown:function(){this.set("inSignupFlow",!1),this.set("inForgotPasswordFlow",!1),this.set("inChangePasswordFlow",!1),this.set("inMessageOnlyFlow",!1),this.set("dropdownVisible",!1),this.resetMessages()},infoMessage:function(n){this._set("errorMessage",null),this._set("infoMessage",n),this.ensureMessageVisible()},errorMessage:function(n){this._set("errorMessage",n),this._set("infoMessage",null),this.ensureMessageVisible()},isMessageDialogVisible:function(){return this.get("resetPasswordToken")||this.get("enrollAccountToken")||this.get("justVerifiedEmail")},ensureMessageVisible:function(){this.isMessageDialogVisible()||this.set("dropdownVisible",!0)},resetMessages:function(){this._set("errorMessage",null),this._set("infoMessage",null)},configureService:function(e){n.isCordova?this.set("configureOnDesktopVisible",!0):(this.set("configureLoginServiceDialogVisible",!0),this.set("configureLoginServiceDialogServiceName",e),this.set("configureLoginServiceDialogSaveDisabled",!0))}}}.call(this),function(){var e=t._loginButtonsSession;r.loginButtons.events({"click #login-buttons-logout":function(){n.logout(function(){e.closeDropdown()})}}),r.registerHelper("loginButtons",function(){throw new Error("Use {{> loginButtons}} instead of {{loginButtons}}")}),p=function(){var e=n.user();return e?e.profile&&e.profile.name?e.profile.name:e.username?e.username:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"":""},f=function(){var n=this,e=Package["accounts-oauth"]?t.oauth.serviceNames():[];return e.sort(),m()&&e.push("password"),s.map(e,function(n){return{name:n}})},m=function(){return!!Package["accounts-password"]},w=function(){return m()||f().length>1},b=function(n){return n.length>=3?!0:(e.errorMessage("Username must be at least 3 characters long"),!1)},k=function(n){return"USERNAME_AND_OPTIONAL_EMAIL"===d()&&""===n?!0:-1!==n.indexOf("@")?!0:(e.errorMessage("Invalid email"),!1)},_=function(n){return n.length>=6?!0:(e.errorMessage("Password must be at least 6 characters long"),!1)},r._loginButtonsLoggedOut.helpers({dropdown:w,services:f,singleService:function(){var n=f();if(1!==n.length)throw new Error("Shouldn't be rendering this template with more than one configured service");return n[0]},configurationLoaded:function(){return t.loginServicesConfigured()}}),r._loginButtonsLoggedIn.helpers({dropdown:w}),r._loginButtonsLoggedInSingleLogoutButton.helpers({displayName:p}),r._loginButtonsMessages.helpers({errorMessage:function(){return e.get("errorMessage")}}),r._loginButtonsMessages.helpers({infoMessage:function(){return e.get("infoMessage")}}),r._loginButtonsLoggingInPadding.helpers({dropdown:w})}.call(this),function(){var e=t._loginButtonsSession,o=function(n,o){o?o instanceof t.LoginCancelledError||(o instanceof i.ConfigError?e.configureService(n):e.errorMessage(o.reason||"Unknown error")):e.closeDropdown()};t.onPageLoadLogin(function(n){s.contains(s.pluck(f(),"name"),n.type)&&o(n.type,n.error)}),r._loginButtonsLoggedOutSingleLoginButton.events({"click .login-button":function(){var i=this.name;e.resetMessages();var s=n["loginWith"+("meteor-developer"===i?"MeteorDeveloperAccount":a(i))],r={};t.ui._options.requestPermissions[i]&&(r.requestPermissions=t.ui._options.requestPermissions[i]),t.ui._options.requestOfflineToken[i]&&(r.requestOfflineToken=t.ui._options.requestOfflineToken[i]),t.ui._options.forceApprovalPrompt[i]&&(r.forceApprovalPrompt=t.ui._options.forceApprovalPrompt[i]),s(r,function(n){o(i,n)})}}),r._loginButtonsLoggedOutSingleLoginButton.helpers({configured:function(){return!!i.configurations.findOne({service:this.name})},capitalizedName:function(){return"github"===this.name?"GitHub":"meteor-developer"===this.name?"Meteor":a(this.name)}});var a=function(n){return n=null==n?"":String(n),n.charAt(0).toUpperCase()+n.slice(1)}}.call(this),function(){var o=t._loginButtonsSession;r.loginButtons.events({"click #login-name-link, click #login-sign-in-link":function(){o.set("dropdownVisible",!0),e.flush(),v()},"click .login-close-text":function(){o.closeDropdown()}}),r._loginButtonsLoggedInDropdown.events({"click #login-buttons-open-change-password":function(){o.resetMessages(),o.set("inChangePasswordFlow",!0)}}),r._loginButtonsLoggedInDropdown.helpers({displayName:p,inChangePasswordFlow:function(){return o.get("inChangePasswordFlow")},inMessageOnlyFlow:function(){return o.get("inMessageOnlyFlow")},dropdownVisible:function(){return o.get("dropdownVisible")}}),r._loginButtonsLoggedInDropdownActions.helpers({allowChangingPassword:function(){var e=n.user();return e.username||e.emails&&e.emails[0]&&e.emails[0].address}}),r._loginButtonsLoggedOutDropdown.events({"click #login-buttons-password":function(){l()},"keypress #forgot-password-email":function(n){13===n.keyCode&&g()},"click #login-buttons-forgot-password":function(){g()},"click #signup-link":function(){o.resetMessages();var n=a("login-username"),t=a("login-email"),s=a("login-username-or-email"),r=i("login-password");o.set("inSignupFlow",!0),o.set("inForgotPasswordFlow",!1),e.flush(),null!==n?document.getElementById("login-username").value=n:null!==t?document.getElementById("login-email").value=t:null!==s&&(-1===s.indexOf("@")?document.getElementById("login-username").value=s:document.getElementById("login-email").value=s),null!==r&&(document.getElementById("login-password").value=r);var l=document.getElementById("login-dropdown-list");l.style.display="none",l.offsetHeight,l.style.display="block"},"click #forgot-password-link":function(){o.resetMessages();var n=a("login-email"),i=a("login-username-or-email");o.set("inSignupFlow",!1),o.set("inForgotPasswordFlow",!0),e.flush(),null!==n?document.getElementById("forgot-password-email").value=n:null!==i&&-1!==i.indexOf("@")&&(document.getElementById("forgot-password-email").value=i)},"click #back-to-login-link":function(){o.resetMessages();var n=a("login-username"),t=a("login-email")||a("forgot-password-email"),s=i("login-password");o.set("inSignupFlow",!1),o.set("inForgotPasswordFlow",!1),e.flush(),document.getElementById("login-username")&&(document.getElementById("login-username").value=n),document.getElementById("login-email")&&(document.getElementById("login-email").value=t),document.getElementById("login-username-or-email")&&(document.getElementById("login-username-or-email").value=t||n),null!==s&&(document.getElementById("login-password").value=s)},"keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again":function(n){13===n.keyCode&&l()
}}),r._loginButtonsLoggedOutDropdown.helpers({additionalClasses:function(){return m()?o.get("inSignupFlow")?"login-form-create-account":o.get("inForgotPasswordFlow")?"login-form-forgot-password":"login-form-sign-in":!1},dropdownVisible:function(){return o.get("dropdownVisible")},hasPasswordService:m}),r._loginButtonsLoggedOutAllServices.helpers({services:f,isPasswordService:function(){return"password"===this.name},hasOtherServices:function(){return f().length>1},hasPasswordService:m}),r._loginButtonsLoggedOutPasswordService.helpers({fields:function(){var n=[{fieldName:"username-or-email",fieldLabel:"Username or Email",visible:function(){return s.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL"],d())}},{fieldName:"username",fieldLabel:"Username",visible:function(){return"USERNAME_ONLY"===d()}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return"EMAIL_ONLY"===d()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}}],e=[{fieldName:"username",fieldLabel:"Username",visible:function(){return s.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],d())}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return s.contains(["USERNAME_AND_EMAIL","EMAIL_ONLY"],d())}},{fieldName:"email",fieldLabel:"Email (optional)",inputType:"email",visible:function(){return"USERNAME_AND_OPTIONAL_EMAIL"===d()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"Password (again)",inputType:"password",visible:function(){return s.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],d())}}];return o.get("inSignupFlow")?e:n},inForgotPasswordFlow:function(){return o.get("inForgotPasswordFlow")},inLoginFlow:function(){return!o.get("inSignupFlow")&&!o.get("inForgotPasswordFlow")},inSignupFlow:function(){return o.get("inSignupFlow")},showCreateAccountLink:function(){return!t._options.forbidClientAccountCreation},showForgotPasswordLink:function(){return s.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","EMAIL_ONLY"],d())}}),r._loginButtonsFormField.helpers({inputType:function(){return this.inputType||"text"}}),r._loginButtonsChangePassword.events({"keypress #login-old-password, keypress #login-password, keypress #login-password-again":function(n){13===n.keyCode&&w()},"click #login-buttons-do-change-password":function(){w()}}),r._loginButtonsChangePassword.helpers({fields:function(){return[{fieldName:"old-password",fieldLabel:"Current Password",inputType:"password",visible:function(){return!0}},{fieldName:"password",fieldLabel:"New Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"New Password (again)",inputType:"password",visible:function(){return s.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],d())}}]}});var i=function(n){var e=document.getElementById(n);return e?e.value:null},a=function(n){var e=document.getElementById(n);return e?e.value.replace(/^\s*|\s*$/g,""):null},l=function(){o.get("inSignupFlow")?c():u()},u=function(){o.resetMessages();var e=a("login-username"),t=a("login-email"),s=a("login-username-or-email"),r=i("login-password"),l;if(null!==e){if(!b(e))return;l={username:e}}else if(null!==t){if(!k(t))return;l={email:t}}else{if(null===s)throw new Error("Unexpected -- no element to use as a login user selector");if(!b(s))return;l=s}n.loginWithPassword(l,r,function(n,e){n?o.errorMessage(n.reason||"Unknown error"):o.closeDropdown()})},c=function(){o.resetMessages();var n={},e=a("login-username");if(null!==e){if(!b(e))return;n.username=e}var s=a("login-email");if(null!==s){if(!k(s))return;n.email=s}var r=i("login-password");_(r)&&(n.password=r,h()&&t.createUser(n,function(n){n?o.errorMessage(n.reason||"Unknown error"):o.closeDropdown()}))},g=function(){o.resetMessages();var n=a("forgot-password-email");-1!==n.indexOf("@")?t.forgotPassword({email:n},function(n){n?o.errorMessage(n.reason||"Unknown error"):o.infoMessage("Email sent")}):o.errorMessage("Invalid email")},w=function(){o.resetMessages();var n=i("login-old-password"),e=i("login-password");_(e)&&h()&&t.changePassword(n,e,function(n){n?o.errorMessage(n.reason||"Unknown error"):(o.set("inChangePasswordFlow",!1),o.set("inMessageOnlyFlow",!0),o.infoMessage("Password changed"))})},h=function(){var n=i("login-password-again");if(null!==n){var e=i("login-password");if(e!==n)return o.errorMessage("Passwords don't match"),!1}return!0},v=function(){for(var n=document.getElementById("login-dropdown-list").parentNode;"BODY"!==n.nodeName;n=n.parentNode)0===n.style.zIndex&&(n.style.zIndex=1)}}.call(this),function(){var e=t._loginButtonsSession,o;t.onResetPasswordLink(function(n,i){e.set("resetPasswordToken",n),o=i}),t.onEnrollmentLink(function(n,i){e.set("enrollAccountToken",n),o=i}),t.onEmailVerificationLink(function(n,o){t.verifyEmail(n,function(n){n||e.set("justVerifiedEmail",!0),o()})}),r._resetPasswordDialog.events({"click #login-buttons-reset-password-button":function(){i()},"keypress #reset-password-new-password":function(n){13===n.keyCode&&i()},"click #login-buttons-cancel-reset-password":function(){e.set("resetPasswordToken",null),o()}});var i=function(){e.resetMessages();var n=document.getElementById("reset-password-new-password").value;_(n)&&t.resetPassword(e.get("resetPasswordToken"),n,function(n){n?e.errorMessage(n.reason||"Unknown error"):(e.set("resetPasswordToken",null),e.set("justResetPassword",!0),o())})};r._resetPasswordDialog.helpers({inResetPasswordFlow:function(){return e.get("resetPasswordToken")}}),r._justResetPasswordDialog.events({"click #just-verified-dismiss-button":function(){e.set("justResetPassword",!1)}}),r._justResetPasswordDialog.helpers({visible:function(){return e.get("justResetPassword")},displayName:p}),r._enrollAccountDialog.events({"click #login-buttons-enroll-account-button":function(){a()},"keypress #enroll-account-password":function(n){13===n.keyCode&&a()},"click #login-buttons-cancel-enroll-account":function(){e.set("enrollAccountToken",null),o()}});var a=function(){e.resetMessages();var n=document.getElementById("enroll-account-password").value;_(n)&&t.resetPassword(e.get("enrollAccountToken"),n,function(n){n?e.errorMessage(n.reason||"Unknown error"):(e.set("enrollAccountToken",null),o())})};r._enrollAccountDialog.helpers({inEnrollAccountFlow:function(){return e.get("enrollAccountToken")}}),r._justVerifiedEmailDialog.events({"click #just-verified-dismiss-button":function(){e.set("justVerifiedEmail",!1)}}),r._justVerifiedEmailDialog.helpers({visible:function(){return e.get("justVerifiedEmail")},displayName:p}),r._loginButtonsMessagesDialog.events({"click #messages-dialog-dismiss-button":function(){e.resetMessages()}}),r._loginButtonsMessagesDialog.helpers({visible:function(){var n=e.get("infoMessage")||e.get("errorMessage");return!w()&&n}}),r._configureLoginServiceDialog.events({"click .configure-login-service-dismiss-button":function(){e.set("configureLoginServiceDialogVisible",!1)},"click #configure-login-service-dialog-save-configuration":function(){if(e.get("configureLoginServiceDialogVisible")&&!e.get("configureLoginServiceDialogSaveDisabled")){var o=e.get("configureLoginServiceDialogServiceName"),i={service:o};s.each(c(),function(n){i[n.property]=document.getElementById("configure-login-service-dialog-"+n.property).value.replace(/^\s*|\s*$/g,"")}),i.loginStyle=$('#configure-login-service-dialog input[name="loginStyle"]:checked').val(),t.connection.call("configureLoginService",i,function(i,t){i?n._debug("Error configuring login service "+o,i):e.set("configureLoginServiceDialogVisible",!1)})}},"input, keyup input":function(n){0===n.target.id.indexOf("configure-login-service-dialog")&&l()}});var l=function(){var n=s.any(c(),function(n){return""===document.getElementById("configure-login-service-dialog-"+n.property).value});e.set("configureLoginServiceDialogSaveDisabled",n)},u=function(){var n=e.get("configureLoginServiceDialogServiceName");return r["configureLoginServiceDialogFor"+("meteor-developer"===n?"MeteorDeveloper":g(n))]},c=function(){var n=u();return n.fields()};r._configureLoginServiceDialog.helpers({configurationFields:function(){return c()},visible:function(){return e.get("configureLoginServiceDialogVisible")},configurationSteps:function(){return u()},saveDisabled:function(){return e.get("configureLoginServiceDialogSaveDisabled")}});var g=function(n){return n=null==n?"":String(n),n.charAt(0).toUpperCase()+n.slice(1)};r._configureLoginOnDesktopDialog.helpers({visible:function(){return e.get("configureOnDesktopVisible")}}),r._configureLoginOnDesktopDialog.events({"click #configure-on-desktop-dismiss-button":function(){e.set("configureOnDesktopVisible",!1)}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-ui-unstyled"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}();

!function(){var a=Package.meteor.Meteor,e=Package["accounts-base"].Accounts;"undefined"==typeof Package&&(Package={}),Package["accounts-ui"]={}}();

!function(){var a=Package.meteor.Meteor,e=Package.blaze.Blaze,c=Package.blaze.UI,g=Package.blaze.Handlebars,k=Package.htmljs.HTML,e,c,g;"undefined"==typeof Package&&(Package={}),Package.ui={Blaze:e,UI:c,Handlebars:g}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=Package.ejson.EJSON,r;(function(){if(Package["cmather:iron-core"])throw new Error("\n\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  ")}).call(this),function(){r={},r.utils={},r.utils.assert=function(e,t){if(!e)throw new Error(t)},r.utils.warn=function(e,t){e||console&&console.warn&&console.warn(t)},r.utils.defaultValue=function(e,t,n){return"undefined"==typeof e[t]?(e[t]=n,n):e[t]},r.utils.inherits=function(e,o,i){r.utils.assert("undefined"!=typeof e,"Child is undefined in inherits function"),r.utils.assert("undefined"!=typeof o,"Parent is undefined in inherits function");for(var a in o)t.has(o,a)&&(e[a]=n.clone(o[a]));var s=function(){this.constructor=e};return s.prototype=o.prototype,e.prototype=new s,e.__super__=o.prototype,t.isObject(i)&&t.extend(e.prototype,i),e},r.utils.extend=function(e,n){n=n||{};var o=function(){var e;e=t.has(n,"constructor")?n.constructor:o.__super__.constructor,e.apply(this,arguments)};return r.utils.inherits(o,e,n)},r.utils.global=function(){return e.isClient?window:global}(),r.utils.namespace=function(e,t){var n=r.utils.global,o,i,a,s;r.utils.assert("string"==typeof e,"namespace must be a string"),o=e.split("."),a=o.pop(),s=n;for(var u=0;u<o.length;u++)i=o[u],s=s[i]=s[i]||{};return 2===arguments.length?(s[a]=t,t):s[a]},r.utils.resolve=function(e){var t=r.utils.global,n,o;if("string"==typeof e){n=e.split("."),o=t;for(var i=0;i<n.length;i++)if(o=o[n[i]],!o)return void 0}else o=e;return o},r.utils.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1,e.length)},r.utils.classCase=function(e){var n=/_|-|\.|\//;return e?t.map(e.split(n),function(e){return r.utils.capitalize(e)}).join(""):""},r.utils.camelCase=function(e){var t=r.utils.classCase(e);return t=t.charAt(0).toLowerCase()+t.slice(1,t.length)},r.utils.notifyDeprecated=function(e){var n,r,o,i,a="[:where] ':name' is deprecated. Please use ':instead' instead.";t.isObject(e)?(n=e.name,r=e.instead,o=e.message||a,i=e.where||"IronRouter"):(o=e,n="",r="",i=""),"undefined"!=typeof console&&console.warn&&console.warn("<deprecated> "+o.replace(":name",n).replace(":instead",r).replace(":where",i)+" "+(new Error).stack)},r.utils.withDeprecatedNotice=function(e,t,n){return function(){return Utils.notifyDeprecated(e),t&&t.apply(n||this,arguments)}},Function.prototype.deprecate=function(e){var t=this;return r.utils.withDeprecatedNotice(e,t)},r.utils.debug=function(e){return r.utils.assert("string"==typeof e,"debug requires a package name"),function n(){if(console&&console.log&&r.debug===!0){var n=t.toArray(arguments).join(" ");console.log("%c<"+e+"> %c"+n,"color: #999;","color: #000;")}}},r.utils.get=function(e){for(var t=1;t<arguments.length;t++){if(!(e&&arguments[t]in e))return void 0;e=e[arguments[t]]}return e},r.utils.global.Iron=r}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:core"]={Iron:r}}();

!function(){var e=Package.meteor.Meteor,t=Package.ui.Blaze,n=Package.ui.UI,a=Package.ui.Handlebars,r=Package.underscore._,i=Package.jquery.$,o=Package.jquery.jQuery,s=Package.tracker.Tracker,u=Package.tracker.Deps,c=Package["reactive-var"].ReactiveVar,l=Package.templating.Template,p=Package.random.Random,h=Package["iron:core"].Iron,d=Package.htmljs.HTML,m;(function(){if(Package["cmather:iron-dynamic-template"])throw new Error("\n\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  ")}).call(this),function(){l.__checkName("__DynamicTemplateError__"),l.__DynamicTemplateError__=new l("Template.__DynamicTemplateError__",function(){var e=this;return d.DIV({style:"margin: 0 auto; color: red;"},"\n    ",t.View(function(){return Spacebars.mustache(e.lookup("msg"))}),"\n  ")})}.call(this),function(){var e=h.utils.debug("iron:dynamic-template"),a=h.utils.assert,o=h.utils.get,d=h.utils.camelCase,f=function(e){return Object.prototype.toString.call(e)};m=function(e){this._id=p.id(),this.options=e=e||{},this._template=e.template,this._defaultTemplate=e.defaultTemplate,this._content=e.content,this._data=e.data,this._templateDep=new s.Dependency,this._dataDep=new s.Dependency,this._lookupHostDep=new s.Dependency,this._lookupHostValue=null,this._hooks={},this._eventMap=null,this._eventHandles=null,this._eventThisArg=null,this.name=e.name||this.constructor.prototype.name||"DynamicTemplate",this.isCreated=!1,this.isDestroyed=!1},m.prototype.template=function(e){if(1===arguments.length&&e!==this._template)return this._template=e,void this._templateDep.changed();if(!(arguments.length>0))return this._templateDep.depend(),this._template?"function"==typeof this._template?this._template():this._template:this._defaultTemplate?"function"==typeof this._defaultTemplate?this._defaultTemplate():this._defaultTemplate:void 0},m.prototype.defaultTemplate=function(e){return 1!==arguments.length?this._defaultTemplate:void(this._defaultTemplate=e)},m.prototype.clear=function(){this._template=void 0,this._data=void 0,this._templateDep.changed()},m.prototype.data=function(e){return 1===arguments.length&&e!==this._data?(this._data=e,void this._dataDep.changed()):(this._dataDep.depend(),"function"==typeof this._data?this._data():this._data)},m.prototype.create=function(e){var n=this;if(this.isCreated)throw new Error("DynamicTemplate view is already created");this.isCreated=!0,this.isDestroyed=!1;var a=c(null),i=t.View("DynamicTemplate",function(){var e=this,r=a.get();return t.With(function(){var t=n.data();return"undefined"!=typeof t?t:m.getParentDataContext(e)},function(){return n.renderView(r)})});return i.onViewCreated(function(){this.autorun(function(){a.set(n.template())})}),r.each(["onViewCreated","onViewReady","_onViewRendered","onViewDestroyed"],function(e){i[e](function(){n._runHooks(e,this)})}),i._onViewRendered(function(){n.isInserted=!0,1===i.renderCount&&n._attachEvents()}),i._templateInstance=new t.TemplateInstance(i),i.templateInstance=function(){var e=i._templateInstance;return e.data=t.getData(i),i._domrange&&!i.isDestroyed?(e.firstNode=i._domrange.firstNode(),e.lastNode=i._domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e},this.view=i,i.__dynamicTemplate__=this,i.name=this.name,i},m.prototype.renderView=function(e){var n=this,a=null;return"string"==typeof e?(a=l[e],a||(a=l[d(e)]),a||(a=t.With({msg:"Couldn't find a template named "+JSON.stringify(e)+" or "+JSON.stringify(d(e))+". Are you sure you defined it?"},function(){return l.__DynamicTemplateError__}))):"[object Object]"===f(e)?a=e:"undefined"!=typeof n._content&&(a=n._content),a},m.prototype.destroy=function(){this.isCreated&&(t.remove(this.view),this.view=null,this.isDestroyed=!0,this.isCreated=!1)},r.each(["onViewCreated","onViewReady","_onViewRendered","onViewDestroyed"],function(e){m.prototype[e]=function(t){var n=this._hooks[e]=this._hooks[e]||[];return n.push(t),this}}),m.prototype._runHooks=function(e,t){for(var n=this._hooks[e]||[],a,r=0;r<n.length;r++)a=n[r],a.call(t,this)},m.prototype.events=function(e,n){var a=this;this._detachEvents(),this._eventThisArg=n;var r=this._eventMap={};for(var i in e)r[i]=function(e,r){return function(e){var i=t.getData(e.currentTarget);null==i&&(i={});var o=a.view.templateInstance();return r.call(n||this,e,o,i)}}(i,e[i]);this._attachEvents()},m.prototype._attachEvents=function(){var e=this,n=e._eventThisArg,a=e._eventMap,i=e.view,o=e._eventHandles;if(i){var s=i._domrange;if(!s)throw new Error("no domrange");var u=function(n,s){r.each(a,function(a,u){var c=u.split(/,\s+/);r.each(c,function(r){var u=r.split(/\s+/);if(0!==u.length){var c=u.shift(),l=u.join(" ");o.push(t._EventSupport.listen(s,c,l,function(r){if(!n.containsElement(r.currentTarget))return null;var o=e._eventThisArg||this,s=arguments;return t._withCurrentView(i,function(){return a.apply(o,s)})},n,function(e){return e.parentRange}))}})})};s.attached?u(s,s.parentElement):s.onAttached(u)}},m.prototype._detachEvents=function(){r.each(this._eventHandles,function(e){e.stop()}),this._eventHandles=[]};var _=function(e,n,a,i){r.each(a,function(a,o){var s=o.split(/,\s+/);r.each(s,function(r){var o=r.split(/\s+/);if(0!==o.length){var s=o.shift(),u=o.join(" ");handles.push(t._EventSupport.listen(n,s,u,function(n){if(!e.containsElement(n.currentTarget))return null;var r=i||this,o=arguments;return t._withCurrentView(view,function(){return a.apply(r,o)})},e,function(e){return e.parentRange}))}})})};m.prototype.insert=function(e){if(e=e||{},!this.isInserted){this.isInserted=!0;var n=e.el||document.body,a=i(n);if(0===a.length)throw new Error("No element to insert layout into. Is your element defined? Try a Meteor.startup callback.");return this.view||this.create(e),t.render(this.view,a[0],e.nextNode,e.parentView),this}},m.prototype._getLookupHost=function(){return this._lookupHostValue},m.prototype._setLookupHost=function(e){var t=this;return t._lookupHostValue!==e&&(t._lookupHostValue=e,u.afterFlush(function(){t._lookupHostDep.changed()})),this},m.getParentDataContext=function(e){return m.getDataContext(e&&e.parentView)},m.getDataContext=function(e){for(;e;){if("with"===e.name&&!e.__isTemplateWith)return e.dataVar.get();e=e.parentView}return null},m.getInclusionArguments=function(e){var t=e&&e.parentView;return t&&t.__isTemplateWith?t.dataVar.get():null},m.args=function(e){return function(t){var n=m.getInclusionArguments(e);return n?t?n[t]:n:null}},m.extend=function(e){return h.utils.extend(this,e)},m.findFirstLookupHost=function(e){var n,r;for(a(e instanceof t.View,"view must be a Blaze.View");e;)if(e.__dynamicTemplate__){var n=e.__dynamicTemplate__._getLookupHost();if(n)return n}else e=e.parentView;return void 0},m.findLookupHostWithProperty=function(e,n){var r,i;for(a(e instanceof t.View,"view must be a Blaze.View");e;){if(e.__dynamicTemplate__){var r=e.__dynamicTemplate__._getLookupHost();if(r&&o(r,n))return r}e=e.parentView}return void 0},m.findLookupHostWithHelper=function(e,n){var r,i;for(a(e instanceof t.View,"view must be a Blaze.View");e;){if(e.__dynamicTemplate__){var r=e.__dynamicTemplate__._getLookupHost();if(r&&o(r,"constructor","_helpers",n))return r}e=e.parentView}return void 0},"undefined"!=typeof l&&n.registerHelper("DynamicTemplate",new l("DynamicTemplateHelper",function(){var e=m.args(this);return new m({data:function(){return e("data")},template:function(){return e("template")},content:this.templateContentBlock}).create()})),h.DynamicTemplate=m}.call(this),function(){var e=h.utils.assert,n=h.utils.get,a=t.View.prototype.lookup;t.View.prototype.lookup=function(e){var r=m.findLookupHostWithHelper(t.getView(),e);return r?function i(){var t=n(r,"constructor","_helpers",e),a=[].slice.call(arguments);return"function"==typeof t?t.apply(r,a):t}:a.apply(this,arguments)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:dynamic-template"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.templating.Template,t=Package.blaze.Blaze,r=Package.blaze.UI,o=Package.blaze.Handlebars,i=Package.underscore._,a=Package["iron:core"].Iron,s=Package.htmljs.HTML,c,u,h;(function(){var e=[];if(Package["cmather:iron-layout"]&&e.push("\n\n    The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  "),Package["cmather:blaze-layout"]&&e.push("The blaze-layout package has been replaced by iron-layout. Please remove the package like this:\n> meteor remove cmather:blaze-layout\n"),e.length>0)throw new Error("Sorry! Looks like there's a few errors related to iron:layout\n\n"+e.join("\n\n"))}).call(this),function(){n.__checkName("__IronDefaultLayout__"),n.__IronDefaultLayout__=new n("Template.__IronDefaultLayout__",function(){var e=this;return Spacebars.include(e.lookupTemplate("yield"))})}.call(this),function(){var e=a.DynamicTemplate,o=a.utils.inherits;c=function(e){for(;e;){if("Iron.Layout"===e.name)return e.__dynamicTemplate__;e=e.parentView}return null},u=function(e){var n=this;u.__super__.constructor.apply(this,arguments),e=e||{},this.name="Iron.Layout",this._regions={},this._regionHooks={},this.defaultTemplate("__IronDefaultLayout__"),e.content&&this.render(e.content)},h=u.DEFAULT_REGION="main",o(u,a.DynamicTemplate),u.prototype.region=function(e,n){return this._ensureRegion(e,n)},u.prototype.destroyRegions=function(){i.each(this._regions,function(e){e.destroy()}),this._regions={}},u.prototype.render=function(e,n){n=n||{};var t=n.to||n.region||h,r=this.region(t);return this._trackRenderedRegion(t),r.template(e),r.data(n.data),r},u.prototype.has=function(e){return e=e||u.DEFAULT_REGION,!!this._regions[e]},u.prototype.regionKeys=function(){return i.keys(this._regions)},u.prototype.clear=function(e){return e=e||u.DEFAULT_REGION,this.has(e)&&this.region(e).template(null),this},u.prototype.clearAll=function(){return i.each(this._regions,function(e){e.template(null)}),this},u.prototype.beginRendering=function(e){var n=this;if(this._finishRenderingTransaction&&this._finishRenderingTransaction(),this._finishRenderingTransaction=i.once(function(){var t=n._endRendering({flush:!1});e&&e(t)}),Deps.afterFlush(this._finishRenderingTransaction),this._renderedRegions)throw new Error("You called beginRendering again before calling endRendering");this._renderedRegions={}},u.prototype._trackRenderedRegion=function(e){this._renderedRegions&&(this._renderedRegions[e]=!0)},u.prototype._endRendering=function(e){e=e||{},e.flush!==!1&&Deps.flush();var n=this._renderedRegions||{};return this._renderedRegions=null,i.keys(n)},i.each(["onRegionCreated","onRegionRendered","onRegionDestroyed"],function(e){u.prototype[e]=function(n){var t=this._regionHooks[e]=this._regionHooks[e]||[];return t.push(n),this}}),u.prototype._ensureRegion=function(e,n){return this._regions[e]=this._regions[e]||this._createDynamicTemplate(e,n)},u.prototype._createDynamicTemplate=function(e,n){var t=this,r=new a.DynamicTemplate(n),o=a.utils.capitalize;return r._region=e,i.each(["viewCreated","viewReady","viewDestroyed"],function(e){e=o(e),r["on"+e](function(n){var r=this,o={viewCreated:"regionCreated",viewReady:"regionRendered",viewDestroyed:"regionDestroyed"}[e];t._runRegionHooks("on"+o,r,n)})}),r},u.prototype._runRegionHooks=function(e,n,t){for(var r=this,o=this._regionHooks[e]||[],i,a=0;a<o.length;a++)i=o[a],i.call(n,t.region,t,this)},"undefined"!=typeof n&&(r.registerHelper("yield",new n("yield",function(){var n=c(this);if(!n)throw new Error("No Iron.Layout found so you can't use yield!");var t=e.getInclusionArguments(this),r,o;return i.isString(t)?r=t:i.isObject(t)&&(r=t.region),r=r||h,o=n.region(r),o.isCreated&&o.destroy(),o.create()})),r.registerHelper("contentFor",new n("contentFor",function(){var n=c(this);if(!n)throw new Error("No Iron.Layout found so you can't use contentFor!");var t=e.getInclusionArguments(this)||{},r=this.templateContentBlock,o=t.template,a=t.data,s;if(i.isString(t))s=t;else{if(!i.isObject(t))throw new Error("Which region is this contentFor block supposed to be for?");s=t.region}return n.region(s).template(o||r),n._trackRenderedRegion(s),a&&n.region(s).data(a),null})),r.registerHelper("hasRegion",function(e){var n=c(t.getView());if(!n)throw new Error("No Iron.Layout found so you can't use hasRegion!");if(!i.isString(e))throw new Error("You need to provide an region argument to hasRegion");return!!n.region(e).template()}),r.registerHelper("Layout",new n("layout",function(){var e=a.DynamicTemplate.args(this),n=new u({template:function(){return e("template")},data:function(){return e("data")},content:this.templateContentBlock});return n.create()}))),a.Layout=u}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:layout"]={}}();

!function(){var e=Package.meteor.Meteor,r=Package.underscore._,n=Package["iron:core"].Iron,t,i;(function(){function e(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function r(t,a,s){a&&"[object Array]"!==n(a)&&(s=a,a=null),a=a||[],s=s||{};var u=s.strict,c=s.end!==!1,p=s.sensitive?"":"i",h=0;if(t instanceof RegExp){var l=t.source.match(/\((?!\?)/g)||[];return a.push.apply(a,l.map(function(e,r){return{name:r,delimiter:null,optional:!1,repeat:!1}})),o(t,a)}if("[object Array]"===n(t))return t=t.map(function(e){return r(e,a,s).source}),o(new RegExp("(?:"+t.join("|")+")",p),a);t=t.replace(i,function(r,n,t,i,o,s,u,c){if(n)return n;if(c)return"\\"+c;var p="+"===u||"*"===u,l="?"===u||"*"===u;return a.push({name:i||h++,delimiter:t||"/",optional:l,repeat:p}),t=t?"\\"+t:"",o=e(o||s||"[^"+(t||"\\/")+"]+?"),p&&(o=o+"(?:"+t+o+")*"),l?"(?:"+t+"("+o+"))?":t+"("+o+")"});var f="/"===t[t.length-1];return u||(t=(f?t.slice(0,-2):t)+"(?:\\/(?=$))?"),c||(t+=u&&f?"":"(?=\\/|$)"),o(new RegExp("^"+t+(c?"$":""),p),a)}var n=function(e){return Object.prototype.toString.call(e)},i=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g"),o=function(e,r){return e.keys=r,e};t=r}).call(this),function(){i=function(e,n){n=n||{},this.options=n,this.keys=[],this.regexp=t(e,this.keys,n),this._originalPath=e,r.extend(this,i.parse(e))},i.normalize=function(e){if(e instanceof RegExp)return e;if("string"!=typeof e)return"/";var r=i.parse(e),n=r.pathname;return"/"!==n.charAt(0)&&(n="/"+n),n.length>1&&"/"===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1)),n},i.isSameOrigin=function(e,r){var n=i.parse(e),t=i.parse(r),o=n.origin===t.origin;return o},i.fromQueryString=function(e){if(!e)return{};if("string"!=typeof e)throw new Error("expected string");"?"===e.charAt(0)&&(e=e.slice(1));var n=e.split("&"),t={},i;return r.each(n,function(e){var r=e.split("="),n=r[0],i=decodeURIComponent(r[1]);"[]"===n.slice(-2)?(n=n.slice(0,-2),t[n]=t[n]||[],t[n].push(i)):t[n]=i}),t},i.toQueryString=function(e){var n=[];return"string"==typeof e?"?"!==e.charAt(0)?"?"+e:e:(r.each(e,function(e,t){r.isArray(e)?r.each(e,function(e){n.push(encodeURIComponent(t+"[]")+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),n.length>0?"?"+n.join("&"):"")},i.parse=function(e){if("string"!=typeof e)return{};var r=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,n=e.match(r),t=n[1]?n[1].toLowerCase():void 0,o=n[3],a=!!o,s=n[4]?n[4].toLowerCase():void 0,u=s?s.split("@"):[],c,p;2==u.length?(p=u[0],c=u[1]):1==u.length?(c=u[0],p=void 0):(c=void 0,p=void 0);var h=c&&c.split(":")||[],l=h[0],f=h[1],g=t&&c?t+"//"+c:void 0,d=n[5],m=n[8],y=e,v=n[6],w,x=m&&m.indexOf("?")||-1;~x&&!v?(v=m.slice(x),m=m.substr(0,x),w=v.slice(1)):w=n[7];var R=d+(v||""),S=i.fromQueryString(w),U=[t||"",a?"//":"",s||""].join(""),j=[t||"",a?"//":"",s||"",d||"",v||"",m||""].join("");return{rootUrl:U||"",originalUrl:e||"",href:j||"",protocol:t||"",auth:p||"",host:c||"",hostname:l||"",port:f||"",origin:g||"",path:R||"",pathname:d||"",search:v||"",query:w||"",queryObject:S||"",hash:m||"",slashes:a}},i.prototype.test=function(e){return this.regexp.test(i.normalize(e))},i.prototype.exec=function(e){return this.regexp.exec(i.normalize(e))},i.prototype.params=function(e){if(!e)return[];var r=[],n=this.exec(e),t,o=this.keys,a,s;if(!n)throw new Error('The route named "'+this.name+'" does not match the path "'+e+'"');for(var u=1,c=n.length;c>u;++u)a=o[u-1],s="string"==typeof n[u]?decodeURIComponent(n[u]):n[u],a?r[a.name]=void 0!==r[a.name]?r[a.name]:s:r.push(s);return e=decodeURI(e),t=e.split("?")[1],t&&(t=t.split("#")[0]),r.hash=e.split("#")[1]||null,r.query=i.fromQueryString(t),r},i.prototype.resolve=function(e,n){var t,o,a,s=0,u=this._originalPath,c,p,h=[],l=e;if(n=n||{},e=e||[],p=n.query,c=n.hash&&n.hash.toString(),u instanceof RegExp)throw new Error("Cannot currently resolve a regular expression path");if(u=u.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(n,i,a,s,u,c,p){if(i=i||"",t=e[s],o="undefined"!=typeof t,c&&!o)t="";else if(!o)return void h.push(s);t=r.isFunction(t)?t.call(e):t;var l=r.map(String(t).split("/"),function(e){return encodeURIComponent(e)}).join("/");return i+l}).replace(/\*/g,function(n){if("undefined"==typeof e[s])throw new Error("You are trying to access a wild card parameter at index "+s+" but the value of params at that index is undefined");var t=String(e[s++]);return r.map(t.split("/"),function(e){return encodeURIComponent(e)}).join("/")}),p=i.toQueryString(p),u+=p,c&&(c=encodeURI(c.replace("#","")),u=p?u+"#"+c:u+"/#"+c),u=u.replace(/\/+/g,"/"),u=u.replace(/^(.+)\/$/g,"$1"),0==h.length)return u;if(n.throwOnMissingParams===!0)throw new Error("Missing required parameters on path "+JSON.stringify(this._originalPath)+". The missing params are: "+JSON.stringify(h)+". The params object passed in was: "+JSON.stringify(l)+".");return null},n.Url=i}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:url"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package["iron:core"].Iron,r,i,n;(function(){var t=n.Url;r=function(n,r,i){e.isFunction(n)&&(i=i||r||{},r=n,n="/",this.middleware=!0,"undefined"==typeof i.mount&&(i.mount=!0)),"object"==typeof r&&(i=r,r=i.action||"action"),i=i||{},this.options=i,this.mount=i.mount,this.method=i.method&&i.method.toLowerCase()||!1,this.where=i.where||"client",this.mount&&(i.end=!1),i.name?this.name=i.name:"string"==typeof n&&"/"!==n.charAt(0)?this.name=n:r&&r.name?this.name=r.name:"string"==typeof n&&"/"!==n&&(this.name=n.split("/").slice(1).join(".")),n=i.path||n,"string"==typeof n&&"/"!==n.charAt(0)&&(n="/"+n),this.path=n,this.compiledUrl=new t(n,i),e.isString(r)?this.handle=function o(){var t=this[r];if("function"!=typeof t)throw new Error("No method named "+JSON.stringify(r)+" found on handler.");return t.apply(this,arguments)}:e.isFunction(r)&&(this.handle=r)},r.prototype.test=function(t,e){return this.method&&e&&e.method?this.method==e.method.toLowerCase()&&this.compiledUrl.test(t):this.compiledUrl.test(t)},r.prototype.params=function(t){return this.compiledUrl.params(t)},r.prototype.resolve=function(t,e){return this.compiledUrl.resolve(t,e)},r.prototype.clone=function(){var t=new r(this.path,this.handle,this.options);return t.name=this.name,t}}).call(this),function(){var o=n.Url,a=n.utils.assert,s=n.utils.defaultValue;i=function(){this._stack=[]},i.prototype._create=function(t,n,i){var o=new r(t,n,i),a=o.name;if(a){if(e.has(this._stack,a))throw new Error("Handler with name '"+a+"' already exists.");this._stack[a]=o}return o},i.prototype.findByName=function(t){return this._stack[t]},i.prototype.push=function(t,e,n){var r=this._create(t,e,n);return this._stack.push(r),r},i.prototype.append=function(){var t=this,n=e.toArray(arguments),r={};return"object"==typeof n[n.length-1]&&(r=n.pop()),n.forEach(function(n){if("undefined"!=typeof n)if("function"==typeof n)t.push(n,r);else{if(!e.isArray(n))throw new Error("Can only append functions or arrays to the MiddlewareStack");t.append.apply(t,n.concat([r]))}}),this},i.prototype.insertAt=function(t,e,n,r){var i=this._create(e,n,r);return this._stack.splice(t,0,i),this},i.prototype.insertBefore=function(t,n,r,i){var o,a;if(!(o=this._stack[t]))throw new Error("Couldn't find a handler named '"+t+"' on the path stack");return a=e.indexOf(this._stack,o),this.insertAt(a,n,r,i),this},i.prototype.insertAfter=function(t,n,r,i){var o,a;if(!(o=this._stack[t]))throw new Error("Couldn't find a handler named '"+t+"' on the path stack");return a=e.indexOf(this._stack,o),this.insertAt(a+1,n,r,i),this},i.prototype.concat=function(){var t=new i,n=Array.prototype.concat,r=EJSON.clone(this._stack),o=e.map(e.toArray(arguments),function(t){return EJSON.clone(t._stack)});return t._stack=n.apply(r,o),t},i.prototype.dispatch=function h(e,n,r){var i=this,h=e;a("string"==typeof e,"Requires url"),a("object"==typeof n,"Requires context object"),e=o.normalize(e||"/"),s(n,"request",{}),s(n,"response",{}),s(n,"originalUrl",e),s(n,"_method",n.method),s(n,"_handlersForEnv",{client:!1,server:!1}),s(n,"_handled",!1),s(n,"isHandled",function(){return n._handled}),s(n,"willBeHandledOnClient",function(){return n._handlersForEnv.client}),s(n,"willBeHandledOnServer",function(){return n._handlersForEnv.server});var l=function(){if(r)try{r.apply(this,arguments)}catch(t){throw t._punt=!0,t}},c=0,u=t.bindEnvironment(function p(r){var a=i._stack[c++];if(n.url=n.request.url=n.originalUrl,!a)return l.call(n,r);if(!a.test(e,{method:n._method}))return u(r);var s=t.isClient?"client":"server";if(a.middleware||(n._handlersForEnv[a.where]=!0),a.where!==s)return u(r);if(n.next=u,a.mount){var h=o.normalize(a.compiledUrl.pathname),p=e.substr(h.length,e.length);p=o.normalize(p),n.url=n.request.url=p}try{var d=a.handle.length,f=n.request,m=n.response;return r&&4===d?a.handle.call(n,r,f,m,u):!r&&4>d?a.handle.call(n,f,m,u):u(r)}catch(r){if(r._punt)throw r;u(r)}finally{n._handled=!0,n.next=null}});return u(),n.next=null,n},Object.defineProperty(i.prototype,"length",{get:function(){return this._stack.length},writeable:!1,configurable:!1,enumerable:!0}),n=n||{},n.MiddlewareStack=i}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:middleware-stack"]={Handler:r}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.tracker.Tracker,a=Package.tracker.Deps,r=Package.jquery.$,o=Package.jquery.jQuery,i=Package["iron:core"].Iron,c,s,h,u,l;(function(){var t=i.Url,n="__hash__";c=function(e){var a=t.parse(e),r=a.hash&&a.hash.replace("#",""),o=a.search,i=a.pathname,c=a.rootUrl;if(r&&"/"!==r.charAt(0)){var s=n+"="+r;o=o?o+"&":"?",o+=s}return r&&"/"===r.charAt(0)?r&&(r="#"+r):r=i?"#"+i:"",[c,r,o].join("")},s=function(a){var r=t.parse(a),o=r.hash&&r.hash.replace("#",""),i=r.search,c=r.rootUrl,s;return e.has(r.queryObject,n)?(s="#"+r.queryObject[n],delete r.queryObject[n]):s="",[c,o,t.toQueryString(r.queryObject),s].join("")},h=function(e){var n=t.parse(e),a=n.queryObject;return n.hash&&(a.hash=n.hash.replace("#","")),[n.pathname,t.toQueryString(a)].join("")}}).call(this),function(){var t=i.Url;u=function(n,a){e.extend(this,t.parse(n),{options:a||{}})},u.prototype.equals=function(t){return t&&t instanceof u&&t.pathname==this.pathname&&t.search==this.search&&t.hash==this.hash&&t.options.historyState===this.options.historyState?!0:!1},u.prototype.isCancelled=function(){return!!this._isCancelled},u.prototype.cancelUrlChange=function(){this._isCancelled=!0}}.call(this),function(){var n=i.Url,o=null,f=new a.Dependency,p={go:[],popState:[]},y=function(){return/MSIE 9/.test(navigator.appVersion)},d=function(){return/MSIE 8/.test(navigator.appVersion)},g=function(){return!!Package.appcache},S=function(){return"undefined"==typeof history||"function"!=typeof history.pushState},v=function(){return l.options.useHashPaths||d()||y()||g()||S()},k=function(){return!!l.options.useHashPaths},w=function(t,n){e.each(p[t],function(t){t.call(n)})},P=function(t){if(!(t instanceof u))throw new Error("Expected a State instance");return t.equals(o)?!1:(o=t,f.changed(),!0)},m=function(){var t=location.href,e;e=k()?new u(s(t)):new u(t,{historyState:history.state}),w("popState",e),P(e)},j=function(t){var e=q;e&&e(t)},_=function(t,e){e=e||{};var n=new u(t,e);w("go",n),P(n)&&a.afterFlush(function(){n.isCancelled()||(k()?location.hash=h(t):e.replaceState===!0?history.replaceState(e.historyState,null,t):history.pushState(e.historyState,null,t))})},q=function(t){try{var e=t.currentTarget,a=e.href,r=e.pathname+e.search+e.hash;if(r=r.replace(/(^\/?)/,"/"),t.isDefaultPrevented())return void t.preventDefault();if(t.metaKey||t.ctrlKey||t.shiftKey)return;if(e.target)return;if(!n.isSameOrigin(a,location.href))return;t.preventDefault(),_(r)}catch(o){throw t.preventDefault(),o}};l={},l.options={linkSelector:"a[href]",useHashPaths:!1},l.configure=function(t){e.extend(this.options,t||{})},l.get=function(){return f.depend(),o},l.start=function(){if(!this._isStarted){if(v()){var e=n.parse(location.href);if(e.pathname.length>1){var a=c(location.href);window.location=a}this.configure({useHashPaths:!0})}var o=location.href;if(k()){var i=new u(s(o));P(i)}else{var i=new u(o);history.replaceState({initial:!0},null,o),P(i)}r(window).on("popstate.iron-location",m),r(window).on("hashchange.iron-location",m),t.startup(function(){r(document).on("click.iron-location",l.options.linkSelector,j)}),this._isStarted=!0}},l.stop=function(){this._isStarted&&(r(window).on("popstate.iron-location"),r(window).on("hashchange.iron-location"),r(document).off("click.iron-location"),this._isStarted=!1)},l.onClick=function(t){q=t},l.go=function(t,e){return _(t,e)},l.onGo=function(t){p.go.push(t)},l.onPopState=function(t){p.popState.push(t)},l.start(),i.Location=l}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:location"]={urlToHashStyle:c,urlFromHashStyle:s}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.tracker.Tracker,o=Package.tracker.Deps,a=Package["reactive-dict"].ReactiveDict,r=Package.templating.Template,i=Package["iron:core"].Iron,u=Package.blaze.Blaze,s=Package.blaze.UI,c=Package.blaze.Handlebars,l=Package.htmljs.HTML,p,d;(function(){var t=i.utils.assert,n=function(){for(var t={},e=o.currentComputation;e;)t[String(e._id)]=!0,e=e._parent;return t},a=function(e){var o=n(),a=Object.keys(e._dependentsById);a.forEach(function(e){t(!o[e],"\n\nYou called wait() after calling ready() inside the same computation tree.\n\nYou can fix this problem in two possible ways:\n\n1) Put all of your wait() calls before any ready() calls.\n2) Put your ready() call in its own computation with Deps.autorun.")})};p=function(){this._readyDep=new o.Dependency,this._comps=[],this._notReadyCount=0},p.prototype.wait=function(t){var n=this,r=o.currentComputation;a(n._readyDep),o.nonreactive(function(){var a=null,i=o.autorun(function(e){var o=!!t(),r=n._notReadyCount;e.firstRun&&!o?n._notReadyCount++:null!==a&&o!==a&&o===!0?n._notReadyCount--:null!==a&&o!==a&&o===!1&&n._notReadyCount++,a=o,0===r&&n._notReadyCount>0?n._readyDep.changed():r>0&&0===n._notReadyCount&&n._readyDep.changed()});n._comps.push(i),r&&r.onInvalidate(function(){o.afterFlush(function(){i.stop(),n._comps.splice(e.indexOf(n._comps,i),1),a===!1&&(n._notReadyCount--,0===n._notReadyCount&&n._readyDep.changed())})})})},p.prototype.ready=function(){return this._readyDep.depend(),0===this._notReadyCount},p.prototype.stop=function(){e.each(this._comps,function(t){t.stop()}),this._comps=[]},i.WaitList=p}).call(this),function(){var t=i.utils.debug("iron:controller"),n=i.Layout,o=i.DynamicTemplate,a=function(t,e){return function(){return"function"==typeof t?t.apply(e,arguments):t}};d=function(t){var e=this;this.options=t||{},this._layout=this.options.layout||new n(this.options),this._isController=!0,this._layout._setLookupHost(this);var o=d._collectEventMaps.call(this.constructor);this._layout.events(o,this),this.init(t)},d.prototype.layout=function(t,n){var o=this;return this._layout.template(t),n&&e.has(n,"data")&&this._layout.data(a(n.data,this)),{data:function(t){return o._layout.data(a(t,o))}}},d.prototype.render=function(t,e){var n=this;e&&"undefined"!=typeof e.data&&(e.data=a(e.data,this));var o=this._layout.render(t,e);return{data:function(t){return o.data(a(t,n))}}},d.prototype.beginRendering=function(t){return this._layout.beginRendering(t)},d.extend=function(t){return i.utils.extend(this,t)},d.events=function(t){return this._eventMap=t,this};var s=function(t,n){var o={};return t.__super__&&e.extend(o,s(t.__super__.constructor,n)),e.has(t,n)?e.extend(o,t[n]):o};d._collectEventMaps=function(){return s(this,"_eventMap")},d._helpers={},d.helpers=function(t){return e.extend(this._helpers,t),this},"undefined"!=typeof r&&(i.controller=function(){return o.findLookupHostWithProperty(u.getView(),"_isController")},r.registerHelper("get",function(t){var e=i.controller();return e&&e.state?e.state.get(t):void 0})),i.Controller=d}.call(this),function(){var t=i.Layout,n=i.utils.debug("iron:controller"),o=i.utils.defaultValue,r=function(t,e){return function(){return"function"==typeof t?t.apply(e,arguments):t}};d.prototype.init=function(t){this._waitlist=new p,this.state=new a},d.prototype.insert=function(t){return this._layout.insert.apply(this._layout,arguments)},d.prototype.wait=function(t){var n=this;if(t)return e.isArray(t)?e.each(t,function o(t){n.wait(t)}):this._waitlist.wait(t.ready?function(){return t.ready()}:t),this},d.prototype.ready=function(){return this._waitlist.ready()},d.prototype.stop=function(){this._waitlist.stop()}}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:controller"]={}}();

!function(){var t=Package.underscore._,e=Package.tracker.Tracker,o=Package.tracker.Deps,r=Package.blaze.Blaze,n=Package.blaze.UI,i=Package.blaze.Handlebars,a=Package.templating.Template,u=Package.ejson.EJSON,s=Package.meteor.Meteor,l=Package["iron:core"].Iron,p=Package.htmljs.HTML,c,h,f,d,y;(function(){f=new s.EnvironmentVariable}).call(this),function(){d=["get","post","put","delete"]}.call(this),function(){var e=l.Controller,o=l.Url,r=l.MiddlewareStack,n=l.utils.assert;h=e.extend({constructor:function(e){h.__super__.constructor.apply(this,arguments),e=e||{},this.options=e,this._onStopCallbacks=[],this.route=e.route,this.params=[];var o=this.lookupOption("data");"function"==typeof o?this.data=t.bind(o,this):"undefined"!=typeof o&&(this.data=function(){return o}),this.init(e)}}),h.prototype.lookupOption=function(e){if(this.route&&this.route.options&&t.has(this.route.options,e))return this.route.options[e];if(t.has(this.options,e))return this.options[e];if("undefined"!=typeof this[e])return this[e];var o=f.get();return o&&t.has(o,e)?o[e]:this.router&&this.router.options&&t.has(this.router.options,e)?this.router.options[e]:void 0},h.prototype.configureFromUrl=function(t,e,o){n("string"==typeof t,"url must be a string"),e=e||{},this.request=e.request||{},this.response=e.response||{},this.url=e.url||t,this.originalUrl=e.originalUrl||t,this.method=this.request.method,this.route&&this.setParams(this.route.params(t),o)},h.prototype._collectHooks=function(){var e=this,o=t.toArray(arguments),r=function(o){if(!o)return[];var r=e.router.lookupHook,n=t.isArray(o)?o:[o];return t.map(n,function(t){return r(t)})},n=function(e,o){var i=[];return e.__super__&&(i=i.concat(n(e.__super__.constructor,o))),t.has(e.prototype,o)?i.concat(r(e.prototype[o])):i},i=function(t){for(var e=0;e<o.length;e++)t(o[e])},a=[];i(function(t){var o=e.route&&e.route.getName(),r=e.router.getHooks(t,o);a=a.concat(r)});var u=[];i(function(t){var o=n(e.constructor,t);u=u.concat(o)});var s=[];i(function(o){if(t.has(e,o)){var n=r(e[o]);s=s.concat(n)}});var l=[];e.route&&i(function(t){var o=r(e.route.options[t]);l=l.concat(o)});var p=a.concat(l).concat(u).concat(s);return p},h.prototype.runHooks=function(){for(var t=this._collectHooks.apply(this,arguments),e=0,o=t.length;o>e;e++){var r=t[e];r.call(this)}return t.length},h.prototype.getParams=function(){return this.params},h.prototype.setParams=function(t){return this.params=t,this},l.RouteController=h}.call(this),function(){var r=l.Controller,n=l.Url,i=l.MiddlewareStack,a=l.utils.debug("iron-router:RouteController");if(h.prototype.init=function(t){h.__super__.init.apply(this,arguments),this._computation=null,this._paramsDep=new e.Dependency,this.location=l.Location},h.prototype.getParams=function(){return this._paramsDep.depend(),this.params},h.prototype.setParams=function(e,o){var r=function(e,r){if(!(e instanceof Array))throw new Error("you called equals with a non array value in setParams");if(!(r instanceof Array))return!1;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!u.equals(e[n],r[n],o))return!1;var i=t.keys(e),a=t.keys(r),s;if(i.length!==a.length)return!1;for(var n=0;n<i.length;n++){if(s=i[n],!t.has(r,s))return!1;if(!u.equals(e[s],r[s]))return!1}return!0};if(!r(this.params,e))return this.params=e,o=o||{},o.reactive!==!1&&this._paramsDep.changed(),this},h.prototype.dispatch=function(t,e,r){if(this._computation&&!this._computation.stopped)throw new Error("RouteController computation is already running. Stop it first.");var n=this;return o.nonreactive(function(){o.autorun(function(o){n._computation=o,t.dispatch(e,n,r)})}),n},h.prototype._runRoute=function(e,r,n){var a=this,u=this._collectHooks("subscriptions");t.each(u,function(t){a.wait(t.call(a))});var s=this._collectHooks("waitOn");t.each(s,function(t){a.wait(t.call(a))});var p=s.length>0,c,f,d=function(){return o.nonreactive(function(){return a._layout.template()})},y=function(){return o.nonreactive(function(){var t=a._layout._regions.main;return t&&t.template()})},m=d(),_=y();this.beginRendering(function R(e){if(!a.isStopped){var o=d(),r=y();if(m!==o||_!=r){var n=a._layout.regionKeys(),i=t.difference(n,e);t.each(i,function(t){a._layout.clear(t)})}}}),this.layout(this.lookupOption("layoutTemplate"),{data:this.lookupOption("data")});var g=new i,v=new i,k=new i;v.append(this._collectHooks("onRun","load"),{where:"client"}),k.append(this._collectHooks("onRerun"),{where:"client"}),g.append(function b(t,e,o){this._computation.firstRun&&!h._hasJustReloaded?(h._hasJustReloaded=!1,v.length>0?v.dispatch(t.url,this,o):o()):o()},function C(t,e,o){this._computation.firstRun?o():k.length>0?k.dispatch(t.url,this,o):o()},{where:"client"}),p&&g.push(t.bind(l.Router.hooks.loading,a));var w=this._collectHooks("onBeforeAction","before");g.append(w,{where:"client"}),0===e._actionStack.length&&e._actionStack.push(e._path,"action",e.options),g=g.concat(e._actionStack),this._rendered=!1,g.dispatch(r,this,n),o.afterFlush(function(){l.utils.warn(a._rendered||a.isStopped,"Route dispatch never rendered. Did you forget to call this.next() in an onBeforeAction?")}),this.runHooks("onAfterAction","after")},h.prototype.action=function(){this.render()},h.prototype.lookupTemplate=function(){return this.lookupOption("template")||this.router&&this.router.toTemplateName(this.route.getName())},h.prototype.lookupRegionTemplates=function(){return this.lookupOption("yieldRegions")||this.lookupOption("regionTemplates")||this.lookupOption("yieldTemplates")||{}},h.prototype.render=function(t,e){if(this._rendered=!0,0===arguments.length){var t=this.lookupTemplate(),o=h.__super__.render.call(this,t);return this.renderRegions(),o}return h.__super__.render.call(this,t,e)},h.prototype.renderRegions=function(){var e=this,o=this.lookupRegionTemplates();a("regionTemplates: "+JSON.stringify(o)),t.each(o,function(t,o){e.render(o,t)})},h.prototype.stop=function(){h.__super__.stop.call(this),this._computation&&this._computation.stop(),this.runHooks("onStop","unload"),this.isStopped=!0},h.prototype.redirect=function(){return this.router.go.apply(this.router,arguments)},h.prototype.subscribe=function(){var e=this,o=s.subscribe.apply(this,arguments);return t.extend(o,{wait:function(){e.wait(this)}})},s._reload){s._reload.onMigrate("iron-router",function(){return[!0,!0]});var p=s._reload.migrationData("iron-router");h._hasJustReloaded=p}}.call(this),function(){var e=l.Url,o=l.MiddlewareStack,r=l.utils.assert;y=function(e,r,n){var i=function(t,e,o){var r=this;r.request=t,r.response=e,i.dispatch(t.url,r,o)};return"object"==typeof r&&(n=r,r=n.action),n=n||{},"string"==typeof e&&"/"!==e.charAt(0)&&(e=n.path?n.path:"/"+e),t.extend(i,this),n=i.options=n||{},i._actionStack=new o,i._beforeStack=new o,i._beforeStack.append(i.options.onBeforeAction),i._beforeStack.append(i.options.before),i._afterStack=new o,i._afterStack.append(i.options.onAfterAction),i._afterStack.append(i.options.after),i._methods={},"string"==typeof r?i._actionStack.push(e,t.extend(n,{template:r})):("function"==typeof r||"object"==typeof r)&&i._actionStack.push(e,r,n),i._path=e,i},y.prototype.getName=function(){return this.handler&&this.handler.name},y.prototype.findControllerConstructor=function(){var t=this,e=function(t,e){e=e||{};var o=l.utils.resolve(t);if(o&&h.prototype.isPrototypeOf(o.prototype))return o;if(e.supressErrors!==!0)throw new Error("RouteController '"+t+"' is not defined.");return void 0},o=function(e){return t.router.toControllerName(e)},r,n=this.getName();return"function"==typeof this.options.controller?this.options.controller:"string"==typeof this.options.controller?e(this.options.controller):n&&(r=e(o(n),{supressErrors:!0}))?r:h},y.prototype.createController=function(t){t=t||{};var e=this.findControllerConstructor();t.route=this;var o=new e(t);return o},y.prototype.setControllerParams=function(t,e){},y.prototype.dispatch=function(t,e,o){return r(e._runRoute,"context doesn't have a _runRoute method"),e._runRoute(this,t,o)},y.prototype.path=function(t,e){return this.handler.resolve(t,e)},y.prototype.url=function(t,e){var o=this.path(t,e),r=e&&e.host||s.absoluteUrl();return"/"===r.charAt(r.length-1),r=r.slice(0,r.length-1),r+o},y.prototype.params=function(t){return this.handler.params(t)},d.forEach(function(t){y.prototype[t]=function(e){return this._methods[t]=!0,this._actionStack.push(this._path,e,{name:this.getName()+"_"+t.toLowerCase(),method:t,where:this.handler.where,mount:!1}),this}}),l.Route=y}.call(this),function(){var e=l.MiddlewareStack,o=l.Url,r=l.Layout,n=l.utils.warn,i=l.utils.assert;c=function(o){function r(t,e,o){r.dispatch(t.url,{request:t,response:e},o)}return r._stack=new e,r._globalHooks={},r.routes=[],r.routes._byPath={},this.configure.call(r,o),t.extend(r,this),this.init.call(r,o),s.startup(function(){s.defer(function(){r.options.autoStart!==!1&&r.start()})}),r},c.prototype.init=function(t){},c.prototype.configure=function(e){var o=this;e=e||{};var r=function(e){return e?t.isArray(e)?e:[e]:[]};return t.each(l.Router.HOOK_TYPES,function n(i){e[i]&&(t.each(r(e[i]),function a(t){o.addHook(i,t)}),delete e[i])}),this.options=this.options||{},t.extend(this.options,e),this},c.prototype.map=function(t){return t.call(this)},c.prototype.route=function(t,e,o){var r=function(t){return Object.prototype.toString.call(t)};i("[object String]"===r(t)||"[object RegExp]"===r(t),"Router.route requires a path that is a string or regular expression."),"object"==typeof e&&(o=e,e=o.action);var n=new y(t,e,o);o=o||{},o.mount=!1;var a=this._stack.push(t,n,o);return a.route=n,n.handler=a,n.router=this,i(!this.routes._byPath[a.path],"A route for the path "+JSON.stringify(a.path)+" already exists by the name of "+JSON.stringify(a.name)+"."),this.routes._byPath[a.path]=n,this.routes.push(n),"string"==typeof a.name&&(this.routes[a.name]=n),n},c.prototype.findFirstRoute=function(t){for(var e=0;e<this.routes.length;e++)if(this.routes[e].handler.test(t,{}))return this.routes[e];return null},c.prototype.path=function(t,e,o){var r=this.routes[t];return n(r,"You called Router.path for a route named "+JSON.stringify(t)+" but that route doesn't seem to exist. Are you sure you created it?"),r&&r.path(e,o)},c.prototype.url=function(t,e,o){var r=this.routes[t];return n(r,"You called Router.url for a route named "+JSON.stringify(t)+" but that route doesn't seem to exist. Are you sure you created it?"),r&&r.url(e,o)},c.prototype.createController=function(t,e){var o=this.findFirstRoute(t),r;return e=e||{},r=o?o.createController({layout:this._layout}):new h({layout:this._layout}),r.router=this,r.configureFromUrl(t,e,{reactive:!1}),r},c.prototype.setTemplateNameConverter=function(t){return this._templateNameConverter=t,this},c.prototype.setControllerNameConverter=function(t){return this._controllerNameConverter=t,this},c.prototype.toTemplateName=function(t){return this._templateNameConverter?this._templateNameConverter(t):l.utils.classCase(t)},c.prototype.toControllerName=function(t){return this._controllerNameConverter?this._controllerNameConverter(t):l.utils.classCase(t)+"Controller"},c.prototype.addHook=function(e,o,r){var n=this;r=r||{};var i=function(e){return e?t.isArray(e)?e:[e]:[]};r.only&&(r.only=i(r.only)),r.except&&(r.except=i(r.except));var a=this._globalHooks[e]=this._globalHooks[e]||[],u=function(){var t=this,e=arguments;return f.withValue(r,function(){return n.lookupHook(o).apply(t,e)})};return a.push({options:r,hook:u}),this},c.prototype.lookupHook=function(e){var o=e;if(t.isFunction(o))return o;if(t.isString(o)&&t.isFunction(l.Router.hooks[o]))return l.Router.hooks[o];throw new Error("No hook found named: "+e)},c.prototype.getHooks=function(e,o){var r=this,n=[];return t.each(this._globalHooks[e],function(e){var r=e.options;return r.except&&t.include(r.except,o)?[]:r.only&&!t.include(r.only,o)?[]:void n.push(e.hook)}),n},c.HOOK_TYPES=["onRun","onRerun","onBeforeAction","onAfterAction","onStop","waitOn","load","before","after","unload"],c.hooks={},c.plugins={},c.HOOK_TYPES.forEach(function(t){c.prototype[t]=function(e,o){this.addHook(t,e,o)}}),c.prototype.plugin=function(t,e){var o;if("function"==typeof t?o=t:"string"==typeof t&&(o=l.Router.plugins[t]),!o)throw new Error("No plugin found named "+JSON.stringify(t));return o.call(this,this,e),this},l.Router=c}.call(this),function(){if("undefined"!=typeof a)var t=new a("DefaultLoadingTemplate",function(){return"Loading..."}),e=new a("DefaultDataNotFoundTemplate",function(){return"Data not found..."});c.hooks.loading=function(){if(this.ready())return void this.next();var e=this.lookupOption("loadingTemplate");this.render(e||t),this.renderRegions()},c.hooks.dataNotFound=function(){if(!this.ready())return void this.next();var t=this.lookupOption("data"),o,r=this.lookupOption("notFoundTemplate");return"function"!=typeof t||(o=t.call(this))?void this.next():(this.render(r||e),void this.renderRegions())}}.call(this),function(){var e=l.utils.warn,o=l.DynamicTemplate,i=l.utils.debug("iron:router <helpers>");n.registerHelper("Router",new r.Template("Router",function(){return c.createView()})),n.registerHelper("pathFor",function(o){var r;arguments.length>1&&(r=arguments[0],o=arguments[1]||{});var n=o&&o.hash;n=n||{};var i="",a=n.query,s=n.hash,r=r||n.route,l=t.extend({},n.data||this),p=c.routes[r];return e(p,"pathFor couldn't find a route named "+JSON.stringify(r)),p&&(t.each(p.handler.compiledUrl.keys,function(e){var o=e.name;t.has(n,o)&&(l[o]=u.clone(n[o]),delete n[o])}),i=p.path(l,{query:a,hash:s})),i}),n.registerHelper("urlFor",function(o){var r;arguments.length>1&&(r=arguments[0],o=arguments[1]||{});var n=o&&o.hash;n=n||{};var i="",a=n.query,s=n.hash,r=r||n.route,l=t.extend({},n.data||this),p=c.routes[r];return e(p,"urlFor couldn't find a route named "+JSON.stringify(r)),p&&(t.each(p.handler.compiledUrl.keys,function(e){var o=e.name;t.has(n,o)&&(l[o]=u.clone(n[o]),delete n[o])}),i=p.url(l,{query:a,hash:s})),i}),n.registerHelper("linkTo",new r.Template("linkTo",function(){var n=this,i=o.getInclusionArguments(this);if("object"!=typeof i)throw new Error("linkTo options must be key value pairs such as {{#linkTo route='my.route.name'}}. You passed: "+JSON.stringify(i));i=i||{};var a="",s=i.query,l=i.hash,h=i.route,f=t.extend({},i.data||o.getParentDataContext(this)),d=c.routes[h],y;e(d,"linkTo couldn't find a route named "+JSON.stringify(h)),d&&(t.each(d.handler.compiledUrl.keys,function(e){var o=e.name;t.has(i,o)&&(f[o]=u.clone(i[o]),delete i[o])}),a=d.path(f,{query:s,hash:l}));var m=t.omit(i,"route","query","hash","data");return m.href=a,r.With(function(){return o.getParentDataContext(n)},function(){return p.A(m,n.templateContentBlock)})}))}.call(this),function(){var e=l.MiddlewareStack,r=l.Url,n=l.Layout,i=l.utils.assert,a="__IronRouterNotFound__",u="__IronRouterNoRoutes__";c.prototype.init=function(t){var e=this;e._currentController=null,e._currentRoute=null,e._currentDep=new o.Dependency,e._locationComputation=null,e._layout=new n({template:e.options.layoutTemplate}),s.startup(function(){setTimeout(function t(){e.options.autoRender!==!1&&e.insert({el:document.body})})})},c.prototype.insert=function(t){return this._layout.insert(t),this},c.prototype.createView=function(){return this._layout.create()},c.prototype.lookupNotFoundTemplate=function(){return this.options.notFoundTemplate?this.options.notFoundTemplate:0===this.routes.length?u:a},c.prototype.lookupLayoutTemplate=function(){return this.options.layoutTemplate},c.prototype.dispatch=function(t,e,o){var r=this;i("string"==typeof t,"expected url string in router dispatch");var n=this._currentController,s=this.findFirstRoute(t),l=this._currentRoute;return this._currentRoute=s,n&&s&&l===s?n.configureFromUrl(t,e):n=this.createController(t,e),this._currentController&&this._currentController.stop(),this._currentController=n,n.dispatch(r._stack,t,function(t){if(t)throw t;if(!n.isHandled()&&n.willBeHandledOnServer())return void(window.location=n.url);if(n.isHandled()||n.willBeHandledOnServer())return o&&o(t);this.layout(this.lookupOption("layoutTemplate"),{data:{url:this.url}});var e=this.lookupOption("notFoundTemplate");return e||(e=0===r.routes.length?u:a),this.render(e,{data:{url:this.url}}),void this.renderRegions()}),this._currentController==n&&this._currentDep.changed(),n},c.prototype.current=function(){return this._currentDep.depend(),this._currentController},c.prototype._scrollToHash=function(t){try{var e=$(t);$("html, body").scrollTop(e.offset().top)}catch(o){}},c.prototype.start=function(){var t=this,e;t._locationComputation=o.autorun(function r(o){var r,n=l.Location.get(),i,a,u,s=t._currentController;!s||e&&e.path!==n.path?(r=t.dispatch(n.href),r.willBeHandledOnServer()&&n.cancelUrlChange()):(t._scrollToHash(n.hash),s.configureFromUrl(n.href)),e=n})},c.prototype.stop=function(){this._isStarted&&(this._locationComputation&&this._locationComputation.stop(),this._currentController&&this._currentController.stop(),this._isStarted=!1)},c.prototype.go=function(e,o,r){var n=this,a=/^\/|http/,u;if(r=r||{},a.test(e))u=e;else{var s=n.routes[e];i(s,"No route found named "+JSON.stringify(e)),u=s.path(o,t.extend(r,{throwOnMissingParams:!0}))}l.Location.go(u,r)}}.call(this),function(){c.plugins.loading=function(t,e){t.onBeforeAction("loading",e)},c.plugins.dataNotFound=function(t,e){t.onBeforeAction("dataNotFound",e)}}.call(this),function(){c=new l.Router,s.isServer&&c.onBeforeAction(l.Router.bodyParser.json())}.call(this),function(){a.__checkName("__IronRouterNotFound__"),a.__IronRouterNotFound__=new a("Template.__IronRouterNotFound__",function(){var t=this;return p.DIV({style:"width: 600px; margin: 0 auto; padding: 20px;"},"\n    ",p.DIV({style:"font-size: 18pt; color: #999;"},"\n      Oops, looks like there's no route on the client or the server for url: \"",r.View(function(){return Spacebars.mustache(t.lookup("url"))}),'."\n    '),"\n  ")}),a.__checkName("__IronRouterNoRoutes__"),a.__IronRouterNoRoutes__=new a("Template.__IronRouterNoRoutes__",function(){var t=this;return p.Raw('<div style="font-family: helvetica; color: #777; max-width: 600px; margin: 20px auto;">\n      <h1 style="text-align: center; margin: 0; font-size: 48pt;">\n        iron:router\n      </h1>\n      <p style="text-align: center; font-size: 1.3em;">\n        Organize your Meteor application.\n      </p>\n      <div style="margin: 50px 0px;">\n        <pre style="background: #f2f2f2; margin: 0; padding: 10px;">\nRouter.route(\'/\', function () {\n  this.render(\'Home\', {\n    data: function () { return Items.findOne({_id: this.params._id}) }\n  });\n});\n        </pre>\n      </div>\n      <div style="margin: 50px 0px;">\n        Check it out on Github:<br>\n        <a href="https://github.com/eventedmind/iron-router" target="_blank">https://github.com/eventedmind/iron-router</a>\n        <br>\n        <br>\n        And check out the new Guide:<br>\n        <a href="https://eventedmind.github.io/iron-router" target="_blank">\n          https://eventedmind.github.io/iron-router\n        </a>\n      </div>\n    </div>')})}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:router"]={Router:c,RouteController:h}}();

!function(){var e=Package.meteor.Meteor,n;(function(){n={},function(e){function n(e,n){var o={};if(t(e)&&e.length>0)for(var r=n?c:i,a=e.split(/;\s/g),u,f,s,g=0,p=a.length;p>g;g++){if(s=a[g].match(/([^=]+)=/i),s instanceof Array)try{u=c(s[1]),f=r(a[g].substring(s[1].length+1))}catch(m){}else u=c(a[g]),f="";u&&(o[u]=f)}return o}function t(e){return"string"==typeof e}function o(e){return t(e)&&""!==e}function r(e){if(!o(e))throw new TypeError("Cookie name must be a non-empty string")}function i(e){return e}var a=e,c=decodeURIComponent,u=encodeURIComponent;a.get=function(e,t){r(e),t="function"==typeof t?{converter:t}:t||{};var o=n(document.cookie,!t.raw);return(t.converter||i)(o[e])},a.set=function(e,n,t){r(e),t=t||{};var i=t.expires,a=t.domain,c=t.path;t.raw||(n=u(String(n)));var f=e+"="+n,s=i;return"number"==typeof s&&(s=new Date,s.setDate(s.getDate()+i)),s instanceof Date&&(f+="; expires="+s.toUTCString()),o(a)&&(f+="; domain="+a),o(c)&&(f+="; path="+c),t.secure&&(f+="; secure"),document.cookie=f,f},a.remove=function(e,n){return n=n||{},n.expires=new Date(0),this.set(e,"",n)}}(n)}).call(this),"undefined"==typeof Package&&(Package={}),Package["chuangbo:cookie"]={Cookie:n}}();

!function(){var e=Package.meteor.Meteor,t=Package["chuangbo:cookie"].Cookie,n=Package.underscore._,r=Package.tracker.Tracker,o=Package.tracker.Deps,a=Package.ejson.EJSON,i=Package["accounts-base"].Accounts,c,s,u,f,l,_,d;(function(){u=function(e){var t=a.stringify(e);return encodeURI(t)},f=function(e){var t=decodeURI(e);return a.fromJSONValue(JSON.parse(t))}}).call(this),function(){l=_=function(){var e,t,n,r,o,a,i=arguments[0]||{},c=1,s=arguments.length,u=!1,f=Object.prototype.toString,l=Object.prototype.hasOwnProperty,d=Array.prototype.push,g=Array.prototype.slice,p=String.prototype.trim,b=Array.prototype.indexOf,y={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},h={isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):y[f.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==h.type(e)||e.nodeType)return!1;try{if(e.constructor&&!l.call(e,"constructor")&&!l.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in e);return void 0===n||l.call(e,n)}};for("boolean"==typeof i&&(u=i,i=arguments[1]||{},c=2),"object"==typeof i||h.isFunction(i)||(i={}),s===c&&(i=this,--c),c;s>c;c++)if(null!=(e=arguments[c]))for(t in e)n=i[t],r=e[t],i!==r&&(u&&r&&(h.isPlainObject(r)||(o=h.isArray(r)))?(o?(o=!1,a=n&&h.isArray(n)?n:[]):a=n&&h.isPlainObject(n)?n:{},i[t]=_(u,a,r)):void 0!==r&&(i[t]=r));return i}}.call(this),function(){d=function e(t){"undefined"!=typeof console&&"undefined"!=typeof localStorage&&"1"==localStorage.getItem("__frlog")&&(arguments[0]=arguments[0]+":",console.log.apply(console,arguments))},d.enable=function(){localStorage.setItem("__frlog","1")},d.disable=function(){localStorage.removeItem("__frlog")}}.call(this),function(){c={},c.completeSubscriptions=function(e){if("string"==typeof e)e=[e];else if(e.constructor!=Array)throw new Error("subscriptions params should be either a string or array of strings");e.forEach(function(e){__fast_render_config.subscriptions[e]=!0})},c.enabled="undefined"!=typeof __fast_render_config,c.Log=d}.call(this),function(){if("undefined"==typeof __fast_render_config)return void d("NO_FAST_RENDER");var t=!1,n=!1,r=e.default_connection._livedata_data;e.default_connection._livedata_data=function(e){d("DDP_RECIEVE",e);var o=this._getServerDoc(e.collection,e.id);if(!n&&!o&&"added"==e.msg){var i=this._mongo_livedata_collections[e.collection];if(i){var c=i.findOne(e.id);c&&(e.fields=l(!0,c,e.fields),delete e.fields._id,e.msg="changed")}}return t||("ready"==e.msg&&!e.frGen&&__fast_render_config.subscriptions&&e.subs.forEach(function(e){var t=__fast_render_config.subscriptionIdMap[e];t&&(d("DELETING_SUBSCRIPTION",t,e),delete __fast_render_config.subscriptions[t],delete __fast_render_config.subscriptionIdMap[e],__fast_render_config.loadedSubscriptions[t]=!0)}),a.equals(__fast_render_config.subscriptions,{})&&(d("REVERTING_BACK_TO_ORIGINAL_DDP_HANDLING"),t=!0)),r.call(this,e)};var o=e.default_connection._send;e.default_connection._send=function(e){d("DDP_SEND",e),"connect"==e.msg&&void 0!=e.session&&(t=!0,n=!0);var r=this;if(!t){var a="sub"==e.msg&&__fast_render_config.subscriptions&&__fast_render_config.subscriptions[e.name];a&&(d("FAKE_SUB_READY",e.name),r._livedata_data({msg:"ready",subs:[e.id],frGen:!0}),__fast_render_config.subscriptionIdMap[e.id]=e.name)}return o.call(this,e)}}.call(this),function(){s=function(t){var n=__fast_render_config.serverRoutePath;__fast_render_config.serverRoutePath=decodeURI(n);var r=f(t);for(var o in r.collectionData){var a=r.collectionData[o];a.forEach(function(t){t.forEach(function(t){var n=e.default_connection._mongo_livedata_collections[o];if(n){var r=n.findOne(t._id);r?(l(!0,r,t),n.update(t._id,r)):n.insert(t)}else console.warn("fast-route data found, but no collection exists for: "+o)})})}}}.call(this),function(){function t(){var e=document.createElement("a");e.href=location.href;var t=e.pathname;return t+=e.search?e.search:""}if(Package["iron:router"]){var n=new e.EnvironmentVariable,r=c.RouteController=Package["iron:router"].RouteController,o=r.prototype._run?"_run":"run",a=r.prototype[o];r.prototype[o]=function(){var e=this;c.enabled?n.withValue(!0,function(){a.call(e)}):a.call(this)};var i=e.subscribe;e.subscribe=function(e){var r=c.enabled&&n.get()&&t()==__fast_render_config.serverRoutePath&&__fast_render_config.subscriptions[e]&&!__fast_render_config.loadedSubscriptions[e];return r?(d("APPLY_IR_SUB_CORRECTIONS",e),i.apply(this,arguments),{ready:function(){return!0}}):i.apply(this,arguments)}}}.call(this),function(){"function"==typeof e.user?r.autorun(function(){var n=e.user(),r=e.status();if(r.connected)if(n){var o=e._localStorage.getItem("Meteor.loginToken"),a=new Date(e._localStorage.getItem("Meteor.loginTokenExpires"));t.set("meteor_login_token",o,{path:"/",expires:a})}else t.set("meteor_login_token",o,{path:"/",expires:-1})}):t.set("meteor_login_token",loginToken,{path:"/",expires:-1})}.call(this),"undefined"==typeof Package&&(Package={}),Package["meteorhacks:fast-render"]={FastRender:c,__init_fast_render:s}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,a=Package.tracker.Deps,i=Package.underscore._,c;(function(){c=function(e){var t=this;t.options=e||{},t.options.cacheLimit=t.options.cacheLimit||10,t.options.expireIn=t.options.expireIn||5,t._cacheMap={},t._cacheList=[],t.ready=!1,t.dep=new a.Dependency,t.computation=t._registerComputation()},c.prototype.subscribe=function(){var t=this;return e.isClient?(this._addSub(arguments),{ready:function(){return t.dep.depend(),t.ready}}):e.subscribe?e.subscribe.apply(e,arguments):void 0},c.prototype._addSub=function(e){var t=this,i=JSON.stringify(e);if(!t._cacheMap[i]){var c={args:e,hash:i};t._cacheMap[i]=c,t._cacheList.push(c),t.ready=!1,a.currentComputation?a.afterFlush(function(){t.computation.invalidate()}):t.computation.invalidate()}var c=t._cacheMap[i];c.updated=(new Date).getTime();var n=t._cacheList.indexOf(c);t._cacheList.splice(n,1),t._cacheList.push(c)},c.prototype._applyCacheLimit=function(){var e=this,t=e._cacheList.length-e.options.cacheLimit;if(t>0){var a=e._cacheList.splice(0,t);i.each(a,function(t){delete e._cacheMap[t.hash]})}},c.prototype._applyExpirations=function(){var e=this,t=[],a=(new Date).getTime()-60*e.options.expireIn*1e3;i.each(e._cacheList,function(i){i.updated>=a?t.push(i):delete e._cacheMap[i.hash]}),e._cacheList=t},c.prototype._registerComputation=function(){var t=this,c=a.autorun(function(){t._applyExpirations(),t._applyCacheLimit();var a=!0;i.each(t._cacheList,function(t){t.ready=e.subscribe.apply(e,t.args).ready(),a=a&&t.ready}),a&&(t.ready=!0,t.dep.changed())});return c},c.prototype.reset=function(){var t=this,a=t.computation;t.computation=t._registerComputation(),t.computation.invalidate(),e.setTimeout(function(){a.stop()},0)}}).call(this),"undefined"==typeof Package&&(Package={}),Package["meteorhacks:subs-manager"]={SubsManager:c}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,r=Package.underscore._,i=Package.check.check,o=Package.check.Match,a=Package.random.Random,s,u,l,c,f,p,d;(function(){!function(){"use strict";function e(e){this.s=null!==e&&void 0!==e?"string"==typeof e?e:e.toString():e,this.orig=e,null!==e&&void 0!==e?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=e.length:this.length=-1}function t(){for(var e in c)!function(e){var t=c[e];l.hasOwnProperty(e)||(f.push(e),l[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})}(e)}function n(){for(var e=0;e<f.length;++e)delete String.prototype[f[e]];f.length=0}function r(){for(var e=i(),t={},n=0;n<e.length;++n){var r=e[n],o=l[r];try{var a=typeof o.apply("teststring",[]);t[r]=a}catch(s){}}return t}function i(){var e=[];if(Object.getOwnPropertyNames)return e=Object.getOwnPropertyNames(l),e.splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={},n=[];for(var r in String.prototype)t[r]=r;for(var r in Object.prototype)delete t[r];for(var r in t)e.push(r);return e}function o(t){return new e(t)}function a(e,t){var n=[],r;for(r=0;r<e.length;r++)n.push(e[r]),t&&t.call(e,e[r],r);return n}var s="1.5.0",u={},l=String.prototype,c=e.prototype={between:function(t,n){var r=this.s,i=r.indexOf(t),o=r.indexOf(n),a=i+t.length;return new e(o>i?r.slice(a,o):"")},camelize:function(){var t=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""});return new e(t)},capitalize:function(){return new e(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(t){var n=this.s;return 0===n.indexOf(t)?(n=n.slice(t.length),new e(n)):this},chompRight:function(t){if(this.endsWith(t)){var n=this.s;return n=n.slice(0,n.length-t.length),new e(n)}return this},collapseWhitespace:function(){var t=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new e(t)},contains:function(e){return this.s.indexOf(e)>=0},count:function(e){for(var t=0,n=this.s.indexOf(e);n>=0;)t+=1,n=this.s.indexOf(e,n+1);return t},dasherize:function(){var t=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new e(t)},decodeHtmlEntities:function(){var t=this.s;return t=t.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,t){var n=t.replace(/;$/,""),r=u[t]||t.match(/;$/)&&u[n];return"number"==typeof r?String.fromCharCode(r):"string"==typeof r?r:e}),new e(t)},endsWith:function(e){var t=this.s.length-e.length;return t>=0&&this.s.indexOf(e,t)===t},escapeHTML:function(){return new e(this.s.replace(/[&<>"']/g,function(e){return"&"+m[e]+";"}))},ensureLeft:function(t){var n=this.s;return 0===n.indexOf(t)?this:new e(t+n)},ensureRight:function(t){var n=this.s;return this.endsWith(t)?this:new e(n+t)},humanize:function(){if(null===this.s||void 0===this.s)return new e("");var t=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new e(t)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(t){if(t>=0){var n=this.s.substr(0,t);return new e(n)}return this.right(-t)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(t,n){if(n=n||" ",this.s.length>=t)return new e(this.s);t-=this.s.length;var r=Array(Math.ceil(t/2)+1).join(n),i=Array(Math.floor(t/2)+1).join(n);return new e(r+this.s+i)},padLeft:function(t,n){return n=n||" ",new e(this.s.length>=t?this.s:Array(t-this.s.length+1).join(n)+this.s)},padRight:function(t,n){return n=n||" ",new e(this.s.length>=t?this.s:this.s+Array(t-this.s.length+1).join(n))},parseCSV:function(e,t,n,r){e=e||",",n=n||"\\","undefined"==typeof t&&(t='"');var i=0,o=[],a=[],s=this.s.length,u=!1,l=this,c=function(e){return l.s.charAt(e)};if("undefined"!=typeof r)var f=[];for(t||(u=!0);s>i;){var p=c(i);switch(p){case n:if(u&&(n!==t||c(i+1)===t)){i+=1,o.push(c(i));break}if(n!==t)break;case t:u=!u;break;case e:u&&t?o.push(p):(a.push(o.join("")),o.length=0);break;case r:u?o.push(p):f&&(a.push(o.join("")),f.push(a),a=[],o.length=0);break;default:u&&o.push(p)}i+=1}return a.push(o.join("")),f?(f.push(a),f):a},replaceAll:function(t,n){var r=this.s.split(t).join(n);return new e(r)},right:function(t){if(t>=0){var n=this.s.substr(this.s.length-t,t);return new e(n)}return this.left(-t)},slugify:function(){var t=new e(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===t.charAt(0)&&(t=t.substr(1)),new e(t)},startsWith:function(e){return 0===this.s.lastIndexOf(e,0)},stripPunctuation:function(){return new e(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var t=this.s,n=arguments.length>0?arguments:[""];return a(n,function(e){t=t.replace(RegExp("</?"+e+"[^<>]*>","gi"),"")}),new e(t)},template:function(t,n,r){var i=this.s,n=n||o.TMPL_OPEN,r=r||o.TMPL_CLOSE,a=new RegExp(n+"(.+?)"+r,"g"),s=i.match(a)||[];return s.forEach(function(e){var o=e.substring(n.length,e.length-r.length);t[o]&&(i=i.replace(e,t[o]))}),new e(i)},times:function(t){return new e(new Array(t+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e}return this.orig===!0||1===this.orig},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var t;return t="undefined"==typeof l.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new e(t)},trimLeft:function(){var t;return t=l.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new e(t)},trimRight:function(){var t;return t=l.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new e(t)},truncate:function(t,n){var r=this.s;if(t=~~t,n=n||"...",r.length<=t)return new e(r);var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=r.slice(0,t+1).replace(/.(?=\W*\w*$)/g,i);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):new e(o.slice(0,o.length-1)).trimRight().s,new e((o+n).length>r.length?r:r.slice(0,o.length)+n)},toCSV:function(){function t(e){return null!==e&&""!==e}var n=",",r='"',i="\\",o=!0,a=!1,s=[];if("object"==typeof arguments[0]?(n=arguments[0].delimiter||n,n=arguments[0].separator||n,r=arguments[0].qualifier||r,o=!!arguments[0].encloseNumbers,i=arguments[0].escape||i,a=!!arguments[0].keys):"string"==typeof arguments[0]&&(n=arguments[0]),"string"==typeof arguments[1]&&(r=arguments[1]),null===arguments[1]&&(r=null),this.orig instanceof Array)s=this.orig;else for(var u in this.orig)this.orig.hasOwnProperty(u)&&s.push(a?u:this.orig[u]);for(var l=i+r,c=[],f=0;f<s.length;++f){var p=t(r);if("number"==typeof s[f]&&(p&=o),p&&c.push(r),null!==s[f]&&void 0!==s[f]){var d=new e(s[f]).replaceAll(r,l).s;c.push(d)}else c.push("");p&&c.push(r),n&&c.push(n)}return c.length=c.length-1,new e(c.join(""))},toString:function(){return this.s},underscore:function(){var t=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new e(this.s.charAt(0)).isUpper()&&(t="_"+t),new e(t)},unescapeHTML:function(){return new e(this.s.replace(/\&([^;]+);/g,function(e,t){var n;return t in h?h[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))},valueOf:function(){return this.s.valueOf()}},f=[],p=r();for(var d in p)!function(t){var n=l[t];"function"==typeof n&&(c[t]||(c[t]="string"===p[t]?function(){return new e(n.apply(this,arguments))}:n))}(d);c.repeat=c.times,c.include=c.contains,c.toInteger=c.toInt,c.toBool=c.toBoolean,c.decodeHTMLEntities=c.decodeHtmlEntities,o.extendPrototype=t,o.restorePrototype=n,o.VERSION=s,o.TMPL_OPEN="{{",o.TMPL_CLOSE="}}",o.ENTITIES=u,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):window.S=o;var h={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},m={};for(var g in h)m[h[g]]=g;u={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this)}).call(this),function(){u=function(e,t){function s(e,a,u,l,f,p){!l&&u&&"$"===u.substring(0,1)&&(l=u,u=null);var d=!1,h,m=!1;u&&(f||("$push"===l||"$addToSet"===l||"$pop"===l?(n(e)&&"$each"in e?(e=e.$each,a+="[$each]"):u+=".0",f=!0):"$pull"===l&&(u+=".0",n(e)&&(m=!0),f=!0)),h=i(u),d=r.contains(t,h),a&&(c._affectedKeys[a]=u,c._genericAffectedKeys[a]=h,p&&c._positionsInsideArrays.push(a))),m||(r.isArray(e)&&!r.isEmpty(e)?(a&&c._parentPositions.push(a),r.each(e,function(e,t){s(e,a?a+"["+t+"]":t,u+"."+t,l,f,!0)})):(n(e)&&!d||!a)&&(a&&!r.isEmpty(e)&&(c._parentPositions.push(a),c._objectPositions.push(a)),r.each(e,function(t,n){void 0===t?delete e[n]:"$slice"!==n&&s(t,a?a+"["+n+"]":n,o(u,n),l,f,p)})))}function l(){c._affectedKeys={},c._genericAffectedKeys={},c._parentPositions=[],c._positionsInsideArrays=[],c._objectPositions=[],s(c._obj)}var c=this;c._obj=e,c._affectedKeys={},c._genericAffectedKeys={},c._parentPositions=[],c._positionsInsideArrays=[],c._objectPositions=[],s(c._obj),c.forEachNode=function(e,t){if("function"!=typeof e)throw new Error("filter requires a loop function");t=r.extend({endPointsOnly:!0},t);var n={};r.each(c._affectedKeys,function(i,o){t.endPointsOnly&&r.contains(c._parentPositions,o)||e.call({value:c.getValueForPosition(o),operator:a(o),position:o,key:i,genericKey:c._genericAffectedKeys[o],updateValue:function(e){n[o]=e},remove:function(){n[o]=void 0}})}),r.each(n,function(e,t){c.setValueForPosition(t,e)})},c.getValueForPosition=function(e){for(var t,i=e.split("["),o=c._obj,a=0,s=i.length;s>a;a++)if(t=i[a],"]"===t.slice(-1)&&(t=t.slice(0,-1)),o=o[t],!r.isArray(o)&&!n(o)&&s-1>a)return;return o},c.setValueForPosition=function(e,t){for(var i,o,a=e.split("["),s=c._obj,u=0,f=a.length;f>u;u++)if(o=a[u],"]"===o.slice(-1)&&(o=o.slice(0,-1)),u===f-1)s[o]=t,void 0===t&&delete s[o];else if(void 0===s[o]&&void 0!==t&&(i=a[u+1],i=parseInt(i,10),s[o]=isNaN(i)?{}:[]),s=s[o],!r.isArray(s)&&!n(s)&&f-1>u)return;l()},c.removeValueForPosition=function(e){c.setValueForPosition(e,void 0)},c.getKeyForPosition=function(e){return c._affectedKeys[e]},c.getGenericKeyForPosition=function(e){return c._genericAffectedKeys[e]},c.getInfoForKey=function(e){var t=c.getPositionForKey(e);if(t)return{value:c.getValueForPosition(t),operator:a(t)};for(var n=c.getPositionsForGenericKey(e+".$"),r,i,o=0,s=n.length;s>o;o++)if(r=n[o],i=c.getValueForPosition(r)||c.getValueForPosition(r.slice(0,r.lastIndexOf("["))))return{value:i,operator:a(r)}},c.getPositionForKey=function(e){for(var t in c._affectedKeys)if(c._affectedKeys.hasOwnProperty(t)&&c._affectedKeys[t]===e)return t},c.getPositionsForGenericKey=function(e){var t=[];for(var n in c._genericAffectedKeys)c._genericAffectedKeys.hasOwnProperty(n)&&c._genericAffectedKeys[n]===e&&t.push(n);return t},c.getValueForKey=function(e){var t=c.getPositionForKey(e);return t?c.getValueForPosition(t):void 0},c.addKey=function(e,t,n){var r=n?n+"["+e+"]":u._keyToPosition(e);c.setValueForPosition(r,t)},c.removeGenericKeys=function(e){for(var t in c._genericAffectedKeys)c._genericAffectedKeys.hasOwnProperty(t)&&r.contains(e,c._genericAffectedKeys[t])&&c.removeValueForPosition(t)},c.removeGenericKey=function(e){for(var t in c._genericAffectedKeys)c._genericAffectedKeys.hasOwnProperty(t)&&c._genericAffectedKeys[t]===e&&c.removeValueForPosition(t)},c.removeKey=function(e){for(var t in c._affectedKeys)c._affectedKeys.hasOwnProperty(t)&&c._affectedKeys[t]===e&&c.removeValueForPosition(t)},c.removeKeys=function(e){for(var t=0,n=e.length;n>t;t++)c.removeKey(e[t])},c.filterGenericKeys=function(e){var t,n=[],i=[];for(var o in c._genericAffectedKeys)c._genericAffectedKeys.hasOwnProperty(o)&&(t=c._genericAffectedKeys[o],r.contains(n,t)||(n.push(t),t&&!e(t)&&i.push(t)));r.each(i,function(e){c.removeGenericKey(e)})},c.setValueForKey=function(e,t){for(var n in c._affectedKeys)c._affectedKeys.hasOwnProperty(n)&&c._affectedKeys[n]===e&&c.setValueForPosition(n,t)},c.setValueForGenericKey=function(e,t){for(var n in c._genericAffectedKeys)c._genericAffectedKeys.hasOwnProperty(n)&&c._genericAffectedKeys[n]===e&&c.setValueForPosition(n,t)},c.getObject=function(){return c._obj},c.getFlatObject=function(e){e=e||{};var t={};return r.each(c._affectedKeys,function(n,i){("string"==typeof n&&e.keepArrays===!0&&!r.contains(c._positionsInsideArrays,i)&&!r.contains(c._objectPositions,i)||!e.keepArrays&&!r.contains(c._parentPositions,i))&&(t[n]=c.getValueForPosition(i))}),t},c.affectsKey=function(e){return!!c.getPositionForKey(e)},c.affectsGenericKey=function(e){for(var t in c._genericAffectedKeys)if(c._genericAffectedKeys.hasOwnProperty(t)&&c._genericAffectedKeys[t]===e)return!0;return!1},c.affectsGenericKeyImplicit=function(e){for(var t in c._genericAffectedKeys)if(c._genericAffectedKeys.hasOwnProperty(t)){var n=c._genericAffectedKeys[t];if(n===e)return!0;if(n.substring(0,e.length+1)===e+".")return!0;var r=e.slice(-2);if(".$"===r&&e.slice(0,-2)===n)return!0}return!1}},u.expandKey=function(e,t,n){for(var r,i,o=t.split("["),a=n,s=0,u=o.length;u>s;s++)i=o[s],"]"===i.slice(-1)&&(i=i.slice(0,-1)),s===u-1?(a[i]=e,void 0===e&&delete a[i]):(r=o[s+1],r=parseInt(r,10),a[i]||(a[i]=isNaN(r)?{}:[])),a=a[i]},u._keyToPosition=function s(e,t){var n="";return r.each(e.split("."),function(e,r){n+=0!==r||t?"["+e+"]":e}),n},u._positionToKey=function l(e){var t=new u({});t.setValueForPosition(e,1);var n=t.getKeyForPosition(e);return t=null,n};var e=r.isArray,t=function(e){return e===Object(e)};"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype});var n=function(e){return t(e)&&Object.getPrototypeOf(e)===Object.prototype},i=function c(e){return"string"!=typeof e?null:e.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},o=function f(e,t){return"$each"===t?e:e?e+"."+t:t},a=function p(e){var t=e.slice(0,e.indexOf("["));return"$"===t.substring(0,1)?t:null}}.call(this),function(){l={appendAffectedKey:function e(t,n){return"$each"===n?t:t?t+"."+n:n},shouldCheck:function t(e){if("$pushAll"===e)throw new Error("$pushAll is not supported; use $push + $each");return!r.contains(["$pull","$pullAll","$pop","$slice"],e)},errorObject:function n(e,t,r,i,o){return{name:t,type:e,value:r}},isBasicObject:function i(e){return r.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype},safariBugFix:function o(e){return"undefined"!=typeof Uint8Array&&e===Uint8Array||"undefined"!=typeof Uint16Array&&e===Uint16Array||"undefined"!=typeof Uint32Array&&e===Uint32Array||"undefined"!=typeof Uint8ClampedArray&&e===Uint8ClampedArray},isNotNullOrUndefined:function a(e){return void 0!==e&&null!==e},extractOp:function s(e){var t=e.slice(0,e.indexOf("["));return"$"===t.substring(0,1)?t:null},deleteIfPresent:function u(e,t){t in e&&delete e[t]},looksLikeModifier:function c(e){for(var t in e)if(e.hasOwnProperty(t)&&"$"===t.substring(0,1))return!0;return!1},dateToDateString:function f(e){var t=e.getUTCMonth()+1;10>t&&(t="0"+t);var n=e.getUTCDate();return 10>n&&(n="0"+n),e.getUTCFullYear()+"-"+t+"-"+n}}}.call(this),function(){function t(t,r){e.startup(function(){n.autorun(function(){t.isValid()||console.log('SimpleSchema invalid keys for "'+r+'" context:',t.invalidKeys())})})}function i(t,n,i){function o(e){var o=this.key;if(!r.contains(s,o)){var a=o.lastIndexOf("."),u=-1===a?"":o.slice(0,a+1),l=!1,c=e.call(r.extend({isSet:void 0!==this.value,unset:function(){l=!0},value:this.value,operator:this.operator,field:function(e){var n=t.getInfoForKey(e)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator||null}},siblingField:function(e){var n=t.getInfoForKey(u+e)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator||null}}},i||{}),t.getObject());if(s.push(o),void 0===c)return void(l&&t.removeValueForPosition(this.position));var f,p;if(r.isObject(c))for(var d in c)if(c.hasOwnProperty(d)&&"$"===d.substring(0,1)){f=d,p=c[d];break}!f&&n&&"$"!==this.position.slice(0,1)&&(f="$set",p=c),f?(t.removeValueForPosition(this.position),t.setValueForPosition(f+"["+o+"]",p)):t.setValueForPosition(this.position,c)}}var a=this,s=[];e.isClient&&void 0===i.userId&&(i.userId=e.userId&&e.userId()||null),r.each(a._autoValues,function(e,i){var a,s,c,f;if(-1!==i.indexOf("$")){var p=i.slice(0,i.lastIndexOf("$")+1);c=i.slice(p.length+1),a=u._keyToPosition(c,!0),c="."+c,f=t.getPositionsForGenericKey(p)}else f=t.getPositionsForGenericKey(i),f.length?(s=i,c="",a=""):(s=i,c="",a="",f=n?["$set["+i+"]"]:[u._keyToPosition(i)]);r.each(f,function(n){o.call({key:(s||u._positionToKey(n))+c,value:t.getValueForPosition(n+a),operator:l.extractOp(n),position:n+a},e)})})}e.isServer&&(c=Npm.require("string")),e.isClient&&(c=window.S);var a={type:o.Any,label:o.Optional(o.OneOf(String,Function)),optional:o.Optional(o.OneOf(Boolean,Function)),min:o.Optional(o.OneOf(Number,Date,Function)),max:o.Optional(o.OneOf(Number,Date,Function)),minCount:o.Optional(o.OneOf(Number,Function)),maxCount:o.Optional(o.OneOf(Number,Function)),allowedValues:o.Optional(o.OneOf([o.Any],Function)),decimal:o.Optional(Boolean),regEx:o.Optional(o.OneOf(RegExp,[RegExp])),custom:o.Optional(Function),blackbox:o.Optional(Boolean),autoValue:o.Optional(Function),defaultValue:o.Optional(o.Any),trim:o.Optional(Boolean)};s=function(e,t){var i=this,s=[],u;t=t||{},e=e||{},r.isArray(e)||(e=[e]),i._schema=v(e),i._schemaKeys=[],i._autoValues={},i._blackboxKeys=[],i._validators=[],i._messages={},i._depsMessages=new n.Dependency,i._depsLabels={},r.each(i._schema,function(e,t){if(!o.test(e,a))throw new Error("Invalid definition for "+t+" field.");if(u=t.split(".")[0],i._schemaKeys.push(t),"defaultValue"in e)if("autoValue"in e)console.warn('SimpleSchema: Found both autoValue and defaultValue options for "'+t+'". Ignoring defaultValue.');else{if(".$"===t.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have defaultValue.');i._autoValues[t]=function l(e){return function(){return null!==this.operator||this.isSet?void 0:e}}(e.defaultValue)}if("autoValue"in e){if(".$"===t.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have autoValue.');i._autoValues[t]=e.autoValue}i._depsLabels[t]=new n.Dependency,e.blackbox===!0&&i._blackboxKeys.push(t),r.contains(s,u)||s.push(u)}),i._firstLevelSchemaKeys=s,i._objectKeys=O(i._schema,i._schemaKeys),i._validationContexts={}},s.extendOptions=function(e){r.extend(a,e)};var f="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z](?:[a-z-]*[a-z])?",p="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\\.|$))+",h="(?:(?:[0-1]?\\d{1,2}|2[0-4]\\d|25[0-5])(?:\\.|$)){4}",m="(?:(?:[\\dA-Fa-f]{1,4}(?::|$)){8}|(?=(?:[^:\\s]|:[^:\\s])*::(?:[^:\\s]|:[^:\\s])*$)[\\dA-Fa-f]{0,4}(?:::?(?:[\\dA-Fa-f]{1,4}|$)){1,6})",g="(?:"+[p,h,m].join("|")+")";s.RegEx={Email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Domain:new RegExp("^"+f+"$"),WeakDomain:new RegExp("^"+g+"$"),IP:new RegExp("^(?:"+h+"|"+m+")$"),IPv4:new RegExp("^"+h+"$"),IPv6:new RegExp("^"+m+"$"),Url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,Id:/^[23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz]{17}$/},s._makeGeneric=function(e){return"string"!=typeof e?null:e.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},s._depsGlobalMessages=new n.Dependency,s.prototype=new o.Where,s.prototype.condition=function(e){var t=this,n,i;if(r.each(e,function(e,t){"$"===t.substring(0,1)?n=!0:i=!0}),n&&i)throw new o.Error("Object cannot contain modifier operators alongside other keys");if(!t.newContext().validate(e,{modifier:n,filter:!1,autoConvert:!1}))throw new o.Error("One or more properties do not match the schema.");return!0},s.prototype.namedContext=function(r){var i=this;return"string"!=typeof r&&(r="default"),i._validationContexts[r]||(i._validationContexts[r]=new d(i),s.debug&&e.isClient&&n.nonreactive(function(){t(i._validationContexts[r],r)})),i._validationContexts[r]},s._validators=[],s.addValidator=function(e){s._validators.push(e)},s.prototype.addValidator=s.prototype.validator=function(e){this._validators.push(e)},s.prototype.pick=function(){var e=this,t=r.toArray(arguments);t.unshift(e._schema);var n=r.pick.apply(null,t);return new s(n)},s.prototype.clean=function(e,t){var n=this;if(t=r.extend({filter:!0,autoConvert:!0,removeEmptyStrings:!0,trimStrings:!0,getAutoValues:!0,isModifier:!1,extendAutoValueContext:{}},t||{}),"$pushAll"in e){console.warn("SimpleSchema.clean: $pushAll is deprecated; converting to $push with $each"),e.$push=e.$push||{};for(var o in e.$pushAll){e.$push[o]=e.$push[o]||{},e.$push[o].$each=e.$push[o].$each||[];for(var a=0,l=e.$pushAll[o].length;l>a;a++)e.$push[o].$each.push(e.$pushAll[o][a]);delete e.$pushAll}}var f=new u(e,n._blackboxKeys);return(t.filter||t.autoConvert||t.removeEmptyStrings||t.trimStrings)&&f.forEachNode(function(){var e=this.genericKey;if(e){var r=n._schema[e],i=this.value;if(t.filter&&"$unset"!==this.operator&&!n.allowsKey(e))return"[$each]"===this.position.slice(-7)?f.removeValueForPosition(this.position.slice(0,-7)):this.remove(),void(s.debug&&console.info('SimpleSchema.clean: filtered out value that would have affected key "'+e+'", which is not allowed by the schema'));if(void 0!==i){var o=!1;if(t.autoConvert&&r){var a=y(i,r.type);if(void 0!==a&&a!==i){if(!t.removeEmptyStrings||this.operator&&"$set"!==this.operator||"string"!=typeof a||a.length)t.trimStrings&&"string"==typeof a&&(a=c(a).trim().s);else if(a=void 0,"$set"===this.operator){var u=this.position.replace("$set","$unset");f.setValueForPosition(u,"")}s.debug&&console.info("SimpleSchema.clean: autoconverted value "+i+" from "+typeof i+" to "+typeof a+" for "+e),this.updateValue(a),o=!0}}if(!o)if(!t.removeEmptyStrings||this.operator&&"$set"!==this.operator||"string"!=typeof i||i.length)t.trimStrings&&"string"==typeof i&&(!r||r&&r.trim!==!1)&&this.updateValue(c(i).trim().s);else if(this.remove(),"$set"===this.operator){var u=this.position.replace("$set","$unset");f.setValueForPosition(u,"")}}}},{endPointsOnly:!1}),t.getAutoValues&&i.call(n,f,t.isModifier,t.extendAutoValueContext),e},s.prototype.schema=function(e){var t=this;return null!=e?t._schema[s._makeGeneric(e)]:t._schema},s.prototype.getDefinition=function(e,t,n){var i=this,o=i.schema(e);return o?(o=r.isArray(t)?r.pick(o,t):r.clone(o),r.each(["min","max","minCount","maxCount","allowedValues","optional","label"],function(e){r.isFunction(o[e])&&(o[e]=o[e].call(n||{}))}),o.label=o.label||w(e),o):void 0},s.prototype.keyIsInBlackBox=function(e){var t=this,n=s._makeGeneric(e),r,i;do r=n.lastIndexOf("."),-1!==r&&(n=n.slice(0,r),i=t.getDefinition(n));while(-1!==r&&!i);return!(!i||!i.blackbox)},s.prototype.labels=function(e){var t=this;r.each(e,function(e,n){(r.isString(e)||r.isFunction(e))&&n in t._schema&&(t._schema[n].label=e,t._depsLabels[n]&&t._depsLabels[n].changed())})},s.prototype.label=function(e){var t=this;if(null==e){var n={};return r.each(t.schema(),function(e,r){n[r]=t.label(r)}),n}var i=t.getDefinition(e);if(i){var o=s._makeGeneric(e);return t._depsLabels[o]&&t._depsLabels[o].depend(),i.label}return null},s._globalMessages={required:"[label] is required",minString:"[label] must be at least [min] characters",maxString:"[label] cannot exceed [max] characters",minNumber:"[label] must be at least [min]",maxNumber:"[label] cannot exceed [max]",minDate:"[label] must be on or after [min]",maxDate:"[label] cannot be after [max]",minCount:"You must specify at least [minCount] values",maxCount:"You cannot specify more than [maxCount] values",noDecimal:"[label] must be an integer",notAllowed:"[value] is not an allowed value",expectedString:"[label] must be a string",expectedNumber:"[label] must be a number",expectedBoolean:"[label] must be a boolean",expectedArray:"[label] must be an array",expectedObject:"[label] must be an object",expectedConstructor:"[label] must be a [type]",regEx:[{msg:"[label] failed regular expression validation"},{exp:s.RegEx.Email,msg:"[label] must be a valid e-mail address"},{exp:s.RegEx.WeakEmail,msg:"[label] must be a valid e-mail address"},{exp:s.RegEx.Domain,msg:"[label] must be a valid domain"},{exp:s.RegEx.WeakDomain,msg:"[label] must be a valid domain"},{exp:s.RegEx.IP,msg:"[label] must be a valid IPv4 or IPv6 address"},{exp:s.RegEx.IPv4,msg:"[label] must be a valid IPv4 address"},{exp:s.RegEx.IPv6,msg:"[label] must be a valid IPv6 address"},{exp:s.RegEx.Url,msg:"[label] must be a valid URL"},{exp:s.RegEx.Id,msg:"[label] must be a valid alphanumeric ID"}],keyNotInSchema:"[label] is not allowed by the schema"},s.messages=function(e){r.extend(s._globalMessages,e),s._depsGlobalMessages.changed()},s.prototype.messages=function(e){var t=this;r.extend(t._messages,e),t._depsMessages.changed()},s.prototype.messageForError=function(e,t,n,i){function o(t){if("regEx"!==e||!r.isArray(t))return t;var n;return f&&(n=r.find(t,function(e){return e.exp&&e.exp.toString()===f})),n||(n=r.findWhere(t,{exp:null}),n||(n=r.findWhere(t,{exp:void 0}))),n?n.msg:null}var a=this;n=n||a.getDefinition(t,["regEx","label","minCount","maxCount","min","max","type"])||{};var u=e.indexOf("."),c=null;-1!==u&&(c=e.substring(u+1),c=parseInt(c,10),e=e.substring(0,u));var f;"regEx"===e&&(f=null==c||isNaN(c)?n.regEx:n.regEx[c],f&&(f=f.toString()));var p=e+" "+t,d=s._makeGeneric(t),h=e+" "+d;s._depsGlobalMessages.depend(),a._depsMessages.depend(),a._depsLabels[t]&&a._depsLabels[t].depend();var m=a._messages[p]||a._messages[h]||a._messages[e];if(m=o(m),m||(m=s._globalMessages[p]||s._globalMessages[h]||s._globalMessages[e],m=o(m)),!m)return"Unknown validation error";a._depsLabels[t]&&a._depsLabels[t].depend(),m=m.replace("[label]",n.label),"undefined"!=typeof n.minCount&&(m=m.replace("[minCount]",n.minCount)),"undefined"!=typeof n.maxCount&&(m=m.replace("[maxCount]",n.maxCount)),m=void 0!==i&&null!==i?m.replace("[value]",i.toString()):m.replace("[value]","null");var g=n.min,y=n.max;return n.type===Date||n.type===[Date]?("undefined"!=typeof g&&(m=m.replace("[min]",l.dateToDateString(g))),"undefined"!=typeof y&&(m=m.replace("[max]",l.dateToDateString(y)))):("undefined"!=typeof g&&(m=m.replace("[min]",g)),"undefined"!=typeof y&&(m=m.replace("[max]",y))),n.type instanceof Function&&(m=m.replace("[type]",n.type.name)),m},s.prototype.allowsKey=function(e){var t=this;return r.any(t._schemaKeys,function(n){if(n===e)return!0;if(t.schema(n).blackbox===!0){var r=n.length,i=e.slice(0,r+2),o=i.slice(0,-1);if(i===n+".$")return!1;if(o===n+".")return!0}return!1})},s.prototype.newContext=function(){return new d(this)},s.prototype.objectKeys=function(e){var t=this;return e?t._objectKeys[e+"."]||[]:t._firstLevelSchemaKeys};var y=function(e,t){if(r.isArray(e)||r.isObject(e)&&!(e instanceof Date))return e;if(t===String)return"undefined"!=typeof e&&null!==e&&"string"!=typeof e?e.toString():e;if(t===Number){if("string"==typeof e&&!c(e).isEmpty()){var n=Number(e);return isNaN(n)?e:n}return e}return e},v=function(e){var t={};return r.each(e,function(e){e=o.test(e,s)?e._schema:_(b(e)),r.each(e,function(e,n){t[n]=t[n]||{},r.extend(t[n],e)})}),e.length&&x(t),t},b=function(e){return r.each(e,function(t,n){var i,a;if(t){if(o.test(t.type,s))i=".",a=t.type,t.type=Object;else{if(!o.test(t.type,[s]))return;i=".$.",a=t.type[0],t.type=[Object]}r.each(a._schema,function(t,r){var o=n+i+r;o in e||(e[o]=t)})}}),e},x=function(e){r.each(e,function(t,n){if(r.isArray(t.type)||t.type===Array){var i=n+".$";i in e||(e[i]={}),r.isArray(t.type)&&(e[i].type=t.type[0]),t.label&&(e[i].label=t.label),e[i].optional=!0,"undefined"!=typeof t.min&&(e[i].min=t.min),"undefined"!=typeof t.max&&(e[i].max=t.max),"undefined"!=typeof t.allowedValues&&(e[i].allowedValues=t.allowedValues),"undefined"!=typeof t.decimal&&(e[i].decimal=t.decimal),"undefined"!=typeof t.regEx&&(e[i].regEx=t.regEx),"undefined"!=typeof t.blackbox&&(e[i].blackbox=t.blackbox),t.type=Array,r.each(["min","max","allowedValues","decimal","regEx","blackbox"],function(e){l.deleteIfPresent(t,e)
})}})},_=function(e){var t=[],n=[],i,o;r.each(e,function(e,r){for(var o=r.indexOf(".");-1!==o;)i=r.substring(0,o),".$"===i.substring(i.length-2)?o=-1:".$."===r.substring(o,o+3)?(t.push(i),o=r.indexOf(".",o+3)):(n.push(i),o=r.indexOf(".",o+1))});for(var a=0,s=t.length;s>a;a++)o=t[a],o in e||(e[o]={type:[Object],optional:!0});for(var a=0,s=n.length;s>a;a++)o=n[a],o in e||(e[o]={type:Object,optional:!0});return x(e),e},O=function(e,t){var n,i,o={},a;return r.each(e,function(e,s){e.type===Object&&(n=s+".",a=[],r.each(t,function(e){c(e).startsWith(n)&&(i=e.substring(n.length),-1===i.indexOf(".")&&a.push(i))}),o[n]=a)}),o},w=function(e){var t=e,n=t.lastIndexOf(".");if(-1!==n&&(t=t.substring(n+1),"$"===t)){var r=e.split(".");t=r[r.length-2]}return"_id"===t?"ID":c(t).humanize().s}}.call(this),function(){function e(e,t,n){var i=e.type;if(i===String){if("string"!=typeof t)return"expectedString";if(null!==e.max&&e.max<t.length)return"maxString";if(null!==e.min&&e.min>t.length)return"minString";if(e.regEx instanceof RegExp&&!e.regEx.test(t))return"regEx";if(r.isArray(e.regEx)){var o;if(r.every(e.regEx,function(e,n){return e.test(t)?!0:(o="regEx."+n,!1)}),o)return o}}else if(i===Number){if("number"!=typeof t||isNaN(t))return"expectedNumber";if("$inc"!==n&&null!==e.max&&e.max<t)return"maxNumber";if("$inc"!==n&&null!==e.min&&e.min>t)return"minNumber";if(!e.decimal&&t.toString().indexOf(".")>-1)return"noDecimal"}else if(i===Boolean){if("boolean"!=typeof t)return"expectedBoolean"}else if(i===Object){if(!l.isBasicObject(t))return"expectedObject"}else if(i===Array){if(!r.isArray(t))return"expectedArray";if(null!==e.minCount&&t.length<e.minCount)return"minCount";if(null!==e.maxCount&&t.length>e.maxCount)return"maxCount"}else if(i instanceof Function||l.safariBugFix(i)){if(!(t instanceof i))return"expectedConstructor";if(i===Date){if(r.isDate(e.min)&&e.min.getTime()>t.getTime())return"minDate";if(r.isDate(e.max)&&e.max.getTime()<t.getTime())return"maxDate"}}}f=function t(n,i,o,a,c,f){function p(t,i,o,a,p,d,h,y){if(!a)return void m.push(l.errorObject("keyNotInSchema",i,t,a,c));if(!d&&!a.optional&&(null===t||"$unset"===p||"$rename"===p||void 0===t&&(h||y||!p||"$set"===p)))return void m.push(l.errorObject("required",i,null,a,c));if("$rename"===p&&"string"==typeof t&&!c.allowsKey(t))return void m.push(l.errorObject("keyNotInSchema",t,null,null,c));if("$unset"!==p&&"$rename"!==p&&l.isNotNullOrUndefined(t)){var v=e(a,t,p);if(v)return void m.push(l.errorObject(v,i,t,a,c));if(a.allowedValues&&!r.contains(a.allowedValues,t))return void m.push(l.errorObject("notAllowed",i,t,a,c))}var b=i.lastIndexOf("."),x=-1===b?"":i.slice(0,b+1),_=a.custom?[a.custom]:[];_=_.concat(c._validators).concat(s._validators),r.every(_,function(e){var s=e.call(r.extend({key:i,genericKey:o,definition:a,isSet:void 0!==t,value:t,operator:p,field:function(e){g=g||new u(n,c._blackboxKeys);var t=g.getInfoForKey(e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}},siblingField:function(e){g=g||new u(n,c._blackboxKeys);var t=g.getInfoForKey(x+e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}}},f||{}));return"string"==typeof s?(m.push(l.errorObject(s,i,t,a,c)),!1):!0})}function d(e,t,n,i,o,u){var f,h;if(t){if(c.keyIsInBlackBox(t))return;if(f=s._makeGeneric(t),h=c.getDefinition(t),!a||a===t||a===f){var m=r.some(i,function(e){return e.slice(0,t.length+1)===t+"."});p(e,t,f,h,n,m,o,u)}}if(void 0!==e&&null!==e||h&&(h.type!==Object||h.optional)||(e={}),r.isArray(e))r.each(e,function(e,r){d(e,t+"."+r,n,i)});else if(l.isBasicObject(e)&&(!h||!h.blackbox)){var g=r.keys(e),y=r.union(g,c.objectKeys(f)),o=f&&".$"===f.slice(-2);r.each(y,function(r){d(e[r],l.appendAffectedKey(t,r),n,i,o,!0)})}}function h(e){if(r.isEmpty(e))throw new Error("When the modifier option is true, validation object must have at least one operator");var t=r.keys(e.$set||{}).concat(r.keys(e.$setOnInsert||{}));"$setOnInsert"in e&&(o&&(e.$set=e.$set||{},e.$set=r.extend(e.$set,e.$setOnInsert)),delete e.$setOnInsert),r.each(e,function(e,n){if("$"!==n.slice(0,1))throw new Error("When the modifier option is true, all validation object keys must be operators. Did you forget `$set`?");if(l.shouldCheck(n)){if(o&&"$set"===n){var i=r.keys(e);r.each(c.objectKeys(),function(e){r.contains(i,e)||d(void 0,e,n,t)})}r.each(e,function(e,r){("$push"===n||"$addToSet"===n)&&(l.isBasicObject(e)&&"$each"in e?e=e.$each:r+=".0"),d(e,r,n,t)})}})}if(!r.isObject(n))throw new Error("The first argument of validate() or validateOne() must be an object");if(!i&&l.looksLikeModifier(n))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");var m=[],g;i?h(n):d(n);var y=[];return m=r.filter(m,function(e){return r.contains(y,e.name)?!1:(y.push(e.name),!0)})}}.call(this),function(){function t(t,n,i){var o=new e.Collection(null),s;if(i)s=a.id(),o.upsert({_id:s},t);else{var l=new u(t),c=new u({});r.each(n,function(e,t){var n;if(e.type===Array&&l.affectsGenericKey(t)?n=[]:e.optional||(n=e.type===Boolean?!0:e.type===Number?e.min||0:e.type===Date?e.min||new Date:e.type===Array?[]:e.type===Object?{}:"0"),void 0!==n){var r=t.replace(/\.\$/g,".0"),i=u._keyToPosition(r,!1);c.setValueForPosition(i,n)}}),c=c.getObject(),s=o.insert(c),o.update(s,t)}var f=o.findOne(s);return o.remove(s),n._id||delete f._id,f}function n(e,t,n){var i=e.type;if(i===String){if("string"!=typeof t)return"expectedString";if(null!==e.max&&e.max<t.length)return"maxString";if(null!==e.min&&e.min>t.length)return"minString";if(e.regEx instanceof RegExp&&!e.regEx.test(t))return"regEx";if(r.isArray(e.regEx)){var o;if(r.every(e.regEx,function(e,n){return e.test(t)?!0:(o="regEx."+n,!1)}),o)return o}}else if(i===Number){if("number"!=typeof t||isNaN(t))return"expectedNumber";if("$inc"!==n&&null!==e.max&&e.max<t)return"maxNumber";if("$inc"!==n&&null!==e.min&&e.min>t)return"minNumber";if(!e.decimal&&t.toString().indexOf(".")>-1)return"noDecimal"}else if(i===Boolean){if("boolean"!=typeof t)return"expectedBoolean"}else if(i===Object){if(!l.isBasicObject(t))return"expectedObject"}else if(i===Array){if(!r.isArray(t))return"expectedArray";if(null!==e.minCount&&t.length<e.minCount)return"minCount";if(null!==e.maxCount&&t.length>e.maxCount)return"maxCount"}else if(i instanceof Function||l.safariBugFix(i)){if(!(t instanceof i))return"expectedConstructor";if(i===Date){if(r.isDate(e.min)&&e.min.getTime()>t.getTime())return"minDate";if(r.isDate(e.max)&&e.max.getTime()<t.getTime())return"maxDate"}}}p=function i(e,o,a,c,f,p){function d(t,i,o,a,c,d,h){if(!a)return void g.push(l.errorObject("keyNotInSchema",i,t,a,f));if(!(d||a.optional||null!==t&&void 0!==t))return void g.push(l.errorObject("required",i,null,a,f));if(l.isNotNullOrUndefined(t)){var m=n(a,t,c);if(m)return void g.push(l.errorObject(m,i,t,a,f));if(a.allowedValues&&!r.contains(a.allowedValues,t))return void g.push(l.errorObject("notAllowed",i,t,a,f))}var v=i.lastIndexOf("."),b=-1===v?"":i.slice(0,v+1),x=a.custom?[a.custom]:[];x=x.concat(f._validators).concat(s._validators),r.every(x,function(n){var s=n.call(r.extend({key:i,genericKey:o,definition:a,isSet:void 0!==t,value:t,operator:c,field:function(t){y=y||new u(e,f._blackboxKeys);var n=y.getInfoForKey(t)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator}},siblingField:function(t){y=y||new u(e,f._blackboxKeys);var n=y.getInfoForKey(b+t)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator}}},p||{}));return"string"==typeof s?(g.push(l.errorObject(s,i,t,a,f)),!1):!0})}function h(e,t,n,i){var o,a;if(t){if(f.keyIsInBlackBox(t))return;o=s._makeGeneric(t),a=f.getDefinition(t),c&&c!==t&&c!==o||d(e,t,o,a,null,n,i)}if(void 0!==e&&null!==e||a&&(a.type!==Object||a.optional)||(e={}),r.isArray(e))r.each(e,function(e,n){h(e,t+"."+n)});else if(l.isBasicObject(e)&&(!a||!a.blackbox)){var u=r.keys(e),p=r.union(u,f._schemaKeys),i=o&&".$"===o.slice(-2);r.each(p,function(r){l.shouldCheck(r)&&h(e[r],l.appendAffectedKey(t,r),n,i)})}}if(!r.isObject(e))throw new Error("The first argument of validate() or validateOne() must be an object");if(o){if(r.isEmpty(e))throw new Error("When the modifier option is true, validation object must have at least one operator");var m=r.every(e,function(e,t){return"$"===t.substring(0,1)});if(!m)throw new Error("When the modifier option is true, all validation object keys must be operators");e=t(e,f.schema(),a)}else if(l.looksLikeModifier(e))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");var g=[],y;h(e);var v=[];return g=r.filter(g,function(e){return r.contains(v,e.name)?!1:(v.push(e.name),!0)})}}.call(this),function(){function t(e,t,n,r,i,o){var a=!0,s=a?f:p;return s(e,t,n,r,i,o)}d=function i(e){var t=this;t._simpleSchema=e,t._schema=e.schema(),t._schemaKeys=r.keys(t._schema),t._invalidKeys=[],t._deps={},t._depsAny=new n.Dependency,r.each(t._schemaKeys,function(e){t._deps[e]=new n.Dependency})},d.prototype.validate=function o(n,i){var o=this;i=r.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},i||{}),e.isClient&&void 0===i.extendedCustomContext.userId&&(i.extendedCustomContext.userId=e.userId&&e.userId()||null);var a=t(n,i.modifier,i.upsert,null,o._simpleSchema,i.extendedCustomContext),s=r.pluck(o._invalidKeys,"name");o._invalidKeys=a;var u=r.pluck(o._invalidKeys,"name"),l=r.union(u,s);return o._markKeysChanged(l),0===o._invalidKeys.length},d.prototype.validateOne=function a(n,i,o){var a=this;o=r.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},o||{}),e.isClient&&void 0===o.extendedCustomContext.userId&&(o.extendedCustomContext.userId=e.userId&&e.userId()||null);for(var s=t(n,o.modifier,o.upsert,i,a._simpleSchema,o.extendedCustomContext),u=[],l=0,c=a._invalidKeys.length,f;c>l;l++)f=a._invalidKeys[l],f.name!==i&&u.push(f);a._invalidKeys=u;for(var l=0,c=s.length,f;c>l;l++)f=s[l],a._invalidKeys.push(f);return a._markKeysChanged([i]),!a._keyIsInvalid(i)},d.prototype.resetValidation=function u(){var e=this,t=r.pluck(e._invalidKeys,"name");e._invalidKeys=[],e._markKeysChanged(t)},d.prototype.isValid=function l(){var e=this;return e._depsAny.depend(),!e._invalidKeys.length},d.prototype.invalidKeys=function c(){var e=this;return e._depsAny.depend(),e._invalidKeys},d.prototype.addInvalidKeys=function h(e){var t=this;if(e&&e.length){var n=[];r.each(e,function(e){n.push(e.name),t._invalidKeys.push(e)}),t._markKeysChanged(n)}},d.prototype._markKeysChanged=function m(e){var t=this;e&&e.length&&(r.each(e,function(e){var n=s._makeGeneric(e);n in t._deps&&t._deps[n].changed()}),t._depsAny.changed())},d.prototype._getInvalidKeyObject=function g(e,t){var n=this;t=t||s._makeGeneric(e);var i=r.findWhere(n._invalidKeys,{name:e});return i||(i=r.findWhere(n._invalidKeys,{name:t})),i},d.prototype._keyIsInvalid=function y(e,t){return!!this._getInvalidKeyObject(e,t)},d.prototype.keyIsInvalid=function v(e){var t=this,n=s._makeGeneric(e);return t._deps[n]&&t._deps[n].depend(),t._keyIsInvalid(e,n)},d.prototype.keyErrorMessage=function b(e){var t=this,n=s._makeGeneric(e);t._deps[n]&&t._deps[n].depend();var r=t._getInvalidKeyObject(e,n);return r?t._simpleSchema.messageForError(r.type,r.name,null,r.value):""},d.prototype.getErrorObject=function x(t){var n=this,i,o=this._invalidKeys;o.length?(i=n.keyErrorMessage(o[0].name),o=r.map(o,function(e){return r.extend({message:n.keyErrorMessage(e.name)},e)})):i="Failed validation";var a=new Error(i);return a.invalidKeys=o,e.isServer&&(a.sanitizedError=new e.Error(400,i)),a}}.call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:simple-schema"]={SimpleSchema:s,MongoObject:u}}();

!function(){var a=Package.meteor.Meteor,e=Package.ddp.DDP,e,t;"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:e,LivedataTest:t}}();

!function(){var e=Package.meteor.Meteor,t;(function(){(function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){pt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function s(e,t){var n=!0;return d(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function r(e,t){mn[e]||(a(t),mn[e]=!0)}function i(e,t){return function(n){return _(e.call(this,n),t)}}function o(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function u(){}function c(e,t){t!==!1&&G(e),h(this,e),this._d=new Date(+e._d)}function l(e){var t=k(e),n=t.year||0,a=t.quarter||0,s=t.month||0,r=t.week||0,i=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*o,this._days=+i+7*r,this._months=+s+3*a+12*n,this._data={},this._locale=pt.localeData(),this._bubble()}function d(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t){var n,a,s;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ft.length>0)for(n in Ft)a=Ft[n],s=t[a],"undefined"!=typeof s&&(e[a]=s);return e}function f(e){return 0>e?Math.ceil(e):Math.floor(e)}function _(e,t,n){for(var a=""+Math.abs(e),s=e>=0;a.length<t;)a="0"+a;return(s?n?"+":"":"-")+a}function m(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=z(t,e),e.isBefore(t)?n=m(e,t):(n=m(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function p(e,t){return function(n,a){var s,i;return null===a||isNaN(+a)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),i=n,n=a,a=i),n="string"==typeof n?+n:n,s=pt.duration(n,a),g(this,s,e),this}}function g(e,t,n,a){var s=t._milliseconds,r=t._days,i=t._months;a=null==a?!0:a,s&&e._d.setTime(+e._d+s*n),r&&dt(e,"Date",lt(e,"Date")+r*n),i&&ct(e,lt(e,"Month")+i*n),a&&pt.updateOffset(e,r||i)}function D(e){return"[object Array]"===Object.prototype.toString.call(e)}function M(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function w(e,t,n){var a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0,i;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&b(e[i])!==b(t[i]))&&r++;return r+s}function Y(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=un[e]||cn[t]||t}return e}function k(e){var t={},n,a;for(a in e)e.hasOwnProperty(a)&&(n=Y(a),n&&(t[n]=e[a]));return t}function v(t){var n,a;if(0===t.indexOf("week"))n=7,a="day";else{if(0!==t.indexOf("month"))return;n=12,a="month"}pt[t]=function(s,r){var i,o,u=pt._locale[t],c=[];if("number"==typeof s&&(r=s,s=e),o=function(e){var t=pt().utc().set(a,e);return u.call(pt._locale,t,s||"")},null!=r)return o(r);for(i=0;n>i;i++)c.push(o(i));return c}}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function S(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function T(e,t,n){return rt(pt([e,11,31+t-n]),t,n).week}function O(e){return W(e)?366:365}function W(e){return e%4===0&&e%100!==0||e%400===0}function G(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[vt]<0||e._a[vt]>11?vt:e._a[bt]<1||e._a[bt]>S(e._a[kt],e._a[vt])?bt:e._a[St]<0||e._a[St]>23?St:e._a[Tt]<0||e._a[Tt]>59?Tt:e._a[Ot]<0||e._a[Ot]>59?Ot:e._a[Wt]<0||e._a[Wt]>999?Wt:-1,e._pf._overflowDayOfYear&&(kt>t||t>bt)&&(t=bt),e._pf.overflow=t)}function F(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function U(e){return e?e.toLowerCase().replace("_","-"):e}function C(e){for(var t=0,n,a,s,r;t<e.length;){for(r=U(e[t]).split("-"),n=r.length,a=U(e[t+1]),a=a?a.split("-"):null;n>0;){if(s=P(r.slice(0,n).join("-")))return s;if(a&&a.length>=n&&w(r,a,!0)>=n-1)break;n--}t++}return null}function P(e){var t=null;if(!Gt[e]&&Ut)try{t=pt.locale(),require("./locale/"+e),pt.locale(t)}catch(n){}return Gt[e]}function z(e,t){return t._isUTC?pt(e).zone(t._offset||0):pt(e).local()}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t=e.match(Lt),n,a;for(n=0,a=t.length;a>n;n++)t[n]=_n[t[n]]?_n[t[n]]:L(t[n]);return function(s){var r="";for(n=0;a>n;n++)r+=t[n]instanceof Function?t[n].call(s,e):t[n];return r}}function H(e,t){return e.isValid()?(t=A(t,e.localeData()),ln[t]||(ln[t]=I(t)),ln[t](e)):e.localeData().invalidDate()}function A(e,t){function n(e){return t.longDateFormat(e)||e}var a=5;for(It.lastIndex=0;a>=0&&It.test(e);)e=e.replace(It,n),It.lastIndex=0,a-=1;return e}function x(e,t){var n,a=t._strict;switch(e){case"Q":return Jt;case"DDDD":return Xt;case"YYYY":case"GGGG":case"gggg":return a?Bt:xt;case"Y":case"G":case"g":return Kt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return a?Rt:Zt;case"S":if(a)return Jt;case"SS":if(a)return Qt;case"SSS":if(a)return Xt;case"DDD":return At;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return jt;case"a":case"A":return t._locale._meridiemParse;case"X":return qt;case"Z":case"ZZ":return Nt;case"T":return Vt;case"SSSS":return Et;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return a?Qt:Ht;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ht;case"Do":return $t;default:return n=new RegExp(Q(J(e.replace("\\","")),"i"))}}function Z(e){e=e||"";var t=e.match(Nt)||[],n=t[t.length-1]||[],a=(n+"").match(sn)||["-",0,0],s=+(60*a[1])+b(a[2]);return"+"===a[0]?-s:s}function E(e,t,n){var a,s=n._a;switch(e){case"Q":null!=t&&(s[vt]=3*(b(t)-1));break;case"M":case"MM":null!=t&&(s[vt]=b(t)-1);break;case"MMM":case"MMMM":a=n._locale.monthsParse(t),null!=a?s[vt]=a:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[bt]=b(t));break;case"Do":null!=t&&(s[bt]=b(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=b(t));break;case"YY":s[kt]=pt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[kt]=b(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":s[St]=b(t);break;case"m":case"mm":s[Tt]=b(t);break;case"s":case"ss":s[Ot]=b(t);break;case"S":case"SS":case"SSS":case"SSSS":s[Wt]=b(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Z(t);break;case"dd":case"ddd":case"dddd":a=n._locale.weekdaysParse(t),null!=a?(n._w=n._w||{},n._w.d=a):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=b(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=pt.parseTwoDigitYear(t)}}function j(e){var n,a,s,r,i,o,u;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(i=1,o=4,a=t(n.GG,e._a[kt],rt(pt(),1,4).year),s=t(n.W,1),r=t(n.E,1)):(i=e._locale._week.dow,o=e._locale._week.doy,a=t(n.gg,e._a[kt],rt(pt(),i,o).year),s=t(n.w,1),null!=n.d?(r=n.d,i>r&&++s):r=null!=n.e?n.e+i:i),u=it(a,s,r,o,i),e._a[kt]=u.year,e._dayOfYear=u.dayOfYear}function N(e){var n,a,s=[],r,i;if(!e._d){for(r=q(e),e._w&&null==e._a[bt]&&null==e._a[vt]&&j(e),e._dayOfYear&&(i=t(e._a[kt],r[kt]),e._dayOfYear>O(i)&&(e._pf._overflowDayOfYear=!0),a=tt(i,0,e._dayOfYear),e._a[vt]=a.getUTCMonth(),e._a[bt]=a.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=s[n]=r[n];for(;7>n;n++)e._a[n]=s[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?tt:et).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function V(e){var t;e._d||(t=k(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],N(e))}function q(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function $(e){if(e._f===pt.ISO_8601)return void B(e);e._a=[],e._pf.empty=!0;var t=""+e._i,n,a,s,r,i,o=t.length,u=0;for(s=A(e._f,e._locale).match(Lt)||[],n=0;n<s.length;n++)r=s[n],a=(t.match(x(r,e))||[])[0],a&&(i=t.substr(0,t.indexOf(a)),i.length>0&&e._pf.unusedInput.push(i),t=t.slice(t.indexOf(a)+a.length),u+=a.length),_n[r]?(a?e._pf.empty=!1:e._pf.unusedTokens.push(r),E(r,a,e)):e._strict&&!a&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=o-u,t.length>0&&e._pf.unusedInput.push(t),e._isPm&&e._a[St]<12&&(e._a[St]+=12),e._isPm===!1&&12===e._a[St]&&(e._a[St]=0),N(e),G(e)}function J(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,s){return t||n||a||s})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(e){var t,a,s,r,i;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)i=0,t=h({},e),t._pf=n(),t._f=e._f[r],$(t),F(t)&&(i+=t._pf.charsLeftOver,i+=10*t._pf.unusedTokens.length,t._pf.score=i,(null==s||s>i)&&(s=i,a=t));d(e,a||t)}function B(e){var t,n,a=e._i,s=en.exec(a);if(s){for(e._pf.iso=!0,t=0,n=nn.length;n>t;t++)if(nn[t][1].exec(a)){e._f=nn[t][0]+(s[6]||" ");break}for(t=0,n=an.length;n>t;t++)if(an[t][1].exec(a)){e._f+=an[t][0];break}a.match(Nt)&&(e._f+="Z"),$(e)}else e._isValid=!1}function R(e){B(e),e._isValid===!1&&(delete e._isValid,pt.createFromInputFallback(e))}function K(t){var n=t._i,a;n===e?t._d=new Date:M(n)?t._d=new Date(+n):null!==(a=Ct.exec(n))?t._d=new Date(+a[1]):"string"==typeof n?R(t):D(n)?(t._a=n.slice(0),N(t)):"object"==typeof n?V(t):"number"==typeof n?t._d=new Date(n):pt.createFromInputFallback(t)}function et(e,t,n,a,s,r,i){var o=new Date(e,t,n,a,s,r,i);return 1970>e&&o.setFullYear(e),o}function tt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function nt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function at(e,t,n,a,s){return s.relativeTime(t||1,!!n,e,a)}function st(e,t,n){var a=pt.duration(e).abs(),s=wt(a.as("s")),r=wt(a.as("m")),i=wt(a.as("h")),o=wt(a.as("d")),u=wt(a.as("M")),c=wt(a.as("y")),l=s<dn.s&&["s",s]||1===r&&["m"]||r<dn.m&&["mm",r]||1===i&&["h"]||i<dn.h&&["hh",i]||1===o&&["d"]||o<dn.d&&["dd",o]||1===u&&["M"]||u<dn.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,at.apply({},l)}function rt(e,t,n){var a=n-t,s=n-e.day(),r;return s>a&&(s-=7),a-7>s&&(s+=7),r=pt(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function it(e,t,n,a,s){var r=tt(e,0,1).getUTCDay(),i,o;return r=0===r?7:r,n=null!=n?n:s,i=s-r+(r>a?7:0)-(s>r?7:0),o=7*(t-1)+(n-s)+i+1,{year:o>0?e:e-1,dayOfYear:o>0?o:O(e-1)+o}}function ot(t){var n=t._i,a=t._f;return t._locale=t._locale||pt.localeData(t._l),null===n||a===e&&""===n?pt.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),pt.isMoment(n)?new c(n,!0):(a?D(a)?X(t):$(t):K(t),new c(t)))}function ut(e,t){var n,a;if(1===t.length&&D(t[0])&&(t=t[0]),!t.length)return pt();for(n=t[0],a=1;a<t.length;++a)t[a][e](n)&&(n=t[a]);return n}function ct(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),S(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function lt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function dt(e,t,n){return"Month"===t?ct(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ht(e,t){return function(n){return null!=n?(dt(this,e,n),pt.updateOffset(this,t),this):lt(this,e)}}function ft(e){return 400*e/146097}function _t(e){return 146097*e/400}function mt(e){pt.duration.fn[e]=function(){return this._data[e]}}function yt(e){"undefined"==typeof ender&&(Mt=Dt.moment,Dt.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",pt):pt)}for(var pt,gt="2.8.1",Dt="undefined"!=typeof global?global:this,Mt,wt=Math.round,Yt,kt=0,vt=1,bt=2,St=3,Tt=4,Ot=5,Wt=6,Gt={},Ft=[],Ut="undefined"!=typeof module&&module.exports,Ct=/^\/?Date\((\-?\d+)/i,Pt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Lt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,It=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ht=/\d\d?/,At=/\d{1,3}/,xt=/\d{1,4}/,Zt=/[+\-]?\d{1,6}/,Et=/\d+/,jt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Nt=/Z|[\+\-]\d\d:?\d\d/gi,Vt=/T/i,qt=/[\+\-]?\d+(\.\d{1,3})?/,$t=/\d{1,2}/,Jt=/\d/,Qt=/\d\d/,Xt=/\d{3}/,Bt=/\d{4}/,Rt=/[+-]?\d{6}/,Kt=/[+-]?\d+/,en=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tn="YYYY-MM-DDTHH:mm:ssZ",nn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],an=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sn=/([\+\-]|\d\d)/gi,rn="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),on={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},un={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},cn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ln={},dn={s:45,m:45,h:22,d:26,M:11},hn="DDD w W M D d".split(" "),fn="M D H h m s w W".split(" "),_n={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return _(this.year()%100,2)},YYYY:function(){return _(this.year(),4)},YYYYY:function(){return _(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+_(Math.abs(e),6)},gg:function(){return _(this.weekYear()%100,2)},gggg:function(){return _(this.weekYear(),4)},ggggg:function(){return _(this.weekYear(),5)},GG:function(){return _(this.isoWeekYear()%100,2)},GGGG:function(){return _(this.isoWeekYear(),4)},GGGGG:function(){return _(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return b(this.milliseconds()/100)},SS:function(){return _(b(this.milliseconds()/10),2)},SSS:function(){return _(this.milliseconds(),3)},SSSS:function(){return _(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+_(b(e/60),2)+":"+_(b(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+_(b(e/60),2)+_(b(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mn={},yn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];hn.length;)Yt=hn.pop(),_n[Yt+"o"]=o(_n[Yt],Yt);for(;fn.length;)Yt=fn.pop(),_n[Yt+Yt]=i(_n[Yt],2);_n.DDDD=i(_n.DDD,3),d(u.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,a;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=pt.utc([2e3,t]),a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(a.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=pt([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,a){var s=this._relativeTime[n];return"function"==typeof s?s(e,t,n,a):s.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return rt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),pt=function(t,a,s,r){var i;return"boolean"==typeof s&&(r=s,s=e),i={},i._isAMomentObject=!0,i._i=t,i._f=a,i._l=s,i._strict=r,i._isUTC=!1,i._pf=n(),ot(i)},pt.suppressDeprecationWarnings=!1,pt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),pt.min=function(){var e=[].slice.call(arguments,0);return ut("isBefore",e)},pt.max=function(){var e=[].slice.call(arguments,0);return ut("isAfter",e)},pt.utc=function(t,a,s,r){var i;return"boolean"==typeof s&&(r=s,s=e),i={},i._isAMomentObject=!0,i._useUTC=!0,i._isUTC=!0,i._l=s,i._i=t,i._f=a,i._strict=r,i._pf=n(),ot(i).utc()},pt.unix=function(e){return pt(1e3*e)},pt.duration=function(e,t){var n=e,a=null,s,r,i,o;return pt.isDuration(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(n={},t?n[t]=e:n.milliseconds=e):(a=Pt.exec(e))?(s="-"===a[1]?-1:1,n={y:0,d:b(a[bt])*s,h:b(a[St])*s,m:b(a[Tt])*s,s:b(a[Ot])*s,ms:b(a[Wt])*s}):(a=zt.exec(e))?(s="-"===a[1]?-1:1,i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},n={y:i(a[2]),M:i(a[3]),d:i(a[4]),h:i(a[5]),m:i(a[6]),s:i(a[7]),w:i(a[8])}):"object"==typeof n&&("from"in n||"to"in n)&&(o=y(pt(n.from),pt(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),r=new l(n),pt.isDuration(e)&&e.hasOwnProperty("_locale")&&(r._locale=e._locale),r},pt.version=gt,pt.defaultFormat=tn,pt.ISO_8601=function(){},pt.momentProperties=Ft,pt.updateOffset=function(){},pt.relativeTimeThreshold=function(t,n){return dn[t]===e?!1:n===e?dn[t]:(dn[t]=n,!0)},pt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return pt.locale(e,t)}),pt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?pt.defineLocale(e,t):pt.localeData(e),n&&(pt.duration._locale=pt._locale=n)),pt._locale._abbr},pt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Gt[e]||(Gt[e]=new u),Gt[e].set(t),pt.locale(e),Gt[e]):(delete Gt[e],null)},pt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return pt.localeData(e)}),pt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return pt._locale;if(!D(e)){if(t=P(e))return t;e=[e]}return C(e)},pt.isMoment=function(e){return e instanceof c||null!=e&&e.hasOwnProperty("_isAMomentObject")},pt.isDuration=function(e){return e instanceof l};for(Yt=yn.length-1;Yt>=0;--Yt)v(yn[Yt]);pt.normalizeUnits=function(e){return Y(e)},pt.invalid=function(e){var t=pt.utc(0/0);return null!=e?d(t._pf,e):t._pf.userInvalidated=!0,t},pt.parseZone=function(){return pt.apply(null,arguments).parseZone()},pt.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)},d(pt.fn=c.prototype,{clone:function(){return pt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=pt(this).utc();return 0<e.year()&&e.year()<=9999?H(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?pt.utc(this._a):pt(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){var t=H(this,e||pt.defaultFormat);return this.localeData().postformat(t)},add:p(1,"add"),subtract:p(-1,"subtract"),diff:function(e,t,n){var a=z(e,this),s=6e4*(this.zone()-a.zone()),r,i;return t=Y(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+a.daysInMonth()),i=12*(this.year()-a.year())+(this.month()-a.month()),i+=(this-pt(this).startOf("month")-(a-pt(a).startOf("month")))/r,i-=6e4*(this.zone()-pt(this).startOf("month").zone()-(a.zone()-pt(a).startOf("month").zone()))/r,"year"===t&&(i/=12)):(r=this-a,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-s)/864e5:"week"===t?(r-s)/6048e5:r),n?i:f(i)},from:function(e,t){return pt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(pt(),e)},calendar:function(e){var t=e||pt(),n=z(t,this).startOf("day"),a=this.diff(n,"days",!0),s=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this))},isLeapYear:function(){return W(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=nt(e,this.localeData()),this.add(e-t,"d")):t},month:ht("Month",!0),startOf:function(e){switch(e=Y(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=Y(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+pt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+pt(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+z(e,this).startOf(t)},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=pt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=pt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n=this._offset||0,a;return null==e?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof e&&(e=Z(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(a=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=a&&this.subtract(a,"m"),n!==e&&(!t||this._changeInProgress?g(this,pt.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,pt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?pt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(e){var t=wt((pt(this).startOf("day")-pt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=rt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=rt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=rt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return T(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return T(this.year(),e.dow,e.doy)},get:function(e){return e=Y(e),this[e]()},set:function(e,t){return e=Y(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){return t===e?this._locale._abbr:(this._locale=pt.localeData(t),this)},lang:s("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():(this._locale=pt.localeData(t),this)}),localeData:function(){return this._locale}}),pt.fn.millisecond=pt.fn.milliseconds=ht("Milliseconds",!1),pt.fn.second=pt.fn.seconds=ht("Seconds",!1),pt.fn.minute=pt.fn.minutes=ht("Minutes",!1),pt.fn.hour=pt.fn.hours=ht("Hours",!0),pt.fn.date=ht("Date",!0),pt.fn.dates=s("dates accessor is deprecated. Use date instead.",ht("Date",!0)),pt.fn.year=ht("FullYear",!0),pt.fn.years=s("years accessor is deprecated. Use year instead.",ht("FullYear",!0)),pt.fn.days=pt.fn.day,pt.fn.months=pt.fn.month,pt.fn.weeks=pt.fn.week,pt.fn.isoWeeks=pt.fn.isoWeek,pt.fn.quarters=pt.fn.quarter,pt.fn.toJSON=pt.fn.toISOString,d(pt.duration.fn=l.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,a=this._data,s,r,i,o=0;a.milliseconds=e%1e3,s=f(e/1e3),a.seconds=s%60,r=f(s/60),a.minutes=r%60,i=f(r/60),a.hours=i%24,t+=f(i/24),o=f(ft(t)),t-=f(_t(o)),n+=f(t/30),t%=30,o+=f(n/12),n%=12,a.days=t,a.months=n,a.years=o},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)},humanize:function(e){var t=st(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=pt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=pt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=Y(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=Y(e),t=this._days+this._milliseconds/864e5,"month"===e||"year"===e)return n=this._months+12*ft(t),"month"===e?n:n/12;switch(t+=_t(this._months/12),e){case"week":return t/7;case"day":return t;case"hour":return 24*t;case"minute":return 24*t*60;case"second":return 24*t*60*60;case"millisecond":return 24*t*60*60*1e3;default:throw new Error("Unknown unit "+e)}},lang:pt.fn.lang,locale:pt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(a||s||r?"T":"")+(a?a+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale}});for(Yt in on)on.hasOwnProperty(Yt)&&mt(Yt.toLowerCase());pt.duration.fn.asMilliseconds=function(){return this.as("ms")},pt.duration.fn.asSeconds=function(){return this.as("s")},pt.duration.fn.asMinutes=function(){return this.as("m")},pt.duration.fn.asHours=function(){return this.as("h")},pt.duration.fn.asDays=function(){return this.as("d")},pt.duration.fn.asWeeks=function(){return this.as("weeks")},pt.duration.fn.asMonths=function(){return this.as("M")},pt.duration.fn.asYears=function(){return this.as("y")},pt.locale("en",{ordinal:function(e){var t=e%10,n=1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ut?module.exports=pt:"function"==typeof define&&define.amd?(define("moment",function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(Dt.moment=Mt),pt}),yt(!0)):yt()}).call(this)}).call(this),function(){"undefined"!=typeof Package&&(t=this.moment)}.call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:moment"]={moment:t}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["aldeed:simple-schema"].SimpleSchema,n=Package["aldeed:simple-schema"].MongoObject,i=Package.underscore._,r=Package.tracker.Tracker,a=Package.tracker.Deps,o=Package.check.check,s=Package.check.Match,l=Package.ejson.EJSON,u=Package.mongo.Mongo,u;(function(){function n(t,n,a,s,l){function u(e,n,i,r,a,o){p.clean(e,{filter:i,autoConvert:r,getAutoValues:n,isModifier:"insert"!==t,removeEmptyStrings:a,trimStrings:o,extendAutoValueContext:{isInsert:"insert"===t,isUpdate:"update"===t&&g.upsert!==!0,isUpsert:_,userId:s,isFromTrustedCode:l,docId:("update"===t||"upsert"===t)&&h&&h._id?h._id:void 0,isLocalCollection:y}})}var d=this,p=d._c2._simpleSchema,f,m,v,g,_,h,y=null===d._connection;if(!n.length)throw new Error(t+" requires an argument");if("insert"===t)f=n[0],g=n[1],m=n[2],n="function"==typeof g?[f,g]:"function"==typeof m?[f,m]:[f];else{if("update"!==t&&"upsert"!==t)throw new Error("invalid type argument");h=n[0],f=n[1],g=n[2],m=n[3]}if(m||"function"!=typeof g||(m=g,g={}),g=g||{},_="upsert"===t||"update"===t&&g.upsert===!0,e.isClient&&!m&&(m=function(n){n&&e._debug(t+" failed: "+(n.reason||n.stack))}),e.isClient){var S=n.length-1;"function"==typeof n[S]&&(m=n[S]=c(d,g.validationContext,m))}var C;e.isServer&&f._id&&!p.allowsKey("_id")&&(C=f._id,delete f._id),(e.isServer||y)&&g.getAutoValues===!1&&(a=!0),u(f,(e.isServer||y)&&!a,g.filter!==!1,g.autoConvert!==!1,g.removeEmptyStrings!==!1,g.trimStrings!==!1);var k={};for(var x in f)f.hasOwnProperty(x)&&(k[x]=f[x]);if(e.isServer&&_&&i.isObject(h)){var I=k.$set||{};k.$set=i.clone(h),i.extend(k.$set,I)}e.isClient&&!y&&u(k,!0,!1,!1,!1,!1);var w=p.namedContext(g.validationContext),E;if(E=g.validate===!1?!0:w.validate(k,{modifier:"update"===t||"upsert"===t,upsert:_,extendedCustomContext:{isInsert:"insert"===t,isUpdate:"update"===t&&g.upsert!==!0,isUpsert:_,userId:s,isFromTrustedCode:l,docId:("update"===t||"upsert"===t)&&h&&h._id?h._id:void 0,isLocalCollection:y}})){if(C&&(f._id=C),"insert"===t?n[0]=f:n[1]=f,e.isServer){var S=n.length-1;"function"==typeof n[S]&&(n[S]=o(d,f,g.validationContext,n[S]))}return n}if(v=r(w),!m)throw v;m(v,!1)}function r(t){var n,i=t.invalidKeys();n=i.length?t.keyErrorMessage(i[0].name):"Failed validation";var r=new Error(n);return r.invalidKeys=i,e.isServer&&(r.sanitizedError=new e.Error(400,n)),r}function a(e,t){var n=t.split("c2_")[1].split(" ")[0],i=t.split("dup key:")[1].split('"')[1];e.addInvalidKeys([{name:n,type:"notUnique",value:i}])}function o(e,t,n,i){return function o(t){if(t&&("MongoError"===t.name&&11001===t.code||t.message.indexOf(!0))&&-1!==t.message.indexOf("c2_")){var o=e.simpleSchema().namedContext(n);a(o,t.message),arguments[0]=r(o)}return i.apply(this,arguments)}}function c(t,n,i){return function o(s){var u=t.simpleSchema().namedContext(n);if(s instanceof e.Error&&400===s.error&&"INVALID"===s.reason&&"string"==typeof s.details){var c=l.parse(s.details);u.addInvalidKeys(c),arguments[0]=r(u)}else s instanceof e.Error&&409===s.error&&s.reason&&-1!==s.reason.indexOf("E11000")&&-1!==s.reason.indexOf("c2_")&&(a(u,s.reason),arguments[0]=r(u));return i.apply(this,arguments)}}function d(e){Package&&Package.insecure&&!f[e._name]&&(e.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},fetch:[],transform:null}),f[e._name]=!0)}function p(t,r){if(!m[t._name]){var a=null===t._connection;t.deny({insert:function(n,i){var r=t.simpleSchema(),o;return e.isServer&&i._id&&!r.allowsKey("_id")&&(o=i._id,delete i._id),r.clean(i,{isModifier:!1,filter:!1,autoConvert:!1,removeEmptyStrings:!1,trimStrings:!1,extendAutoValueContext:{isInsert:!0,isUpdate:!1,isUpsert:!1,userId:n,isFromTrustedCode:!1,isLocalCollection:a}}),o&&(i._id=o),!1},update:function(e,n,i,r){var o=t.simpleSchema();return o.clean(r,{isModifier:!0,filter:!1,autoConvert:!1,removeEmptyStrings:!1,trimStrings:!1,extendAutoValueContext:{isInsert:!1,isUpdate:!0,isUpsert:!1,userId:e,isFromTrustedCode:!1,docId:n&&n._id,isLocalCollection:a}}),!1},fetch:["_id"],transform:null}),t.deny(i.extend({insert:function(i,r){return n.call(t,"insert",[r,{trimStrings:!1,removeEmptyStrings:!1,filter:!1,autoConvert:!1},function(t){if(t)throw new e.Error(400,"INVALID",l.stringify(t.invalidKeys))}],!0,i,!1),!1},update:function(i,r,a,o){return n.call(t,"update",[{_id:r&&r._id},o,{trimStrings:!1,removeEmptyStrings:!1,filter:!1,autoConvert:!1},function(t){if(t)throw new e.Error(400,"INVALID",l.stringify(t.invalidKeys))}],!0,i,!1),!1},fetch:["_id"]},r.transform===!0?{}:{transform:null})),m[t._name]=!0}}t.extendOptions({index:s.Optional(s.OneOf(Number,String,Boolean)),unique:s.Optional(Boolean),denyInsert:s.Optional(Boolean),denyUpdate:s.Optional(Boolean)}),t.messages({notUnique:"[label] must be unique",insertNotAllowed:"[label] cannot be set during an insert",updateNotAllowed:"[label] cannot be set during an update"}),"undefined"==typeof u&&(u={},u.Collection=e.Collection),u.Collection.prototype.attachSchema=function v(n,r){var a=this;r=r||{},n instanceof t||(n=new t(n)),a._c2=a._c2||{},a._c2._simpleSchema&&r.replace!==!0&&(n=new t([a._c2._simpleSchema,n])),a._c2._simpleSchema=n,i.each(n.schema(),function(t,n){function i(){var e={},i;"index"in t?(i=t.index,i===!0&&(i=1)):i=1;var r="c2_"+n,o=n.replace(/\.\$\./g,".");e[o]=i;var s=!!t.unique&&(1===i||-1===i),l=!!t.optional&&s;if(i!==!1)a._collection._ensureIndex(e,{background:!0,name:r,unique:s,sparse:l});else try{a._collection._dropIndex(r)}catch(u){}}e.isServer&&("index"in t||t.unique===!0)&&e.startup(i)}),n.validator(function(){var e,t,n,i,r=this.definition,a=this.value,o=this.operator,s=this.key;return r.denyInsert&&void 0!==a&&!o?"insertNotAllowed":r.denyUpdate&&o&&("$set"!==o||"$set"===o&&void 0!==a)?"updateNotAllowed":!0}),p(a,r),d(a)},u.Collection.prototype.simpleSchema=function g(){var e=this;return e._c2?e._c2._simpleSchema:null},i.each(["insert","update","upsert"],function(t){var r=u.Collection.prototype[t];u.Collection.prototype[t]=function(){var a=this,o=i.toArray(arguments);return a._c2&&(o=n.call(a,t,o,!1,e.isClient&&e.userId&&e.userId()||null,e.isServer),!o)?"insert"===t?a._makeNewID():void 0:r.apply(a,o)}});var f={},m={}}).call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:collection2"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package["aldeed:simple-schema"].SimpleSchema,a=Package["aldeed:simple-schema"].MongoObject,n=Package.check.check,r=Package.check.Match,o=Package.ddp.DDP,u=Package.underscore._,i=Package.tracker.Tracker,c=Package.tracker.Deps,s=Package.templating.Template,l=Package.blaze.Blaze,p=Package.blaze.UI,f=Package.blaze.Handlebars,m=Package["mrt:moment"].moment,d=Package.htmljs.HTML,b,h,S,k,v,y,T,I,g,_,A,F,w,x,C,N,D,M,U,L,V,E,O,P,B,G,R,z,j,W,q,H,Q,K,Y;(function(){e.extendOptions({autoform:r.Optional(Object)})}).call(this),function(){h={cleanNulls:function n(e,a,r){var o=a?[]:{};return u.each(e,function(e,a){!u.isArray(e)&&t(e)?(e=n(e,!1,r),u.isEmpty(e)||(o[a]=e)):u.isArray(e)?(e=n(e,!0,r),u.isEmpty(e)||(o[a]=e)):h.isNullUndefinedOrEmptyString(e)?r&&"string"==typeof e&&0===e.length&&(o[a]=e):o[a]=e}),o},reportNulls:function r(t,e){var a={};return u.each(t,function(t,n){null===t?a[n]="":void 0===t?a[n]="":e||"string"!=typeof t||0!==t.length?u.isArray(t)&&0===h.cleanNulls(t,!0,e).length&&(a[n]=""):a[n]=""}),a},docToModifier:function o(t,e){var n={},r=new a(t),o=r.getFlatObject({keepArrays:!0});r=null;var i=h.reportNulls(o,e);return o=h.cleanNulls(o,!1,e),u.isEmpty(o)||(n.$set=o),u.isEmpty(i)||(n.$unset=i),n},getSelectValues:function i(t){for(var e=[],a=t&&t.options||[],n,r=0,o=a.length;o>r;r++)n=a[r],n.selected&&e.push(n.value||n.text);return e},lookup:function c(t){var e=window,a;if("string"==typeof t){for(a=t.split(".");a.length&&(e=e[a.shift()]););if(!e)throw new Error(t+" is not in the window scope");return e}return t},getDefs:function s(t,e){if("string"!=typeof e)throw new Error("Invalid field name: (not a string)");var a=t.schema(e);if(!a)throw new Error("Invalid field name: "+e);return a},objAffectsKey:function l(t,e){var n=new a(t);return n.affectsKey(e)},expandObj:function p(t){var e={},a,n,r,o,i;return u.each(t,function(t,c){a=c.split("."),r=a.length,i=e;for(var s=0;r>s&&(n=a[s],"undefined"==typeof i[n]||u.isObject(i[n]));s++)s===r-1?i[n]=t:(o=a[s+1],o=parseInt(o,10),isNaN(o)&&!u.isObject(i[n])?i[n]={}:isNaN(o)||u.isArray(i[n])||(i[n]=[])),i=i[n]}),e},compactArrays:function f(t){u.isObject(t)&&u.each(t,function(e,a){u.isArray(e)?(t[a]=u.without(e,void 0,null),u.each(t[a],function(t){f(t)})):e instanceof Date||!u.isObject(e)||f(e)})},bubbleEmpty:function d(e,a){u.isObject(e)&&u.each(e,function(n,r){if(u.isArray(n))u.each(n,function(t){d(t)});else if(t(n)){var o=u.all(n,function(t){return void 0===t||null===t||!a&&"string"==typeof t&&0===t.length});u.isEmpty(n)||o?e[r]=null:d(n)}})},getSimpleSchemaFromContext:function S(t,a){var n=h.lookup(t.schema);if(n){if(n instanceof e)return n;throw new Error('AutoForm: schema attribute for form with id "'+a+'" is not a SimpleSchema instance')}var r=h.lookup(t.collection);if(r){if("function"==typeof r.simpleSchema)return r.simpleSchema();throw new Error('AutoForm: collection attribute for form with id "'+a+'" refers to a collection that does not have a schema, or is not a collection. You might have forgotten to attach a schema to the collection or you might need to add the collection2 package to your app.')}throw new Error('AutoForm: form with id "'+a+'" needs either "schema" or "collection" attribute')},isNullUndefinedOrEmptyString:function k(t){return void 0===t||null===t||"string"==typeof t&&0===t.length},isValidDateString:function v(t){var e=m(t,"YYYY-MM-DD",!0);return e&&e.isValid()},isValidTimeString:function y(t){if("string"!=typeof t)return!1;var e=/^[0-2][0-9]:[0-5][0-9](:[0-5][0-9](\.[0-9]{1,3})?)?$/;return e.test(t)},dateToDateString:function T(t){var e=t.getMonth()+1;10>e&&(e="0"+e);var a=t.getDate();return 10>a&&(a="0"+a),t.getFullYear()+"-"+e+"-"+a},dateToDateStringUTC:function I(t){var e=t.getUTCMonth()+1;10>e&&(e="0"+e);var a=t.getUTCDate();return 10>a&&(a="0"+a),t.getUTCFullYear()+"-"+e+"-"+a},dateToNormalizedForcedUtcGlobalDateAndTimeString:function g(t){return m(t).utc().format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},isValidNormalizedForcedUtcGlobalDateAndTimeString:function _(t){if("string"!=typeof t)return!1;var e=t.substring(0,10),a=t.substring(10,11),n=t.substring(11,t.length-1),r=t.substring(t.length-1);return h.isValidDateString(e)&&"T"===a&&h.isValidTimeString(n)&&"Z"===r},dateToNormalizedLocalDateAndTimeString:function A(t,e){var a=m(t);if("string"==typeof e){if("function"!=typeof a.tz)throw new Error("If you specify a timezoneId, make sure that you've added a moment-timezone package to your app");a.tz(e)}return a.format("YYYY-MM-DD[T]HH:mm:ss.SSS")},isValidNormalizedLocalDateAndTimeString:function F(t){if("string"!=typeof t)return!1;var e=t.substring(0,10),a=t.substring(10,11),n=t.substring(11,t.length);return h.isValidDateString(e)&&"T"===a&&h.isValidTimeString(n)},normalizeContext:function w(t,e){var a,n,r,o,i,c,s,l;return t=t||{},a=u.clone(t.atts?t.atts:t),n=b.find(e),r=h.getDefs(n.ss,a.name),r.type===Array?(o=h.getDefs(n.ss,a.name+".$"),i=o.allowedValues):i=r.allowedValues,c=b.findAttributesWithPrefix(e+"-"),s=u.clone(r.autoform)||{},l=s[e]||{},s=u.omit(s,D),s=u.extend({},s,l),s.options&&"auto"===a.options&&delete a.options,a=u.extend({},c,s,a),"auto"===a.options&&(i?a.options="allowed":delete a.options),{af:n,atts:a,defs:r}},stringToArray:function x(t,e){if("string"==typeof t)return t.replace(/ /g,"").split(",");if(u.isArray(t))return t;throw new Error(e)},stringToBool:function C(t){if("string"==typeof t&&t.length>0){var e=t.toLowerCase();if("true"===e||"1"===e)return!0;if("false"===e||"0"===e)return!1}return t},stringToNumber:function N(t){if("string"==typeof t&&t.length>0){var e=Number(t);if(!isNaN(e))return e}return t},stringToDate:function M(t){return"string"==typeof t&&t.length>0?new Date(t):t},addClass:function U(t,e){return"string"==typeof t["class"]?t["class"]+=" "+e:t["class"]=e,t}},"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype});var t=function(t){return u.isObject(t)&&Object.getPrototypeOf(t)===Object.prototype}}.call(this),function(){S=function t(e){var a=this;if(!u.isString(e))throw Error("You must define an unique migration name of type String");if(a.registeredForms={},a.retrievedDocuments={},Package.reload){var n=Package.reload.Reload;a.retrievedDocuments=n._migrationData(e)||{},n._onMigrate(e,function(){return[!0,a._retrieveRegisteredDocuments()]})}},S.prototype.getDocument=function(t){var e=this;return u.has(e.retrievedDocuments,t)?e.retrievedDocuments[t]:!1},S.prototype.registerForm=function(t,e){this.registeredForms[t]=e},S.prototype.unregisterForm=function(t){delete this.registeredForms[t],delete this.retrievedDocuments[t]},S.prototype.unregisterAllForms=function(){var t=this;t.registeredForms={},t.retrievedDocuments={}},S.prototype._retrieveRegisteredDocuments=function(){var t=this;return k={},u.each(t.registeredForms,function(t,e){k[e]=t()}),k}}.call(this),function(){v={form:{},global:{before:{},after:{},formToDoc:[],docToForm:[],onSubmit:[],onSuccess:[],onError:[],beginSubmit:[],endSubmit:[]}},v.addHooksToList=function t(e,a,n){a.before&&u.each(a.before,function r(t,a){if("function"!=typeof t)throw new Error("AutoForm before hook must be a function, not "+typeof t);e.before[a]=!n&&e.before[a]?e.before[a]:[],e.before[a].push(t)}),a.after&&u.each(a.after,function o(t,a){if("function"!=typeof t)throw new Error("AutoForm after hook must be a function, not "+typeof t);e.after[a]=!n&&e.after[a]?e.after[a]:[],e.after[a].push(t)}),u.each(["formToDoc","docToForm","onSubmit","onSuccess","onError","beginSubmit","endSubmit"],function i(t){if(a[t]){if("function"!=typeof a[t])throw new Error("AutoForm "+t+" hook must be a function, not "+typeof a[t]);n&&(e[t]=[]),e[t].push(a[t])}})},v.getHooks=function e(t,a,n){var r,o;return n?(r=v.form[t]&&v.form[t][a]&&v.form[t][a][n]||[],o=v.global[a]&&v.global[a][n]||[]):(r=v.form[t]&&v.form[t][a]||[],o=v.global[a]||[]),r.concat(o)}}.call(this),function(){y=function t(){var t=this;t.forms={}},y.prototype.initForm=function e(t){var e=this;e.forms[t]||(e.forms[t]={sourceDoc:null,deps:{sourceDoc:new c.Dependency}})},y.prototype.sourceDoc=function a(t,e){var a=this;return a.initForm(t),e?(a.forms[t].sourceDoc=e,void a.forms[t].deps.sourceDoc.changed()):(a.forms[t].deps.sourceDoc.depend(),a.forms[t].sourceDoc)},y.prototype.getDocCountForField=function n(t,e){var a=this,n=a.sourceDoc(t),r;if(n){var o=n.getInfoForKey(e);o&&u.isArray(o.value)&&(r=o.value.length)}return r}}.call(this),function(){T=function a(){var t=this;t.info={}},T.prototype.getMinMax=function n(t,e,a,r){var o=b.Utility.getDefs(t,e);a=a||0;var u=o.minCount||0;u=Math.max(a,u),r=r||1/0;var i=o.maxCount||1/0;return i=Math.min(r,i),{minCount:u,maxCount:i}},T.prototype.initForm=function r(t){var e=this;e.info[t]||(e.info[t]={})},T.prototype.getForm=function o(t){var e=this;return e.initForm(t),e.info[t]},T.prototype.ensureField=function i(t,e){var a=this;a.initForm(t),a.info[t][e]||a.resetField(t,e)},T.prototype.initField=function s(a,n,r,o,u,i){var c=this;if(c.ensureField(a,n),null==c.info[a][n].array){var s=c.getMinMax(r,n,u,i),l=Math.max(s.minCount,null==o?1:o),p=[];r.schema(n+".$").type===Object&&(p=r.objectKeys(e._makeGeneric(n)+".$"));for(var f=[],m=0;l>m;m++){var d=t(a,n,m,p,u,i);f.push(d)}c.info[a][n].array=f;var b=f.length;c.info[a][n].count=b,c.info[a][n].visibleCount=b,c.info[a][n].deps.changed()}},T.prototype.resetField=function l(t,e){var a=this;a.initForm(t),a.info[t][e]||(a.info[t][e]={deps:new c.Dependency}),a.info[t][e].array=null,a.info[t][e].count=0,a.info[t][e].visibleCount=0,a.info[t][e].deps.changed()},T.prototype.resetForm=function p(t){var e=this;u.each(e.info[t],function(a,n){e.resetField(t,n)})},T.prototype.untrackForm=function f(t){var e=this;e.info[t]={}},T.prototype.tracksField=function m(t,e){var a=this;return a.ensureField(t,e),a.info[t][e].deps.depend(),!!a.info[t][e].array},T.prototype.getField=function d(t,e){var a=this;return a.ensureField(t,e),a.info[t][e].deps.depend(),a.info[t][e].array},T.prototype.getCount=function h(t,e){var a=this;return a.ensureField(t,e),a.info[t][e].deps.depend(),a.info[t][e].count},T.prototype.getVisibleCount=function S(t,e){var a=this;return a.ensureField(t,e),a.info[t][e].deps.depend(),a.info[t][e].visibleCount},T.prototype.isFirstFieldlVisible=function k(t,e,a){var n=this;n.ensureField(t,e),n.info[t][e].deps.depend();var r=u.find(n.info[t][e].array,function(t){return!t.removed});return r&&r.index===a},T.prototype.isLastFieldlVisible=function v(t,e,a){var n=this;n.ensureField(t,e),n.info[t][e].deps.depend();var r=u.last(u.filter(n.info[t][e].array,function(t){return!t.removed}));return r&&r.index===a},T.prototype.addOneToField=function y(a,n,r,o,u){var i=this;if(i.ensureField(a,n),i.info[a][n].array){var c=i.info[a][n].visibleCount,s=i.getMinMax(r,n,o,u).maxCount;if(s>c){var l=i.info[a][n].array.length,p=[];r.schema(n+".$").type===Object&&(p=r.objectKeys(e._makeGeneric(n)+".$"));var f=t(a,n,l,p,o,u);i.info[a][n].array.push(f),i.info[a][n].count++,i.info[a][n].visibleCount++,i.info[a][n].deps.changed()}}},T.prototype.removeFromFieldAtIndex=function I(t,e,a,n,r,o){var u=this;if(u.ensureField(t,e),u.info[t][e].array){var i=u.info[t][e].visibleCount,c=u.getMinMax(n,e,r,o).minCount;i>c&&(u.info[t][e].array[a].removed=!0,u.info[t][e].count--,u.info[t][e].visibleCount--,u.info[t][e].deps.changed())}};var t=function(t,e,a,n,r,o){var i={formId:t,arrayFieldName:e,name:e+"."+a,index:a,minCount:r,maxCount:o};return n.length&&(i.current={},u.each(n,function(t){i.current[t]=e+"."+a+"."+t})),i}}.call(this),function(){I="_afGenericID",g=new S("autoforms"),_={},A={},F={},w={},x={},C=new y,N=new T,D=["afArrayField","afEachArrayItem","afFieldInput","afFormGroup","afObjectField","afQuickField","afQuickFields","autoForm","quickForm"],M="bootstrap3",U={},L={defaultTemplate:new c.Dependency,defaultTypeTemplates:{}}}.call(this),function(){function t(t,e){var a=(t||{}).hash||{},n=b.find(e);return a.name&&b.Utility.getDefs(n.ss,a.name),u.extend({},n,a)}var a=s.registerHelper;"function"!=typeof a&&(a=p.registerHelper),a("afFieldMessage",function n(e){return e=t(e,"afFieldMessage"),e.ss.namedContext(e.formId).keyErrorMessage(e.name)}),a("afFieldIsInvalid",function r(e){return e=t(e,"afFieldIsInvalid"),e.ss.namedContext(e.formId).keyIsInvalid(e.name)}),a("afArrayFieldHasMoreThanMinimum",function o(e){e=t(e,"afArrayFieldHasMoreThanMinimum");var a=N.getMinMax(e.ss,e.name,e.minCount,e.maxCount),n=N.getVisibleCount(e.formId,e.name);return n>a.minCount}),a("afArrayFieldHasLessThanMaximum",function i(e){e=t(e,"afArrayFieldHasLessThanMaximum");var a=N.getMinMax(e.ss,e.name,e.minCount,e.maxCount),n=N.getVisibleCount(e.formId,e.name);return n<a.maxCount}),a("afFieldValueIs",function c(e){e=t(e,"afFieldValueIs");var a=b.getFieldValue(e.formId,e.name);return a===e.value}),a("afArrayFieldIsFirstVisible",function l(){var t=this;return N.isFirstFieldlVisible(t.formId,t.arrayFieldName,t.index)}),a("afArrayFieldIsLastVisible",function f(){var t=this;return N.isLastFieldlVisible(t.formId,t.arrayFieldName,t.index)}),a("afFieldValueContains",function m(e){e=t(e,"afFieldValueContains");var a=b.getFieldValue(e.formId,e.name);return u.isArray(a)&&u.contains(a,e.value)}),a("afFieldLabelText",function d(a){if(a=t(a,"afFieldLabelText"),"$"===e._makeGeneric(a.name).slice(-1)){var n=a.ss.label(a.name);return isNaN(parseInt(n,10))?n:null}return a.ss.label(a.name)}),a("afFieldNames",function h(a){a=t(a,"afFieldNames");var n=a.ss,r=a.name,o,i,c;r&&(o=r+".",i=e._makeGeneric(r),c=i+".");var s=b.findAttribute("fields");s&&(s=b.Utility.stringToArray(s,"AutoForm: fields attribute must be an array or a string containing a comma-delimited list of fields"),r?(i!==r&&(s=u.map(s,function(t){return 0===t.indexOf(c)?o+t.slice(c.length):t})),s=u.filter(s,function p(t){return 0===t.indexOf(o)})):s=u.filter(s,function f(t){return".$"!==t.slice(-2)&&-1===t.indexOf(".$.")}),s=u.reject(s,function(t){var e=t.lastIndexOf(".");if(-1===e)return!1;var a=t.slice(0,e);return".$"===a.slice(-2)&&(a=a.slice(0,-2)),u.contains(s,a)&&a!==r&&a!==i})),s&&0!==s.length||(s=n.objectKeys(i),r&&(s=u.map(s,function(t){return r+"."+t})));var l=b.findAttribute("omitFields");return l&&(l=b.Utility.stringToArray(l,"AutoForm: omitFields attribute must be an array or a string containing a comma-delimited list of fields"),s=u.difference(s,l),s=u.reject(s,function(t){return u.contains(l,e._makeGeneric(t))})),s=u.filter(s,function m(t){var e=n.schema(t);return e.autoform&&e.autoform.omit===!0?!1:e.denyInsert&&"insert"===a.submitType?!1:e.denyUpdate&&"update"===a.submitType?!1:!0}),s=u.unique(s)}),a("afTemplateName",function S(t,e){var a=this,n,r,o,u,n=t+"_"+e;return s[n]?n:(e&&b._debug&&console.warn(t+': "'+e+'" is not a valid template name. Falling back to a different template.'),"quickForm"!==t&&a.atts&&a.atts.name&&(r=b.getSchemaForField(a.atts.name).autoform),r&&r[t]&&r[t].template&&s[t+"_"+r[t].template]?t+"_"+r[t].template:r&&r.template&&s[t+"_"+r.template]?t+"_"+r.template:(o=b.findAttribute("template-"+t),o&&s[t+"_"+o]?t+"_"+o:(o=b.findAttribute("template"),o&&s[t+"_"+o]?t+"_"+o:(u=b.getDefaultTemplateForType(t),u&&s[t+"_"+u]?t+"_"+u:(u=b.getDefaultTemplate(),u&&s[t+"_"+u]?t+"_"+u:"bootstrap3")))))})}.call(this),function(){var e=!1;V=function a(){e=!0,t.setTimeout(function(){e=!1},500)},E=function n(e,a,r,o,i,c){var s={userId:t.userId&&t.userId()||null,isInsert:!a,isUpdate:!!a,isUpsert:!1,isFromTrustedCode:!1,docId:i},l=o.clean(u.clone(e),{isModifier:a,filter:!1,autoConvert:!1,trimStrings:!1,extendAutoValueContext:s});return c?o.namedContext(r).validateOne(l,c,{modifier:a,extendedCustomContext:s}):o.namedContext(r).validate(l,{modifier:a,extendedCustomContext:s})},O=function r(t,e,a,n){var r,o,u;return"none"===e.validationType?!0:(r=n&&e.collection?e.collection.simpleSchema():e.ss,o=e.doc&&e.doc._id||null,u="update"===e.submitType?E(a.updateDoc,!0,t,r,o):E(a.insertDoc,!1,t,r,o),u||G(t,r),u)},P=function o(t,a,n,r){if(a&&a.view._domrange&&!e){var o=a.data,u=o.id||I,i=_[u],c=i.doc&&i.doc._id||null,s=i.ss;if(!r||!s.namedContext(u).isValid()){var l=j(a,u,s);if("update"===i.submitType)var p=l.updateDoc,f=!0;else var p=l.insertDoc,f=!1;return n&&!b.Utility.objAffectsKey(p,t)?!0:E(p,f,u,s,c,t)}}},B=u.throttle(P,300),G=function i(t,e){var a=e.namedContext(t),n,r;a.isValid()||(n=A[t],r=K(n),r.each(function(){var t=$(this);return a.keyIsInvalid(t.attr("data-schema-key"))?(t.focus(),!1):void 0}))}}.call(this),function(){function t(t,e){var a={};return t.each(function n(){var t,n=b.getInputValue(this,e);void 0!==n&&(t=$(this).attr("data-schema-key"),a[t]=n)}),a}R=function e(t){var e=!1,a,n;if(t=b.Utility.normalizeContext(t,"afFieldInput").atts,t.type)return t.type;a=b.getSchemaForField(t.name),n=a.type,n===Array&&(e=!0,a=b.getSchemaForField(t.name+".$"),n=a.type);var r="text";return t.options?r=t.noselect?e?"select-checkbox":"select-radio":e?"select-multiple":"select":n===String&&t.rows?r="textarea":n===Number?r="number":n===Date?r="date":n===Boolean&&(r="boolean-checkbox"),r},z=function a(e,n){var r=_[e.data.id],o=t(K(e).filter('[data-schema-key="'+n+'"], [data-schema-key^="'+n+'."]'),r.ss);return o&&o[n]},j=function n(e,a,r){var o=_[a],i=!1;o.removeEmptyStrings===!1&&(i=!0);var c=!0;o.filter===!1&&(c=!1);var s=!0;o.autoConvert===!1&&(s=!1);var l=!0;o.trimStrings===!1&&(l=!1);var p=t(K(e),r);p=b.Utility.expandObj(p),b.Utility.compactArrays(p),b.Utility.bubbleEmpty(p,i);var f={template:e,formId:a},m=v.getHooks(a,"formToDoc");u.each(m,function h(t){p=t.call(f,p,r,a)});var d={insertDoc:r.clean(b.Utility.cleanNulls(p,!1,i),{isModifier:!1,getAutoValues:!1,filter:c,autoConvert:s,trimStrings:l}),updateDoc:r.clean(b.Utility.docToModifier(p,i),{isModifier:!0,getAutoValues:!1,filter:c,autoConvert:s,trimStrings:l})};return d},W=function r(t,e,a,n,o){if("undefined"==typeof e)if(a){var i=a.getInfoForKey(t.name);i&&(e=i.value)}else e=n;return e=null==e?"":e,o.valueIsArray&&!u.isArray(e)&&(e="string"==typeof e?e.split(","):[e]),"function"==typeof o.valueIn&&(e=o.valueIn(e,t)),e},q=function o(t,e,a,n,r){var o=t.type,i=u.omit(e,"autoform","type","value","noselect","options","template");"undefined"!=typeof i.required||t.optional||(i.required=""),"disabled"===r?i.disabled="":"readonly"===r&&(i.readonly=""),i["data-schema-key"]=i.name,"schemaLabel"===e.placeholder&&(i.placeholder=n),u.each(["disabled","readonly","checked","required","autofocus"],function(t){u.has(e,t)&&(e[t]===!0||"true"===e[t]||""===e[t]?i[t]="":delete i[t])});var c=e.options;return"allowed"===c?c=u.map(t.allowedValues,function(t){var a=t;return e.capitalize&&t.length>0&&o===String&&(a=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()),{label:a,value:t}}):"function"==typeof c&&(c=c()),{name:i.name,schemaType:o,min:"function"==typeof t.min?t.min():t.min,max:"function"==typeof t.max?t.max():t.max,decimal:t.decimal,value:a,atts:i,selectOptions:c}},H=function i(t,e){F[t]=F[t]||{},F[t][e]=F[t][e]||new c.Dependency,F[t][e].changed()},Q=function s(t){u.each(F[t],function(e,a){H(t,a)})},K=function l(t){return t.$("[data-schema-key]").not("[disabled]")}}.call(this),function(){b=b||{},b.formPreserve=g,b.Utility=h,b.addHooks=function t(e,a,n){"string"==typeof e&&(e=[e]),e?u.each(e,function(t){v.form[t]=v.form[t]||{before:{},after:{},formToDoc:[],docToForm:[],onSubmit:[],onSuccess:[],onError:[],beginSubmit:[],endSubmit:[]},v.addHooksToList(v.form[t],a,n)}):v.addHooksToList(v.global,a,n)},b.hooks=function a(t,e){u.each(t,function(t,a){b.addHooks(a,t,e)})},b.resetForm=function n(t,e){e=e||A[t],e&&e.view._domrange&&e.$("form")[0].reset()},b.setDefaultTemplate=function r(t){M=t,L.defaultTemplate.changed()},b.getDefaultTemplate=function o(){return L.defaultTemplate.depend(),M},b.setDefaultTemplateForType=function i(t,e){if(L.defaultTypeTemplates[t]||(L.defaultTypeTemplates[t]=new c.Dependency),null!==e&&!s[t+"_"+e])throw new Error("setDefaultTemplateForType can't set default template to \""+e+'" for type "'+t+'" because there is no defined template with the name "'+t+"_"+e+'"');U[t]=e,L.defaultTypeTemplates[t].changed()},b.getDefaultTemplateForType=function p(t){return L.defaultTypeTemplates[t]||(L.defaultTypeTemplates[t]=new c.Dependency),L.defaultTypeTemplates[t].depend(),U[t]},b.getFormValues=function f(t){var e=A[t];if(!e||!e.view._domrange)throw new Error("getFormValues: There is currently no autoForm template rendered for the form with id "+t);var a=e.data,n=b.Utility.getSimpleSchemaFromContext(a,t);return j(e,t,n)},b.getFieldValue=function m(t,e){F[t]=F[t]||{},F[t][e]=F[t][e]||new c.Dependency,F[t][e].depend();var a=A[t];if(a&&a.view._domrange){var n=_[t],r=n.ss,o=a.$('[data-schema-key="'+e+'"]')[0];return b.getInputValue(o,r)}},b.getInputValue=function d(t,e){var a,n,r,o,i,c,s,p;if(p=l.getData(t),a=$(t),n=a.attr("data-schema-key"),e&&(r=e.schema(n).type),s=l.getView(t).name.slice(9),s=s.split("_")[0],c=u.where(x,{template:s})[0],i=void 0!==a.attr("data-null-value")?null:c&&c.valueOut?c.valueOut.call(a):a.val(),void 0!==i&&p.atts.autoConvert!==!1&&c&&c.valueConverters&&r){var f;r===String?f=c.valueConverters.string:r===Number?f=c.valueConverters.number:r===Boolean?f=c.valueConverters["boolean"]:r===Date?f=c.valueConverters.date:r===Array&&(o=e.schema(n+".$").type,o===String?f=c.valueConverters.stringArray:o===Number?f=c.valueConverters.numberArray:o===Boolean?f=c.valueConverters.booleanArray:o===Date&&(f=c.valueConverters.dateArray)),"function"==typeof f&&(i=f.call(a,i))}return i},b.addInputType=function S(t,e){var a={};a[t]=e,u.extend(x,a)},b.validateField=function k(t,e,a){var n=A[t];if(!n||!n.view._domrange)throw new Error("validateField: There is currently no autoForm template rendered for the form with id "+t);return P(e,n,a,!1)},b.validateForm=function y(t){var e=b.getFormValues(t);return O(t,_[t],e)},b.getValidationContext=function T(t){var e=_[t],a=e.ss;return a.namedContext(t)},b.find=function I(t){var e=0,a;do a=s.parentData(e++);while(a&&!a._af);if(!a||!a._af)throw new Error((t||"AutoForm.find")+" must be used within an autoForm block");return a._af},b.findAttribute=function C(t){var e=0,a,n,r=-1;do a=s.parentData(e++),a&&a.atts&&void 0!==a.atts[t]?n=a.atts[t]:a&&void 0!==a[t]&&(n=a[t]),a&&a._af&&(r=e+1);while(a&&e>r&&void 0===n);return n},b.findAttributesWithPrefix=function D(t){var e=0,a,n,r,o=-1,i={};do a=s.parentData(e++),a&&(r=a.atts?a.atts:a,u.isObject(r)&&u.each(r,function(e,a){0===a.indexOf(t)&&(i[a.slice(t.length)]=e)}),a._af&&(o=e+1));while(a&&e>o);return i},b.debug=function V(){e.debug=!0,b._debug=!0,b.addHooks(null,{onError:function(t,e,a){console.log("Error in "+this.formId,t,e)}})},b.arrayTracker=N,b.getInputType=R,b.getSchemaForField=function E(t,e){var a;return e&&(a=e.ss),a||(a=b.find().ss),b.Utility.getDefs(a,t)},b.invalidateFormContext=function B(t){w[t]=w[t]||new c.Dependency,w[t].changed()}}.call(this),function(){s.__checkName("afCheckbox"),s.afCheckbox=new s("Template.afCheckbox",function(){var t=this;return d.DIV(d.LABEL(d.INPUT(d.Attrs({type:"checkbox",value:"true"},function(){return Spacebars.attrMustache(t.lookup("atts"))}))," ",l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"name")}))})))})}.call(this),function(){b.addInputType("boolean-checkbox",{template:"afCheckbox",valueOut:function(){return this.is(":checked")},valueConverters:{string:function(t){return t===!0?"TRUE":t===!1?"FALSE":t},stringArray:function(t){return t===!0?["TRUE"]:t===!1?["FALSE"]:t},number:function(t){return t===!0?1:t===!1?0:t},numberArray:function(t){return t===!0?[1]:t===!1?[0]:t}},contextAdjust:function(t){return t.value===!0&&(t.atts.checked=""),delete t.atts.required,t}})}.call(this),function(){s.__checkName("afBooleanRadioGroup"),s.afBooleanRadioGroup=new s("Template.afBooleanRadioGroup",function(){var t=this;return[d.DIV("\n    ",d.LABEL(d.INPUT(d.Attrs({type:"radio",value:"false",name:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"name"))}},function(){return Spacebars.attrMustache(t.lookup("falseAtts"))}))," ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"atts","falseLabel"))},function(){return l.View(function(){return Spacebars.mustache(t.lookup("."))})},function(){return"False"})),"\n  "),"\n  ",d.DIV("\n    ",d.LABEL(d.INPUT(d.Attrs({type:"radio",value:"true",name:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"name"))}},function(){return Spacebars.attrMustache(t.lookup("trueAtts"))}))," ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"atts","trueLabel"))},function(){return l.View(function(){return Spacebars.mustache(t.lookup("."))})},function(){return"True"})),"\n  ")]})}.call(this),function(){b.addInputType("boolean-radios",{template:"afBooleanRadioGroup",valueOut:function(){var t=this.val();if(this.is(":checked")){if("true"===t)return!0;if("false"===t)return!1}},valueConverters:{string:function(t){return t===!0?"TRUE":t===!1?"FALSE":t},stringArray:function(t){return t===!0?["TRUE"]:t===!1?["FALSE"]:t},number:function(t){return t===!0?1:t===!1?0:t},numberArray:function(t){return t===!0?[1]:t===!1?[0]:t}}}),s.afBooleanRadioGroup.helpers({falseAtts:function t(){var t=u.omit(this.atts,"trueLabel","falseLabel");return this.value===!1&&(t.checked=""),t},trueAtts:function e(){var t=u.omit(this.atts,"trueLabel","falseLabel");return this.value===!0&&(t.checked=""),t}})}.call(this),function(){s.__checkName("afBooleanSelect"),s.afBooleanSelect=new s("Template.afBooleanSelect",function(){var t=this;return d.SELECT(d.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n    ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n    "]}),"\n  ")})}.call(this),function(){b.addInputType("boolean-select",{template:"afBooleanSelect",valueOut:function(){var t=this.val();return"true"===t?!0:"false"===t?!1:void 0},valueConverters:{string:function(t){return t===!0?"TRUE":t===!1?"FALSE":t},stringArray:function(t){return t===!0?["TRUE"]:t===!1?["FALSE"]:t},number:function(t){return t===!0?1:t===!1?0:t},numberArray:function(t){return t===!0?[1]:t===!1?[0]:t}},contextAdjust:function(t){var e=u.omit(t.atts,"trueLabel","falseLabel","firstOption");return t.items=[{name:t.name,value:"",_id:"",selected:t.value!==!1&&t.value!==!0,label:t.atts.firstOption||"(Select One)",atts:e},{name:t.name,value:"false",_id:"false",selected:t.value===!1,label:t.atts.falseLabel||"False",atts:e},{name:t.name,value:"true",_id:"true",selected:t.value===!0,label:t.atts.trueLabel||"True",atts:e}],t}}),s.afBooleanSelect.helpers({optionAtts:function t(){var t=this,e={value:t.value};return t.selected&&(e.selected=""),e}})}.call(this),function(){s.__checkName("afInputButton"),s.afInputButton=new s("Template.afInputButton",function(){var t=this;return d.INPUT(d.Attrs({type:"button",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("button",{template:"afInputButton"})}.call(this),function(){s.__checkName("afInputColor"),s.afInputColor=new s("Template.afInputColor",function(){var t=this;return d.INPUT(d.Attrs({type:"color",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("color",{template:"afInputColor"})}.call(this),function(){s.__checkName("afContenteditable"),s.afContenteditable=new s("Template.afContenteditable",function(){var t=this;return d.DIV(d.Attrs({contenteditable:"true"},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}),l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(Spacebars.dot(t.lookup("."),"value")))}))})}.call(this),function(){b.addInputType("contenteditable",{template:"afContenteditable",valueOut:function(){return this.html()},contextAdjust:function(t){return"undefined"==typeof t.atts["data-maxlength"]&&"number"==typeof t.max&&(t.atts["data-maxlength"]=t.max),t}})}.call(this),function(){s.__checkName("afInputDate"),s.afInputDate=new s("Template.afInputDate",function(){var t=this;return d.INPUT(d.Attrs({type:"date",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("date",{template:"afInputDate",valueIn:function(t){return t instanceof Date?b.Utility.dateToDateStringUTC(t):t},valueOut:function(){var t=this.val();return b.Utility.isValidDateString(t)?new Date(t):null},valueConverters:{string:function(t){return t instanceof Date?b.Utility.dateToDateStringUTC(t):t},stringArray:function(t){return t instanceof Date?[b.Utility.dateToDateStringUTC(t)]:t},number:function(t){return t instanceof Date?t.getTime():t},numberArray:function(t){return t instanceof Date?[t.getTime()]:t},dateArray:function(t){return t instanceof Date?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.max&&t.max instanceof Date&&(t.atts.max=b.Utility.dateToDateStringUTC(t.max)),"undefined"==typeof t.atts.min&&t.min instanceof Date&&(t.atts.min=b.Utility.dateToDateStringUTC(t.min)),t}})}.call(this),function(){s.__checkName("afInputDateTime"),s.afInputDateTime=new s("Template.afInputDateTime",function(){var t=this;return d.INPUT(d.Attrs({type:"datetime",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("datetime",{template:"afInputDateTime",valueIn:function(t){return t instanceof Date?b.Utility.dateToNormalizedForcedUtcGlobalDateAndTimeString(t):t},valueOut:function(){var t=this.val();return t="string"==typeof t?t.replace(/ /g,"T"):t,b.Utility.isValidNormalizedForcedUtcGlobalDateAndTimeString(t)?new Date(t):null},valueConverters:{string:function(t){return t instanceof Date?b.Utility.dateToNormalizedForcedUtcGlobalDateAndTimeString(t):t},stringArray:function(t){return t instanceof Date?[b.Utility.dateToNormalizedForcedUtcGlobalDateAndTimeString(t)]:t},number:function(t){return t instanceof Date?t.getTime():t},numberArray:function(t){return t instanceof Date?[t.getTime()]:t},dateArray:function(t){return t instanceof Date?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.max&&t.max instanceof Date&&(t.atts.max=b.Utility.dateToNormalizedForcedUtcGlobalDateAndTimeString(t.max)),"undefined"==typeof t.atts.min&&t.min instanceof Date&&(t.atts.min=b.Utility.dateToNormalizedForcedUtcGlobalDateAndTimeString(t.min)),t}})}.call(this),function(){s.__checkName("afInputDateTimeLocal"),s.afInputDateTimeLocal=new s("Template.afInputDateTimeLocal",function(){var t=this;return d.INPUT(d.Attrs({type:"datetime-local",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("datetime-local",{template:"afInputDateTimeLocal",valueIn:function(t,e){return t instanceof Date?b.Utility.dateToNormalizedLocalDateAndTimeString(t,e.timezoneId):t},valueOut:function(){var t=this.val();if(t="string"==typeof t?t.replace(/ /g,"T"):t,b.Utility.isValidNormalizedLocalDateAndTimeString(t)){var e=this.attr("data-timezone-id");if("string"==typeof e){if("function"!=typeof m.tz)throw new Error("If you specify a timezoneId, make sure that you've added a moment-timezone package to your app");return m.tz(t,e).toDate()}return m(t).toDate()}return null},valueConverters:{string:function(t){return t instanceof Date?b.Utility.dateToNormalizedLocalDateAndTimeString(t,this.attr("data-timezone-id")):t
},stringArray:function(t){return t instanceof Date?[b.Utility.dateToNormalizedLocalDateAndTimeString(t,this.attr("data-timezone-id"))]:t},number:function(t){return t instanceof Date?t.getTime():t},numberArray:function(t){return t instanceof Date?[t.getTime()]:t},dateArray:function(t){return t instanceof Date?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.max&&t.max instanceof Date&&(t.atts.max=b.Utility.dateToNormalizedLocalDateAndTimeString(t.max,t.atts.timezoneId)),"undefined"==typeof t.atts.min&&t.min instanceof Date&&(t.atts.min=b.Utility.dateToNormalizedLocalDateAndTimeString(t.min,t.atts.timezoneId)),t.atts.timezoneId&&(t.atts["data-timezone-id"]=t.atts.timezoneId),delete t.atts.timezoneId,t}})}.call(this),function(){s.__checkName("afInputEmail"),s.afInputEmail=new s("Template.afInputEmail",function(){var t=this;return d.INPUT(d.Attrs({type:"email",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("email",{template:"afInputEmail",contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afInputFile"),s.afInputFile=new s("Template.afInputFile",function(){var t=this;return d.INPUT(d.Attrs({type:"file",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("file",{template:"afInputFile"})}.call(this),function(){s.__checkName("afInputHidden"),s.afInputHidden=new s("Template.afInputHidden",function(){var t=this;return d.INPUT(d.Attrs({type:"hidden",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("hidden",{template:"afInputHidden"})}.call(this),function(){s.__checkName("afInputImage"),s.afInputImage=new s("Template.afInputImage",function(){var t=this;return d.INPUT(d.Attrs({type:"image",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("image",{template:"afInputImage"})}.call(this),function(){s.__checkName("afInputMonth"),s.afInputMonth=new s("Template.afInputMonth",function(){var t=this;return d.INPUT(d.Attrs({type:"month",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("month",{template:"afInputMonth",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}}})}.call(this),function(){s.__checkName("afInputNumber"),s.afInputNumber=new s("Template.afInputNumber",function(){var t=this;return d.INPUT(d.Attrs({type:"number",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("number",{template:"afInputNumber",valueOut:function(){return b.Utility.stringToNumber(this.val())},valueConverters:{string:function(t){return"number"==typeof t?t.toString():t},stringArray:function(t){return"number"==typeof t?[t.toString()]:t},numberArray:function(t){return"number"==typeof t?[t]:t},"boolean":function(t){return 0===t?!1:1===t?!0:t},booleanArray:function(t){return 0===t?[!1]:1===t?[!0]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.max&&"number"==typeof t.max&&(t.atts.max=t.max),"undefined"==typeof t.atts.min&&"number"==typeof t.min&&(t.atts.min=t.min),"undefined"==typeof t.atts.step&&t.decimal&&(t.atts.step="0.01"),t}})}.call(this),function(){s.__checkName("afInputPassword"),s.afInputPassword=new s("Template.afInputPassword",function(){var t=this;return d.INPUT(d.Attrs({type:"password",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("password",{template:"afInputPassword",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afRadio"),s.afRadio=new s("Template.afRadio",function(){var t=this;return d.DIV(d.LABEL(d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))," ",l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"name")}))})))})}.call(this),function(){b.addInputType("radio",{template:"afRadio",valueOut:function(){return this.is(":checked")?this.val():void 0},valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}}}),s.afRadio.helpers({atts:function t(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),t}})}.call(this),function(){s.__checkName("afInputRange"),s.afInputRange=new s("Template.afInputRange",function(){var t=this;return d.INPUT(d.Attrs({type:"range",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("range",{template:"afInputRange",valueOut:function(){return b.Utility.stringToNumber(this.val())},valueConverters:{string:function(t){return"number"==typeof t?t.toString():t},stringArray:function(t){return"number"==typeof t?[t.toString()]:t},numberArray:function(t){return"number"==typeof t?[t]:t},"boolean":function(t){return 0===t?!1:1===t?!0:t},booleanArray:function(t){return 0===t?[!1]:1===t?[!0]:t}}})}.call(this),function(){s.__checkName("afInputReset"),s.afInputReset=new s("Template.afInputReset",function(){var t=this;return d.INPUT(d.Attrs({type:"reset",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("reset",{template:"afInputReset"})}.call(this),function(){s.__checkName("afInputSearch"),s.afInputSearch=new s("Template.afInputSearch",function(){var t=this;return d.INPUT(d.Attrs({type:"search",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("search",{template:"afInputSearch",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afSelect"),s.afSelect=new s("Template.afSelect",function(){var t=this;return d.SELECT(d.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"optgroup"))},function(){return["\n        ",d.OPTGROUP({label:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"optgroup"))}},"\n        ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n        "]}),"\n        "),"\n      "]},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n      "]}),"\n    "]}),"\n  ")})}.call(this),function(){b.addInputType("select",{template:"afSelect",valueOut:function(){return b.Utility.stringToNumber(this.val())},contextAdjust:function(t){t.atts.autocomplete="off";var e=u.omit(t.atts,"firstOption"),a=t.atts.firstOption;return t.items=[],a!==!1&&t.items.push({name:t.name,label:"string"==typeof a?a:"(Select One)",value:"",_id:"",selected:!1,atts:e}),u.each(t.selectOptions,function(a){if(a.optgroup){var n=u.map(a.options,function(a){return{name:t.name,label:a.label,value:a.value,_id:a.value,selected:a.value===t.value,atts:e}});t.items.push({optgroup:a.optgroup,items:n})}else t.items.push({name:t.name,label:a.label,value:a.value,_id:a.value,selected:a.value===t.value,atts:e})}),t}}),s.afSelect.helpers({optionAtts:function t(){var t=this,e={value:t.value};return t.selected&&(e.selected=""),e}})}.call(this),function(){s.__checkName("afCheckboxGroup"),s.afCheckboxGroup=new s("Template.afCheckboxGroup",function(){var t=this;return d.DIV(d.Attrs({"class":"af-checkbox-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.DIV(d.LABEL(d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))," ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))}))),"\n    "]}),"\n  ")})}.call(this),function(){b.addInputType("select-checkbox",{template:"afCheckboxGroup",valueIsArray:!0,valueOut:function(){var t=[];return this.find("input[type=checkbox]").each(function(){$(this).is(":checked")&&t.push($(this).val())}),t},contextAdjust:function(t){var e=u.omit(t.atts);return t.items=[],u.each(t.selectOptions,function(a){t.items.push({name:t.name,label:a.label,value:a.value,_id:a.value,selected:u.contains(t.value,a.value),atts:e})}),t}}),s.afCheckboxGroup.helpers({atts:function t(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),delete t["data-schema-key"],t},dsk:function e(){return{"data-schema-key":this.atts["data-schema-key"]}}})}.call(this),function(){s.__checkName("afCheckboxGroupInline"),s.afCheckboxGroupInline=new s("Template.afCheckboxGroupInline",function(){var t=this;return d.DIV(d.Attrs({"class":"af-checkbox-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.LABEL(d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))," ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n    "]}),"\n  ")})}.call(this),function(){b.addInputType("select-checkbox-inline",{template:"afCheckboxGroupInline",valueIsArray:!0,valueOut:function(){var t=[];return this.find("input[type=checkbox]").each(function(){$(this).is(":checked")&&t.push($(this).val())}),t},contextAdjust:function(t){var e=u.omit(t.atts);return t.items=[],u.each(t.selectOptions,function(a){t.items.push({name:t.name,label:a.label,value:a.value,_id:a.value,selected:a.value===t.value,atts:e})}),t}}),s.afCheckboxGroupInline.helpers({atts:function t(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),delete t["data-schema-key"],t},dsk:function e(){return{"data-schema-key":this.atts["data-schema-key"]}}})}.call(this),function(){s.__checkName("afSelectMultiple"),s.afSelectMultiple=new s("Template.afSelectMultiple",function(){var t=this;return d.SELECT(d.Attrs({multiple:""},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"optgroup"))},function(){return["\n        ",d.OPTGROUP({label:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"optgroup"))}},"\n        ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n        "]}),"\n        "),"\n      "]},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n      "]}),"\n    "]}),"\n  ")})}.call(this),function(){b.addInputType("select-multiple",{template:"afSelectMultiple",valueIsArray:!0,valueOut:function(){return b.Utility.getSelectValues(this[0])},contextAdjust:function(t){return t.items=u.map(t.selectOptions,function(e){if(e.optgroup){var a=u.map(e.options,function(a){return{name:t.name,label:a.label,value:a.value,_id:a.value,selected:u.contains(t.value,e.value),atts:t.atts}});return{optgroup:e.optgroup,items:a}}return{name:t.name,label:e.label,value:e.value,_id:e.value,selected:u.contains(t.value,e.value),atts:t.atts}}),t}}),s.afSelectMultiple.helpers({optionAtts:function t(){var t=this,e={value:t.value};return t.selected&&(e.selected=""),e}})}.call(this),function(){s.__checkName("afRadioGroup"),s.afRadioGroup=new s("Template.afRadioGroup",function(){var t=this;return d.DIV(d.Attrs({"class":"af-radio-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n  ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n    ",d.DIV(d.LABEL(d.INPUT(d.Attrs({type:"radio",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))," ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))}))),"\n  "]}),"\n  ")})}.call(this),function(){b.addInputType("select-radio",{template:"afRadioGroup",valueOut:function(){return this.find("input[type=radio]:checked").val()},contextAdjust:function(t){var e=u.omit(t.atts);return t.items=[],u.each(t.selectOptions,function(a){t.items.push({name:t.name,label:a.label,value:a.value,_id:a.value,selected:a.value===t.value,atts:e})}),t}}),s.afRadioGroup.helpers({atts:function t(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),delete t["data-schema-key"],t},dsk:function e(){return{"data-schema-key":this.atts["data-schema-key"]}}})}.call(this),function(){s.__checkName("afRadioGroupInline"),s.afRadioGroupInline=new s("Template.afRadioGroupInline",function(){var t=this;return d.DIV(d.Attrs({"class":"af-radio-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n  ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n    ",d.LABEL(d.INPUT(d.Attrs({type:"radio",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))," ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n  "]}),"\n  ")})}.call(this),function(){b.addInputType("select-radio-inline",{template:"afRadioGroupInline",valueOut:function(){return this.find("input[type=radio]:checked").val()},contextAdjust:function(t){var e=u.omit(t.atts);return t.items=[],u.each(t.selectOptions,function(a){t.items.push({name:t.name,label:a.label,value:a.value,_id:a.value,selected:a.value===t.value,atts:e})}),t}}),s.afRadioGroupInline.helpers({atts:function t(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),delete t["data-schema-key"],t},dsk:function e(){return{"data-schema-key":this.atts["data-schema-key"]}}})}.call(this),function(){s.__checkName("afInputSubmit"),s.afInputSubmit=new s("Template.afInputSubmit",function(){var t=this;return d.INPUT(d.Attrs({type:"submit",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("submit",{template:"afInputSubmit"})}.call(this),function(){s.__checkName("afInputTel"),s.afInputTel=new s("Template.afInputTel",function(){var t=this;return d.INPUT(d.Attrs({type:"tel",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("tel",{template:"afInputTel",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afInputText"),s.afInputText=new s("Template.afInputText",function(){var t=this;return d.INPUT(d.Attrs({type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("text",{template:"afInputText",valueOut:function(){return this.val()},valueConverters:{stringArray:function(t){return"string"==typeof t?(t=t.split(","),u.map(t,function(t){return $.trim(t)})):t},number:b.Utility.stringToNumber,numberArray:function(t){return"string"==typeof t?(t=t.split(","),u.map(t,function(t){return t=$.trim(t),b.Utility.stringToNumber(t)})):t},"boolean":b.Utility.stringToBool,booleanArray:function(t){return"string"==typeof t?(t=t.split(","),u.map(t,function(t){return t=$.trim(t),b.Utility.stringToBool(t)})):t},date:b.Utility.stringToDate,dateArray:function(t){return"string"==typeof t?(t=t.split(","),u.map(t,function(t){return t=$.trim(t),b.Utility.stringToDate(t)})):t}},contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afTextarea"),s.afTextarea=new s("Template.afTextarea",function(){var t=this;return d.TEXTAREA(d.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))},{value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}}))})}.call(this),function(){function t(t){t=t.split("\n");var e=[];return u.each(t,function(t){t=$.trim(t),t.length&&e.push(t)}),e}b.addInputType("textarea",{template:"afTextarea",valueConverters:{string:function(t){return t},stringArray:function(e){return"string"==typeof e&&e.length>0?t(e):e},number:b.Utility.stringToNumber,numberArray:function(e){if("string"==typeof e&&e.length>0){var a=t(e);return u.map(a,function(t){return b.Utility.stringToNumber(t)})}return e},"boolean":b.Utility.stringToBool,booleanArray:function(e){if("string"==typeof e&&e.length>0){var a=t(e);return u.map(a,function(t){return b.Utility.stringToBool(t)})}return e},date:b.Utility.stringToDate,dateArray:function(e){if("string"==typeof e&&e.length>0){var a=t(e);return u.map(a,function(t){return b.Utility.stringToDate(t)})}return e}},contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afInputTime"),s.afInputTime=new s("Template.afInputTime",function(){var t=this;return d.INPUT(d.Attrs({type:"time",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("time",{template:"afInputTime",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}}})}.call(this),function(){s.__checkName("afInputUrl"),s.afInputUrl=new s("Template.afInputUrl",function(){var t=this;return d.INPUT(d.Attrs({type:"url",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("url",{template:"afInputUrl",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}},contextAdjust:function(t){return"undefined"==typeof t.atts.maxlength&&"number"==typeof t.max&&(t.atts.maxlength=t.max),t}})}.call(this),function(){s.__checkName("afInputWeek"),s.afInputWeek=new s("Template.afInputWeek",function(){var t=this;return d.INPUT(d.Attrs({type:"week",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))})}.call(this),function(){b.addInputType("week",{template:"afInputWeek",valueConverters:{stringArray:function(t){return"string"==typeof t&&t.length>0?[t]:t}}})}.call(this),function(){s.__checkName("autoForm"),s.autoForm=new s("Template.autoForm",function(){var t=this;return d.FORM(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("atts"))}),"\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("innerContext"),t.lookup(".."))},function(){return["\n    ",l._InOuterTemplateScope(t,function(){return l._TemplateWith(function(){return Spacebars.call(t.lookup("."))},function(){return Spacebars.include(function(){return Spacebars.call(t.templateContentBlock)})})}),"\n    "]}),"\n  ")})}.call(this),function(){var t=new i.Dependency;s.autoForm.helpers({atts:function e(){var t=u.clone(this);return"browser"===t.validation||t.novalidate||(t.novalidate="novalidate"),u.omit(t,"schema","collection","validation","doc","resetOnSuccess","type","template","autosave","meteormethod","filter","autoConvert","removeEmptyStrings","trimStrings")},innerContext:function n(e){var a=this.id||I;t.depend();var n={_af:_[a]};return u.extend(n,e),n}}),s.autoForm.created=function r(){var e=this;e.autorun(function(){var n=s.currentData(),r=n.id||I;A[r]=e,N.resetForm(r);var o=b.Utility.lookup(n.collection),i=b.Utility.getSimpleSchemaFromContext(n,r),c=g.getDocument(r);c!==!1&&(n.doc=u.extend({},n.doc||{},c));var l;if(n.doc&&!u.isEmpty(n.doc)){var p=u.clone(n.doc),f={formId:r};u.each(v.getHooks(r,"docToForm"),function h(t){p=t.call(f,p,i,r)}),l=new a(p),C.sourceDoc(r,l)}else C.sourceDoc(r,null);var m,d;n.autosave===!0&&"update"===n.type?(m=!0,d=!1):(m=!1,d=n.resetOnSuccess),_[r]={formId:r,collection:o,ss:i,ssIsOverride:!!o&&!!n.schema,doc:n.doc||null,mDoc:l,validationType:null==n.validation?"submitThenKeyup":n.validation,submitType:n.type,submitMethod:n.meteormethod,resetOnSuccess:d,autosave:m,filter:n.filter,autoConvert:n.autoConvert,removeEmptyStrings:n.removeEmptyStrings,trimStrings:n.trimStrings},t.changed()})},s.autoForm.destroyed=function o(){var t=this,e=t.data.id||I;A[e]&&delete A[e],_[e]&&delete _[e],N.untrackForm(e),F[e]&&delete F[e],g.unregisterForm(e)}}.call(this),function(){s.__checkName("quickForm"),s.quickForm=new s("Template.quickForm",function(){var t=this;return Spacebars.With(function(){return Spacebars.call(t.lookup("innerContext"))},function(){return["\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("afTemplateName"),"quickForm",Spacebars.dot(t.lookup(".."),"template"))},function(){return["\n      ",l._TemplateWith(function(){return{template:Spacebars.call(t.lookup(".")),data:Spacebars.call(t.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(s.__dynamic)})}),"\n    "]}),"\n  "]})})}.call(this),function(){s.quickForm.helpers({innerContext:function t(){var t=this,e=u.omit(t,"buttonContent","buttonClasses","fields","omitFields"),a=t.buttonContent!==!1&&"readonly"!==t.type&&"disabled"!==t.type;return{qfAutoFormContext:e,atts:t,qfShouldRenderButton:a}}})}.call(this),function(){s.__checkName("afArrayField"),s.afArrayField=new s("Template.afArrayField",function(){var t=this;return Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("innerContext"),Spacebars.kw({atts:t.lookup(".")}))},function(){return["\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("afTemplateName"),"afArrayField",Spacebars.dot(t.lookup(".."),"template"))},function(){return["\n      ",l._TemplateWith(function(){return{template:Spacebars.call(t.lookup(".")),data:Spacebars.call(t.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(s.__dynamic)})}),"\n    "]}),"\n  "]})})}.call(this),function(){s.afArrayField.helpers({innerContext:function t(e){var a=b.Utility.normalizeContext(e.hash,"afArrayField"),n=a.atts.name,r=a.atts.minCount||0,o=a.atts.maxCount||1/0,u=a.af.ss,i=a.af.formId,c=C.getDocCountForField(i,n);return null==c&&(c=a.atts.initialCount),N.initField(i,n,u,c,r,o),{atts:a.atts}}})}.call(this),function(){s.__checkName("afEachArrayItem"),s.afEachArrayItem=new s("Template.afEachArrayItem",function(){var t=this;return["\n  ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("innerContext"),Spacebars.kw({atts:t.lookup(".")}))},function(){return["\n    ",l.Each(function(){return Spacebars.call(t.lookup("."))},function(){return["\n    ",l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"removed"))},function(){return["\n    ",d.INPUT({type:"hidden",name:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"name"))},"data-schema-key":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"name"))},"data-null-value":"true",value:""}),"\n    "]},function(){return["\n    ",l._InOuterTemplateScope(t,function(){return l._TemplateWith(function(){return Spacebars.call(t.lookup("."))},function(){return Spacebars.include(function(){return Spacebars.call(t.templateContentBlock)})})}),"\n    "]}),"\n    "]}),"\n  "]})]})}.call(this),function(){s.afEachArrayItem.helpers({innerContext:function t(e){var a=b.Utility.normalizeContext(e.hash,"afEachArrayItem"),n=a.af.formId,r=a.atts.name,o=C.getDocCountForField(n,r);return null==o&&(o=a.atts.initialCount),N.initField(n,r,a.af.ss,o,a.atts.minCount,a.atts.maxCount),N.getField(n,r)}})}.call(this),function(){s.__checkName("afFieldInput"),s.afFieldInput=new s("Template.afFieldInput",function(){var t=this;return Spacebars.With(function(){return Spacebars.call(t.lookup("getComponentDef"))},function(){return["\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("innerContext"),Spacebars.kw({atts:t.lookup(".."),componentDef:t.lookup(".")}))},function(){return["\n      ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("getTemplateName"),Spacebars.dot(t.lookup(".."),"template"),Spacebars.dot(t.lookup("..."),"template"))},function(){return["\n        ",l._TemplateWith(function(){return{template:Spacebars.call(t.lookup(".")),data:Spacebars.call(t.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(s.__dynamic)})}),"\n      "]}),"\n    "]}),"\n  "]})})}.call(this),function(){s.afFieldInput.helpers({getComponentDef:function t(){var t=b.getInputType(this),e=x[t];if(!e)throw new Error('AutoForm: No component found for rendering input with type "'+t+'"');return e},getTemplateName:function e(t,a){var n=this,r,o,u;return a&&s[t+"_"+a]?t+"_"+a:(a&&b._debug&&console.warn(t+"_"+a+" is not a valid template name. Falling back to a different template."),n.atts&&n.atts.name&&(r=b.getSchemaForField(n.atts.name).autoform),r&&r.template&&s[t+"_"+r.template]?t+"_"+r.template:(o=b.findAttribute("template"),o&&s[t+"_"+o]?t+"_"+o:(u=b.getDefaultTemplate(),u&&s[t+"_"+u]?t+"_"+u:t)))},innerContext:function a(t){var e=b.Utility.normalizeContext(t.hash,"afFieldInput");w[e.af.formId]=w[e.af.formId]||new c.Dependency,w[e.af.formId].depend();var a=e.af.ss,n=e.defs,r=n.defaultValue;n.type===Array&&(n=a.schema(e.atts.name+".$"));var o=t.hash.componentDef,u=W(e.atts,e.atts.value,e.af.mDoc,r,o);H(e.af.formId,e.atts.name);var i=q(n,e.atts,u,a.label(e.atts.name),e.af.submitType);return"function"==typeof o.contextAdjust?o.contextAdjust(i):i}})}.call(this),function(){s.__checkName("afFormGroup"),s.afFormGroup=new s("Template.afFormGroup",function(){var t=this;return Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("innerContext"),Spacebars.kw({atts:t.lookup(".")}))},function(){return["\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("afTemplateName"),"afFormGroup",Spacebars.dot(t.lookup(".."),"template"))},function(){return["\n      ",l._TemplateWith(function(){return{template:Spacebars.call(t.lookup(".")),data:Spacebars.call(t.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(s.__dynamic)})}),"\n    "]}),"\n  "]})})}.call(this),function(){function t(t){var e={};return u.each(t,function a(t,n){0===n.indexOf("label-")&&(e[n.substring(6)]=t)}),e}function e(t){var e={};return u.each(t,function a(t,n){"label"!==n&&0!==n.indexOf("label-")&&(e[n]=t)}),e}s.afFormGroup.helpers({innerContext:function a(n){var r=b.Utility.normalizeContext(n.hash,"afFormGroup");return{skipLabel:r.atts.label===!1,afFieldLabelAtts:t(r.atts),afFieldInputAtts:e(r.atts),atts:{name:r.atts.name},labelText:"string"==typeof r.atts.label?r.atts.label:null}}})}.call(this),function(){s.__checkName("afObjectField"),s.afObjectField=new s("Template.afObjectField",function(){var t=this;return Spacebars.With(function(){return{atts:Spacebars.call(t.lookup("."))}},function(){return["\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("afTemplateName"),"afObjectField",Spacebars.dot(t.lookup(".."),"template"))},function(){return["\n      ",l._TemplateWith(function(){return{template:Spacebars.call(t.lookup(".")),data:Spacebars.call(t.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(s.__dynamic)})}),"\n    "]}),"\n  "]})})}.call(this),function(){s.__checkName("afQuickField"),s.afQuickField=new s("Template.afQuickField",function(){var t=this;return l.If(function(){return Spacebars.dataMustache(t.lookup("isGroup"),Spacebars.kw({atts:t.lookup(".")}))},function(){return["\n    ",Spacebars.include(t.lookupTemplate("afObjectField")),"\n  "]},function(){return["\n    ",l.If(function(){return Spacebars.dataMustache(t.lookup("isFieldArray"),Spacebars.kw({atts:t.lookup(".")}))},function(){return["\n      ",Spacebars.include(t.lookupTemplate("afArrayField")),"\n    "]},function(){return["\n      ",l._TemplateWith(function(){return Spacebars.call(t.lookup("groupAtts"))},function(){return Spacebars.include(t.lookupTemplate("afFormGroup"))}),"\n    "]}),"\n  "]})})}.call(this),function(){s.afQuickField.helpers({isGroup:function t(e){var a=b.Utility.normalizeContext(e.hash,"afQuickField");return a.defs.type===Object&&!a.atts.options&&!a.atts.type},isFieldArray:function e(t){var e=b.Utility.normalizeContext(t.hash,"afQuickField");return e.defs.type===Array&&!e.atts.options&&!e.atts.type},groupAtts:function a(){return u.omit(this,"fields","omitFields")}})}.call(this),function(){s.__checkName("afQuickFields"),s.afQuickFields=new s("Template.afQuickFields",function(){var t=this;return l.Each(function(){return Spacebars.dataMustache(t.lookup("afFieldNames"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"name")}))},function(){return["\n    ",Spacebars.With(function(){return{name:Spacebars.call(t.lookup("."))}},function(){return["\n    ",l._TemplateWith(function(){return Spacebars.call(t.lookup("quickFieldAtts"))},function(){return Spacebars.include(t.lookupTemplate("afQuickField"))}),"\n    "]}),"\n  "]})})}.call(this),function(){s.afQuickFields.helpers({quickFieldAtts:function t(){var t=s.parentData(2);return t.atts&&(t={}),u.extend({options:"auto"},t,this)}})}.call(this),function(){function e(t,e){if(e&&e.view._domrange){var a=v.getHooks(t,"beginSubmit");if(a.length)u.each(a,function r(a){a(t,e)});else{var n=e.find("button[type=submit]")||e.find("input[type=submit]");n&&(n.disabled=!0)}}}function a(t,e){if(e&&e.view._domrange){n=null;var a=v.getHooks(t,"endSubmit");
if(a.length)u.each(a,function o(a){a(t,e)});else{var r=e.find("button[type=submit]")||e.find("input[type=submit]");r&&(r.disabled=!1)}}}var n=null;s.autoForm.events({"submit form":function r(o,i){function c(){o.preventDefault(),o.stopPropagation(),a(m,i)}function s(){var t=g.namedContext(m),e=t.invalidKeys(),a;e?(e.length?(e=u.map(e,function(e){return u.extend({message:t.keyErrorMessage(e.name)},e)}),a=new Error(e[0].message)):a=new Error("form failed validation"),a.invalidKeys=e):a=new Error("form failed validation"),u.each(D,function n(t){t("pre-submit validation",a,i)}),c()}function l(t){var e={event:o,template:i,formId:m,docId:x,autoSaveChangedElement:n,resetForm:function(){b.resetForm(m,i)}},r=v.getHooks(m,"after",t);return function c(n,o){if(n){if(V(),D&&D.length)u.each(D,function c(a){a.call(e,t,n,i)});else if((!r||!r.length)&&g.namedContext(m).isValid())throw a(m,i),n}else d.resetOnSuccess!==!1&&b.resetForm(m,i),u.each(N,function s(a){a.call(e,t,o,i)});u.each(r,function l(t){t.call(e,n,o,i)}),a(m,i)}}function p(t,e,r,c,s){function l(e,p){if(Y=r[e],!Y)return void s(p);var f=function(t){if(t===!1)a(m,i);else{if(!u.isObject(t))throw new Error(c+" must return an object");l(e+1,t)}},d={event:o,template:i,formId:m,docId:t,autoSaveChangedElement:n,resetForm:function(){b.resetForm(m,i)},result:u.once(f)},h;h=t?Y.call(d,t,p,i):Y.call(d,p,i),void 0!==h&&d.result(h)}l(0,e)}function f(t,e,r,c){var s=t.length,p=0,f;if(0===s)return void a(m,i);var d={event:o,template:i,formId:m,docId:x,autoSaveChangedElement:n,resetForm:function(){b.resetForm(m,i)},done:function(t){if(p++,!f&&t&&(f=t),p===s){var e=l("submit");e(f)}}},h=!1;u.each(t,function S(t){var a=t.call(d,e,r,c);h===!1&&a===!1&&(h=!0)}),h&&(o.preventDefault(),o.stopPropagation())}var m=this.id||I,d=_[m],h="insert"===d.submitType,S="update"===d.submitType,k="method"===d.submitType,y=d.submitMethod,T=!h&&!S&&!k,g=d.ss,A=d.ssIsOverride,F=d.collection,w=d.doc,x=w?w._id:null,C;if(!F){if(h)throw new Error("AutoForm: You must specify a collection when form type is insert.");if(S)throw new Error("AutoForm: You must specify a collection when form type is update.")}T||o.preventDefault();var N=v.getHooks(m,"onSuccess"),D=v.getHooks(m,"onError"),M=j(i,m,g),U=M.insertDoc,L=M.updateDoc;if("none"!==d.validationType&&(A||T)){try{C=O(m,d,M)}catch(E){console.error("Validation error",E),C=!1}if(C===!1)return s()}e(m,i);var P={validationContext:m,filter:d.filter,autoConvert:d.autoConvert,removeEmptyStrings:d.removeEmptyStrings,trimStrings:d.trimStrings};if(h){var B=v.getHooks(m,"before","insert");p(null,U,B,"before.insert hook",function(t){var e=l("insert");"function"==typeof F.simpleSchema&&null!=F.simpleSchema()?F.insert(t,P,e):F.insert(t,e)})}else if(S){var G=v.getHooks(m,"before","update");p(x,L,G,"before.update hook",function(t){var e=l("update");u.isEmpty(t)?e(null,0):F.update(x,t,P,e)})}else if(k){if(!y)throw new Error('When form type is "method", you must also provide a "meteormethod" attribute');var R=v.getHooks(m,"before",y);p(null,U,R,"before.method hook",function(e){if(C=O(m,d,M,A),C===!1)return s();var a=l(y);t.call(y,e,L,x,a)})}else if(T){var z=v.getHooks(m,"onSubmit");f(z,U,L,w)}},"keyup [data-schema-key]":function o(t,e){var a=e.data.validation||"submitThenKeyup",n="submitThenKeyup"===a,r=!(8===t.keyCode||46===t.keyCode);("keyup"===a||"submitThenKeyup"===a)&&B(t.currentTarget.getAttribute("data-schema-key"),e,r,n)},"blur [data-schema-key]":function i(t,e){var a=e.data.validation||"submitThenKeyup",n="submitThenKeyup"===a||"submitThenBlur"===a;("keyup"===a||"blur"===a||"submitThenKeyup"===a||"submitThenBlur"===a)&&B(t.currentTarget.getAttribute("data-schema-key"),e,!1,n)},"change form":function c(t,e){var a=this,r=t.target.getAttribute("data-schema-key");if(r||(r=$(t.target).closest("[data-schema-key]").attr("data-schema-key"))){var o=a.id||I,u=_[o];if(u){if(a.preserveForm!==!1&&g.registerForm(o,function s(){return j(e,o,u.ss).insertDoc}),H(o,r),u.autosave)return n=t.target,void $(t.currentTarget).submit();var i=u.validationType||"submitThenKeyup",c="submitThenKeyup"===i||"submitThenBlur"===i;("keyup"===i||"blur"===i||"submitThenKeyup"===i||"submitThenBlur"===i)&&B(r,e,!1,c)}}},"reset form":function l(e,a){var n=this.id||I;g.unregisterForm(n),N.resetForm(n);var r=_[n];r&&(r.ss&&r.ss.namedContext(n).resetValidation(),this.doc?(e.preventDefault(),b.invalidateFormContext(n),a.$("[autofocus]").focus()):t.defer(function(){Q(n),a&&a.view._domrange&&a.$("[autofocus]").focus()}))},"keydown .autoform-array-item input":function(t,e){13===t.keyCode&&t.preventDefault()},"click .autoform-remove-item":function p(t,e){var a=this;t.preventDefault();var n=a.arrayFieldName,r=a.minCount,o=a.maxCount,u=a.index,i=e.data,c=i&&i.id||I,s=_[c].ss;N.removeFromFieldAtIndex(c,n,u,s,r,o)},"click .autoform-add-item":function f(t,e){t.preventDefault();var a=$(t.currentTarget),n=a.attr("data-autoform-field"),r=a.attr("data-autoform-minCount"),o=a.attr("data-autoform-maxCount"),u=e.data,i=u&&u.id||I,c=_[i].ss;N.addOneToField(i,n,c,r,o)}})}.call(this),function(){s.__checkName("quickForm_bootstrap3"),s.quickForm_bootstrap3=new s("Template.quickForm_bootstrap3",function(){var t=this;return l._TemplateWith(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"qfAutoFormContext"))},function(){return Spacebars.include(t.lookupTemplate("autoForm"),function(){return["\n    ",Spacebars.include(t.lookupTemplate("afQuickFields")),"\n    ",l.If(function(){return Spacebars.call(t.lookup("qfShouldRenderButton"))},function(){return["\n    ",d.DIV({"class":"form-group"},"\n      ",d.BUTTON(d.Attrs({type:"submit"},function(){return Spacebars.attrMustache(t.lookup("submitButtonAtts"))}),"\n      ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup(".."),"atts","buttonContent"))},function(){return["\n      ",l.View(function(){return Spacebars.mustache(t.lookup("."))}),"\n      "]},function(){return"\n      Submit\n      "}),"\n      "),"\n    "),"\n    "]}),"\n  "]})})}),s.__checkName("afFormGroup_bootstrap3"),s.afFormGroup_bootstrap3=new s("Template.afFormGroup_bootstrap3",function(){var t=this;return d.DIV({"class":function(){return["form-group ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",l.Unless(function(){return Spacebars.call(t.lookup("skipLabel"))},function(){return["\n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("bsFieldLabelAtts"))}),l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"labelText"))},function(){return l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"labelText"))})},function(){return l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})})),"\n    "]}),"\n    ",l._TemplateWith(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"afFieldInputAtts"))},function(){return Spacebars.include(t.lookupTemplate("afFieldInput"))}),"\n    ",d.SPAN({"class":"help-block"},l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n  ")}),s.__checkName("afObjectField_bootstrap3"),s.afObjectField_bootstrap3=new s("Template.afObjectField_bootstrap3",function(){var t=this;return d.DIV({"class":"panel panel-default"},"\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return["\n    ",d.DIV({"class":"panel-heading"},"\n      ",d.H3({"class":"panel-title"},l.View(function(){return Spacebars.mustache(t.lookup("."))})),"\n    "),"\n    "]}),"\n    ",d.DIV({"class":"panel-body"},"\n      ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return["\n      ",d.SPAN({"class":"help-block"},l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n      "]}),"\n      ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","name"))}},function(){return Spacebars.include(t.lookupTemplate("afQuickFields"))}),"\n    "),"\n  ")}),s.__checkName("afArrayField_bootstrap3"),s.afArrayField_bootstrap3=new s("Template.afArrayField_bootstrap3",function(){var t=this;return d.DIV({"class":"panel panel-default"},"\n    ",d.DIV({"class":"panel-heading"},l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})),"\n    ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return["\n    ",d.DIV({"class":"panel-body has-error"},"\n      ",d.SPAN({"class":"help-block"},l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n    "),"\n    "]}),"\n    ",d.UL({"class":"list-group"},"\n      ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","name")),minCount:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","minCount")),maxCount:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","maxCount"))}},function(){return Spacebars.include(t.lookupTemplate("afEachArrayItem"),function(){return["\n      ",d.LI({"class":"list-group-item autoform-array-item"},"\n        ",d.DIV({"class":"media"},"\n          ",l.If(function(){return Spacebars.dataMustache(t.lookup("afArrayFieldHasMoreThanMinimum"),Spacebars.kw({name:Spacebars.dot(t.lookup(".."),"atts","name"),minCount:Spacebars.dot(t.lookup(".."),"atts","minCount"),maxCount:Spacebars.dot(t.lookup(".."),"atts","maxCount")}))},function(){return["\n          ",d.BUTTON({type:"button","class":"btn btn-primary autoform-remove-item pull-left"},d.SPAN({"class":"glyphicon glyphicon-minus"})),"\n          "]}),"\n          ",d.DIV({"class":"media-body"},"\n            ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"name")),label:Spacebars.call(!1),options:Spacebars.call("auto")}},function(){return Spacebars.include(t.lookupTemplate("afQuickField"))}),"\n          "),"\n        "),"\n      "),"\n      "]})}),"\n      ",l.If(function(){return Spacebars.dataMustache(t.lookup("afArrayFieldHasLessThanMaximum"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name"),minCount:Spacebars.dot(t.lookup("."),"atts","minCount"),maxCount:Spacebars.dot(t.lookup("."),"atts","maxCount")}))},function(){return["\n      ",d.LI({"class":"list-group-item"},"\n        ",d.BUTTON({type:"button","class":"btn btn-primary autoform-add-item","data-autoform-field":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","name"))},"data-autoform-mincount":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","minCount"))},"data-autoform-maxcount":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","maxCount"))}},d.SPAN({"class":"glyphicon glyphicon-plus"})),"\n      "),"\n      "]}),"\n    "),"\n  ")}),s.__checkName("afCheckbox_bootstrap3"),s.afCheckbox_bootstrap3=new s("Template.afCheckbox_bootstrap3",function(){var t=this;return d.DIV({"class":"checkbox"},"\n    ",d.LABEL("\n      ",d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n      ",l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"name")}))}),"\n    "),"\n  ")}),s.__checkName("afCheckboxGroup_bootstrap3"),s.afCheckboxGroup_bootstrap3=new s("Template.afCheckboxGroup_bootstrap3",function(){var t=this;return d.DIV(d.Attrs({"class":"af-checkbox-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.DIV({"class":"checkbox"},"\n        ",d.LABEL("\n          ",d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n          ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))}),"\n        "),"\n      "),"\n    "]}),"\n  ")}),s.__checkName("afCheckboxGroupInline_bootstrap3"),s.afCheckboxGroupInline_bootstrap3=new s("Template.afCheckboxGroupInline_bootstrap3",function(){var t=this;return d.DIV(d.Attrs({"class":"af-checkbox-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.LABEL({"class":"checkbox-inline"},"\n        ",d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n        ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))}),"\n      "),"\n    "]}),"\n  ")}),s.__checkName("afRadio_bootstrap3"),s.afRadio_bootstrap3=new s("Template.afRadio_bootstrap3",function(){var t=this;return d.DIV({"class":"radio"},"\n    ",d.LABEL("\n      ",d.INPUT(d.Attrs({type:"radio",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n      ",l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"name")}))}),"\n    "),"\n  ")}),s.__checkName("afRadioGroup_bootstrap3"),s.afRadioGroup_bootstrap3=new s("Template.afRadioGroup_bootstrap3",function(){var t=this;return d.DIV(d.Attrs({"class":"af-radio-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.DIV({"class":"radio"},"\n        ",d.LABEL("\n          ",d.INPUT(d.Attrs({type:"radio",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n          ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))}),"\n        "),"\n      "),"\n    "]}),"\n  ")}),s.__checkName("afRadioGroupInline_bootstrap3"),s.afRadioGroupInline_bootstrap3=new s("Template.afRadioGroupInline_bootstrap3",function(){var t=this;return d.DIV(d.Attrs({"class":"af-radio-group"},function(){return Spacebars.attrMustache(t.lookup("dsk"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.LABEL({"class":"radio-inline"},"\n        ",d.INPUT(d.Attrs({type:"radio",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n        ",l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))}),"\n      "),"\n    "]}),"\n  ")}),s.__checkName("afBooleanRadioGroup_bootstrap3"),s.afBooleanRadioGroup_bootstrap3=new s("Template.afBooleanRadioGroup_bootstrap3",function(){var t=this;return[d.DIV({"class":"radio"},"\n    ",d.LABEL(d.INPUT(d.Attrs({type:"radio",value:"false",name:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"name"))}},function(){return Spacebars.attrMustache(t.lookup("falseAtts"))}))," ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"atts","falseLabel"))},function(){return l.View(function(){return Spacebars.mustache(t.lookup("."))})},function(){return"False"})),"\n  "),"\n  ",d.DIV({"class":"radio"},"\n    ",d.LABEL(d.INPUT(d.Attrs({type:"radio",value:"true",name:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"name"))}},function(){return Spacebars.attrMustache(t.lookup("trueAtts"))}))," ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"atts","trueLabel"))},function(){return l.View(function(){return Spacebars.mustache(t.lookup("."))})},function(){return"True"})),"\n  ")]}),s.__checkName("afSelect_bootstrap3"),s.afSelect_bootstrap3=new s("Template.afSelect_bootstrap3",function(){var t=this;return d.SELECT(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("atts"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"optgroup"))},function(){return["\n        ",d.OPTGROUP({label:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"optgroup"))}},"\n        ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n        "]}),"\n        "),"\n      "]},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n      "]}),"\n    "]}),"\n  ")}),s.__checkName("afBooleanSelect_bootstrap3"),s.afBooleanSelect_bootstrap3=new s("Template.afBooleanSelect_bootstrap3",function(){var t=this;return d.SELECT(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("atts"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n    "]}),"\n  ")}),s.__checkName("afSelectMultiple_bootstrap3"),s.afSelectMultiple_bootstrap3=new s("Template.afSelectMultiple_bootstrap3",function(){var t=this;return d.SELECT(d.Attrs({multiple:""},function(){return Spacebars.attrMustache(t.lookup("atts"))}),"\n    ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n      ",l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"optgroup"))},function(){return["\n        ",d.OPTGROUP({label:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"optgroup"))}},"\n        ",l.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n        "]}),"\n        "),"\n      "]},function(){return["\n        ",d.OPTION(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n      "]}),"\n    "]}),"\n  ")}),s.__checkName("afTextarea_bootstrap3"),s.afTextarea_bootstrap3=new s("Template.afTextarea_bootstrap3",function(){var t=this;return d.TEXTAREA(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("atts"))},{value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}}))}),s.__checkName("afInputText_bootstrap3"),s.afInputText_bootstrap3=new s("Template.afInputText_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputPassword_bootstrap3"),s.afInputPassword_bootstrap3=new s("Template.afInputPassword_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"password",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputButton_bootstrap3"),s.afInputButton_bootstrap3=new s("Template.afInputButton_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"button",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputSubmit_bootstrap3"),s.afInputSubmit_bootstrap3=new s("Template.afInputSubmit_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"submit",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputReset_bootstrap3"),s.afInputReset_bootstrap3=new s("Template.afInputReset_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"reset",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputDateTime_bootstrap3"),s.afInputDateTime_bootstrap3=new s("Template.afInputDateTime_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"datetime",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputDateTimeLocal_bootstrap3"),s.afInputDateTimeLocal_bootstrap3=new s("Template.afInputDateTimeLocal_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"datetime-local",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputDate_bootstrap3"),s.afInputDate_bootstrap3=new s("Template.afInputDate_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"date",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputMonth_bootstrap3"),s.afInputMonth_bootstrap3=new s("Template.afInputMonth_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"month",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputTime_bootstrap3"),s.afInputTime_bootstrap3=new s("Template.afInputTime_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"time",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputWeek_bootstrap3"),s.afInputWeek_bootstrap3=new s("Template.afInputWeek_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"week",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputNumber_bootstrap3"),s.afInputNumber_bootstrap3=new s("Template.afInputNumber_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"number",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputRange_bootstrap3"),s.afInputRange_bootstrap3=new s("Template.afInputRange_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"range",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}))}),s.__checkName("afInputEmail_bootstrap3"),s.afInputEmail_bootstrap3=new s("Template.afInputEmail_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"email",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputUrl_bootstrap3"),s.afInputUrl_bootstrap3=new s("Template.afInputUrl_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"url",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputSearch_bootstrap3"),s.afInputSearch_bootstrap3=new s("Template.afInputSearch_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"search",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputTel_bootstrap3"),s.afInputTel_bootstrap3=new s("Template.afInputTel_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"tel",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))}),s.__checkName("afInputColor_bootstrap3"),s.afInputColor_bootstrap3=new s("Template.afInputColor_bootstrap3",function(){var t=this;return d.INPUT(d.Attrs({type:"color",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))}))})}.call(this),function(){s.quickForm_bootstrap3.helpers({submitButtonAtts:function e(){var t=this.atts,e={};return e["class"]="string"==typeof t.buttonClasses?t.buttonClasses:"btn btn-primary",e}}),s.afFormGroup_bootstrap3.helpers({skipLabel:function a(){var t=this,e=b.getInputType(t.afFieldInputAtts);return t.skipLabel||"boolean-checkbox"===e},bsFieldLabelAtts:function n(){var t=u.clone(this.afFieldLabelAtts);return t=b.Utility.addClass(t,"control-label")}}),u.each(["afSelect_bootstrap3","afBooleanSelect_bootstrap3","afSelectMultiple_bootstrap3","afTextarea_bootstrap3","afInputText_bootstrap3","afInputPassword_bootstrap3","afInputDateTime_bootstrap3","afInputDateTimeLocal_bootstrap3","afInputDate_bootstrap3","afInputMonth_bootstrap3","afInputTime_bootstrap3","afInputWeek_bootstrap3","afInputNumber_bootstrap3","afInputEmail_bootstrap3","afInputUrl_bootstrap3","afInputSearch_bootstrap3","afInputTel_bootstrap3","afInputColor_bootstrap3"],function(t){s[t].helpers({atts:function e(){var t=u.clone(this.atts);return t=b.Utility.addClass(t,"form-control")}})}),u.each(["afInputButton_bootstrap3","afInputSubmit_bootstrap3","afInputReset_bootstrap3"],function(t){s[t].helpers({atts:function e(){var t=u.clone(this.atts);return t=b.Utility.addClass(t,"btn")}})}),s.afRadio_bootstrap3.helpers({atts:function r(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),t}}),u.each(["afCheckboxGroup_bootstrap3","afRadioGroup_bootstrap3","afCheckboxGroupInline_bootstrap3","afRadioGroupInline_bootstrap3"],function(t){s[t].helpers({atts:function e(){var t=u.clone(this.atts);return this.selected&&(t.checked=""),delete t["data-schema-key"],t},dsk:function a(){return{"data-schema-key":this.atts["data-schema-key"]}}})});var t={optionAtts:function o(){var t=this,e={value:t.value};return t.selected&&(e.selected=""),e}};s.afSelect_bootstrap3.helpers(t),s.afSelectMultiple_bootstrap3.helpers(t),s.afBooleanSelect_bootstrap3.helpers(t),s.afBooleanRadioGroup_bootstrap3.helpers({falseAtts:function i(){var t=u.omit(this.atts,"trueLabel","falseLabel");return this.value===!1&&(t.checked=""),t},trueAtts:function c(){var t=u.omit(this.atts,"trueLabel","falseLabel");return this.value===!0&&(t.checked=""),t}})}.call(this),function(){s.__checkName("quickForm_bootstrap3-horizontal"),s["quickForm_bootstrap3-horizontal"]=new s("Template.quickForm_bootstrap3-horizontal",function(){var t=this;return l._TemplateWith(function(){return Spacebars.call(t.lookup("qfAutoFormContext"))},function(){return Spacebars.include(t.lookupTemplate("autoForm"),function(){return["\n    ",l._TemplateWith(function(){return{"input-col-class":Spacebars.call(t.lookup("inputClass")),"label-class":Spacebars.call(t.lookup("labelClass"))}},function(){return Spacebars.include(t.lookupTemplate("afQuickFields"))}),"\n    ",l.If(function(){return Spacebars.call(t.lookup("qfShouldRenderButton"))},function(){return["\n    ",d.DIV({"class":"form-group"},"\n      ",d.DIV({"class":function(){return Spacebars.mustache(t.lookup("labelClass"))}}),"\n      ",d.DIV({"class":function(){return Spacebars.mustache(t.lookup("inputClass"))}},"\n        ",d.BUTTON(d.Attrs({type:"submit"},function(){return Spacebars.attrMustache(t.lookup("submitButtonAtts"))}),"\n        ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup(".."),"atts","buttonContent"))},function(){return["\n        ",l.View(function(){return Spacebars.mustache(t.lookup("."))}),"\n        "]},function(){return"\n        Submit\n        "}),"\n        "),"\n      "),"\n    "),"\n    "]}),"\n  "]})})}),s.__checkName("afFormGroup_bootstrap3-horizontal"),s["afFormGroup_bootstrap3-horizontal"]=new s("Template.afFormGroup_bootstrap3-horizontal",function(){var t=this;return d.DIV({"class":function(){return["form-group ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",l.If(function(){return Spacebars.call(t.lookup("skipLabel"))},function(){return["\n    \n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("afFieldLabelAtts"))})),"\n    "]},function(){return["\n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("afFieldLabelAtts"))}),l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"labelText"))},function(){return l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"labelText"))})},function(){return l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})})),"\n    "]}),"\n    ",d.DIV({"class":function(){return Spacebars.mustache(t.lookup("rightColumnClass"))}},"\n      ",l._TemplateWith(function(){return Spacebars.call(t.lookup("afFieldInputAtts"))},function(){return Spacebars.include(t.lookupTemplate("afFieldInput"))}),"\n      ",d.SPAN({"class":"help-block"},l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n    "),"\n  ")}),s.__checkName("afObjectField_bootstrap3-horizontal"),s["afObjectField_bootstrap3-horizontal"]=new s("Template.afObjectField_bootstrap3-horizontal",function(){var t=this;return d.DIV({"class":function(){return["form-group ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("afFieldLabelAtts"))}),l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})),"\n    ",d.DIV({"class":function(){return Spacebars.mustache(t.lookup("rightColumnClass"))}},"\n      ",d.DIV({"class":"panel panel-default autoform-padding-fix"},"\n        ",d.DIV({"class":"panel-body"},"\n        \n        ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","name")),template:Spacebars.call("bootstrap3")}},function(){return Spacebars.include(t.lookupTemplate("afQuickFields"))}),"\n        "),"\n      "),"\n    "),"\n  ")}),s.__checkName("afArrayField_bootstrap3-horizontal"),s["afArrayField_bootstrap3-horizontal"]=new s("Template.afArrayField_bootstrap3-horizontal",function(){var t=this;return d.DIV({"class":function(){return["form-group ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("afFieldLabelAtts"))}),l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))
})),"\n    ",d.DIV({"class":function(){return Spacebars.mustache(t.lookup("rightColumnClass"))}},"\n      ",d.DIV({"class":"panel panel-default autoform-padding-fix"},"\n        ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return["\n        ",d.DIV({"class":"panel-body has-error"},"\n          ",d.SPAN({"class":"help-block"},l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n        "),"\n        "]}),"\n        ",d.UL({"class":"list-group"},"\n          ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","name")),minCount:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","minCount")),maxCount:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","maxCount"))}},function(){return Spacebars.include(t.lookupTemplate("afEachArrayItem"),function(){return["\n          ",d.LI({"class":"list-group-item autoform-array-item"},"\n            ",d.DIV({"class":"media"},"\n              ",l.If(function(){return Spacebars.dataMustache(t.lookup("afArrayFieldHasMoreThanMinimum"),Spacebars.kw({name:Spacebars.dot(t.lookup(".."),"atts","name"),minCount:Spacebars.dot(t.lookup(".."),"atts","minCount"),maxCount:Spacebars.dot(t.lookup(".."),"atts","maxCount")}))},function(){return["\n              ",d.BUTTON({type:"button","class":"btn btn-primary autoform-remove-item pull-left"},d.SPAN({"class":"glyphicon glyphicon-minus"})),"\n              "]}),"\n              ",d.DIV({"class":"media-body"},"\n                ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"name")),label:Spacebars.call(!1)}},function(){return Spacebars.include(t.lookupTemplate("afQuickField"))}),"\n              "),"\n            "),"\n          "),"\n          "]})}),"\n          ",l.If(function(){return Spacebars.dataMustache(t.lookup("afArrayFieldHasLessThanMaximum"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name"),minCount:Spacebars.dot(t.lookup("."),"atts","minCount"),maxCount:Spacebars.dot(t.lookup("."),"atts","maxCount")}))},function(){return["\n          ",d.LI({"class":"list-group-item"},"\n            ",d.BUTTON({type:"button","class":"btn btn-primary autoform-add-item","data-autoform-field":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","name"))},"data-autoform-mincount":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","minCount"))},"data-autoform-maxcount":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","maxCount"))}},d.SPAN({"class":"glyphicon glyphicon-plus"})),"\n          "),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  ")}),s.__checkName("afCheckbox_bootstrap3-horizontal"),s["afCheckbox_bootstrap3-horizontal"]=new s("Template.afCheckbox_bootstrap3-horizontal",function(){var t=this;return l.If(function(){return Spacebars.call(t.lookup("useLeftLabel"))},function(){return["\n  \n  ",d.DIV({"class":"checkbox"},"\n    ",d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("attsPlusSpecialClass"))})),"\n  "),"\n  "]},function(){return["\n  ",d.DIV({"class":"checkbox"},"\n    ",d.LABEL("\n      ",d.INPUT(d.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"value"))}},function(){return Spacebars.attrMustache(t.lookup("atts"))})),"\n      ",l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"name")}))}),"\n    "),"\n  "),"\n  "]})})}.call(this),function(){function t(){var t,e=0;do t=s.parentData(e++);while(t&&!t.atts);return t&&t.atts}s["quickForm_bootstrap3-horizontal"].helpers({inputClass:function(){var e=t();return e?e["input-col-class"]:void 0},labelClass:function(){var e=t();return e?e["label-class"]:void 0},submitButtonAtts:function(){var t=this.atts,e={};return e["class"]="string"==typeof t.buttonClasses?t.buttonClasses:"btn btn-primary",e},qfAutoFormContext:function(){var t=u.clone(this.qfAutoFormContext||{});return t=b.Utility.addClass(t,"form-horizontal"),t["input-col-class"]&&delete t["input-col-class"],t["label-class"]&&delete t["label-class"],t}}),s["afFormGroup_bootstrap3-horizontal"].helpers({afFieldInputAtts:function(){var t=u.clone(this.afFieldInputAtts||{});return"input-col-class"in t&&delete t["input-col-class"],t.template="boolean-checkbox"===b.getInputType(this.afFieldInputAtts)?"bootstrap3-horizontal":"bootstrap3",t},afFieldLabelAtts:function(){var t=u.clone(this.afFieldLabelAtts||{});return t=b.Utility.addClass(t,"control-label")},rightColumnClass:function(){var t=this.afFieldInputAtts||{};return t["input-col-class"]||""},skipLabel:function(){var t=this,e=b.getInputType(t.afFieldInputAtts);return t.skipLabel||"boolean-checkbox"===e&&!t.afFieldInputAtts.leftLabel}}),s["afObjectField_bootstrap3-horizontal"].helpers({rightColumnClass:function(){var t=this.atts||{};return t["input-col-class"]||""},afFieldLabelAtts:function(){var t={};return u.each(this.atts,function(e,a){0===a.indexOf("label-")&&(t[a.substring(6)]=e)}),t=b.Utility.addClass(t,"control-label")}}),s["afArrayField_bootstrap3-horizontal"].helpers({rightColumnClass:function(){var t=this.atts||{};return t["input-col-class"]||""},afFieldLabelAtts:function(){var t={};return u.each(this.atts,function(e,a){0===a.indexOf("label-")&&(t[a.substring(6)]=e)}),t=b.Utility.addClass(t,"control-label")}}),s["afCheckbox_bootstrap3-horizontal"].helpers({attsPlusSpecialClass:function(){var t=u.clone(this.atts);return t=b.Utility.addClass(t,"autoform-checkbox-margin-fix")},useLeftLabel:function(){return this.atts.leftLabel}})}.call(this),function(){s.__checkName("quickForm_bootstrap3-inline"),s["quickForm_bootstrap3-inline"]=new s("Template.quickForm_bootstrap3-inline",function(){var t=this;return l._TemplateWith(function(){return Spacebars.call(t.lookup("qfAutoFormContext"))},function(){return Spacebars.include(t.lookupTemplate("autoForm"),function(){return["\n    ",l._TemplateWith(function(){return{"label-class":Spacebars.call(t.lookup("labelClass"))}},function(){return Spacebars.include(t.lookupTemplate("afQuickFields"))}),"\n    ",l.If(function(){return Spacebars.call(t.lookup("qfShouldRenderButton"))},function(){return["\n    ",d.BUTTON(d.Attrs({type:"submit"},function(){return Spacebars.attrMustache(t.lookup("submitButtonAtts"))}),"\n    ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup(".."),"atts","buttonContent"))},function(){return["\n    ",l.View(function(){return Spacebars.mustache(t.lookup("."))}),"\n    "]},function(){return"\n    Submit\n    "}),"\n    "),"\n    "]}),"\n  "]})})}),s.__checkName("afFormGroup_bootstrap3-inline"),s["afFormGroup_bootstrap3-inline"]=new s("Template.afFormGroup_bootstrap3-inline",function(){var t=this;return d.DIV({"class":function(){return["form-group ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",l.Unless(function(){return Spacebars.call(t.lookup("skipLabel"))},function(){return["\n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(t.lookup("afFieldLabelAtts"))}),l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"labelText"))},function(){return l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"labelText"))})},function(){return l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})})),"\n    "]}),"\n    ",l._TemplateWith(function(){return Spacebars.call(t.lookup("afFieldInputAtts"))},function(){return Spacebars.include(t.lookupTemplate("afFieldInput"))}),"\n    ",d.SPAN({"class":"help-block"},l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n  ")})}.call(this),function(){function t(){var t,e=0;do t=s.parentData(e++);while(t&&!t.atts);return t&&t.atts}s["quickForm_bootstrap3-inline"].helpers({labelClass:function(){return this.atts["label-class"]},submitButtonAtts:function(){var t=this.atts,e={};return e["class"]="string"==typeof t.buttonClasses?t.buttonClasses:"btn btn-primary autoform-inline-align",e},qfAutoFormContext:function(){var t=u.clone(this.qfAutoFormContext||{});return t=b.Utility.addClass(t,"form-inline"),t["label-class"]&&delete t["label-class"],t}}),s["afFormGroup_bootstrap3-inline"].helpers({afFieldInputAtts:function(){var t=u.clone(this.afFieldInputAtts||{});return t.template="bootstrap3",t}})}.call(this),function(){s.__checkName("quickForm_plain"),s.quickForm_plain=new s("Template.quickForm_plain",function(){var t=this;return l._TemplateWith(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"qfAutoFormContext"))},function(){return Spacebars.include(t.lookupTemplate("autoForm"),function(){return["\n    ",Spacebars.include(t.lookupTemplate("afQuickFields")),"\n    ",l.If(function(){return Spacebars.call(t.lookup("qfShouldRenderButton"))},function(){return["\n    ",d.DIV("\n      ",d.BUTTON(d.Attrs({type:"submit"},function(){return Spacebars.attrMustache(t.lookup("submitButtonAtts"))}),"\n      ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup(".."),"atts","buttonContent"))},function(){return["\n      ",l.View(function(){return Spacebars.mustache(t.lookup("."))}),"\n      "]},function(){return"\n      Submit\n      "}),"\n      "),"\n    "),"\n    "]}),"\n  "]})})}),s.__checkName("afFormGroup_plain"),s.afFormGroup_plain=new s("Template.afFormGroup_plain",function(){var t=this;return d.DIV({"class":function(){return l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return"has-error"})}},"\n    ",l.Unless(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"skipLabel"))},function(){return["\n    ",d.LABEL(d.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"afFieldLabelAtts"))}),l.If(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"labelText"))},function(){return l.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"labelText"))})},function(){return l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})})),"\n    "]}),"\n    ",l._TemplateWith(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"afFieldInputAtts"))},function(){return Spacebars.include(t.lookupTemplate("afFieldInput"))}),"\n    ",d.SPAN(l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))})),"\n  ")}),s.__checkName("afObjectField_plain"),s.afObjectField_plain=new s("Template.afObjectField_plain",function(){var t=this;return d.FIELDSET("\n    ",Spacebars.With(function(){return Spacebars.dataMustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return["\n    ",d.LEGEND(l.View(function(){return Spacebars.mustache(t.lookup("."))})),"\n    "]}),"\n    ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","name"))}},function(){return Spacebars.include(t.lookupTemplate("afQuickFields"))}),"\n  ")}),s.__checkName("afArrayField_plain"),s.afArrayField_plain=new s("Template.afArrayField_plain",function(){var t=this;return d.FIELDSET("\n    ",d.LEGEND(l.View(function(){return Spacebars.mustache(t.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))})),"\n    ",l.If(function(){return Spacebars.dataMustache(t.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")}))},function(){return["\n    ",d.DIV({"class":"autoform-array-field-error"},"\n      ",l.View(function(){return Spacebars.makeRaw(Spacebars.mustache(t.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name")})))}),"\n    "),"\n    "]}),"\n    ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","name")),minCount:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","minCount")),maxCount:Spacebars.call(Spacebars.dot(t.lookup("."),"atts","maxCount"))}},function(){return Spacebars.include(t.lookupTemplate("afEachArrayItem"),function(){return["\n    ",d.DIV({"class":"autoform-array-item"},"\n      ",l._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(t.lookup("."),"name")),label:Spacebars.call(!1)}},function(){return Spacebars.include(t.lookupTemplate("afQuickField"))}),"\n      ",l.If(function(){return Spacebars.dataMustache(t.lookup("afArrayFieldHasMoreThanMinimum"),Spacebars.kw({name:Spacebars.dot(t.lookup(".."),"atts","name"),minCount:Spacebars.dot(t.lookup(".."),"atts","minCount"),maxCount:Spacebars.dot(t.lookup(".."),"atts","maxCount")}))},function(){return["\n      ",d.BUTTON({type:"button","class":"autoform-remove-item"},"Remove"),"\n      "]}),"\n    "),"\n    "]})}),"\n    ",l.If(function(){return Spacebars.dataMustache(t.lookup("afArrayFieldHasLessThanMaximum"),Spacebars.kw({name:Spacebars.dot(t.lookup("."),"atts","name"),minCount:Spacebars.dot(t.lookup("."),"atts","minCount"),maxCount:Spacebars.dot(t.lookup("."),"atts","maxCount")}))},function(){return["\n    ",d.DIV({style:"margin-top: 20px;"},"\n      ",d.BUTTON({type:"button","class":"autoform-add-item","data-autoform-field":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","name"))},"data-autoform-mincount":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","minCount"))},"data-autoform-maxcount":function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"atts","maxCount"))}},"Add"),"\n    "),"\n    "]}),"\n  ")})}.call(this),function(){s.quickForm_plain.helpers({submitButtonAtts:function t(){var t=this.atts,e={};return"string"==typeof t.buttonClasses&&(e["class"]=t.buttonClasses),e}})}.call(this),function(){s.__checkName("quickForm_plain-fieldset"),s["quickForm_plain-fieldset"]=new s("Template.quickForm_plain-fieldset",function(){var t=this;return l._TemplateWith(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"qfAutoFormContext"))},function(){return Spacebars.include(t.lookupTemplate("autoForm"),function(){return["\n    ",d.FIELDSET("\n      ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup(".."),"atts","legend"))},function(){return["\n      ",d.LEGEND(l.View(function(){return Spacebars.mustache(t.lookup("."))})),"\n      "]}),"\n      ",Spacebars.include(t.lookupTemplate("afQuickFields")),"\n    "),"\n    ",l.If(function(){return Spacebars.call(t.lookup("qfShouldRenderButton"))},function(){return["\n    ",d.DIV("\n      ",d.BUTTON(d.Attrs({type:"submit"},function(){return Spacebars.attrMustache(t.lookup("submitButtonAtts"))}),"\n        ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(t.lookup(".."),"atts","buttonContent"))},function(){return["\n        ",l.View(function(){return Spacebars.mustache(t.lookup("."))}),"\n        "]},function(){return"\n        Submit\n        "}),"\n      "),"\n    "),"\n    "]}),"\n  "]})})})}.call(this),function(){s["quickForm_plain-fieldset"].helpers({submitButtonAtts:function t(){var t=this.atts,e={};return"string"==typeof t.buttonClasses&&(e["class"]=t.buttonClasses),e}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:autoform"]={AutoForm:b,Utility:h}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,a=Package.jquery.jQuery;(function(){!function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var a=t.handler,s=t.data.keys.toLowerCase().split(" "),r=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,r)>-1)){var i=e.hotkeys.specialKeys[t.keyCode],o="keypress"===t.type&&String.fromCharCode(t.which).toLowerCase(),n="",f={};t.altKey&&"alt"!==i&&(n+="alt+"),t.ctrlKey&&"ctrl"!==i&&(n+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==i&&(n+="meta+"),t.shiftKey&&"shift"!==i&&(n+="shift+"),i&&(f[n+i]=!0),o&&(f[n+o]=!0,f[n+e.hotkeys.shiftNums[o]]=!0,"shift+"===n&&(f[e.hotkeys.shiftNums[o]]=!0));for(var c=0,y=s.length;y>c;c++)if(f[s[c]])return a.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(this.jQuery)}).call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:jquery-hotkeys"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.tracker.Tracker,a=Package.tracker.Deps,r;(function(){r={},r._deps={},r._dep=new a.Dependency,r.get=function(e){var n=r._deps[e];n||(r._deps[e]=new a.Dependency,n=r._deps[e]),n.depend();var c=document.cookie,t=c.indexOf(e+"=");if(-1===t)return null;t=c.indexOf("=",t)+1;var s=c.indexOf(";",t);return-1===s&&(s=c.length),unescape(c.substring(t,s))},r.set=function(e,n,c){var t=(new Date).getTime();c?(c.seconds&&(t+=1e3*c.seconds),c.minutes&&(t+=1e3*c.minutes*60),c.hours&&(t+=1e3*c.hours*60*60),c.days&&(t+=1e3*c.days*60*60*24),c.months&&(t+=1e3*c.months*60*60*30),c.years&&(t+=1e3*c.years*60*60*24*366),c.clear&&(t=0)):t+=316224e5;var s=""+e+"="+escape(n)+"; expires="+new Date(t).toUTCString()+"; path=/";document.cookie=s;var d=r._deps[e];d||(r._deps[e]=new a.Dependency,d=r._deps[e]),d.changed(),r._dep.changed()},r.list=function(){r._dep.depend();var e=document.cookie,n=e.split(";"),a=[];for(var c in n){var t=n[c].indexOf("=");a.push(n[c].substring(0,t).replace(/^ +/,"").replace(/ +$/,""))}return a},r.clear=function(e){r.set(e,null,{clear:!0})},r.clearAll=function(){var e=document.cookie,n=e.split(";"),a=[];for(var c in n){var t=n[c].indexOf("=");a.push(n[c].substring(0,t).replace(/^ +/,"").replace(/ +$/,""))}for(var c in a)r.clear(a[c]);r._dep.changed()}}).call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:cookies"]={Cookie:r}}();

!function(){var e=Package.meteor.Meteor,i=Package.templating.Template,a=Package.blaze.Blaze,n=Package.blaze.UI,t=Package.blaze.Handlebars,s=Package.htmljs.HTML,l;(function(){i.__define__("MailChimpListSubscribe",function(){var e=this;return s.DIV("\n	",a.If(function(){return Spacebars.call(e.lookup("message"))},function(){return["\n		",s.P({"class":"message"},a.View(function(){return Spacebars.mustache(e.lookup("message"))})),"\n	"]}),s.Raw('\n		<input class="email" type="email" placeholder="email@example.com">\n		<button class="subscribe" type="button">Subscribe</button>\n	'))})}).call(this),function(){var e,a,n,t="Get on the mailing list:",s="Invalid email address :(",c="Subscribing...",o="Check your inbox! :)",r="Already subscribed! O.o",u=function(i){e&&(e.innerHTML=i)},b=function(e){var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(e)},m=function(e){""!==a.value&&b(a.value)?(n.disabled=!1,e&&u(t)):(n.disabled=!0,""!==a.value?u(s):e&&u(t))},f=function(e,i){var n=new l;n.call("lists","subscribe",{id:i,email:{email:e}},function(e,i){if(e){switch(e.error){case 232:u(s);break;case 214:u(r);break;case 200:default:u("Internal error ["+e.error+"]")}console.log("[MailChimp][Subscribe] Error: "+e.error+" - "+e.reason)}else console.log("[MailChimp][Subscribe]: "+a.value+" "+o),console.log(JSON.stringify(i)),u(o);a.disabled=!1,m(!1)})},p=function(e){return a.disabled=!0,n.disabled=!0,u(c),f(a.value),e};i.MailChimpListSubscribe.rendered=function(){e=this.find(".message"),a=this.find(".email"),n=this.find(".subscribe"),n.disabled=""===a.value},i.MailChimpListSubscribe.helpers({message:function(){return t}}),i.MailChimpListSubscribe.events({"focus .email, paste .email, cut .email":function(e){setTimeout(function(e){m(!0)},0)},"keyup .email":function(e){var i=e.which||e.keyCode||e.charCode;(8===i||46===i)&&setTimeout(function(){m(!0)},0)},"keypress .email":function(e){var i=e.which||e.keyCode||e.charCode;setTimeout(function(){m(!0),b(a.value)&&13===i&&p(!0)},0)},"click .subscribe":function(e){m(!0),b(a.value)&&p(!1)}})}.call(this),function(){l=function(e,i){this._options=function(){return{apiKey:e?e:Session.get("MailChimpOptions.apiKey"),options:i}}},l.prototype.call=function(i,a,n,t){e.call("MailChimp",this._options(),i,a,n,function(e,i){t(e,i)})}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:mailchimp"]={MailChimp:l}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["cmather:handlebars-server"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.templating.Template,i=Package.underscore._,n=Package.blaze.Blaze,o=Package.blaze.UI,r=Package.blaze.Handlebars,s=Package.htmljs.HTML;(function(){!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i=document.createElement(t||"div"),n;for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),r=.01+i/n*100,s=Math.max(1-(1-t)/e*(100-r),t),a=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[o]||(u.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",u.cssRules.length),p[o]=1),o}function n(t,e){var i=t.style,n,o;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<d.length;o++)if(n=d[o]+e,void 0!==i[n])return n;return void 0!==i[e]?e:void 0}function o(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function r(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function s(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){this.opts=r(t||{},l.defaults,h)}function c(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,n){function r(){return o(i("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(t,s,c){e(p,e(o(r(),{rotation:360/n.lines*t+"deg",left:~~s}),e(o(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:c}),i("fill",{color:a(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l=n.length+n.width,c=2*l,d=2*-(n.width+n.length)+"px",p=o(r(),{position:"absolute",top:d,left:d}),f;if(n.shadow)for(f=1;f<=n.lines;f++)s(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=n.lines;f++)s(f);return e(t,p)},l.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var d=["webkit","Moz","ms","O"],p={},f,u=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};l.defaults={},r(l.prototype,{spin:function(e){this.stop();var i=this,n=i.opts,r=i.el=o(t(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width;if(o(r,{left:n.left,top:n.top}),e&&e.insertBefore(r,e.firstChild||null),r.setAttribute("role","progressbar"),i.lines(r,i.opts),!f){var a=0,l=(n.lines-1)*(1-n.direction)/2,c,d=n.fps,p=d/n.speed,u=(1-n.opacity)/(p*n.trail/100),h=p/n.lines;!function g(){a++;for(var t=0;t<n.lines;t++)c=Math.max(1-(a+(n.lines-t)*h)%p*u,n.opacity),i.opacity(r,t*n.direction+l,c,n);i.timeout=i.el&&setTimeout(g,~~(1e3/d))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,r){function s(e,i){return o(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l=0,c=(r.lines-1)*(1-r.direction)/2,d;l<r.lines;l++)d=o(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:f&&i(r.opacity,r.trail,c+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(d,o(s("#000","0 0 4px #000"),{top:"2px"})),e(n,e(d,s(a(r.color,l),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var g=o(t("group"),{behavior:"url(#default#VML)"});return!n(g,"transform")&&g.adj?c():f=n(g,"animation"),l})}).call(this),function(){e.__define__("spinner",function(){var t=this;return s.Raw('<div class="spinner-container"></div>')})}.call(this),function(){e.spinner.rendered=function(){var e=i.extend({},t.Spinner.options,this.data);this.spinner=new Spinner(e),this.spinner.spin(this.firstNode)},e.spinner.destroyed=function(){this.spinner&&this.spinner.stop()},t.Spinner={options:{lines:13,length:8,width:3,radius:12,corners:1,rotate:0,direction:1,color:"#000",speed:1.2,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["sacha:spin"]={}}();

!function(){var e=Package.meteor.Meteor,a;"undefined"==typeof Package&&(Package={}),Package["sacha:juice"]={juice:a}}();

!function(){var e=Package.meteor.Meteor;(function(){(function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||a.defaults,this.rules=p.normal,this.options.gfm&&(this.rules=this.options.tables?p.tables:p.gfm)}function t(e,t){if(this.options=t||a.defaults,this.links=e,this.rules=u.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?u.breaks:u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function n(e){this.options=e||{}}function r(e){this.tokens=[],this.token=null,this.options=e||a.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?String.fromCharCode("x"===t.charAt(1)?parseInt(t.substring(2),16):+t.substring(1)):""})}function l(e,t){return e=e.source,t=t||"",function n(r,s){return r?(s=s.source||s,s=s.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,s),n):new RegExp(e,t)}}function o(){}function h(e){for(var t=1,n,r;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function a(t,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n=h({},a.defaults,n||{});var l=n.highlight,o,p,u=0;try{o=e.lex(t,n)}catch(c){return i(c)}p=o.length;var g=function(){var e,t;try{e=r.parse(o,n)}catch(s){t=s}return n.highlight=l,t?i(t):i(null,e)};if(!l||l.length<3)return g();if(delete n.highlight,!p)return g();for(;u<o.length;u++)!function(e){return"code"!==e.type?--p||g():l(e.text,e.lang,function(t,n){return null==n||n===e.text?--p||g():(e.text=n,e.escaped=!0,void(--p||g()))})}(o[u])}else try{return n&&(n=h({},a.defaults,n)),r.parse(e.lex(t,n),n)}catch(c){if(c.message+="\nPlease report this to https://github.com/chjj/marked.",(n||a.defaults).silent)return"<p>An error occured:</p><pre>"+s(c.message+"",!0)+"</pre>";throw c}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:o,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:o,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:o,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=l(p.item,"gm")(/bull/g,p.bullet)(),p.list=l(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=l(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=l(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=l(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=h({},p),p.gfm=h({},p.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),p.gfm.paragraph=l(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=h({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=p,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var e=e.replace(/^ +$/gm,""),r,s,i,l,o,h,a,u,c;e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),h={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},u=0;u<h.align.length;u++)h.align[u]=/^ *-+: *$/.test(h.align[u])?"right":/^ *:-+: *$/.test(h.align[u])?"center":/^ *:-+ *$/.test(h.align[u])?"left":null;for(u=0;u<h.cells.length;u++)h.cells[u]=h.cells[u].split(/ *\| */);this.tokens.push(h)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),l=i[2],this.tokens.push({type:"list_start",ordered:l.length>1}),i=i[0].match(this.rules.item),r=!1,c=i.length,u=0;c>u;u++)h=i[u],a=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(a-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+a+"}","gm"),"")),this.options.smartLists&&u!==c-1&&(o=p.bullet.exec(i[u+1])[0],l===o||l.length>1&&o.length>1||(e=i.slice(u+1).join("\n")+e,u=c-1)),s=r||/\n\n(?!\s*$)/.test(h),u!==c-1&&(r="\n"===h.charAt(h.length-1),s||(s=r)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(h,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(!n&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),h={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<h.align.length;u++)h.align[u]=/^ *-+: *$/.test(h.align[u])?"right":/^ *:-+: *$/.test(h.align[u])?"center":/^ *:-+ *$/.test(h.align[u])?"left":null;for(u=0;u<h.cells.length;u++)h.cells[u]=h.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:o,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:o,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=l(u.link)("inside",u._inside)("href",u._href)(),u.reflink=l(u.reflink)("inside",u._inside)(),u.normal=h({},u),u.pedantic=h({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=h({},u.normal,{escape:l(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=h({},u.gfm,{br:l(u.br)("{2,}","*")(),text:l(u.gfm.text)("{2,}","*")()}),t.rules=u,t.output=function(e,n,r){var s=new t(n,r);return s.output(e)},t.prototype.output=function(e){for(var t="",n,r,i,l;e;)if(l=this.rules.escape.exec(e))e=e.substring(l[0].length),t+=l[1];else if(l=this.rules.autolink.exec(e))e=e.substring(l[0].length),"@"===l[2]?(r=this.mangle(":"===l[1].charAt(6)?l[1].substring(7):l[1]),i=this.mangle("mailto:")+r):(r=s(l[1]),i=r),t+=this.renderer.link(i,null,r);else if(this.inLink||!(l=this.rules.url.exec(e))){if(l=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(l[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(l[0])&&(this.inLink=!1),e=e.substring(l[0].length),t+=this.options.sanitize?s(l[0]):l[0];else if(l=this.rules.link.exec(e))e=e.substring(l[0].length),this.inLink=!0,t+=this.outputLink(l,{href:l[2],title:l[3]}),this.inLink=!1;else if((l=this.rules.reflink.exec(e))||(l=this.rules.nolink.exec(e))){if(e=e.substring(l[0].length),n=(l[2]||l[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){t+=l[0].charAt(0),e=l[0].substring(1)+e;continue}this.inLink=!0,t+=this.outputLink(l,n),this.inLink=!1}else if(l=this.rules.strong.exec(e))e=e.substring(l[0].length),t+=this.renderer.strong(this.output(l[2]||l[1]));else if(l=this.rules.em.exec(e))e=e.substring(l[0].length),t+=this.renderer.em(this.output(l[2]||l[1]));else if(l=this.rules.code.exec(e))e=e.substring(l[0].length),t+=this.renderer.codespan(s(l[2],!0));else if(l=this.rules.br.exec(e))e=e.substring(l[0].length),t+=this.renderer.br();else if(l=this.rules.del.exec(e))e=e.substring(l[0].length),t+=this.renderer.del(this.output(l[1]));else if(l=this.rules.text.exec(e))e=e.substring(l[0].length),t+=s(this.smartypants(l[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(l[0].length),r=s(l[1]),i=r,t+=this.renderer.link(i,null,r);return t},t.prototype.outputLink=function(e,t){var n=s(t.href),r=t.title?s(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,s(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},t.prototype.mangle=function(e){for(var t="",n=e.length,r=0,s;n>r;r++)s=e.charCodeAt(r),Math.random()>.5&&(s="x"+s.toString(16)),t+="&#"+s+";";return t},n.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+s(t,!0)+'">'+(n?e:s(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:s(e,!0))+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},n.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(i(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(s){return""}if(0===r.indexOf("javascript:"))return""}var l='<a href="'+e+'"';return t&&(l+=' title="'+t+'"'),l+=">"+n+"</a>"},n.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},r.parse=function(e,t,n){var s=new r(t,n);return s.parse(e)},r.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e="",t="",n,r,s,i,l;for(s="",n=0;n<this.token.header.length;n++)i={header:!0,align:this.token.align[n]},s+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:!0,align:this.token.align[n]});for(e+=this.renderer.tablerow(s),n=0;n<this.token.cells.length;n++){for(r=this.token.cells[n],s="",l=0;l<r.length;l++)s+=this.renderer.tablecell(this.inline.output(r[l]),{header:!1,align:this.token.align[l]});t+=this.renderer.tablerow(s)}return this.renderer.table(e,t);case"blockquote_start":for(var t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":for(var t="",o=this.token.ordered;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,o);case"list_item_start":for(var t="";"list_item_end"!==this.next().type;)t+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(t);case"loose_item_start":for(var t="";"list_item_end"!==this.next().type;)t+=this.tok();return this.renderer.listitem(t);case"html":var h=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(h);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},o.exec=o,a.options=a.setOptions=function(e){return h(a.defaults,e),a},a.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},a.Parser=r,a.parser=r.parse,a.Renderer=n,a.Lexer=e,a.lexer=e.lex,a.InlineLexer=t,a.inlineLexer=t.output,a.parse=a,"object"==typeof exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):this.marked=a}).call(function(){return this||("undefined"!=typeof window?window:global)}())}).call(this),function(){if(Package.templating){var e=Package.templating.Template,t=Package.htmljs.HTML,n=Package.blaze.Blaze;n.registerHelper("markdown",n.Template("markdown",function(){var e=this,r="";return e.templateContentBlock&&(r=n._toText(e.templateContentBlock,t.TEXTMODE.STRING)),t.Raw(marked(r))}))}}.call(this),"undefined"==typeof Package&&(Package={}),Package["chuangbo:marked"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["percolatestudio:synced-cron"]={}}();

!function(){var t=Package.meteor.Meteor,n=Package.mongo.Mongo,e=Package.tracker.Tracker,o=Package.tracker.Deps,r=Package.underscore._,i=Package.ejson.EJSON,c=Package.minimongo.LocalCollection,a=Package.minimongo.Minimongo,s,u;(function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice.call(arguments,1),e=this,o=function(){},r=function(){return e.apply(this instanceof o&&t?this:t,n.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,r.prototype=new o,r})}).call(this),function(){function e(){var n;if(t.isClient&&c.nonreactive(function(){n=t.userId&&t.userId()}),t.isServer){try{n=t.userId&&t.userId()}catch(e){}n||(n=a.get())}return n}var o={},c=Package.tracker&&Package.tracker.Tracker||Package.deps.Deps,a=new t.EnvironmentVariable,u=new t.EnvironmentVariable,l=function(t){return u.withValue(!0,t)};if(s={defaults:{before:{insert:{},update:{},remove:{},find:{},findOne:{},all:{}},after:{insert:{},update:{},remove:{},find:{},findOne:{},all:{}},all:{insert:{},update:{},remove:{},find:{},findOne:{},all:{}}}},s.extendCollectionInstance=function(n){var c=t.isClient?n:n._collection;r.each(["before","after"],function(e){r.each(o,function(o,r){t._ensure(n,e,r),t._ensure(n,"_hookAspects",r),n._hookAspects[r][e]=[],n[e][r]=function(t,o){var i=n._hookAspects[r][e].push({aspect:t,options:s.initOptions(o,e,r)});return{replace:function(t,o){n._hookAspects[r][e].splice(i-1,1,{aspect:t,options:s.initOptions(o,e,r)})},remove:function(){n._hookAspects[r][e].splice(i-1,1)}}}})}),n.hookOptions=i.clone(s.defaults),r.each(o,function(o,i){var a=c[i];t._ensure(n,"direct",i),n.direct[i]=function(){var t=r.toArray(arguments);return l(function(){return a.apply(c,t)})},c[i]=function(){return u.get()===!0?a.apply(c,arguments):o.call(this,e(),a,n,n._hookAspects[i]||{},function(t){return r.isFunction(n._transform)?function(e){return n._transform(e||t)}:function(n){return n||t}},r.toArray(arguments))}})},s.defineAdvice=function(t,n){o[t]=n},s.initOptions=function(t,n,e){return s.extendOptions(s.defaults,t,n,e)},s.extendOptions=function(t,n,e,o){return n=r.extend(n||{},t.all.all),n=r.extend(n,t[e].all),n=r.extend(n,t.all[o]),n=r.extend(n,t[e][o])},s.getDocs=function(t,n,e){var o=this,r={transform:null,reactive:!1};return e&&(e.multi||(r.limit=1)),t.find(n,r)},s.reassignPrototype=function(e,o){var r="function"==typeof Object.setPrototypeOf;o||(o="undefined"!=typeof n?n.Collection:t.Collection),r?Object.setPrototypeOf(e,o.prototype):e.__proto__&&(e.__proto__=o.prototype)},s.wrapCollection=function(t,n){n._CollectionConstructor||(n._CollectionConstructor=n.Collection),n._CollectionPrototype||(n._CollectionPrototype=new n.Collection(null));var e=n._CollectionConstructor,o=n._CollectionPrototype;t.Collection=function(){var t=e.apply(this,arguments);return s.extendCollectionInstance(this),t},t.Collection.prototype=o;for(var r in e)e.hasOwnProperty(r)&&(t.Collection[r]=e[r])},"undefined"!=typeof n?(s.wrapCollection(t,n),s.wrapCollection(n,n)):s.wrapCollection(t,t),t.isServer){var f=t.publish;t.publish=function(t,n){return f.call(this,t,function(){var t=this,e=arguments;return a.withValue(t&&t.userId,function(){return n.apply(t,e)})})},s.isWithinPublish=function(){return void 0!==a.get()}}}.call(this),function(){s.defineAdvice("insert",function(t,n,e,o,c,a){function s(n,e){var s=a[0];n&&(s=i.clone(a[0]),s._id=n);var u=r.extend({transform:c(s),_id:n,err:e},l);return r.each(o.after,function(n){n.aspect.call(u,t,s)}),n}var u=this,l={context:u,_super:n,args:a},f=r.last(a),p=r.isFunction(f),h,d;return r.each(o.before,function(n){var e=n.aspect.call(r.extend({transform:c(a[0])},l),t,a[0]);e===!1&&(h=!0)}),h?!1:p?(a[a.length-1]=function(t,n){return s(n&&n[0]&&n[0]._id||n,t),f.apply(this,arguments)},n.apply(u,a)):(d=n.apply(u,a),s(d&&d[0]&&d[0]._id||d))})}.call(this),function(){s.defineAdvice("update",function(n,e,o,c,a,l){function f(e,o){var i=t(l[1]),f=s.getDocs.call(p,C,{_id:{$in:u}},l[2]).fetch();r.each(c.after,function(t){r.each(f,function(c){t.aspect.call(r.extend({transform:a(c),previous:k.docs&&k.docs[c._id],affected:e,err:o},h),n,c,i,k.mutator,k.options)})})}var p=this,h={context:p,_super:e,args:l},d=r.last(l),v=r.isFunction(d),g,y,_,m,k={},C=r.has(p,"_collection")?p._collection:p;if(r.isFunction(l[2])&&(d=l[2],l[2]={}),(c.before||c.after)&&(_=t(l[1]),g=s.getDocs.call(p,C,l[0],l[2]).fetch(),u=r.map(g,function(t){return t._id})),c.after&&r.some(c.after,function(t){return t.options.fetchPrevious!==!1})&&s.extendOptions(o.hookOptions,{},"after","update").fetchPrevious!==!1&&(k.mutator=i.clone(l[1]),k.options=i.clone(l[2]),k.docs={},r.each(g,function(t){k.docs[t._id]=i.clone(t)})),r.each(c.before,function(t){r.each(g,function(e){var o=t.aspect.call(r.extend({transform:a(e)},h),n,e,_,l[1],l[2]);o===!1&&(m=!0)})}),m)return!1;if(v)return l[l.length-1]=function(t,n){return f(n,t),d.apply(this,arguments)},e.apply(this,l);var b=e.apply(p,l);return f(b),b});var t=function(t){var n=[];return r.each(t,function(t,e){r.each(r.keys(t),function(t){-1!==t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),r.contains(n,t)||n.push(t)})}),n},t=function(t){var n=[];return r.each(t,function(t,e){r.contains(["$set","$unset","$inc","$push","$pull","$pop","$rename","$pullAll","$addToSet","$bit"],e)?r.each(r.keys(t),function(t){-1!==t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),r.contains(n,t)||n.push(t)}):n.push(e)}),n}}.call(this),function(){s.defineAdvice("remove",function(t,n,e,o,c,a){function u(n){r.each(o.after,function(e){r.each(g,function(o){e.aspect.call(r.extend({transform:c(o),err:n},f),t,o)})})}var l=this,f={context:l,_super:n,args:a},p=r.last(a),h=r.isFunction(p),d,v,g=[],y=r.has(l,"_collection")?l._collection:l;if((o.before||o.after)&&(d=s.getDocs.call(l,y,a[0]).fetch()),o.after&&r.each(d,function(t){g.push(i.clone(t))}),r.each(o.before,function(n){r.each(d,function(e){var o=n.aspect.call(r.extend({transform:c(e)},f),t,e);o===!1&&(v=!0)})}),v)return!1;if(h)return a[a.length-1]=function(t){return u(t),p.apply(this,arguments)},n.apply(l,a);var _=n.apply(l,a);return u(),_})}.call(this),function(){s.defineAdvice("find",function(t,n,e,o,i,c){function a(n){r.each(o.after,function(e){e.aspect.call(u,t,c[0],c[1],n)})}var s=this,u={context:s,_super:n,args:c},l,f;return r.each(o.before,function(n){var e=n.aspect.call(u,t,c[0],c[1]);e===!1&&(f=!0)}),f?!1:(l=n.apply(s,c),a(l),l)})}.call(this),function(){s.defineAdvice("findOne",function(t,n,e,o,i,c){function a(n){r.each(o.after,function(e){e.aspect.call(u,t,c[0],c[1],n)})}var s=this,u={context:s,_super:n,args:c},l,f;return r.each(o.before,function(n){var e=n.aspect.call(u,t,c[0],c[1]);e===!1&&(f=!0)}),f?!1:(l=n.apply(s,c),a(l),l)})}.call(this),function(){t.users&&(s.reassignPrototype(t.users),s.extendCollectionInstance(t.users))}.call(this),"undefined"==typeof Package&&(Package={}),Package["matb33:collection-hooks"]={CollectionHooks:s}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["djedi:sanitize-html"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,i=Package.jquery.jQuery;(function(){!function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function a(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function s(t){return function(){return this[t].apply(this,arguments)}}function n(e,i){function a(t,e){return e.toLowerCase()}var s=t(e).data(),n={},r,h=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var o in s)i.test(o)&&(r=o.replace(h,a),n[r]=s[o]);return n}function r(e){var i={};if(f[e]||(e=e.split("-")[0],f[e])){var a=f[e];return t.each(p,function(t,e){e in a&&(i[e]=a[e])}),i}}var h=t(window),o=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,a=this.length;a>i;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.splice(0)},copy:function(){var t=new o;return t.replace(this),t}};return function(){var i=[];return i.push.apply(i,arguments),t.extend(i,e),i}}(),d=function(e,i){this.dates=new o,this.viewDate=a(),this.focusDate=null,this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(g.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};d.prototype={constructor:d,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),a=i.language;switch(f[a]||(a=a.split("-")[0],f[a]||(a=u.language)),i.language=a,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate=i.multidate!==!1?Math.max(0,i.multidate):1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var s=g.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=i.startDate?i.startDate instanceof Date?this._local_to_utc(this._zero_time(i.startDate)):g.parseDate(i.startDate,s,i.language):-1/0),1/0!==i.endDate&&(i.endDate=i.endDate?i.endDate instanceof Date?this._local_to_utc(this._zero_time(i.endDate)):g.parseDate(i.endDate,s,i.language):1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var n=String(i.orientation).toLowerCase().split(/\s+/g),r=i.orientation.toLowerCase();if(n=t.grep(n,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===n.length)switch(n[0]){case"top":case"bottom":i.orientation.y=n[0];break;case"left":case"right":i.orientation.x=n[0]}else r=t.grep(n,function(t){return/^left|right$/.test(t)}),i.orientation.x=r[0]||"auto",r=t.grep(n,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i=0,a,s,n;i<t.length;i++)a=t[i][0],2===t[i].length?(s=e,n=t[i][1]):3===t[i].length&&(s=t[i][1],n=t[i][2]),a.on(n,s)},_unapplyEvents:function(t){for(var i=0,a,s,n;i<t.length;i++)a=t[i][0],2===t[i].length?(n=e,s=t[i][1]):3===t[i].length&&(n=t[i][1],s=t[i][2]),a.off(s,n)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var a=i||this.dates.get(-1),s=this._utc_to_local(a);this.element.trigger({type:e,date:s,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return g.formatDate(i,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(i){i===e&&(i=this.o.format);var a=this.o.language;return t.map(this.dates,function(t){return g.formatDate(t,i,a)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),i=this.picker.outerHeight(),a=10,s=h.width(),n=h.height(),r=h.scrollTop(),o=parseInt(this.element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"))+10,d=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=d.left,p=d.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(u-=e-c)):(this.picker.addClass("datepicker-orient-left"),d.left<0?u-=d.left-a:d.left+e>s&&(u=s-e-a));var f=this.o.orientation.y,g,v;"auto"===f&&(g=-r+d.top-i,v=r+n-(d.top+l+i),f=Math.max(g,v)===v?"top":"bottom"),this.picker.addClass("datepicker-orient-"+f),"top"===f?p+=l:p-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:u,zIndex:o})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),i=[],a=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),a=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return g.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),a?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+f[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+f[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],a=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n=new Date;return e.getUTCFullYear()<a||e.getUTCFullYear()===a&&e.getUTCMonth()<s?i.push("old"):(e.getUTCFullYear()>a||e.getUTCFullYear()===a&&e.getUTCMonth()>s)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===n.getFullYear()&&e.getUTCMonth()===n.getMonth()&&e.getUTCDate()===n.getDate()&&i.push("today"),-1!==this.dates.contains(e)&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var a=new Date(this.viewDate),s=a.getUTCFullYear(),n=a.getUTCMonth(),r=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,h=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,o=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,d=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,l=f[this.o.language].today||f.en.today||"",c=f[this.o.language].clear||f.en.clear||"",u;this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[n]+" "+s),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=i(s,n-1,28),v=g.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(v),p.setUTCDate(v-(p.getUTCDay()-this.o.weekStart+7)%7);var D=new Date(p);D.setUTCDate(D.getUTCDate()+42),D=D.valueOf();for(var m=[],y;p.valueOf()<D;){if(p.getUTCDay()===this.o.weekStart&&(m.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),k=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),C=new Date(Number(C=i(k.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),_=(k-C)/864e5/7+1;m.push('<td class="cw">'+_+"</td>")}if(y=this.getClassNames(p),y.push("day"),this.o.beforeShowDay!==t.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));T===e?T={}:"boolean"==typeof T?T={enabled:T}:"string"==typeof T&&(T={classes:T}),T.enabled===!1&&y.push("disabled"),T.classes&&(y=y.concat(T.classes.split(/\s+/))),T.tooltip&&(u=T.tooltip)}y=t.unique(y),m.push('<td class="'+y.join(" ")+'"'+(u?' title="'+u+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&m.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var b=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&b.eq(e.getUTCMonth()).addClass("active")}),(r>s||s>o)&&b.addClass("disabled"),s===r&&b.slice(0,h).addClass("disabled"),s===o&&b.slice(d+1).addClass("disabled"),m="",s=10*parseInt(s/10,10);var U=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var M=t.map(this.dates,function(t){return t.getUTCFullYear()}),x,S=-1;11>S;S++)x=["year"],-1===S?x.push("old"):10===S&&x.push("new"),-1!==t.inArray(s,M)&&x.push("active"),(r>s||s>o)&&x.push("disabled"),m+='<span class="'+x.join(" ")+'">'+s+"</span>",s+=1;U.html(m)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(e){e.preventDefault();var a=t(e.target).closest("span, td, th"),s,n,r;if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=g.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var o=new Date;o=i(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var d="linked"===this.o.todayBtn?null:"view";this._setDate(o,d);break;case"clear":var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&l.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":a.is(".disabled")||(this.viewDate.setUTCDate(1),a.is(".month")?(r=1,n=a.parent().find("span").index(a),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(n),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(s,n,r))):(r=1,n=0,s=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(s),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(s,n,r))),this.showMode(-1),this.fill());break;case"td":a.is(".day")&&!a.is(".disabled")&&(r=parseInt(a.text(),10)||1,s=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),a.is(".old")?0===n?(n=11,s-=1):n-=1:a.is(".new")&&(11===n?(n=0,s+=1):n+=1),this._setDate(i(s,n,r)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?-1!==e?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,i){if(!t)return e;if(!i)return t;var a=new Date(t.valueOf()),s=a.getUTCDate(),n=a.getUTCMonth(),r=Math.abs(i),h,o;if(i=i>0?1:-1,1===r)o=-1===i?function(){return a.getUTCMonth()===n}:function(){return a.getUTCMonth()!==h},h=n+i,a.setUTCMonth(h),(0>h||h>11)&&(h=(h+12)%12);else{for(var d=0;r>d;d++)a=this.moveMonth(a,i);h=a.getUTCMonth(),a.setUTCDate(s),o=function(){return h!==a.getUTCMonth()}}for(;o();)a.setUTCDate(--s),a.setUTCMonth(h);return a},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e=!1,i,s,n,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;i=37===t.keyCode?-1:1,t.ctrlKey?(s=this.moveYear(this.dates.get(-1)||a(),i),n=this.moveYear(r,i),this._trigger("changeYear",this.viewDate)):t.shiftKey?(s=this.moveMonth(this.dates.get(-1)||a(),i),n=this.moveMonth(r,i),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.dates.get(-1)||a()),s.setUTCDate(s.getUTCDate()+i),n=new Date(r),n.setUTCDate(r.getUTCDate()+i)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;i=38===t.keyCode?-1:1,t.ctrlKey?(s=this.moveYear(this.dates.get(-1)||a(),i),n=this.moveYear(r,i),this._trigger("changeYear",this.viewDate)):t.shiftKey?(s=this.moveMonth(this.dates.get(-1)||a(),i),n=this.moveMonth(r,i),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.dates.get(-1)||a()),s.setUTCDate(s.getUTCDate()+7*i),n=new Date(r),n.setUTCDate(r.getUTCDate()+7*i)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(r),e=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(e){this._trigger(this.dates.length?"changeDate":"clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var l=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker"),a=i.getUTCDate(),s=t.inArray(e.target,this.inputs),n=this.inputs.length;if(-1!==s){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(a)}),a<this.dates[s])for(;s>=0&&a<this.dates[s];)this.pickers[s--].setUTCDate(a);else if(a>this.dates[s])for(;n>s&&a>this.dates[s];)this.pickers[s++].setUTCDate(a);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var c=t.fn.datepicker;t.fn.datepicker=function(i){var a=Array.apply(null,arguments);a.shift();var s;return this.each(function(){var h=t(this),o=h.data("datepicker"),c="object"==typeof i&&i;if(!o){var p=n(this,"date"),f=t.extend({},u,p,c),g=r(f.language),v=t.extend({},u,g,p,c);if(h.is(".input-daterange")||v.inputs){var D={inputs:v.inputs||h.find("input").toArray()};h.data("datepicker",o=new l(this,t.extend(v,D)))}else h.data("datepicker",o=new d(this,v))}return"string"==typeof i&&"function"==typeof o[i]&&(s=o[i].apply(o,a),s!==e)?!1:void 0}),s!==e?s:this};var u=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=d;var f=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,g.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(a,s,n){function r(){var t=this.slice(0,o[u].length),e=o[u].slice(0,t.length);return t===e}if(!a)return e;if(a instanceof Date)return a;"string"==typeof s&&(s=g.parseFormat(s));var h=/([\-+]\d+)([dmwy])/,o=a.match(/([\-+]\d+)([dmwy])/g),l,c,u;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){for(a=new Date,u=0;u<o.length;u++)switch(l=h.exec(o[u]),c=parseInt(l[1]),l[2]){case"d":a.setUTCDate(a.getUTCDate()+c);break;case"m":a=d.prototype.moveMonth.call(d.prototype,a,c);break;case"w":a.setUTCDate(a.getUTCDate()+7*c);break;case"y":a=d.prototype.moveYear.call(d.prototype,a,c)}return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0)}o=a&&a.match(this.nonpunctuation)||[],a=new Date;var p={},v=["yyyy","yy","M","MM","m","mm","d","dd"],D={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}},m,y;D.M=D.MM=D.mm=D.m,D.dd=D.d,a=i(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var w=s.parts.slice();if(o.length!==w.length&&(w=t(w).filter(function(e,i){return-1!==t.inArray(i,v)}).toArray()),o.length===w.length){var k;for(u=0,k=w.length;k>u;u++){if(m=parseInt(o[u],10),l=w[u],isNaN(m))switch(l){case"MM":y=t(f[n].months).filter(r),m=t.inArray(y[0],f[n].months)+1;break;case"M":y=t(f[n].monthsShort).filter(r),m=t.inArray(y[0],f[n].monthsShort)+1}p[l]=m}var C,_;for(u=0;u<v.length;u++)_=v[u],_ in p&&!isNaN(p[_])&&(C=new Date(a),D[_](C,p[_]),isNaN(C)||(a=C))}return a},formatDate:function(e,i,a){if(!e)return"";"string"==typeof i&&(i=g.parseFormat(i));var s={d:e.getUTCDate(),D:f[a].daysShort[e.getUTCDay()],DD:f[a].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:f[a].monthsShort[e.getUTCMonth()],MM:f[a].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,e=[];for(var n=t.extend([],i.separators),r=0,h=i.parts.length;h>=r;r++)n.length&&e.push(n.shift()),e.push(s[i.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=g,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=c,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery)}).call(this),"undefined"==typeof Package&&(Package={}),Package["rajit:bootstrap3-datepicker"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.stylus={}}();

!function(){var t=Package.meteor.Meteor,n;(function(){n=n||function(t,n){var i={},e=i.lib={},r=e.Base=function(){function t(){}return{extend:function(n){t.prototype=this;var i=new t;return n&&i.mixIn(n),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=e.WordArray=r.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=n?i:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var n=this.words,i=t.words,e=this.sigBytes,r=t.sigBytes;if(this.clamp(),e%4)for(var s=0;r>s;s++){var o=i[s>>>2]>>>24-s%4*8&255;n[e+s>>>2]|=o<<24-(e+s)%4*8}else if(i.length>65535)for(var s=0;r>s;s+=4)n[e+s>>>2]=i[s>>>2];else n.push.apply(n,i);return this.sigBytes+=r,this},clamp:function(){var n=this.words,i=this.sigBytes;n[i>>>2]&=4294967295<<32-i%4*8,n.length=t.ceil(i/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(n){for(var i=[],e=0;n>e;e+=4)i.push(4294967296*t.random()|0);return new s.init(i,n)}}),o=i.enc={},a=o.Hex={stringify:function(t){for(var n=t.words,i=t.sigBytes,e=[],r=0;i>r;r++){var s=n[r>>>2]>>>24-r%4*8&255;e.push((s>>>4).toString(16)),e.push((15&s).toString(16))}return e.join("")},parse:function(t){for(var n=t.length,i=[],e=0;n>e;e+=2)i[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new s.init(i,n/2)}},c=o.Latin1={stringify:function(t){for(var n=t.words,i=t.sigBytes,e=[],r=0;i>r;r++){var s=n[r>>>2]>>>24-r%4*8&255;e.push(String.fromCharCode(s))}return e.join("")},parse:function(t){for(var n=t.length,i=[],e=0;n>e;e++)i[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new s.init(i,n)}},u=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(n){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=e.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var i=this._data,e=i.words,r=i.sigBytes,o=this.blockSize,a=4*o,c=r/a;c=n?t.ceil(c):t.max((0|c)-this._minBufferSize,0);var u=c*o,f=t.min(4*u,r);if(u){for(var h=0;u>h;h+=o)this._doProcessBlock(e,h);var p=e.splice(0,u);i.sigBytes-=f}return new s.init(p,f)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=e.Hasher=f.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var n=this._doFinalize();return n},blockSize:16,_createHelper:function(t){return function(n,i){return new t.init(i).finalize(n)}},_createHmacHelper:function(t){return function(n,i){return new p.HMAC.init(t,i).finalize(n)}}}),p=i.algo={};return i}(Math)}).call(this),"undefined"==typeof Package&&(Package={}),Package["jparker:crypto-core"]={CryptoJS:n}}();

!function(){var r=Package.meteor.Meteor,a=Package["jparker:crypto-core"].CryptoJS;(function(){!function(r){function e(r,a,e,t,n,o,c){var i=r+(a&e|~a&t)+n+c;return(i<<o|i>>>32-o)+a}function t(r,a,e,t,n,o,c){var i=r+(a&t|e&~t)+n+c;return(i<<o|i>>>32-o)+a}function n(r,a,e,t,n,o,c){var i=r+(a^e^t)+n+c;return(i<<o|i>>>32-o)+a}function o(r,a,e,t,n,o,c){var i=r+(e^(a|~t))+n+c;return(i<<o|i>>>32-o)+a}var c=a,i=c.lib,s=i.WordArray,h=i.Hasher,u=c.algo,f=[];!function(){for(var a=0;64>a;a++)f[a]=4294967296*r.abs(r.sin(a+1))|0}();var v=u.MD5=h.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(r,a){for(var c=0;16>c;c++){var i=a+c,s=r[i];r[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var h=this._hash.words,u=r[a+0],v=r[a+1],l=r[a+2],_=r[a+3],d=r[a+4],g=r[a+5],p=r[a+6],k=r[a+7],y=r[a+8],P=r[a+9],H=r[a+10],M=r[a+11],m=r[a+12],w=r[a+13],B=r[a+14],D=r[a+15],b=h[0],j=h[1],x=h[2],z=h[3];b=e(b,j,x,z,u,7,f[0]),z=e(z,b,j,x,v,12,f[1]),x=e(x,z,b,j,l,17,f[2]),j=e(j,x,z,b,_,22,f[3]),b=e(b,j,x,z,d,7,f[4]),z=e(z,b,j,x,g,12,f[5]),x=e(x,z,b,j,p,17,f[6]),j=e(j,x,z,b,k,22,f[7]),b=e(b,j,x,z,y,7,f[8]),z=e(z,b,j,x,P,12,f[9]),x=e(x,z,b,j,H,17,f[10]),j=e(j,x,z,b,M,22,f[11]),b=e(b,j,x,z,m,7,f[12]),z=e(z,b,j,x,w,12,f[13]),x=e(x,z,b,j,B,17,f[14]),j=e(j,x,z,b,D,22,f[15]),b=t(b,j,x,z,v,5,f[16]),z=t(z,b,j,x,p,9,f[17]),x=t(x,z,b,j,M,14,f[18]),j=t(j,x,z,b,u,20,f[19]),b=t(b,j,x,z,g,5,f[20]),z=t(z,b,j,x,H,9,f[21]),x=t(x,z,b,j,D,14,f[22]),j=t(j,x,z,b,d,20,f[23]),b=t(b,j,x,z,P,5,f[24]),z=t(z,b,j,x,B,9,f[25]),x=t(x,z,b,j,_,14,f[26]),j=t(j,x,z,b,y,20,f[27]),b=t(b,j,x,z,w,5,f[28]),z=t(z,b,j,x,l,9,f[29]),x=t(x,z,b,j,k,14,f[30]),j=t(j,x,z,b,m,20,f[31]),b=n(b,j,x,z,g,4,f[32]),z=n(z,b,j,x,y,11,f[33]),x=n(x,z,b,j,M,16,f[34]),j=n(j,x,z,b,B,23,f[35]),b=n(b,j,x,z,v,4,f[36]),z=n(z,b,j,x,d,11,f[37]),x=n(x,z,b,j,k,16,f[38]),j=n(j,x,z,b,H,23,f[39]),b=n(b,j,x,z,w,4,f[40]),z=n(z,b,j,x,u,11,f[41]),x=n(x,z,b,j,_,16,f[42]),j=n(j,x,z,b,p,23,f[43]),b=n(b,j,x,z,P,4,f[44]),z=n(z,b,j,x,m,11,f[45]),x=n(x,z,b,j,D,16,f[46]),j=n(j,x,z,b,l,23,f[47]),b=o(b,j,x,z,u,6,f[48]),z=o(z,b,j,x,k,10,f[49]),x=o(x,z,b,j,B,15,f[50]),j=o(j,x,z,b,g,21,f[51]),b=o(b,j,x,z,m,6,f[52]),z=o(z,b,j,x,_,10,f[53]),x=o(x,z,b,j,H,15,f[54]),j=o(j,x,z,b,v,21,f[55]),b=o(b,j,x,z,y,6,f[56]),z=o(z,b,j,x,D,10,f[57]),x=o(x,z,b,j,p,15,f[58]),j=o(j,x,z,b,w,21,f[59]),b=o(b,j,x,z,d,6,f[60]),z=o(z,b,j,x,M,10,f[61]),x=o(x,z,b,j,l,15,f[62]),j=o(j,x,z,b,P,21,f[63]),h[0]=h[0]+b|0,h[1]=h[1]+j|0,h[2]=h[2]+x|0,h[3]=h[3]+z|0},_doFinalize:function(){var a=this._data,e=a.words,t=8*this._nDataBytes,n=8*a.sigBytes;e[n>>>5]|=128<<24-n%32;var o=r.floor(t/4294967296),c=t;e[(n+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e[(n+64>>>9<<4)+14]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),a.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,s=i.words,h=0;4>h;h++){var u=s[h];s[h]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return i},clone:function(){var r=h.clone.call(this);return r._hash=this._hash.clone(),r}});c.MD5=h._createHelper(v),c.HmacMD5=h._createHmacHelper(v)}(Math)}).call(this),"undefined"==typeof Package&&(Package={}),Package["jparker:crypto-md5"]={}}();

!function(){var a=Package.meteor.Meteor,r=Package["jparker:crypto-core"].CryptoJS,t;(function(){t={cleanString:function(a){return a.trim().toLowerCase()},isHash:function(a){var r=this;return/^[a-f0-9]{32}$/i.test(r.cleanString(a))},hash:function(a){var t=this;return r.MD5(t.cleanString(a)).toString()},imageUrl:function(a,r){var t=this;r=r||{};var e=r.secure?"https://secure.gravatar.com/avatar/":"http://www.gravatar.com/avatar/";e+=t.isHash(a)?a:t.hash(a),delete r.secure;var n=_.map(r,function(a,r){return r+"="+encodeURIComponent(a)}).join("&");return n.length>0&&(e+="?"+n),e}}}).call(this),"undefined"==typeof Package&&(Package={}),Package["jparker:gravatar"]={Gravatar:t}}();

!function(){var a=Package.meteor.Meteor,e=Package.templating.Template,t=Package["reactive-var"].ReactiveVar,r=Package.underscore._,s=Package["jparker:gravatar"].Gravatar,i=Package.blaze.Blaze,n=Package.blaze.UI,o=Package.blaze.Handlebars,c=Package.htmljs.HTML,l,u,p,h;(function(){e.__checkName("avatar"),e.avatar=new e("Template.avatar",function(){var a=this;return c.DIV({"class":function(){return["avatar ",Spacebars.mustache(a.lookup("size"))," ",Spacebars.mustache(a.lookup("shape"))," ",Spacebars.mustache(a.lookup("hideClass"))," ",Spacebars.mustache(a.lookup("class"))]}},"\n    ",c.IMG(c.Attrs({"class":"avatar-image",src:function(){return Spacebars.mustache(a.lookup("imageUrl"))}},function(){return Spacebars.attrMustache(a.lookup("dimensions"))})),"\n    ",c.SPAN({"class":"avatar-initials",style:function(){return Spacebars.mustache(a.lookup("initialsCss"))}},i.View(function(){return Spacebars.mustache(a.lookup("initialsText"))})),"\n  ")})}).call(this),function(){e.avatar.helpers({size:function(){var a=["large","small"];return r.contains(a,this.size)?"avatar-"+this.size:""},dimensions:function(){var a;return a="small"===this.size?30:"large"===this.size?80:40,{width:a,height:a}},shape:function(){var a=["rounded","circle"];return r.contains(a,this.shape)?"avatar-"+this.shape:""},hideClass:function(){var a=e.instance().hasImage.get();return a?"avatar-hide-initials":"avatar-hide-image"},"class":function(){return this.class},imageUrl:function(){var e=this.user?this.user:a.users.findOne(this.userId);return l.getUrl(e)},initialsCss:function(){var a="";return this.bgColor&&(a+="background-color: "+this.bgColor+";"),this.txtColor&&(a+="color: "+this.txtColor+";"),a},initialsText:function(){var e=this.user?this.user:a.users.findOne(this.userId);return this.initials||l.getInitials(e)}}),e.avatar.created=function(){this.hasImage=new t(!0)},e.avatar.rendered=function(){var a=this;this.$("img").on("error",function(){a.hasImage.set(!1)}).on("load",function(){a.hasImage.set(!0)})}}.call(this),function(){l={options:{emailHashProperty:"",defaultType:"",defaultImageUrl:"",gravatarDefault:""},getInitials:function(a){var e="",t=[];return a&&a.profile&&a.profile.firstName?(e=a.profile.firstName.charAt(0).toUpperCase(),a.profile.lastName?e+=a.profile.lastName.charAt(0).toUpperCase():a.profile.familyName?e+=a.profile.familyName.charAt(0).toUpperCase():a.profile.secondName&&(e+=a.profile.secondName.charAt(0).toUpperCase())):a&&a.profile&&a.profile.name&&(t=a.profile.name.split(" "),e=r.first(t).charAt(0).toUpperCase(),t.length>1&&(e+=r.last(t).charAt(0).toUpperCase())),e},getUrl:function(e){var t=l.options.defaultImageUrl||"packages/bengott_avatar/default.png";-1===t.indexOf("//")&&("/"===t.charAt(0)&&(t=t.slice(1)),t=a.absoluteUrl()+t);var r="",s=u(e);return"twitter"===s?r=e.services.twitter.profile_image_url.replace("_normal.","_200x200."):"facebook"===s?r="http://graph.facebook.com/"+e.services.facebook.id+"/picture?type=large":"google"===s?r=e.services.google.picture:"github"===s?r="http://avatars.githubusercontent.com/"+e.services.github.username+"?s=200":"instagram"===s?r=e.services.instagram.profile_picture:"none"===s&&(r=p(e,t)),r}}}.call(this),function(){u=function(a){return a&&a.services&&a.services.twitter?"twitter":a&&a.services&&a.services.facebook?"facebook":a&&a.services&&a.services.google?"google":a&&a.services&&a.services.github?"github":a&&a.services&&a.services.instagram?"instagram":"none"},p=function(e,t){var i,n=["404","mm","identicon","monsterid","wavatar","retro","blank"];if("image"===l.options.defaultType){var o=r.contains(n,l.options.gravatarDefault);i=o?l.options.gravatarDefault:t}else i="404";var c={"default":i,size:200,secure:"https:"===a.absoluteUrl().slice(0,6)},u=h(e);return s.imageUrl(u,c)},h=function(a){var e;return e=l.options.emailHashProperty?a[l.options.emailHashProperty]:a&&a.emails?a.emails[0].address:"00000000000000000000000000000000"}}.call(this),"undefined"==typeof Package&&(Package={}),Package["bengott:avatar"]={Avatar:l}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}();

!function(){var e=Package.underscore._,n=Package.meteor.Meteor,r=Package.tracker.Tracker,t=Package.tracker.Deps,a=Package.session.Session,u=Package.jquery.$,o=Package.jquery.jQuery,s=Package.templating.Template,i=Package.blaze.Blaze,l=Package.blaze.UI,c=Package.blaze.Handlebars,f=Package.htmljs.HTML,p,m,g,b;(function(){g={fallback_language:"en",langauges_tags_regex:"([a-z]{2})(-[A-Z]{2})?",project_translations_domain:"project",browser_path:"/tap-i18n",debug:!1}}).call(this),function(){p={},function(){function e(e,n){if(!n||"function"==typeof n)return e;for(var r in n)e[r]=n[r];return e}function n(e,n,r){var t,a=0,u=e.length,o=void 0===u||"[object Array]"!==Object.prototype.toString.apply(e)||"function"==typeof e;if(r)if(o){for(t in e)if(n.apply(e[t],r)===!1)break}else for(;u>a&&n.apply(e[a++],r)!==!1;);else if(o){for(t in e)if(n.call(e[t],t,e[t])===!1)break}else for(;u>a&&n.call(e[a],a,e[a++])!==!1;);return e}function r(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return E[e]}):e}function t(e){var n=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(n){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(new Error)},r=function(e){if("string"==typeof e)return e;var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")},t=function(e){e=e.replace(/\r\n/g,"\n");for(var n="",r=0;r<e.length;r++){var t=e.charCodeAt(r);128>t?n+=String.fromCharCode(t):t>127&&2048>t?(n+=String.fromCharCode(t>>6|192),n+=String.fromCharCode(63&t|128)):(n+=String.fromCharCode(t>>12|224),n+=String.fromCharCode(t>>6&63|128),n+=String.fromCharCode(63&t|128))}return n},a=function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=t(e);var r="",a,u,o,s,i,l,c,f=0;do a=e.charCodeAt(f++),u=e.charCodeAt(f++),o=e.charCodeAt(f++),s=a>>2,i=(3&a)<<4|u>>4,l=(15&u)<<2|o>>6,c=63&o,isNaN(u)?l=c=64:isNaN(o)&&(c=64),r+=n.charAt(s)+n.charAt(i)+n.charAt(l)+n.charAt(c),a=u=o="",s=i=l=c="";while(f<e.length);return r},u=function(){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e},o=function(e,t,a,s){"function"==typeof a&&(s=a,a={}),a.cache=a.cache||!1,a.data=a.data||{},a.headers=a.headers||{},a.jsonp=a.jsonp||!1,a.async=void 0===a.async?!0:a.async;var i=u({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},o.headers,a.headers),l;if(l="application/json"===i["content-type"]?JSON.stringify(a.data):r(a.data),"GET"===e){var c=[];if(l&&(c.push(l),l=null),a.cache||c.push("_="+(new Date).getTime()),a.jsonp&&(c.push("callback="+a.jsonp),c.push("jsonp="+a.jsonp)),c=c.join("&"),c.length>1&&(t+=t.indexOf("?")>-1?"&"+c:"?"+c),a.jsonp){var f=document.getElementsByTagName("head")[0],p=document.createElement("script");return p.type="text/javascript",p.src=t,void f.appendChild(p)}}n(function(n,r){if(n)return s(n);r.open(e,t,a.async);for(var u in i)i.hasOwnProperty(u)&&r.setRequestHeader(u,i[u]);r.onreadystatechange=function(){if(4===r.readyState){var e=r.responseText||"";if(!s)return;s(r.status,{text:function(){return e},json:function(){return JSON.parse(e)}})}},r.send(l)})},s={authBasic:function(e,n){o.headers.Authorization="Basic "+a(e+":"+n)},connect:function(e,n,r){return o("CONNECT",e,n,r)},del:function(e,n,r){return o("DELETE",e,n,r)},get:function(e,n,r){return o("GET",e,n,r)},head:function(e,n,r){return o("HEAD",e,n,r)},headers:function(e){o.headers=e||{}},isAllowed:function(e,n,r){this.options(e,function(e,t){r(-1!==t.text().indexOf(n))})},options:function(e,n,r){return o("OPTIONS",e,n,r)},patch:function(e,n,r){return o("PATCH",e,n,r)},post:function(e,n,r){return o("POST",e,n,r)},put:function(e,n,r){return o("PUT",e,n,r)},trace:function(e,n,r){return o("TRACE",e,n,r)}},i=e.type?e.type.toLowerCase():"get";s[i](e.url,e,function(n,r){200===n?e.success(r.json(),n,null):e.error(r.text(),n,null)})}function a(e,n){"function"==typeof e&&(n=e,e={}),e=e||{},D.extend(M,e),delete M.fixLng,"string"==typeof M.ns&&(M.ns={namespaces:[M.ns],defaultNs:M.ns}),"string"==typeof M.fallbackNS&&(M.fallbackNS=[M.fallbackNS]),("string"==typeof M.fallbackLng||"boolean"==typeof M.fallbackLng)&&(M.fallbackLng=[M.fallbackLng]),M.interpolationPrefixEscaped=D.regexEscape(M.interpolationPrefix),M.interpolationSuffixEscaped=D.regexEscape(M.interpolationSuffix),M.lng||(M.lng=D.detectLanguage()),M.lng?M.useCookie&&D.cookie.create(M.cookieName,M.lng,M.cookieExpirationTime,M.cookieDomain):(M.lng=M.fallbackLng[0],M.useCookie&&D.cookie.remove(M.cookieName)),A=D.toLanguages(M.lng),T=A[0],D.log("currentLng set to: "+T);var r=x;e.fixLng&&(r=function(e,n){return n=n||{},n.lng=n.lng||r.lng,x(e,n)},r.lng=T),z.setCurrentLng(T),S&&M.setJqueryExt&&g();var t;if(S&&S.Deferred&&(t=S.Deferred()),!M.resStore){var a=D.toLanguages(M.lng);"string"==typeof M.preload&&(M.preload=[M.preload]);for(var u=0,o=M.preload.length;o>u;u++)for(var s=D.toLanguages(M.preload[u]),i=0,l=s.length;l>i;i++)a.indexOf(s[i])<0&&a.push(s[i]);return p.sync.load(a,M,function(e,a){O=a,C=!0,n&&n(r),t&&t.resolve(r)}),t?t.promise():void 0}return O=M.resStore,C=!0,n&&n(r),t&&t.resolve(r),t?t.promise():void 0}function u(e,n){"string"==typeof e&&(e=[e]);for(var r=0,t=e.length;t>r;r++)M.preload.indexOf(e[r])<0&&M.preload.push(e[r]);return a(n)}function o(e,n,r){"string"!=typeof n?(r=n,n=M.ns.defaultNs):M.ns.namespaces.indexOf(n)<0&&M.ns.namespaces.push(n),O[e]=O[e]||{},O[e][n]=O[e][n]||{},D.extend(O[e][n],r)}function s(e,n){"string"!=typeof n&&(n=M.ns.defaultNs),O[e]=O[e]||{},O[e][n]={}}function i(e){M.ns.defaultNs=e}function l(e,n){c([e],n)}function c(e,n){var r={dynamicLoad:M.dynamicLoad,resGetPath:M.resGetPath,getAsync:M.getAsync,customLoad:M.customLoad,ns:{namespaces:e,defaultNs:""}},t=D.toLanguages(M.lng);"string"==typeof M.preload&&(M.preload=[M.preload]);for(var a=0,u=M.preload.length;u>a;a++)for(var o=D.toLanguages(M.preload[a]),s=0,i=o.length;i>s;s++)t.indexOf(o[s])<0&&t.push(o[s]);for(var l=[],c=0,f=t.length;f>c;c++){var m=!1,g=O[t[c]];if(g)for(var b=0,d=e.length;d>b;b++)g[e[b]]||(m=!0);else m=!0;m&&l.push(t[c])}l.length?p.sync._fetch(l,r,function(r,t){var a=e.length*l.length;D.each(e,function(e,r){M.ns.namespaces.indexOf(r)<0&&M.ns.namespaces.push(r),D.each(l,function(e,u){O[u]=O[u]||{},O[u][r]=t[u][r],a--,0===a&&n&&(M.useLocalStorage&&p.sync._storeLocal(O),n())})})}):n&&n()}function f(e,n,r){return"function"==typeof n?(r=n,n={}):n||(n={}),n.lng=e,a(n,r)}function m(){return T}function g(){function e(e,n,r){if(0!==n.length){var t="text";if(0===n.indexOf("[")){var a=n.split("]");n=a[1],t=a[0].substr(1,a[0].length-1)}n.indexOf(";")===n.length-1&&(n=n.substr(0,n.length-2));var u;if("html"===t)u=M.defaultValueFromContent?S.extend({defaultValue:e.html()},r):r,e.html(S.t(n,u));else if("text"===t)u=M.defaultValueFromContent?S.extend({defaultValue:e.text()},r):r,e.text(S.t(n,u));else if("prepend"===t)u=M.defaultValueFromContent?S.extend({defaultValue:e.html()},r):r,e.prepend(S.t(n,u));else if("append"===t)u=M.defaultValueFromContent?S.extend({defaultValue:e.html()},r):r,e.append(S.t(n,u));else if(0===t.indexOf("data-")){var o=t.substr("data-".length);u=M.defaultValueFromContent?S.extend({defaultValue:e.data(o)},r):r;var s=S.t(n,u);e.data(o,s),e.attr(t,s)}else u=M.defaultValueFromContent?S.extend({defaultValue:e.attr(t)},r):r,e.attr(t,S.t(n,u))}}function n(n,r){var t=n.attr(M.selectorAttr);if(t||"undefined"==typeof t||t===!1||(t=n.text()||n.val()),t){var a=n,u=n.data("i18n-target");if(u&&(a=n.find(u)||n),r||M.useDataAttrOptions!==!0||(r=n.data("i18n-options")),r=r||{},t.indexOf(";")>=0){var o=t.split(";");S.each(o,function(n,t){""!==t&&e(a,t,r)})}else e(a,t,r);M.useDataAttrOptions===!0&&n.data("i18n-options",r)}}S.t=S.t||x,S.fn.TAPi18next=function(e){return this.each(function(){n(S(this),e);var r=S(this).find("["+M.selectorAttr+"]");r.each(function(){n(S(this),e)})})}}function b(e,n,r,t){if(!e)return e;if(t=t||n,e.indexOf(t.interpolationPrefix||M.interpolationPrefix)<0)return e;var a=t.interpolationPrefix?D.regexEscape(t.interpolationPrefix):M.interpolationPrefixEscaped,u=t.interpolationSuffix?D.regexEscape(t.interpolationSuffix):M.interpolationSuffixEscaped,o="HTML"+u;return D.each(n,function(n,s){var i=r?r+M.keyseparator+n:n;"object"==typeof s&&null!==s?e=b(e,s,i,t):t.escapeInterpolation||M.escapeInterpolation?(e=e.replace(new RegExp([a,i,o].join(""),"g"),s),e=e.replace(new RegExp([a,i,u].join(""),"g"),D.escape(s))):e=e.replace(new RegExp([a,i,u].join(""),"g"),s)}),e}function d(e,n){var r=",",t="{",a="}",u=D.extend({},n);for(delete u.postProcess;-1!=e.indexOf(M.reusePrefix)&&(w++,!(w>M.maxRecursion));){var o=e.lastIndexOf(M.reusePrefix),s=e.indexOf(M.reuseSuffix,o)+M.reuseSuffix.length,i=e.substring(o,s),l=i.replace(M.reusePrefix,"").replace(M.reuseSuffix,"");if(-1!=l.indexOf(r)){var c=l.indexOf(r);if(-1!=l.indexOf(t,c)&&-1!=l.indexOf(a,c)){var f=l.indexOf(t,c),p=l.indexOf(a,f)+a.length;try{u=D.extend(u,JSON.parse(l.substring(f,p))),l=l.substring(0,c)}catch(m){}}}var g=_(l,u);e=e.replace(i,g)}return e}function h(e){return e.context&&("string"==typeof e.context||"number"==typeof e.context)}function v(e){return void 0!==e.count&&"string"!=typeof e.count&&1!==e.count}function y(e,n){n=n||{};var r=N(e,n),t=j(e,n);return void 0!==t||t===r}function x(e,n){return n=n||{},C?(w=0,_.apply(null,arguments)):(D.log("i18next not finished initialization. you might have called t function before loading resources finished."),n.defaultValue||"")}function N(e,n){return void 0!==n.defaultValue?n.defaultValue:e}function k(){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return{postProcess:"sprintf",sprintf:e}}function _(e,n){if(n&&"object"!=typeof n?"sprintf"===M.shortcutFunction?n=k.apply(null,arguments):"defaultValue"===M.shortcutFunction&&(n={defaultValue:n}):n=n||{},void 0===e||null===e)return"";"string"==typeof e&&(e=[e]);var r=e[0];if(e.length>1)for(var t=0;t<e.length&&(r=e[t],!y(r,n));t++);var a=N(r,n),u=j(r,n),o=n.lng?D.toLanguages(n.lng):A,s=n.ns||M.ns.defaultNs,i;r.indexOf(M.nsseparator)>-1&&(i=r.split(M.nsseparator),s=i[0],r=i[1]),void 0===u&&M.sendMissing&&(n.lng?H.postMissing(o[0],s,r,a,o):H.postMissing(M.lng,s,r,a,o));var l=n.postProcess||M.postProcess;void 0!==u&&l&&I[l]&&(u=I[l](u,r,n));var c=a;if(a.indexOf(M.nsseparator)>-1&&(i=a.split(M.nsseparator),c=i[1]),c===r&&M.parseMissingKey&&(a=M.parseMissingKey(a)),void 0===u&&(a=b(a,n),a=d(a,n),l&&I[l])){var f=N(r,n);u=I[l](f,r,n)}return void 0!==u?u:a}function j(e,n){n=n||{};var r,t,a=N(e,n),u=A;if(!O)return a;if("cimode"===u[0].toLowerCase())return a;if(n.lng&&(u=D.toLanguages(n.lng),!O[u[0]])){var o=M.getAsync;M.getAsync=!1,p.sync.load(u,M,function(e,n){D.extend(O,n),M.getAsync=o})}var s=n.ns||M.ns.defaultNs;if(e.indexOf(M.nsseparator)>-1){var i=e.split(M.nsseparator);s=i[0],e=i[1]}if(h(n)){r=D.extend({},n),delete r.context,r.defaultValue=M.contextNotFound;var l=s+M.nsseparator+e+"_"+n.context;if(t=x(l,r),t!=M.contextNotFound)return b(t,{context:n.context})}if(v(n)){r=D.extend({},n),delete r.count,r.defaultValue=M.pluralNotFound;var c=s+M.nsseparator+e+M.pluralSuffix,f=z.get(u[0],n.count);if(f>=0?c=c+"_"+f:1===f&&(c=s+M.nsseparator+e),t=x(c,r),t!=M.pluralNotFound)return b(t,{count:n.count,interpolationPrefix:n.interpolationPrefix,interpolationSuffix:n.interpolationSuffix})}for(var m,g=e.split(M.keyseparator),y=0,k=u.length;k>y&&void 0===m;y++){for(var L=u[y],P=0,S=O[L]&&O[L][s];g[P];)S=S&&S[g[P]],P++;if(void 0!==S){var T=Object.prototype.toString.apply(S);if("string"==typeof S)S=b(S,n),S=d(S,n);else if("[object Array]"!==T||M.returnObjectTrees||n.returnObjectTrees){if(null===S&&M.fallbackOnNull===!0)S=void 0;else if(null!==S)if(M.returnObjectTrees||n.returnObjectTrees){if("[object Number]"!==T&&"[object Function]"!==T&&"[object RegExp]"!==T){var w="[object Array]"===T?[]:{};D.each(S,function(r){w[r]=_(s+M.nsseparator+e+M.keyseparator+r,n)}),S=w}}else M.objectTreeKeyHandler&&"function"==typeof M.objectTreeKeyHandler?S=M.objectTreeKeyHandler(e,S,L,s,n):(S="key '"+s+":"+e+" ("+L+")' returned an object instead of string.",D.log(S))}else S=S.join("\n"),S=b(S,n),S=d(S,n);"string"==typeof S&&""===S.trim()&&M.fallbackOnEmpty===!0&&(S=void 0),m=S}}if(void 0===m&&!n.isFallbackLookup&&(M.fallbackToDefaultNS===!0||M.fallbackNS&&M.fallbackNS.length>0))if(n.isFallbackLookup=!0,M.fallbackNS.length){for(var C=0,E=M.fallbackNS.length;E>C;C++)if(m=j(M.fallbackNS[C]+M.nsseparator+e,n)){var F=m.indexOf(M.nsseparator)>-1?m.split(M.nsseparator)[1]:m,R=a.indexOf(M.nsseparator)>-1?a.split(M.nsseparator)[1]:a;if(F!==R)break}}else m=j(e,n);return m}function L(){var e,n=[];if("undefined"!=typeof window&&(!function(){for(var e=window.location.search.substring(1),r=e.split("&"),t=0;t<r.length;t++){var a=r[t].indexOf("=");if(a>0){var u=r[t].substring(0,a),o=r[t].substring(a+1);n[u]=o}}}(),n[M.detectLngQS]&&(e=n[M.detectLngQS])),!e&&"undefined"!=typeof document&&M.useCookie){var r=D.cookie.read(M.cookieName);r&&(e=r)}return e||"undefined"==typeof navigator||(e=navigator.language?navigator.language:navigator.userLanguage),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var n=Object(this),r=n.length>>>0;if(0===r)return-1;var t=0;if(arguments.length>0&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&1/0!=t&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r)return-1;for(var a=t>=0?t:Math.max(r-Math.abs(t),0);r>a;a++)if(a in n&&n[a]===e)return a;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var n=Object(this),r=n.length>>>0;if(0===r)return-1;var t=r;arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))));for(var a=t>=0?Math.min(t,r-1):r-Math.abs(t);a>=0;a--)if(a in n&&n[a]===e)return a;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var P=this,S=P.jQuery||P.Zepto,O={},T,w=0,A=[],C=!1;"undefined"!=typeof module&&module.exports?module.exports=p:(S&&(S.TAPi18next=S.TAPi18next||p),P.TAPi18next=P.TAPi18next||p);var M={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!1,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"TAPi18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:["sprintf"],parseMissingKey:void 0,shortcutFunction:"sprintf"},E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},F={create:function(e,n,r,t){var a;if(r){var u=new Date;u.setTime(u.getTime()+60*r*1e3),a="; expires="+u.toGMTString()}else a="";t=t?"domain="+t+";":"",document.cookie=e+"="+n+a+";"+t+"path=/"},read:function(e){for(var n=e+"=",r=document.cookie.split(";"),t=0;t<r.length;t++){for(var a=r[t];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null},remove:function(e){this.create(e,"",-1)}},R={create:function(e,n,r,t){},read:function(e){return null},remove:function(e){}},D={extend:S?S.extend:e,each:S?S.each:n,ajax:S?S.ajax:"undefined"!=typeof document?t:function(){},cookie:"undefined"!=typeof document?F:R,detectLanguage:L,escape:r,log:function(e){M.debug&&"undefined"!=typeof console&&console.log(e)},toLanguages:function(e){var n=[];if("string"==typeof e&&e.indexOf("-")>-1){var r=e.split("-");e=M.lowerCaseLng?r[0].toLowerCase()+"-"+r[1].toLowerCase():r[0].toLowerCase()+"-"+r[1].toUpperCase(),"unspecific"!==M.load&&n.push(e),"current"!==M.load&&n.push(r[0])}else n.push(e);for(var t=0;t<M.fallbackLng.length;t++)-1===n.indexOf(M.fallbackLng[t])&&M.fallbackLng[t]&&n.push(M.fallbackLng[t]);return n},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};D.applyReplacement=b;var H={load:function(e,n,r){n.useLocalStorage?H._loadLocal(e,n,function(t,a){for(var u=[],o=0,s=e.length;s>o;o++)a[e[o]]||u.push(e[o]);u.length>0?H._fetch(u,n,function(e,n){D.extend(a,n),H._storeLocal(n),r(null,a)}):r(null,a)}):H._fetch(e,n,function(e,n){r(null,n)})},_loadLocal:function(e,n,r){var t={},a=(new Date).getTime();if(window.localStorage){var u=e.length;D.each(e,function(e,o){var s=window.localStorage.getItem("res_"+o);s&&(s=JSON.parse(s),s.i18nStamp&&s.i18nStamp+n.localStorageExpirationTime>a&&(t[o]=s)),u--,0===u&&r(null,t)})}},_storeLocal:function(e){if(window.localStorage)for(var n in e)e[n].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+n,JSON.stringify(e[n]))},_fetch:function(e,n,r){var t=n.ns,a={};if(n.dynamicLoad){var u=function(e,n){r(null,n)};if("function"==typeof n.customLoad)n.customLoad(e,t.namespaces,n,u);else{var o=b(n.resGetPath,{lng:e.join("+"),ns:t.namespaces.join("+")});D.ajax({url:o,success:function(e,n,r){D.log("loaded: "+o),u(null,e)},error:function(e,n,r){D.log("failed loading: "+o),u("failed loading resource.json error: "+r)},dataType:"json",async:n.getAsync})}}else{var s=t.namespaces.length*e.length,i;D.each(t.namespaces,function(t,u){D.each(e,function(e,t){var o=function(e,n){e&&(i=i||[],i.push(e)),a[t]=a[t]||{},a[t][u]=n,s--,0===s&&r(i,a)};"function"==typeof n.customLoad?n.customLoad(t,u,n,o):H._fetchOne(t,u,n,o)})})}},_fetchOne:function(e,n,r,t){var a=b(r.resGetPath,{lng:e,ns:n});D.ajax({url:a,success:function(e,n,r){D.log("loaded: "+a),t(null,e)},error:function(e,n,r){if(n&&200==n||e&&e.status&&200==e.status)D.log("There is a typo in: "+a);else if(n&&404==n||e&&e.status&&404==e.status)D.log("Does not exist: "+a);else{var u=n?n:e&&e.status?e.status:null;D.log(u+" when loading "+a)}t(r,{})},dataType:"json",async:r.getAsync})},postMissing:function(e,n,r,t,a){var u={};u[r]=t;var o=[];if("fallback"===M.sendMissingTo&&M.fallbackLng[0]!==!1)for(var s=0;s<M.fallbackLng.length;s++)o.push({lng:M.fallbackLng[s],url:b(M.resPostPath,{lng:M.fallbackLng[s],ns:n})});else if("current"===M.sendMissingTo||"fallback"===M.sendMissingTo&&M.fallbackLng[0]===!1)o.push({lng:e,url:b(M.resPostPath,{lng:e,ns:n})});else if("all"===M.sendMissingTo)for(var s=0,i=a.length;i>s;s++)o.push({lng:a[s],url:b(M.resPostPath,{lng:a[s],ns:n})});for(var l=0,c=o.length;c>l;l++){var f=o[l];D.ajax({url:f.url,type:M.sendType,data:u,success:function(e,a,u){D.log("posted missing key '"+r+"' to: "+f.url);for(var o=r.split("."),s=0,i=O[f.lng][n];o[s];)i=i[o[s]]=s===o.length-1?t:i[o[s]]||{},s++},error:function(e,n,t){D.log("failed posting missing key '"+r+"' to: "+f.url)},dataType:"json",async:M.postAsync})}}},z={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ay:{name:"Aymará",numbers:[1],plurals:function(e){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(e){return Number(1!=e)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bo:{name:"Tibetan",numbers:[1],plurals:function(e){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},cgg:{name:"Chiga",numbers:[1],plurals:function(e){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},de:{name:"German",numbers:[1,2],plurals:function(e){return Number(1!=e)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(e){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(e){return Number(1!=e)}},en:{name:"English",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es:{name:"Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},et:{name:"Estonian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eu:{name:"Basque",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fa:{name:"Persian",numbers:[1],plurals:function(e){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(e){return Number(1!=e)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(e){return Number(1!=e)}},id:{name:"Indonesian",numbers:[1],plurals:function(e){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(e){return Number(e%10!=1||e%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ja:{name:"Japanese",numbers:[1],plurals:function(e){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(e){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(0!==e)}},ka:{name:"Georgian",numbers:[1],plurals:function(e){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(e){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(e){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ko:{name:"Korean",numbers:[1],plurals:function(e){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(e){return Number(1==e?0:2==e?1:3==e?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(e){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(e){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[1,2,0],plurals:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(e){return Number(1==e||e%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(1==e?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ms:{name:"Malay",numbers:[1],plurals:function(e){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(e){return Number(1!=e)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(e){return Number(1!=e)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(1!=e)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(e){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(e){return Number(1!=e)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(e){return Number(1!=e)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},son:{name:"Songhay",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(e){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(e){return Number(1!=e)}},te:{name:"Telugu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(e){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(e){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(e){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(e){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(e){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(e){return Number(1!=e)}},zh:{name:"Chinese",numbers:[1],plurals:function(e){return 0}}},addRule:function(e,n){z.rules[e]=n},setCurrentLng:function(e){if(!z.currentRule||z.currentRule.lng!==e){var n=e.split("-");z.currentRule={lng:e,rule:z.rules[n[0]]}}},get:function(e,n){function r(n,r){var t;if(t=z.currentRule&&z.currentRule.lng===e?z.currentRule.rule:z.rules[n]){var a=t.plurals(r),u=t.numbers[a];return 2===t.numbers.length&&1===t.numbers[0]&&(2===u?u=-1:1===u&&(u=1)),u}return 1===r?"1":"-1"}var t=e.split("-");return r(t[0],n)}},I={},V=function(e,n){I[e]=n},B=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,n){for(var r=[];n>0;r[--n]=e);return r.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,t){var a=1,u=r.length,o="",s,i=[],l,c,f,p,m,g;for(l=0;u>l;l++)if(o=e(r[l]),"string"===o)i.push(r[l]);else if("array"===o){if(f=r[l],f[2])for(s=t[a],c=0;c<f[2].length;c++){if(!s.hasOwnProperty(f[2][c]))throw B('[sprintf] property "%s" does not exist',f[2][c]);s=s[f[2][c]]}else s=f[1]?t[f[1]]:t[a++];if(/[^s]/.test(f[8])&&"number"!=e(s))throw B("[sprintf] expecting number but found %s",e(s));switch(f[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=f[7]?s.toExponential(f[7]):s.toExponential();break;case"f":s=f[7]?parseFloat(s).toFixed(f[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&f[7]?s.substring(0,f[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(f[8])&&f[3]&&s>=0?"+"+s:s,m=f[4]?"0"==f[4]?"0":f[4].charAt(1):" ",g=f[6]-String(s).length,p=f[6]?n(m,g):"",i.push(f[5]?s+p:p+s)}return i.join("")},r.cache={},r.parse=function(e){for(var n=e,r=[],t=[],a=0;n;){if(null!==(r=/^[^\x25]+/.exec(n)))t.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(n)))t.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"[sprintf] huh?";if(r[2]){a|=1;var u=[],o=r[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(o)))throw"[sprintf] huh?";for(u.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(o)))u.push(s[1]);
else{if(null===(s=/^\[(\d+)\]/.exec(o)))throw"[sprintf] huh?";u.push(s[1])}r[2]=u}else a|=2;if(3===a)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";t.push(r)}n=n.substring(r[0].length)}return t},r}(),G=function(e,n){return n.unshift(e),B.apply(null,n)};V("sprintf",function(e,n,r){return r.sprintf?"[object Array]"===Object.prototype.toString.apply(r.sprintf)?G(e,r.sprintf):"object"==typeof r.sprintf?B(e,r.sprintf):e:e}),p.init=a,p.setLng=f,p.preload=u,p.addResourceBundle=o,p.removeResourceBundle=s,p.loadNamespace=l,p.loadNamespaces=c,p.setDefaultNamespace=i,p.t=x,p.translate=x,p.exists=y,p.detectLanguage=D.detectLanguage,p.pluralExtensions=z,p.sync=H,p.functions=D,p.lng=m,p.addPostProcessor=V,p.options=M}()}.call(this),function(){p.init({resStore:{},fallbackLng:g.fallback_language})}.call(this),function(){b="object"==typeof b?b:{};var e=b;e.helpers={}}.call(this),b="object"==typeof b?b:{};var d=b,h;m={},h=g.fallback_language,e.extend(m,{_loaded_languages:[h],_fallback_language:h,_loaded_lang_session_key:"TAPi18n::loaded_lang",conf:null,packages:{},languages_available_for_project:{},translations:{},_enable:function(e){return this.conf=e,this._onceEnabled()},_onceEnabled:function(){},_enabled:function(){return null!=this.conf},_getPackageDomain:function(e){return e.replace(/:/g,"-")},addResourceBundle:function(e,n,r){return p.addResourceBundle(e,m._getPackageDomain(n),r)},_getProjectLanguages:function(){return this._enabled()?e.isArray(this.conf.supported_languages)?e.union([this._fallback_language],this.conf.supported_languages):e.keys(this.languages_available_for_project):[this._fallback_language]},getLanguages:function(){var e,n,r,t;if(!this._enabled())return null;r={},t=this.languages_available_for_project;for(n in t)e=t[n],r[n]={name:e[1],en:e[0]};return r}}),b="object"==typeof b?b:{};var d=b,v,y=[].indexOf||function(e){for(var n=0,r=this.length;r>n;n++)if(n in this&&this[n]===e)return n;return-1},x=[].slice;v=""+m._loaded_lang_session_key,a.set(v,null),e.extend(m,{_getLanguageFilePath:function(e){var n;return this._enabled()?(n=null!=this.conf.cdn_path?this.conf.cdn_path:this.conf.i18n_files_route,n=n.replace(/\/$/,""),""+n+"/"+e+".json"):null},_loadLanguage:function(e){var n,r,t,a,o,s;return r=new u.Deferred,this._enabled()?(s=this,o=s._getProjectLanguages(),y.call(o,e)>=0?y.call(s._loaded_languages,e)<0?(a=function(){var n;return n=u.getJSON(s._getLanguageFilePath(e)),n.done(function(n){var t,a;for(a in n)t=n[a],m.addResourceBundle(e,a,t);return s._loaded_languages.push(e),r.resolve()}),n.fail(function(n,t){return r.reject("Couldn't load language '"+e+"' JSON: "+t)})},t=y.call(e,"-")>=0?e.replace(/-.*/,""):h,e!==h&&y.call(o,t)>=0?(n=s._loadLanguage(t),n.done(function(){return a()}),n.fail(function(e){return r.reject("Loading process failed since dependency language '"+t+"' failed to load: "+e)})):a()):r.resolve():r.reject(["Language "+e+" is not supported"]),r.promise()):r.reject("tap-i18n is not enabled in the project level, check tap-i18n README")},_registerHelpers:function(n,r){var t,a,u,o;return a=this,u=this._getPackageI18nextProxy(n!==g.project_translations_domain?a.packages[n].namespace:g.project_translations_domain),o=function(){var n,r,t;return r=arguments[0],n=2<=arguments.length?x.call(arguments,1):[],t=n.pop().hash,e.isEmpty(n)||(t.sprintf=n),u(r,t)},n===g.project_translations_domain?(l.registerHelper(a.conf.helper_name,o),l.registerHelper("languageTag",function(){return a.getLanguage()})):null!=s[r]&&null!=s[r].helpers?(t={},t[a.packages[n].helper_name]=o,s[r].helpers(t)):void 0},_getRegisterHelpersProxy:function(e){var n;return n=this,function(r){return n._registerHelpers(e,r)}},_getPackageI18nextProxy:function(e){return function(n,r,t){return null==t&&(t=null),null!=t&&console.log("Warning: specifying lang_tag is not supported in client side, using session language"),a.get(v),p.t(""+m._getPackageDomain(e)+":"+n,r)}},_onceEnabled:function(){return m._registerHelpers(g.project_translations_domain)},setLanguage:function(e){return this._loadLanguage(e).then(function(){return p.setLng(e),a.set(v,e)})},getLanguage:function(){var e;return this._enabled()?(e=a.get(v),null!=e?e:this._fallback_language):null}}),m.__=m._getPackageI18nextProxy(g.project_translations_domain),"undefined"==typeof Package&&(Package={}),Package["tap:i18n"]={TAPi18next:p,TAPi18n:m}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["ccan:cssreset"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package["tap:i18n"].TAPi18next,t=Package["tap:i18n"].TAPi18n,a=Package.session.Session,i,o;(function(){o=function(e){a.set("momentReady",!1),$.getScript("//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/lang/"+e.toLowerCase()+".js",function(n){moment.locale(e),a.set("momentReady",!0),a.set("momentLocale",e)}),a.set("TAPi18nReady",!1),t.setLanguage(e).done(function(){a.set("TAPi18nReady",!0)}),T9n.setLanguage(e)},i={t:function(n,a){return e.isServer?t.__(n,a,getSetting("language","en")):t.__(n,a)}},e.startup(function(){e.isClient&&o(getSetting("language","en"))})}).call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-i18n"]={i18n:i,setLanguage:o}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,t=Package.jquery.$,r=Package.jquery.jQuery,i,o,u,c,a,s,f,l,p,n,d,y;(function(){f=function(){return a("siteUrl",e.absoluteUrl())},a=function(e,n){var t=Settings.find().fetch()[0];return t&&"undefined"!=typeof t[e]?t[e]:"undefined"==typeof n?"":n},s=function(e,n){return"undefined"!=typeof themeSettings[e]?themeSettings[e]:"undefined"==typeof n?"":n},o=function(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},c=function(e){return u(e.replace(" ","-"))},u=function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},l=function(e,n){return y=e.split(/\s+/,n),y.length>=n?y.join(" ")+"…":e},d=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}).call(this),function(){n.mixin({deep:function(e,t,r){var i=t.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),o,u=0,c=i.length;if(arguments.length>2){for(o=e,c--;c>u;)t=i[u++],e=e[t]=n.isObject(e[t])?e[t]:{};e[i[u]]=r,r=o}else{for(;null!=(e=e[i[u++]])&&c>u;);r=c>u?void 0:e}return r}}),n.mixin({pluckDeep:function(e,t){return n.map(e,function(e){return n.deep(e,t)})}}),n.mixin({unpick:function(e){return e||(e={}),n.pick(e,n.difference(n.keys(e),n.flatten(Array.prototype.slice.call(arguments,1))))}})}.call(this),function(){i=function(){var e,n,t,r,o,u,c=arguments[0]||{},a=1,s=arguments.length,f=!1,l=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=Array.prototype.push,y=Array.prototype.slice,g=String.prototype.trim,v=Array.prototype.indexOf,m={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},h={isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):m[l.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==h.type(e)||e.nodeType)return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var t;for(t in e);return void 0===t||p.call(e,t)}};for("boolean"==typeof c&&(f=c,c=arguments[1]||{},a=2),"object"==typeof c||h.isFunction(c)||(c={}),s===a&&(c=this,--a),a;s>a;a++)if(null!=(e=arguments[a]))for(n in e)t=c[n],r=e[n],c!==r&&(f&&r&&(h.isPlainObject(r)||(o=h.isArray(r)))?(o?(o=!1,u=t&&h.isArray(t)?t:[]):u=t&&h.isPlainObject(t)?t:{},c[n]=i(f,u,r)):void 0!==r&&(c[n]=r));return c}}.call(this),function(){(function(){var e,n=[].slice;e=function(){var e,t,r,i,o,u,c,a;if(u=1<=arguments.length?n.call(arguments,0):[],c=/(^|\s)(\b(https?):\/\/[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|]\b)/gi,u.length>0){o=u[0],t=o.callback,null!=t&&"function"==typeof t&&(e=t,delete o.callback),i="";for(r in o)a=o[r],i+=" "+r+"='"+a+"'";return this.replace(c,function(n,t,r){var o,u;return u=e&&e(r),o=u||"<a href='"+r+"'"+i+">"+r+"</a>",""+t+o})}return this.replace(c,"$1<a href='$2'>$2</a>")},String.prototype.autoLink=e}).call(this)}.call(this),function(){p={},p.view=function(n){if(a("requireViewInvite",!1)){if(e.isClient)var n="undefined"==typeof n?e.user():n;return n&&(isAdmin(n)||isInvited(n))?!0:!1}return!0},p.viewById=function(n,t){return a("requireViewInvite",!1)?n?canView(e.users.findOne(n),t):!1:!0},p.post=function(n,t){var n="undefined"==typeof n?e.user():n;return n?isAdmin(n)?!0:a("requirePostInvite")?n.isInvited?!0:t?"no_invite":!1:!0:t?"no_account":!1},p.postById=function(n,t){var r=e.users.findOne(n);return canPost(r,t)},p.comment=function(e,n){return canPost(e,n)},p.commentById=function(n,t){var r=e.users.findOne(n);return canComment(r,t)},p.upvote=function(e,n,t){return canPost(e,t)},p.upvoteById=function(n,t){var r=e.users.findOne(n);return canUpvote(r,t)},p.downvote=function(e,n,t){return canPost(e,t)},p.downvoteById=function(n,t){var r=e.users.findOne(n);return canDownvote(r,t)},p.edit=function(n,t,r){var n="undefined"==typeof n?e.user():n;return n&&t?isAdmin(n)?!0:n._id!==t.userId?r?"no_rights":!1:!0:r?"no_rights":!1},p.editById=function(n,t){var r=e.users.findOne(n);return canEdit(r,t)},p.currentUserEdit=function(n){return canEdit(e.user(),n)},p.invite=function(e){return isInvited(e)||isAdmin(e)}}.call(this),function(){t.fn.exists=function(){return 0!==this.length}}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-lib"]={deepExtend:i,camelToDash:o,dashToCamel:u,camelCaseify:c,getSetting:a,getThemeSetting:s,getSiteUrl:f,trimWords:l,can:p,_:n,capitalise:d}}();

!function(){var e=Package.meteor.Meteor,t=Package["telescope-i18n"].i18n,o=Package["telescope-i18n"].setLanguage,s=Package["telescope-lib"].deepExtend,a=Package["telescope-lib"].camelToDash,i=Package["telescope-lib"].dashToCamel,l=Package["telescope-lib"].camelCaseify,n=Package["telescope-lib"].getSetting,c=Package["telescope-lib"].getThemeSetting,r=Package["telescope-lib"].getSiteUrl,p=Package["telescope-lib"].trimWords,d=Package["telescope-lib"].can,m=Package["telescope-lib"]._,b=Package["telescope-lib"].capitalise,u,g,k,f,h,C,P,S,M,A,v,E,y,T,w,_,D,N,R,$,L,U,x,B,H,I,W,j,q,z,F,G,J,K,O;(function(){k=[],f=[],h=[],P=["viewsMenu","adminMenu"],S=["userMenu","notificationsMenu","submitButton"],u=[],g=[{route:"posts_top",label:"top"},{route:"posts_new",label:"new"},{route:"posts_best",label:"best"},{route:"posts_digest_default",label:"digest"}],M={},M.top=function(e){return{options:{sort:{sticky:-1,score:-1}}}},M.new=function(e){return{options:{sort:{sticky:-1,postedAt:-1}}}},M.best=function(e){return{options:{sort:{sticky:-1,baseScore:-1}}}},M.pending=function(e){return{find:{status:1,postedAt:{$lte:null}},options:{sort:{createdAt:-1}}}},M.digest=function(e){return{find:{postedAt:{$gte:e.after,$lt:e.before}},options:{sort:{sticky:-1,baseScore:-1,limit:0}}}},v=[],A=[],w=["left-left","left-center","left-right","center-left","center-center","center-right","right-left","right-center","right-right"],E=[{template:"postUpvote",position:"left-left"},{template:"postActions",position:"left-right"},{template:"postContent",position:"center-center"},{template:"postDiscuss",position:"right-right"}],y=[{template:"postTitle",order:1},{template:"postDomain",order:5}],T=[{template:"postInfo",order:1},{template:"postCommentsLink",order:3},{template:"postAdmin",order:5}],_=[],D=[],N=[],R=[],$=[],L=[],U=[],O=[],B=[],H=[],I=[],W=[],j=[],q=[],z=[],F=[],J={},G=function(e){return J[e]?J[e]:e},K={useDropdowns:!0},C=[]}).call(this),function(){}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-base"]={adminNav:u,viewNav:g,addToPostSchema:k,addToCommentsSchema:f,addToSettingsSchema:h,preloadSubscriptions:C,primaryNav:P,secondaryNav:S,viewParameters:M,footerModules:A,heroModules:v,postModules:E,postHeading:y,postMeta:T,modulePositions:w,postSubmitRenderedCallbacks:_,postSubmitClientCallbacks:D,postSubmitMethodCallbacks:N,postAfterSubmitMethodCallbacks:R,postEditRenderedCallbacks:$,postEditClientCallbacks:L,postEditMethodCallbacks:U,postAfterEditMethodCallbacks:x,commentSubmitRenderedCallbacks:B,commentSubmitClientCallbacks:H,commentSubmitMethodCallbacks:I,commentAfterSubmitMethodCallbacks:W,commentEditRenderedCallbacks:j,commentEditClientCallbacks:q,commentEditMethodCallbacks:z,commentAfterEditMethodCallbacks:F,getTemplate:G,templates:J,themeSettings:K}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["fourseven:scss"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,c=Package["telescope-lib"].camelToDash,t=Package["telescope-lib"].dashToCamel,s=Package["telescope-lib"].camelCaseify,l=Package["telescope-lib"].getSetting,o=Package["telescope-lib"].getThemeSetting,b=Package["telescope-lib"].getSiteUrl,k=Package["telescope-lib"].trimWords,p=Package["telescope-lib"].can,g=Package["telescope-lib"]._,P=Package["telescope-lib"].capitalise,i=Package["telescope-base"].adminNav,d=Package["telescope-base"].viewNav,m=Package["telescope-base"].addToPostSchema,n=Package["telescope-base"].addToCommentsSchema,r=Package["telescope-base"].addToSettingsSchema,C=Package["telescope-base"].preloadSubscriptions,h=Package["telescope-base"].primaryNav,S=Package["telescope-base"].secondaryNav,u=Package["telescope-base"].viewParameters,M=Package["telescope-base"].footerModules,f=Package["telescope-base"].heroModules,E=Package["telescope-base"].postModules,v=Package["telescope-base"].postHeading,T=Package["telescope-base"].postMeta,y=Package["telescope-base"].modulePositions,A=Package["telescope-base"].postSubmitRenderedCallbacks,N=Package["telescope-base"].postSubmitClientCallbacks,R=Package["telescope-base"].postSubmitMethodCallbacks,w=Package["telescope-base"].postAfterSubmitMethodCallbacks,x=Package["telescope-base"].postEditRenderedCallbacks,D=Package["telescope-base"].postEditClientCallbacks,H=Package["telescope-base"].postEditMethodCallbacks,U=Package["telescope-base"].postAfterEditMethodCallbacks,W=Package["telescope-base"].commentSubmitRenderedCallbacks,_=Package["telescope-base"].commentSubmitClientCallbacks,j=Package["telescope-base"].commentSubmitMethodCallbacks,q=Package["telescope-base"].commentAfterSubmitMethodCallbacks,z=Package["telescope-base"].commentEditRenderedCallbacks,B=Package["telescope-base"].commentEditClientCallbacks,F=Package["telescope-base"].commentEditMethodCallbacks,G=Package["telescope-base"].commentAfterEditMethodCallbacks,I=Package["telescope-base"].getTemplate,J=Package["telescope-base"].templates,K=Package["telescope-base"].themeSettings;"undefined"==typeof Package&&(Package={}),Package["telescope-theme-base"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,t=Package["telescope-lib"].camelToDash,s=Package["telescope-lib"].dashToCamel,c=Package["telescope-lib"].camelCaseify,o=Package["telescope-lib"].getSetting,l=Package["telescope-lib"].getThemeSetting,i=Package["telescope-lib"].getSiteUrl,n=Package["telescope-lib"].trimWords,r=Package["telescope-lib"].can,p=Package.underscore._,k=Package["telescope-lib"].capitalise,m=Package["telescope-base"].adminNav,g=Package["telescope-base"].viewNav,b=Package["telescope-base"].addToPostSchema,u=Package["telescope-base"].addToCommentsSchema,h=Package["telescope-base"].addToSettingsSchema,d=Package["telescope-base"].preloadSubscriptions,P=Package["telescope-base"].primaryNav,f=Package["telescope-base"].secondaryNav,S=Package["telescope-base"].viewParameters,C=Package["telescope-base"].footerModules,w=Package["telescope-base"].heroModules,v=Package["telescope-base"].postModules,M=Package["telescope-base"].postHeading,A=Package["telescope-base"].postMeta,T=Package["telescope-base"].modulePositions,R=Package["telescope-base"].postSubmitRenderedCallbacks,E=Package["telescope-base"].postSubmitClientCallbacks,_=Package["telescope-base"].postSubmitMethodCallbacks,j=Package["telescope-base"].postAfterSubmitMethodCallbacks,y=Package["telescope-base"].postEditRenderedCallbacks,z=Package["telescope-base"].postEditClientCallbacks,q=Package["telescope-base"].postEditMethodCallbacks,x=Package["telescope-base"].postAfterEditMethodCallbacks,L=Package["telescope-base"].commentSubmitRenderedCallbacks,N=Package["telescope-base"].commentSubmitClientCallbacks,D=Package["telescope-base"].commentSubmitMethodCallbacks,H=Package["telescope-base"].commentAfterSubmitMethodCallbacks,I=Package["telescope-base"].commentEditRenderedCallbacks,U=Package["telescope-base"].commentEditClientCallbacks,V=Package["telescope-base"].commentEditMethodCallbacks,B=Package["telescope-base"].commentAfterEditMethodCallbacks,Q=Package["telescope-base"].getTemplate,W=Package["telescope-base"].templates,$=Package["telescope-base"].themeSettings,F=Package.jquery.$,G=Package.jquery.jQuery,J=Package.templating.Template,K=Package.blaze.Blaze,O=Package.blaze.UI,X=Package.blaze.Handlebars,Y=Package.htmljs.HTML;(function(){v.push({template:"postShare",position:"right-center"})}).call(this),function(){J.__checkName("postShare"),J.postShare=new J("Template.postShare",function(){var e=this;return[Y.A({href:"#","class":"share-link"},Y.Raw('<i class="icon-share"></i>'),Y.SPAN({"class":"action"},K.View(function(){return Spacebars.mustache(e.lookup("_"),"share")}))),"\n  ",Y.DIV({"class":"share-options hidden"},"\n    ",Y.A({"class":"mt-facebook mt-share-inline-square-sm",href:function(){return["https://www.facebook.com/sharer/sharer.php?u=",Spacebars.mustache(e.lookup("sourceLink"))]},target:"_blank"},Y.Raw('<img src="//mojotech-static.s3.amazonaws.com/facebook@2x.png">')),"\n    ",Y.A({"class":"mt-twitter mt-share-inline-square-sm",href:function(){return["//twitter.com/intent/tweet?text=",Spacebars.mustache(e.lookup("title")),"&url=",Spacebars.mustache(e.lookup("sourceLink")),"&",Spacebars.mustache(e.lookup("viaTwitter"))]},target:"_blank"},Y.Raw('<img src="//mojotech-static.s3.amazonaws.com/twitter@2x.png">')),"\n    ",Y.A({"class":"mt-linkedin mt-share-inline-square-sm",href:function(){return["//www.linkedin.com/shareArticle?mini=true&url=",Spacebars.mustache(e.lookup("sourceLink")),Y.CharRef({html:"&amp;",str:"&"}),"summary=",Spacebars.mustache(e.lookup("title"))]},target:"_blank"},Y.Raw('<img src="//mojotech-static.s3.amazonaws.com/linkedin@2x.png">')),"\n    ",Y.A({"class":"mt-google mt-share-inline-square-sm",href:function(){return["https://plus.google.com/share?url=",Spacebars.mustache(e.lookup("sourceLink"))]},target:"_blank"},Y.Raw('<img src="//mojotech-static.s3.amazonaws.com/google@2x.png">')),"\n  ")]})}.call(this),function(){e.startup(function(){J[Q("postShare")].helpers({sourceLink:function(){return this.url?this.url:i()+"posts/"+this._id},viaTwitter:function(){return o("twitterAccount")?"via="+o("twitterAccount"):""}}),J[Q("postShare")].events({"click .share-link":function(e){var a=F(e.target).parents(".post-share").find(".share-link"),t=a.parents(".post-share").find(".share-options");e.preventDefault(),F(".share-link").not(a).removeClass("active"),F(".share-options").not(t).addClass("hidden"),a.toggleClass("active"),t.toggleClass("hidden")}})})}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-module-share"]={}}();

!function(){var e=Package.meteor.Meteor,a;"undefined"==typeof Package&&(Package={}),Package["telescope-api"]={serveAPI:a}}();

!function(){var e=Package.meteor.Meteor,a;"undefined"==typeof Package&&(Package={}),Package["telescope-rss"]={serveRSS:a}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,t=Package["telescope-lib"].camelToDash,c=Package["telescope-lib"].dashToCamel,s=Package["telescope-lib"].camelCaseify,o=Package["telescope-lib"].getSetting,r=Package["telescope-lib"].getThemeSetting,n=Package["telescope-lib"].getSiteUrl,l=Package["telescope-lib"].trimWords,i=Package["telescope-lib"].can,u=Package.underscore._,p=Package["telescope-lib"].capitalise,m=Package["telescope-base"].adminNav,h=Package["telescope-base"].viewNav,g=Package["telescope-base"].addToPostSchema,k=Package["telescope-base"].addToCommentsSchema,d=Package["telescope-base"].addToSettingsSchema,b=Package["telescope-base"].preloadSubscriptions,f=Package["telescope-base"].primaryNav,P=Package["telescope-base"].secondaryNav,S=Package["telescope-base"].viewParameters,y=Package["telescope-base"].footerModules,v=Package["telescope-base"].heroModules,C=Package["telescope-base"].postModules,T=Package["telescope-base"].postHeading,_=Package["telescope-base"].postMeta,M=Package["telescope-base"].modulePositions,w=Package["telescope-base"].postSubmitRenderedCallbacks,D=Package["telescope-base"].postSubmitClientCallbacks,A=Package["telescope-base"].postSubmitMethodCallbacks,R=Package["telescope-base"].postAfterSubmitMethodCallbacks,E=Package["telescope-base"].postEditRenderedCallbacks,L=Package["telescope-base"].postEditClientCallbacks,I=Package["telescope-base"].postEditMethodCallbacks,q=Package["telescope-base"].postAfterEditMethodCallbacks,N=Package["telescope-base"].commentSubmitRenderedCallbacks,j=Package["telescope-base"].commentSubmitClientCallbacks,x=Package["telescope-base"].commentSubmitMethodCallbacks,H=Package["telescope-base"].commentAfterSubmitMethodCallbacks,Q=Package["telescope-base"].commentEditRenderedCallbacks,$=Package["telescope-base"].commentEditClientCallbacks,V=Package["telescope-base"].commentEditMethodCallbacks,B=Package["telescope-base"].commentAfterEditMethodCallbacks,O=Package["telescope-base"].getTemplate,U=Package["telescope-base"].templates,z=Package["telescope-base"].themeSettings,K=Package["aldeed:simple-schema"].SimpleSchema,W=Package["aldeed:simple-schema"].MongoObject,Y=Package.jquery.$,F=Package.jquery.jQuery,G=Package["iron:router"].Router,J=Package["iron:router"].RouteController,X=Package.templating.Template,Z=Package["tap:i18n"].TAPi18next,ea=Package["tap:i18n"].TAPi18n,aa=Package["iron:core"].Iron,ta=Package.blaze.Blaze,ca=Package.blaze.UI,sa=Package.blaze.Handlebars,oa=Package.htmljs.HTML,m,S,ra,na,la,ia,ua,pa,ma;(function(){f.push("search"),ra=new e.Collection("searches",{schema:new K({_id:{type:String,optional:!0},timestamp:{type:Date},keyword:{type:String}})}),e.startup(function(){ra.allow({update:isAdminById,remove:isAdminById})}),S.search=function(t,c){if("undefined"==typeof t.query||!t.query)return{find:{_id:0}};e.isServer&&logSearch(t.query);var s=a(!0,c,{find:{$or:[{title:{$regex:t.query,$options:"i"}},{url:{$regex:t.query,$options:"i"}},{body:{$regex:t.query,$options:"i"}}]}});return s}}).call(this),function(){ea.packages["telescope-search"]={translation_function_name:"__",helper_name:"_",namespace:"telescope-search"},na=ea._getPackageI18nextProxy("telescope-search"),la=ea._getRegisterHelpersProxy("telescope-search"),ia=la;var e=Package.underscore._;ua=e.keys(X)}.call(this),function(){m.push({route:"searchLogs",label:"Search Logs"}),e.startup(function(){pa=PostsListController.extend({view:"search",onBeforeAction:function(){"q"in this.params&&Session.set("searchQuery",this.params.q),this.next()}}),G.onBeforeAction(G._filters.isAdmin,{only:["logs"]}),G.route("/search/:limit?",{name:"search",controller:pa}),G.route("/logs/:limit?",{name:"searchLogs",waitOn:function(){var a=this.params.limit||100;return e.isClient&&Session.set("logsLimit",a),e.subscribe("searches",a)},data:function(){return ra.find({},{sort:{timestamp:-1}})},fastRender:!0})})}.call(this),function(){X.__checkName("search"),X.search=new X("Template.search",function(){var e=this;return ta.If(function(){return Spacebars.call(e.lookup("canSearch"))},function(){return["\n    ",oa.DIV({"class":function(){return["search ",Spacebars.mustache(e.lookup("searchQueryEmpty"))," header-submodule"]}},"\n      ",oa.INPUT({id:"search",type:"search","class":"search-field",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"search")},value:function(){return Spacebars.mustache(e.lookup("searchQuery"))}}),"\n    "),"\n  "]})})}.call(this),function(){var a=function(){var e=0;return function(a,t){clearTimeout(e),e=setTimeout(a,t)}}();e.startup(function(){X[O("search")].helpers({canSearch:function(){return canView(e.user())},searchQuery:function(){return Session.get("searchQuery")},searchQueryEmpty:function(){return Session.get("searchQuery")?"":"empty"}}),X[O("search")].events({"keyup, search .search-field":function(e){e.preventDefault();var t=Y(e.target).val(),c=Y(".search");""==t?(c.addClass("empty"),Session.set("searchQuery",""),G.go("/search",null,{replaceState:!0})):a(function(){Session.set("searchQuery",t),c.removeClass("empty");var e={query:"q="+encodeURIComponent(t)};0===getCurrentRoute().indexOf("/search")&&(e.replaceState=!0),G.go("search",null,e)},700)}})})}.call(this),function(){X.__checkName("searchLogs"),X.searchLogs=new X("Template.searchLogs",function(){var e=this;return oa.DIV({"class":"grid-small grid-module dialog admin"},oa.Raw("\n    <h2>Search Logs</h2>\n      "),oa.TABLE("\n        ",oa.THEAD("\n          ",oa.TR("\n            ",oa.TH("Keyword"),"\n            ",oa.TH("Timestamp"),"\n          "),"\n        "),"\n        ",oa.TBODY("\n        ",ta.Each(function(){return Spacebars.call(e.lookup("."))},function(){return["\n          ",ta.If(function(){return Spacebars.call(e.lookup("isNewDate"))},function(){return["\n            ",oa.TR({"class":"search-date-header"},"\n              ",oa.TH({colspan:"2"},"\n                ",oa.SPAN({"class":"search-date"},ta.View(function(){return Spacebars.mustache(e.lookup("getDate"))})),"\n                ",oa.SPAN({"class":"search-count"},ta.View(function(){return Spacebars.mustache(e.lookup("searchCount"))})),"\n              "),"\n            "),"\n          "]}),"\n          ",oa.TR("\n            ",oa.TD(ta.View(function(){return Spacebars.mustache(e.lookup("keyword"))})),"\n            ",oa.TD(ta.View(function(){return Spacebars.mustache(e.lookup("getTime"))})),"\n          "),"\n        "]}),"\n      "),"\n    "),"\n    ",oa.DIV({"class":"grid more-button"},"\n      ",oa.A({"class":"more-link",href:function(){return Spacebars.mustache(e.lookup("loadMoreUrl"))}},ta.View(function(){return Spacebars.mustache(e.lookup("_"),"load_more")})),"\n    "),"\n  ")})}.call(this),function(){e.startup(function(){X[O("searchLogs")].helpers({getTime:function(){return moment(this.timestamp).format("HH:mm:ss")},getDate:function(){return ma=moment(this.timestamp).format("MMMM DD")},searchCount:function(){var e=moment(this.timestamp).startOf("day").valueOf(),a=moment(this.timestamp).endOf("day").valueOf();return ra.find({timestamp:{$gte:e,$lt:a}}).count()},isNewDate:function(){return"undefined"==typeof ma?!0:ma!==moment(this.timestamp).format("MMMM DD")},loadMoreUrl:function(){var e=parseInt(Session.get("logsLimit"))+100;return"/logs/"+e}})})}.call(this),function(){var e=Package.underscore._,a="telescope-search",t="telescope-search";"project"!=a&&(t=ea.packages[a].namespace);for(var c=e.difference(e.keys(X),ua),s=0;s<c.length;s++){var o=c[s];la(o)}}.call(this),function(){var e=Package.underscore._,a="telescope-search",t="telescope-search";"project"!=a&&(t=ea.packages[a].namespace),ea.addResourceBundle("en",t,{load_more:"Load more",search:"Search"})}.call(this),function(){var e=Package.underscore._,a="telescope-search",t="telescope-search";"project"!=a&&(t=ea.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-search",t="telescope-search";"project"!=a&&(t=ea.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-search",t="telescope-search";"project"!=a&&(t=ea.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-search",t="telescope-search";"project"!=a&&(t=ea.packages[a].namespace)}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-search"]={adminNav:m,viewParameters:S}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,t=Package["telescope-lib"].camelToDash,c=Package["telescope-lib"].dashToCamel,o=Package["telescope-lib"].camelCaseify,s=Package["telescope-lib"].getSetting,n=Package["telescope-lib"].getThemeSetting,r=Package["telescope-lib"].getSiteUrl,l=Package["telescope-lib"].trimWords,i=Package["telescope-lib"].can,u=Package.underscore._,p=Package["telescope-lib"].capitalise,g=Package["telescope-base"].adminNav,d=Package["telescope-base"].viewNav,m=Package["telescope-base"].addToPostSchema,k=Package["telescope-base"].addToCommentsSchema,b=Package["telescope-base"].addToSettingsSchema,f=Package["telescope-base"].preloadSubscriptions,h=Package["telescope-base"].primaryNav,P=Package["telescope-base"].secondaryNav,y=Package["telescope-base"].viewParameters,v=Package["telescope-base"].footerModules,S=Package["telescope-base"].heroModules,_=Package["telescope-base"].postModules,C=Package["telescope-base"].postHeading,w=Package["telescope-base"].postMeta,I=Package["telescope-base"].modulePositions,M=Package["telescope-base"].postSubmitRenderedCallbacks,A=Package["telescope-base"].postSubmitClientCallbacks,T=Package["telescope-base"].postSubmitMethodCallbacks,N=Package["telescope-base"].postAfterSubmitMethodCallbacks,E=Package["telescope-base"].postEditRenderedCallbacks,j=Package["telescope-base"].postEditClientCallbacks,L=Package["telescope-base"].postEditMethodCallbacks,R=Package["telescope-base"].postAfterEditMethodCallbacks,V=Package["telescope-base"].commentSubmitRenderedCallbacks,x=Package["telescope-base"].commentSubmitClientCallbacks,D=Package["telescope-base"].commentSubmitMethodCallbacks,B=Package["telescope-base"].commentAfterSubmitMethodCallbacks,U=Package["telescope-base"].commentEditRenderedCallbacks,z=Package["telescope-base"].commentEditClientCallbacks,H=Package["telescope-base"].commentEditMethodCallbacks,O=Package["telescope-base"].commentAfterEditMethodCallbacks,q=Package["telescope-base"].getTemplate,W=Package["telescope-base"].templates,$=Package["telescope-base"].themeSettings,F=Package["aldeed:simple-schema"].SimpleSchema,Q=Package["aldeed:simple-schema"].MongoObject,G=Package["tap:i18n"].TAPi18next,J=Package["tap:i18n"].TAPi18n,K=Package.jquery.$,X=Package.jquery.jQuery,Y=Package["iron:router"].Router,Z=Package["iron:router"].RouteController,ea=Package.templating.Template,aa=Package["iron:core"].Iron,ta=Package.blaze.Blaze,ca=Package.blaze.UI,oa=Package.blaze.Handlebars,sa=Package.htmljs.HTML,f,g,na,m,h,_,ra,la,ia,ua,pa,ga,da;(function(){ra=new F({_id:{type:String,optional:!0},order:{type:Number,optional:!0},slug:{type:String},name:{type:String}}),na=new e.Collection("categories",{schema:ra}),y.category=function(e){return{find:{"categories.slug":e.category},options:{sort:{sticky:-1,score:-1}}}},C.push({template:"postCategories",order:3}),h.push("categoriesMenu"),m.push({propertyName:"categories",propertySchema:{type:[ra],optional:!0}});var a=function(e){return e.categories=[],K("input[name=category]:checked").each(function(){var a=K(this).val();e.categories.push(na.findOne(a))}),e};A.push(a),j.push(a),e.startup(function(){na.allow({insert:isAdminById,update:isAdminById,remove:isAdminById}),e.methods({category:function(a){if(console.log(a),!e.user()||!isAdmin(e.user()))throw new e.Error(i18n.t("you_need_to_login_and_be_an_admin_to_add_a_new_category"));var t=na.insert(a);return a.name}})}),la=function(e){return r()+"category/"+e}}).call(this),function(){J.packages["telescope-tags"]={translation_function_name:"__",helper_name:"_",namespace:"telescope-tags"},ia=J._getPackageI18nextProxy("telescope-tags"),ua=J._getRegisterHelpersProxy("telescope-tags"),pa=ua;var e=Package.underscore._;ga=e.keys(ea)}.call(this),function(){f.push("categories"),g.push({route:"categories",label:"Categories"}),e.startup(function(){Y.onBeforeAction(Y._filters.isAdmin,{only:["categories"]}),da=PostsListController.extend({view:"category"}),Y.route("/category/:slug/:limit?",{name:"posts_category",controller:da,onAfterAction:function(){Session.set("categorySlug",this.params.slug)}}),Y.route("/categories",{name:"categories"})})}.call(this),function(){ea.__checkName("categories"),ea.categories=new ea("Template.categories",function(){var e=this;return sa.DIV({"class":"grid-small grid-module dialog admin"},sa.Raw('\n    <h2>Categories</h2>\n    <form class="form-block">\n      <h3>Add new category</h3>\n      <div class="control-group">\n        <label>Name</label>\n        <div class="controls"><input id="name" type="text" value=""></div>\n      </div>\n      <div class="control-group">\n        <label>Order</label>\n        <div class="controls"><input id="order" type="number" value=""></div>\n      </div>\n      <div class="form-actions">\n        <input type="submit" class="button" value="Submit">\n      </div>\n    </form>\n    '),sa.UL("\n      ",ta.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n        ",ta._TemplateWith(function(){return{template:Spacebars.call(e.lookup("categoryItem"))}},function(){return Spacebars.include(function(){return Spacebars.call(ea.__dynamic)})}),"\n      "]}),"\n    "),"\n  ")})}.call(this),function(){e.startup(function(){ea[q("categories")].helpers({categories:function(){return na.find({},{sort:{order:1,name:1}})},categoryItem:function(){return q("categoryItem")}}),ea[q("categories")].events({"click input[type=submit]":function(a){a.preventDefault();var t=K("#name").val(),c=na.find().count(),o=parseInt(K("#order").val())||c+1,s=slugify(t);e.call("category",{name:t,order:o,slug:s},function(e,a){e?(console.log(e),throwError(e.reason),clearSeenErrors()):K("#name").val("")})}})})}.call(this),function(){ea.__checkName("categoryItem"),ea.categoryItem=new ea("Template.categoryItem",function(){var e=this;return sa.LI("      \n		",sa.FORM("\n        ",sa.DIV({"class":"control-group inline"},"\n          ",sa.Raw('<a class="button submit edit-link" href="#">Save</a>'),"\n          ",sa.DIV({"class":"controls"},"\n            ",sa.INPUT({"class":"category-name",id:function(){return["name_",Spacebars.mustache(e.lookup("_id"))]},type:"text",value:function(){return Spacebars.mustache(e.lookup("name"))},placeholder:"Name"}),"\n            ",sa.INPUT({"class":"category-number",id:function(){return["order_",Spacebars.mustache(e.lookup("_id"))]},type:"number",value:function(){return Spacebars.mustache(e.lookup("order"))},placeholder:"0"}),"\n          "),"\n          ",sa.SPAN({"class":"category-slug small"},"Slug: /",ta.View(function(){return Spacebars.mustache(e.lookup("slug"))})),"\n        "),"\n      "),"\n  ")})}.call(this),function(){e.startup(function(){ea[q("categoryItem")].events({"click .edit-link":function(a,t){a.preventDefault();var c=t.data._id,o=K("#name_"+c).val(),s=parseInt(K("#order_"+c).val()),n=slugify(o);o?na.update(c,{$set:{name:o,slug:n,order:s}}):na.remove(c),e.call("updateCategoryInPosts",c,function(e){e&&throwError(e.reason)})}})})}.call(this),function(){ea.__checkName("categoriesMenu"),ea.categoriesMenu=new ea("Template.categoriesMenu",function(){var e=this;return ta.If(function(){return Spacebars.call(e.lookup("hasCategories"))},function(){return["\n    ",sa.DIV({"class":"dropdown categories-menu header-submodule"},"\n      ",sa.A({"class":"categories dropdown-top-level",href:"/"},ta.View(function(){return Spacebars.mustache(e.lookup("_"),"categories")})),"\n      ",sa.DIV({"class":"dropdown-menu"},"\n        ",sa.UL({role:"menu","aria-labelledby":"dLabel"},"\n          ",ta.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n            ",sa.LI(sa.A({"class":"dropdown-sub-level",href:function(){return Spacebars.mustache(e.lookup("categoryLink"))}},ta.View(function(){return Spacebars.mustache(e.lookup("name"))}))),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  "]})})}.call(this),function(){e.startup(function(){ea[q("categoriesMenu")].helpers({hasCategories:function(){return"undefined"!=typeof na&&na.find().count()},cat:function(){return ia("categories")},categories:function(){return na.find({},{sort:{order:1,name:1}})},categoryLink:function(){return la(this.slug)}})})}.call(this),function(){ea.__checkName("postCategories"),ea.postCategories=new ea("Template.postCategories",function(){var e=this;return ta.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n    ",sa.A({href:function(){return Spacebars.mustache(e.lookup("categoryLink"))},"class":function(){return["post-category category-",Spacebars.mustache(e.lookup("slug"))]}},ta.View(function(){return Spacebars.mustache(e.lookup("name"))})),"\n  "]})})}.call(this),function(){e.startup(function(){ea[q("postCategories")].helpers({categoryLink:function(){return la(this.slug)}})})}.call(this),function(){var e=Package.underscore._,a="telescope-tags",t="telescope-tags";"project"!=a&&(t=J.packages[a].namespace);for(var c=e.difference(e.keys(ea),ga),o=0;o<c.length;o++){var s=c[o];ua(s)}}.call(this),function(){var e=Package.underscore._,a="telescope-tags",t="telescope-tags";"project"!=a&&(t=J.packages[a].namespace),J.addResourceBundle("en",t,{categories:"Categories"})}.call(this),function(){var e=Package.underscore._,a="telescope-tags",t="telescope-tags";"project"!=a&&(t=J.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-tags",t="telescope-tags";"project"!=a&&(t=J.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-tags",t="telescope-tags";"project"!=a&&(t=J.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-tags",t="telescope-tags";"project"!=a&&(t=J.packages[a].namespace)}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-tags"]={preloadSubscriptions:f,adminNav:g,Categories:na,addToPostSchema:m,primaryNav:h,postModules:_}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,c=Package["telescope-lib"].camelToDash,t=Package["telescope-lib"].dashToCamel,s=Package["telescope-lib"].camelCaseify,l=Package["telescope-lib"].getSetting,o=Package["telescope-lib"].getThemeSetting,b=Package["telescope-lib"].getSiteUrl,p=Package["telescope-lib"].trimWords,k=Package["telescope-lib"].can,g=Package["telescope-lib"]._,i=Package["telescope-lib"].capitalise,P=Package["telescope-base"].adminNav,d=Package["telescope-base"].viewNav,m=Package["telescope-base"].addToPostSchema,n=Package["telescope-base"].addToCommentsSchema,r=Package["telescope-base"].addToSettingsSchema,C=Package["telescope-base"].preloadSubscriptions,h=Package["telescope-base"].primaryNav,u=Package["telescope-base"].secondaryNav,S=Package["telescope-base"].viewParameters,M=Package["telescope-base"].footerModules,f=Package["telescope-base"].heroModules,E=Package["telescope-base"].postModules,v=Package["telescope-base"].postHeading,T=Package["telescope-base"].postMeta,y=Package["telescope-base"].modulePositions,A=Package["telescope-base"].postSubmitRenderedCallbacks,N=Package["telescope-base"].postSubmitClientCallbacks,R=Package["telescope-base"].postSubmitMethodCallbacks,w=Package["telescope-base"].postAfterSubmitMethodCallbacks,D=Package["telescope-base"].postEditRenderedCallbacks,x=Package["telescope-base"].postEditClientCallbacks,H=Package["telescope-base"].postEditMethodCallbacks,U=Package["telescope-base"].postAfterEditMethodCallbacks,W=Package["telescope-base"].commentSubmitRenderedCallbacks,_=Package["telescope-base"].commentSubmitClientCallbacks,j=Package["telescope-base"].commentSubmitMethodCallbacks,q=Package["telescope-base"].commentAfterSubmitMethodCallbacks,z=Package["telescope-base"].commentEditRenderedCallbacks,B=Package["telescope-base"].commentEditClientCallbacks,F=Package["telescope-base"].commentEditMethodCallbacks,G=Package["telescope-base"].commentAfterEditMethodCallbacks,I=Package["telescope-base"].getTemplate,J=Package["telescope-base"].templates,K=Package["telescope-base"].themeSettings;(function(){K.useDropdowns=!0}).call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-theme-hubble"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package["iron:router"].Router,c=Package["iron:router"].RouteController,t=Package["telescope-base"].adminNav,s=Package["telescope-base"].viewNav,l=Package["telescope-base"].addToPostSchema,o=Package["telescope-base"].addToCommentsSchema,p=Package["telescope-base"].addToSettingsSchema,n=Package["telescope-base"].preloadSubscriptions,i=Package["telescope-base"].primaryNav,g=Package["telescope-base"].secondaryNav,r=Package["telescope-base"].viewParameters,k=Package["telescope-base"].footerModules,b=Package["telescope-base"].heroModules,P=Package["telescope-base"].postModules,d=Package["telescope-base"].postHeading,m=Package["telescope-base"].postMeta,u=Package["telescope-base"].modulePositions,_=Package["telescope-base"].postSubmitRenderedCallbacks,h=Package["telescope-base"].postSubmitClientCallbacks,C=Package["telescope-base"].postSubmitMethodCallbacks,j=Package["telescope-base"].postAfterSubmitMethodCallbacks,f=Package["telescope-base"].postEditRenderedCallbacks,S=Package["telescope-base"].postEditClientCallbacks,v=Package["telescope-base"].postEditMethodCallbacks,E=Package["telescope-base"].postAfterEditMethodCallbacks,M=Package["telescope-base"].commentSubmitRenderedCallbacks,T=Package["telescope-base"].commentSubmitClientCallbacks,A=Package["telescope-base"].commentSubmitMethodCallbacks,N=Package["telescope-base"].commentAfterSubmitMethodCallbacks,R=Package["telescope-base"].commentEditRenderedCallbacks,w=Package["telescope-base"].commentEditClientCallbacks,y=Package["telescope-base"].commentEditMethodCallbacks,z=Package["telescope-base"].commentAfterEditMethodCallbacks,F=Package["telescope-base"].getTemplate,I=Package["telescope-base"].templates,x=Package["telescope-base"].themeSettings,D=Package["telescope-lib"].deepExtend,B=Package["telescope-lib"].camelToDash,G=Package["telescope-lib"].dashToCamel,H=Package["telescope-lib"].camelCaseify,L=Package["telescope-lib"].getSetting,U=Package["telescope-lib"].getThemeSetting,W=Package["telescope-lib"].getSiteUrl,q=Package["telescope-lib"].trimWords,J=Package["telescope-lib"].can,K=Package["telescope-lib"]._,O=Package["telescope-lib"].capitalise,Q=Package["telescope-i18n"].i18n,V=Package["telescope-i18n"].setLanguage,X=Package["tap:i18n"].TAPi18next,Y=Package["tap:i18n"].TAPi18n,Z=Package["iron:core"].Iron,$,ea,aa,ca;(function(){var e=Package.underscore._,a="project",c="project";"project"!=a&&(c=Y.packages[a].namespace),Y.languages_available_for_project.de=["German","Deutsch"],Y._enable({helper_name:"_",supported_languages:null,i18n_files_route:"/tap-i18n",cdn_path:null}),Y.languages_available_for_project.en=["English","English"]}).call(this),function(){var e=Package.underscore._,a="project",c="project";"project"!=a&&(c=Y.packages[a].namespace),Y.addResourceBundle("en",c,{has_created_a_new_post:"has created a new post"})}.call(this),function(){var e=Package.underscore._,a="project",c="project";"project"!=a&&(c=Y.packages[a].namespace),Y.languages_available_for_project.es=["Spanish (Spain)","Español"]}.call(this),function(){var e=Package.underscore._,a="project",c="project";"project"!=a&&(c=Y.packages[a].namespace),Y.languages_available_for_project.fr=["French (France)","Français"]}.call(this),function(){var e=Package.underscore._,a="project",c="project";"project"!=a&&(c=Y.packages[a].namespace),Y.languages_available_for_project.it=["Italian","Italiano"]}.call(this),function(){var e=Package.underscore._,a="project",c="project";"project"!=a&&(c=Y.packages[a].namespace),Y.languages_available_for_project["zh-CN"]=["zh-CN","zh-CN"]}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-email"]={buildEmailTemplate:$,sendEmail:ea,buildAndSendEmail:aa,getEmailTemplate:ca}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,t=Package["telescope-lib"].camelToDash,o=Package["telescope-lib"].dashToCamel,s=Package["telescope-lib"].camelCaseify,c=Package["telescope-lib"].getSetting,l=Package["telescope-lib"].getThemeSetting,i=Package["telescope-lib"].getSiteUrl,n=Package["telescope-lib"].trimWords,p=Package["telescope-lib"].can,b=Package["telescope-lib"]._,r=Package["telescope-lib"].capitalise,u=Package["telescope-base"].adminNav,m=Package["telescope-base"].viewNav,k=Package["telescope-base"].addToPostSchema,d=Package["telescope-base"].addToCommentsSchema,g=Package["telescope-base"].addToSettingsSchema,h=Package["telescope-base"].preloadSubscriptions,P=Package["telescope-base"].primaryNav,f=Package["telescope-base"].secondaryNav,S=Package["telescope-base"].viewParameters,v=Package["telescope-base"].footerModules,C=Package["telescope-base"].heroModules,y=Package["telescope-base"].postModules,T=Package["telescope-base"].postHeading,M=Package["telescope-base"].postMeta,x=Package["telescope-base"].modulePositions,V=Package["telescope-base"].postSubmitRenderedCallbacks,_=Package["telescope-base"].postSubmitClientCallbacks,E=Package["telescope-base"].postSubmitMethodCallbacks,N=Package["telescope-base"].postAfterSubmitMethodCallbacks,w=Package["telescope-base"].postEditRenderedCallbacks,I=Package["telescope-base"].postEditClientCallbacks,A=Package["telescope-base"].postEditMethodCallbacks,U=Package["telescope-base"].postAfterEditMethodCallbacks,D=Package["telescope-base"].commentSubmitRenderedCallbacks,R=Package["telescope-base"].commentSubmitClientCallbacks,z=Package["telescope-base"].commentSubmitMethodCallbacks,H=Package["telescope-base"].commentAfterSubmitMethodCallbacks,L=Package["telescope-base"].commentEditRenderedCallbacks,O=Package["telescope-base"].commentEditClientCallbacks,W=Package["telescope-base"].commentEditMethodCallbacks,j=Package["telescope-base"].commentAfterEditMethodCallbacks,B=Package["telescope-base"].getTemplate,G=Package["telescope-base"].templates,K=Package["telescope-base"].themeSettings,q=Package.templating.Template,F=Package.blaze.Blaze,J=Package.blaze.UI,Q=Package.blaze.Handlebars,X=Package.htmljs.HTML;(function(){var e={propertyName:"thumbnailUrl",propertySchema:{type:String,optional:!0}};k.push(e);var a={propertyName:"media",propertySchema:{type:Object,optional:!0,blackbox:!0}};k.push(a),y.push({template:"postThumbnail",position:"center-left"});var t={propertyName:"embedlyKey",propertySchema:{type:String,optional:!0,autoform:{group:"embedly"}}};g.push(t)}).call(this),function(){q.__checkName("postThumbnail"),q.postThumbnail=new q("Template.postThumbnail",function(){var e=this;return[F.If(function(){return Spacebars.call(e.lookup("thumbnailUrl"))},function(){return["\n    ",X.A({"class":function(){return["post-thumbnail-link ",Spacebars.mustache(e.lookup("playVideoClass"))]},href:function(){return Spacebars.mustache(e.lookup("postLink"))},target:"_blank"},"\n      ",X.IMG({"class":"post-thumbnail-image",src:function(){return Spacebars.mustache(e.lookup("thumbnailUrl"))},onerror:"this.style.display='none';"}),"\n    "),"\n  "]}),"\n  ",F.If(function(){return Spacebars.call(e.lookup("media"))},function(){return["\n    ",F._TemplateWith(function(){return{template:Spacebars.call(e.lookup("videoTemplate")),data:Spacebars.call(e.lookup("."))}},function(){return Spacebars.include(function(){return Spacebars.call(q.__dynamic)})}),"\n  "]})]})}.call(this),function(){q[B("postThumbnail")].helpers({postLink:function(){return this.url?getOutgoingUrl(this.url):"/posts/"+this._id},playVideoClass:function(){return this.media?"post-thumbnail-has-video":""},videoTemplate:function(){return B("postVideo")}}),q[B("postThumbnail")].events({"click .post-thumbnail-has-video":function(e){e.preventDefault(),$("body").addClass("showing-lightbox"),$(e.target).parents(".post").find(".post-video-lightbox").fadeIn("fast")}})}.call(this),function(){q.__checkName("postVideo"),q.postVideo=new q("Template.postVideo",function(){var e=this;return Spacebars.With(function(){return Spacebars.call(e.lookup("media"))},function(){return["\n    ",X.DIV({"class":"post-video-lightbox hidden"},"\n      ",X.A({"class":"post-video-lightbox-hide",href:"#"},"×"),"\n      ",X.DIV({"class":"post-video-lightbox-inner"},"\n        ",F.View(function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("html")))}),"\n      "),"\n    "),"\n  "]})})}.call(this),function(){q[B("postVideo")].events({"click .post-video-lightbox-hide, click .post-video-lightbox":function(e){e.preventDefault(),$(e.target).parents(".post").find(".post-video-lightbox").fadeOut("fast"),$("body").removeClass("showing-lightbox")}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-module-embedly"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["telescope-lib"].deepExtend,a=Package["telescope-lib"].camelToDash,s=Package["telescope-lib"].dashToCamel,o=Package["telescope-lib"].camelCaseify,n=Package["telescope-lib"].getSetting,c=Package["telescope-lib"].getThemeSetting,l=Package["telescope-lib"].getSiteUrl,r=Package["telescope-lib"].trimWords,i=Package["telescope-lib"].can,p=Package.underscore._,u=Package["telescope-lib"].capitalise,g=Package["telescope-base"].adminNav,b=Package["telescope-base"].viewNav,m=Package["telescope-base"].addToPostSchema,k=Package["telescope-base"].addToCommentsSchema,d=Package["telescope-base"].addToSettingsSchema,h=Package["telescope-base"].preloadSubscriptions,P=Package["telescope-base"].primaryNav,w=Package["telescope-base"].secondaryNav,f=Package["telescope-base"].viewParameters,y=Package["telescope-base"].footerModules,v=Package["telescope-base"].heroModules,S=Package["telescope-base"].postModules,_=Package["telescope-base"].postHeading,C=Package["telescope-base"].postMeta,N=Package["telescope-base"].modulePositions,M=Package["telescope-base"].postSubmitRenderedCallbacks,T=Package["telescope-base"].postSubmitClientCallbacks,B=Package["telescope-base"].postSubmitMethodCallbacks,A=Package["telescope-base"].postAfterSubmitMethodCallbacks,E=Package["telescope-base"].postEditRenderedCallbacks,I=Package["telescope-base"].postEditClientCallbacks,j=Package["telescope-base"].postEditMethodCallbacks,R=Package["telescope-base"].postAfterEditMethodCallbacks,x=Package["telescope-base"].commentSubmitRenderedCallbacks,D=Package["telescope-base"].commentSubmitClientCallbacks,U=Package["telescope-base"].commentSubmitMethodCallbacks,H=Package["telescope-base"].commentAfterSubmitMethodCallbacks,V=Package["telescope-base"].commentEditRenderedCallbacks,O=Package["telescope-base"].commentEditClientCallbacks,q=Package["telescope-base"].commentEditMethodCallbacks,z=Package["telescope-base"].commentAfterEditMethodCallbacks,L=Package["telescope-base"].getTemplate,F=Package["telescope-base"].templates,$=Package["telescope-base"].themeSettings,G=Package["aldeed:simple-schema"].SimpleSchema,W=Package["aldeed:simple-schema"].MongoObject,K=Package["iron:router"].Router,Q=Package["iron:router"].RouteController,Y=Package["mrt:mailchimp"].MailChimp,J=Package["tap:i18n"].TAPi18next,X=Package["tap:i18n"].TAPi18n,Z=Package.jquery.$,et=Package.jquery.jQuery,tt=Package.templating.Template,at=Package["mrt:cookies"].Cookie,st=Package["iron:core"].Iron,ot=Package.blaze.Blaze,nt=Package.blaze.UI,ct=Package.blaze.Handlebars,lt=Package.htmljs.HTML,rt,it,pt,ut,gt,bt;(function(){X.packages["telescope-newsletter"]={translation_function_name:"__",helper_name:"_",namespace:"telescope-newsletter"},rt=X._getPackageI18nextProxy("telescope-newsletter"),it=X._getRegisterHelpersProxy("telescope-newsletter"),pt=it;var e=Package.underscore._;ut=e.keys(tt)}).call(this),function(){gt=new G({_id:{type:String,optional:!0},createdAt:{type:Date,optional:!0},sentAt:{type:String,optional:!0},status:{type:String,optional:!0},posts:{type:[String],optional:!0},webHits:{type:Number,optional:!0}}),bt=new e.Collection("campaigns",{schema:gt}),m.push({propertyName:"scheduledAt",propertySchema:{type:Date,optional:!0}});var t={propertyName:"showBanner",propertySchema:{type:Boolean,optional:!0,label:"Newsletter banner",autoform:{group:"newsletter",instructions:"Show newsletter sign-up form on the front page."}}};d.push(t);var a={propertyName:"mailChimpAPIKey",propertySchema:{type:String,optional:!0,autoform:{group:"newsletter"}}};d.push(a);var s={propertyName:"mailChimpListId",propertySchema:{type:String,optional:!0,autoform:{group:"newsletter",instructions:"The ID of the list you want to send to."}}};d.push(s);var o={propertyName:"postsPerNewsletter",propertySchema:{type:Number,optional:!0,autoform:{group:"newsletter"}}};d.push(o);var n={propertyName:"newsletterFrequency",propertySchema:{type:Number,optional:!0,autoform:{group:"newsletter",instructions:"Changes require restarting your app to take effect.",options:[{value:1,label:"Every Day"},{value:2,label:"Mondays, Wednesdays, Fridays"},{value:3,label:"Mondays & Thursdays"},{value:7,label:"Once a week (Mondays)"},{value:0,label:"Don't send newsletter"}]}}};d.push(n),f.campaign=function(e){return{find:{scheduledAt:{$exists:!1},postedAt:{$gte:e.after}},options:{sort:{sticky:-1,score:-1}}}},v.push({template:"newsletterBanner"})}.call(this),function(){tt.__checkName("newsletterBanner"),tt.newsletterBanner=new tt("Template.newsletterBanner",function(){var e=this;return ot.If(function(){return Spacebars.call(e.lookup("showBanner"))},function(){return["\n    ",lt.DIV({"class":"newsletter-banner grid-module grid"},"\n      ",lt.FORM("\n        ",lt.H4({"class":"newsletter-tagline"},ot.View(function(){return Spacebars.mustache(e.lookup("_"),"receive_the_best_of")})," ",ot.View(function(){return Spacebars.mustache(e.lookup("siteName"))})," ",ot.View(function(){return Spacebars.mustache(e.lookup("_"),"right_in_your_inbox")})),"\n        ",ot.If(function(){return Spacebars.call(e.lookup("isNotConnected"))},function(){return["\n          ",lt.INPUT({"class":"newsletter-email",type:"email",placeholder:"Your Email"}),"\n        "]}),"\n        ",lt.BUTTON({"class":"button newsletter-button"},ot.View(function(){return Spacebars.mustache(e.lookup("_"),"get_newsletter")}),lt.SPAN({"class":"button-loader"},lt.IMG({src:"/img/loading-balls.svg"}))),"\n      "),"\n      ",lt.H4({"class":"newsletter-subscribed"},ot.View(function(){return Spacebars.mustache(e.lookup("_"),"thanks_for_subscribing")})),"\n      ",lt.A({href:"#","class":"newsletter-dismiss"},"×"),"\n    "),"\n  "]})})}.call(this),function(){var t=function(){Z(".newsletter-banner form").css("opacity",0),Z(".newsletter-banner .newsletter-subscribed").css("display","block").css("opacity",1),e.setInterval(function(){a()},2e3)},a=function(){Z(".newsletter-banner").fadeOut("fast",function(){e.user()?setUserSetting("showBanner",!1):at.set("showBanner","no")})};e.startup(function(){tt[L("newsletterBanner")].helpers({siteName:function(){return n("title")},isNotConnected:function(){return!e.user()},showBanner:function(){return 0==n("showBanner",!1)||!canView(e.user())||"/"!=K.current().location.get().path||"no"==at.get("showBanner")||e.user()&&0==getUserSetting("showBanner",!0)||e.user()&&1==getUserSetting("subscribedToNewsletter",!1)?!1:!0}}),tt[L("newsletterBanner")].events({"click .newsletter-button":function(a){a.preventDefault();var s=Z(".newsletter-banner");if(e.user())s.addClass("show-loader"),e.call("addCurrentUserToMailChimpList",function(e,a){s.removeClass("show-loader"),e?(console.log(e),throwError(e.message)):(console.log(a),t())});else{var o=Z(".newsletter-email").val();if(!o)return void alert("Please fill in your email.");s.addClass("show-loader"),e.call("addEmailToMailChimpList",o,function(e,a){s.removeClass("show-loader"),e?(console.log(e),throwError(e.message)):(console.log(a),t())})}},"click .newsletter-dismiss":function(e){Z(".newsletter-banner").fadeOut("fast"),a(),e.preventDefault()}})})}.call(this),function(){var e=Package.underscore._,t="telescope-newsletter",a="telescope-newsletter";"project"!=t&&(a=X.packages[t].namespace);for(var s=e.difference(e.keys(tt),ut),o=0;o<s.length;o++){var n=s[o];it(n)}}.call(this),function(){var e=Package.underscore._,t="telescope-newsletter",a="telescope-newsletter";"project"!=t&&(a=X.packages[t].namespace),X.addResourceBundle("en",a,{receive_the_best_of:"Receive the best of",right_in_your_inbox:"right in your inbox.",get_newsletter:"Get Newsletter",thanks_for_subscribing:"Thanks for subscribing!"})}.call(this),function(){var e=Package.underscore._,t="telescope-newsletter",a="telescope-newsletter";"project"!=t&&(a=X.packages[t].namespace)}.call(this),function(){var e=Package.underscore._,t="telescope-newsletter",a="telescope-newsletter";"project"!=t&&(a=X.packages[t].namespace)}.call(this),function(){var e=Package.underscore._,t="telescope-newsletter",a="telescope-newsletter";"project"!=t&&(a=X.packages[t].namespace)}.call(this),function(){var e=Package.underscore._,t="telescope-newsletter",a="telescope-newsletter";"project"!=t&&(a=X.packages[t].namespace)}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-newsletter"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,t=Package["telescope-lib"].camelToDash,s=Package["telescope-lib"].dashToCamel,c=Package["telescope-lib"].camelCaseify,o=Package["telescope-lib"].getSetting,n=Package["telescope-lib"].getThemeSetting,l=Package["telescope-lib"].getSiteUrl,r=Package["telescope-lib"].trimWords,i=Package["telescope-lib"].can,p=Package.underscore._,d=Package["telescope-lib"].capitalise,u=Package["telescope-base"].adminNav,k=Package["telescope-base"].viewNav,g=Package["telescope-base"].addToPostSchema,b=Package["telescope-base"].addToCommentsSchema,m=Package["telescope-base"].addToSettingsSchema,P=Package["telescope-base"].preloadSubscriptions,f=Package["telescope-base"].primaryNav,y=Package["telescope-base"].secondaryNav,h=Package["telescope-base"].viewParameters,S=Package["telescope-base"].footerModules,_=Package["telescope-base"].heroModules,v=Package["telescope-base"].postModules,C=Package["telescope-base"].postHeading,D=Package["telescope-base"].postMeta,M=Package["telescope-base"].modulePositions,T=Package["telescope-base"].postSubmitRenderedCallbacks,j=Package["telescope-base"].postSubmitClientCallbacks,E=Package["telescope-base"].postSubmitMethodCallbacks,A=Package["telescope-base"].postAfterSubmitMethodCallbacks,I=Package["telescope-base"].postEditRenderedCallbacks,w=Package["telescope-base"].postEditClientCallbacks,R=Package["telescope-base"].postEditMethodCallbacks,L=Package["telescope-base"].postAfterEditMethodCallbacks,x=Package["telescope-base"].commentSubmitRenderedCallbacks,N=Package["telescope-base"].commentSubmitClientCallbacks,U=Package["telescope-base"].commentSubmitMethodCallbacks,H=Package["telescope-base"].commentAfterSubmitMethodCallbacks,V=Package["telescope-base"].commentEditRenderedCallbacks,z=Package["telescope-base"].commentEditClientCallbacks,O=Package["telescope-base"].commentEditMethodCallbacks,Y=Package["telescope-base"].commentAfterEditMethodCallbacks,q=Package["telescope-base"].getTemplate,B=Package["telescope-base"].templates,W=Package["telescope-base"].themeSettings,$=Package["meteorhacks:fast-render"].FastRender,F=Package["meteorhacks:fast-render"].__init_fast_render,Q=Package["meteorhacks:subs-manager"].SubsManager,G=Package["tap:i18n"].TAPi18next,J=Package["tap:i18n"].TAPi18n,K=Package.jquery.$,X=Package.jquery.jQuery,Z=Package["iron:router"].Router,ea=Package["iron:router"].RouteController,aa=Package.templating.Template,ta=Package["iron:core"].Iron,sa=Package.blaze.Blaze,ca=Package.blaze.UI,oa=Package.blaze.Handlebars,na=Package.htmljs.HTML,la,ra,ia,pa,da,ua;(function(){J.packages["telescope-daily"]={translation_function_name:"__",helper_name:"_",namespace:"project"},ra=J._getPackageI18nextProxy("project"),ia=J._getRegisterHelpersProxy("telescope-daily"),pa=ia;var e=Package.underscore._;da=e.keys(aa)}).call(this),function(){k.push({route:"postsDaily",label:"daily"}),h.daily=function(e){return{find:{postedAt:{$gte:e.after}},options:{sort:{createdAt:-1,sticky:-1,baseScore:-1},limit:0}}}}.call(this),function(){var a=5,t=new Q({cacheLimit:50,expireIn:30});la=ea.extend({template:function(){return q("postsDaily")},subscriptions:function(){this.days=this.params.days?this.params.days:a;var e={view:"daily",days:this.days,after:moment().subtract(this.days,"days").startOf("day").toDate()};this.postsSubscription=t.subscribe("postsList",e,function(){Session.set("postsLoaded",!0)}),this.postsUsersSubscription=t.subscribe("postsListUsers",e)},data:function(){return Session.set("postsDays",this.days),{days:this.days}}}),e.startup(function(){Z.route("/daily/:days?",{name:"postsDaily",controller:la})})}.call(this),function(){aa.__checkName("postsDaily"),aa.postsDaily=new aa("Template.postsDaily",function(){var e=this;return sa.If(function(){return Spacebars.call(e.lookup("postsLoaded"))},function(){return["\n    ",na.DIV({"class":"grid"},"\n      ",sa.Each(function(){return Spacebars.call(e.lookup("days"))},function(){return["\n        ",na.H2({"class":"posts-day-heading"},sa.View(function(){return Spacebars.mustache(e.lookup("formatDate"),e.lookup("date"),"dddd, MMMM Do YYYY")})),"\n        ",na.DIV({"class":"posts-wrapper posts-day posts list grid-module"},"\n          ",sa.If(function(){return Spacebars.call(e.lookup("posts"))},function(){return["\n            ",sa.Each(function(){return Spacebars.call(e.lookup("posts"))},function(){return["\n              ",sa._TemplateWith(function(){return{template:Spacebars.call(e.lookup("post_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(aa.__dynamic)})}),"\n            "]}),"\n          "]},function(){return["\n            ",na.P({"class":"empty-day-notice"},"Sorry, no posts for that day."),"\n          "]}),"\n        "),"\n      "]}),"\n      ",na.A({"class":"more-button grid-module",href:function(){return Spacebars.mustache(e.lookup("loadMoreUrl"))}},na.SPAN(sa.View(function(){return Spacebars.mustache(e.lookup("_"),"load_more")}))),"\n    "),"\n  "]},function(){return["\n    ",na.DIV({"class":"grid loading-module"},"\n      ",Spacebars.include(e.lookupTemplate("spinner")),"\n    "),"\n  "]})})}.call(this),function(){var a=5,t=function(e){var a={view:"digest",after:moment(e).startOf("day").toDate(),before:moment(e).endOf("day").toDate()},t=getPostsParameters(a),s=Posts.find(t.find,t.options).map(function(e,a,t){return e.rank=a,e});return s};e.startup(function(){aa[q("postsDaily")].helpers({postsLoaded:function(){return!!Session.get("postsLoaded")},post_item:function(){return q("post_item")},days:function(){var e=[],a=Session.get("postsDays");for(ua=0;a>ua;ua++)e.push({date:moment().subtract(ua,"days").startOf("day").toDate()});return e},posts:function(){return t(this.date)},loadMoreUrl:function(){var e=parseInt(Session.get("postsDays"))+a;return"/daily/"+e}})})}.call(this),function(){var e=Package.underscore._,a="telescope-daily",t="telescope-daily";"project"!=a&&(t=J.packages[a].namespace);for(var s=e.difference(e.keys(aa),da),c=0;c<s.length;c++){var o=s[c];ia(o)}}.call(this),function(){var e=Package.underscore._,a="telescope-daily",t="telescope-daily";"project"!=a&&(t=J.packages[a].namespace),J.addResourceBundle("en",t,{daily:"Daily"})}.call(this),function(){var e=Package.underscore._,a="telescope-daily",t="telescope-daily";"project"!=a&&(t=J.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-daily",t="telescope-daily";"project"!=a&&(t=J.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-daily",t="telescope-daily";"project"!=a&&(t=J.packages[a].namespace)}.call(this),function(){var e=Package.underscore._,a="telescope-daily",t="telescope-daily";"project"!=a&&(t=J.packages[a].namespace)}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-daily"]={PostsDailyController:la}}();

!function(){var e=Package.meteor.Meteor,a=Package["telescope-lib"].deepExtend,t=Package["telescope-lib"].camelToDash,c=Package["telescope-lib"].dashToCamel,s=Package["telescope-lib"].camelCaseify,o=Package["telescope-lib"].getSetting,l=Package["telescope-lib"].getThemeSetting,p=Package["telescope-lib"].getSiteUrl,k=Package["telescope-lib"].trimWords,b=Package["telescope-lib"].can,i=Package["telescope-lib"]._,g=Package["telescope-lib"].capitalise,r=Package["telescope-base"].adminNav,d=Package["telescope-base"].viewNav,P=Package["telescope-base"].addToPostSchema,m=Package["telescope-base"].addToCommentsSchema,n=Package["telescope-base"].addToSettingsSchema,u=Package["telescope-base"].preloadSubscriptions,C=Package["telescope-base"].primaryNav,S=Package["telescope-base"].secondaryNav,h=Package["telescope-base"].viewParameters,M=Package["telescope-base"].footerModules,f=Package["telescope-base"].heroModules,y=Package["telescope-base"].postModules,v=Package["telescope-base"].postHeading,E=Package["telescope-base"].postMeta,T=Package["telescope-base"].modulePositions,A=Package["telescope-base"].postSubmitRenderedCallbacks,N=Package["telescope-base"].postSubmitClientCallbacks,R=Package["telescope-base"].postSubmitMethodCallbacks,w=Package["telescope-base"].postAfterSubmitMethodCallbacks,G=Package["telescope-base"].postEditRenderedCallbacks,x=Package["telescope-base"].postEditClientCallbacks,D=Package["telescope-base"].postEditMethodCallbacks,H=Package["telescope-base"].postAfterEditMethodCallbacks,I=Package["telescope-base"].commentSubmitRenderedCallbacks,U=Package["telescope-base"].commentSubmitClientCallbacks,W=Package["telescope-base"].commentSubmitMethodCallbacks,_=Package["telescope-base"].commentAfterSubmitMethodCallbacks,j=Package["telescope-base"].commentEditRenderedCallbacks,q=Package["telescope-base"].commentEditClientCallbacks,z=Package["telescope-base"].commentEditMethodCallbacks,B=Package["telescope-base"].commentAfterEditMethodCallbacks,F=Package["telescope-base"].getTemplate,J=Package["telescope-base"].templates,K=Package["telescope-base"].themeSettings;(function(){var e={propertyName:"kadiraAppId",propertyGroup:"kadira",propertySchema:{type:String,optional:!0,autoform:{group:"kadira"}}};n.push(e);var a={propertyName:"kadiraAppSecret",propertyGroup:"kadira",propertySchema:{type:String,optional:!0,autoform:{group:"kadira"}}};n.push(a)}).call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-kadira"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["artwells:queue"]={}}();

!function(){var e=Package.meteor.Meteor,r=Package.check.check,n=Package.check.Match,i=Package.underscore._,t=Package.tracker.Tracker,o=Package.tracker.Deps,a=Package["accounts-base"].Accounts,s=Package.blaze.Blaze,c=Package.blaze.UI,u=Package.blaze.Handlebars,d=Package.htmljs.HTML,f,l,m,h;(function(){f={settings:{overrides:{},queueTimmer:6e4,userPreferenceDefault:!0,collectionName:"notifications",useIronRouter:!0},_media:function(){return i.union(i.keys(f._serverRunners),i.keys(f._clientRunners))},_serverRunners:{},_clientRunners:{},_runnerCheckers:{},_couriers:{},_extentionParams:[]},f._message=function(e){var r,n=f._couriers[this.courier].messageFormat;if(i.isObject(n)&&!i.isFunction(n)&&!i.isString(n))if(n[e])r=n[e];else if(r=n.default,!r)throw new Error('Herald: No default message defined for "'+this.courier+'" notifications');if(r=r||n,i.isFunction(r))return r.apply(this);if(i.isString(r))return s.With(this,function(){return Template[r]});throw new Error('Herald: message not defined for "'+this.courier+'" notifications')}}).call(this),function(){e.startup(function(){f.collection=new e.Collection(f.settings.collectionName,{transform:function(e){if(e.courier){var r=f._couriers[e.courier];e.message=function(e){if(e&&!i.isString(e))throw new Error("Herald: message argument must be undefined or a string");if(r.messageFormat)return f._message.call(this,e);throw new Error('Herald: no message defined for "'+this.courier+'"')},r.transform&&(l=i.clone(r.transform),e=i.extend(l,e))}return e}}),f.collection.allow({insert:function(e,r){return!1},update:function(e,r){return e==r.userId},remove:function(e,r){return e==r.userId}})})}.call(this),function(){f.addCourier=function(n,t){if(r(n,String),f._couriers[n])throw new Error('Herald: courier "'+n+'"" already exists');r(t,Object),f._couriers[n]={messageFormat:t.message};var o=f._couriers[n];if(e.isServer){r(t.media,Object);var a=i.keys(t.media);if(0==a.length)throw new Error('Herald: courier "'+n+'" must have at least one medium');a.forEach(function(e){if(!i.contains(f._media(),e))throw new Error('Herald: medium "'+e+'" is not a known media');f._runnerCheckers[e].apply(t.media[e])})}o.media=t.media,o.transform=t.transform,i.extend(o,i.pick(t,f._extentionParams))}}.call(this),function(){f.addRunner=function(e){if(!i.isObject(e))throw new Error("Herald: Runner must have an `object` argument");if(!i.isString(e.name))throw new Error("Herald: Runner must medium `name`");if(!i.isFunction(e.run))throw new Error("Herald: Runner must have a `run` function");if(!i.isFunction(e.check))throw new Error("Herald: Runner must have a `check` function");if(!i.isArray(e.where)&&!i.isString(e.where))throw new Error("Herald: Runner `where` must be a valid environment");var r;r=i.isString(e.where)?[e.where]:e.where,i.each(r,function(r){"server"==r&&(f._serverRunners[e.name]=e.run),"client"==r&&(f._clientRunners[e.name]=e.run)}),f._runnerCheckers[e.name]=e.check},m=function(){},m.prototype.run=function(){return{command:"run"}},m.prototype.stop=function(){return{command:"stop"}},m.prototype.delay=function(e){return{command:"delay",time:e}},m.prototype.transfer=function(e,r){return{command:"transfer",name:e,time:r}},h=function(r,n,i,t){switch(i.command){case"run":break;case"stop":t=!1;break;case"delay":if(t=!1,f._serverRunners[n]){var o={};o["media."+n+".send"]=!0;var a='Herald.escalate("'+r._id+'", "'+n+'")';f.collection.update(notificationId,{$set:o},function(e,r){Queue.add({command:a,execute_after:i.time})})}if(f._clientRunners[n]){var s=i.time.getTime()-(new Date).getTime();e.call("HeraldUpdateAndDelay",r._id,n,s)}break;case"transfer":if(t=!1,!f._clientRunners[i.name]&&!f._serverRunners[i.name])throw new Error("Herald: "+n+" transfer call - no medium "+i.name);if(f._serverRunners[i.name]&&e.call("HeraldTransferServerMedium",r._id,i),f._clientRunners[i.name]){var s;i.time&&(s=i.time.getTime()-(new Date).getTime());var o={};o["media."+i.name]=!0,e.call("HeraldUpdateAndDelay",r._id,o,s)}break;default:throw new Error("Herald:"+n+" onRun returned the unknown command "+i.command)}return t},e.methods({HeraldTransferServerMedium:function(r,n){var i=f.collection.findOne(r);if(this.userId!=i.userId)throw new e.Meteor.Error(550,"Herald: permission denied");if(!f._couriers[i.courier].media[n.name])throw new Error("Herald: "+i.courier+" transfer call - no medium "+n.name);var t='Herald.escalate("'+i._id+'", "'+n.name+'")';if(e.isServer){var o={};o["media."+n.name+".send"]=!0,f.collection.update(r,{$set:o},function(e,r){Queue.add(n.time?{command:t,execute_after:n.time}:{command:t})})}},HeraldUpdateAndDelay:function(r,n,i){(!i||1e3>i)&&(i=1e3);var t=f.collection.findOne(r);if(this.userId!=t.userId)throw new e.Error(550,"Herald: permission denied");this.isSimulation||e.setTimeout(function(){f.collection.update(r,{$set:n})},i)}})}.call(this),function(){f.userPreference=function(e,r,n){return f.getUserPreference(e,r,n)},f.setUserPreference=function(n,t,o){if(o&&!i.contains(i.keys(f._couriers),o))throw new Error('Herald - getUserPreference: courier "'+o+'" not found');if(!i.isObject(t))throw new Error("Herald - getUserPreference: no media preference given");var a=i.omit(t,f._media());if(!i.isEmpty(a))throw new Error('Herald - getUserPreference: "'+i.toArray(a)+'" are not valid media');if(i.isString(n)?n=e.users.findOne(n):i.isObject(n)||(n=e.isClient?e.user():e.users.findOne(this.userId)),!n||!n._id)throw new Error("Herald - setUserPreference: user not found");if(!n.profile)return e.users.update(n._id,{$set:{profile:r(t)}});if(!n.profile.notifications)return e.users.update(n._id,{$set:{"profile.notifications":r(t).notifications}});if(!o){if(!n.profile.notifications.media)return e.users.update(n._id,{$set:{"profile.notifications.media":r(t).notifications.media}});var s=n.profile.notifications.media;return i.keys(t).forEach(function(e){s[e]=t[e]}),e.users.update(n._id,{$set:{"profile.notifications.media":s}})}if(!n.profile.notifications.couriers||!n.profile.notifications.couriers[o]){var c={};return c["profile.notifications.couriers."+o]=t,e.users.update(n._id,{$set:c})}var u=n.profile.notifications.couriers[o];i.keys(t).forEach(function(e){u[e]=t[e]});var c={};return c["profile.notifications.couriers."+o]=u,e.users.update(n._id,{$set:c})},f.getUserPreference=function(r,n,t){if(!i.isString(n))throw new Error("Herald - getUserPreference: no medium given");if(!i.contains(f._media(),n))throw new Error('Herald - getUserPreference: medium "'+n+'" not found');if(t&&!i.contains(i.keys(f._couriers),t))throw new Error('Herald - getUserPreference: courier "'+t+'" not found');if(i.isString(r)?r=e.users.findOne(r):i.isObject(r)||(r=e.isClient?e.user():e.users.findOne(this.userId)),!r||!r._id)throw new Error("Herald - getUserPreference: user not found");var o=f.settings.userPreferenceDefault;if(!r.profile)return o;if(!r.profile.notifications)return o;var a=!1;return t&&(a=!0),a&&(r.profile.notifications.couriers||(a=!1),a&&!r.profile.notifications.couriers[t]&&(a=!1),a&&r.profile.notifications.couriers[t].hasOwnProperty(n))?r.profile.notifications.couriers[t][n]:r.profile.notifications.media&&r.profile.notifications.media.hasOwnProperty(n)?r.profile.notifications.media[n]:o};var r=function(e){return{notifications:{media:e,couriers:{}}}},n=function(e,r){var n={notifications:{media:{},couriers:{}}};return n.notifications.couriers[e]=r,n}}.call(this),function(){var e={name:"onsite",where:["client"]};e.run=function(e,r){},e.check=function(){},f.addRunner(e)}.call(this),function(){f.getNotifications=function(r,n){if(e.isClient&&e.loggingIn())return[];if(!i.isObject(r))throw new e.Error("Herald getNotifications must contain Mongo filter query");var t=i.omit(r,["user","courier","medium","read"]);if(!i.isEmpty(t))throw new Error("Herald - getNotifications: unknown key(s) "+i.toArray(t));var o=r.user,a=r.courier,s=r.medium,c=r.read,u;if("undefined"==typeof c&&(c=!1),i.isString(o)?u=e.users.findOne(o):i.isObject(o)||(u=e.isClient?e.user():e.users.findOne(this.userId)),!u||!u._id)throw new Error("Herald - getNotifications: user not found");if(a&&!i.contains(i.keys(f._couriers),a))throw new Error('Herald - getNotifications: courier "'+a+'" not found');if(s&&!i.contains(f._media(),s))throw new Error('Herald - getNotifications: medium "'+s+'" not found');var d={userId:u._id,read:c};return s&&(d["media."+s]={$exists:!0}),a&&(d.courier=a),f.collection.find(d,n)},e.methods({heraldMarkAllAsRead:function(){f.collection.update({userId:this.userId},{$set:{read:!0}},{multi:!0})}})}.call(this),function(){t.autorun(function(){e.userId()&&e.subscribe("notifications")}),e.startup(function(){if(Package["iron:router"]&&f.settings.useIronRouter){var e=function(){f.collection.find({url:this.path,read:!1},{fields:{read:1}}).forEach(function(e){f.collection.update(e._id,{$set:{read:!0}})}),this.next()};Router.onRun?Router.onRun(e):Router.load(e)}var r=[];i.each(i.keys(f._clientRunners),function(e){var n={};n["media."+e]={send:!0,sent:!1},r.push(n)}),i.isEmpty(r)||f.collection.find({$or:r,read:!1}).observe({added:function(e){f.escalate(e)},changed:function(e){f.escalate(e)}})})}.call(this),function(){f.escalate=function(r){var n=r.media,t=e.user();i.each(i.keys(f._clientRunners),function(e){if(r.media[e]&&!r.media[e].sent&&r.media[e].send&&!f.settings.overrides[e]&&"onsite"!=e){var n=!0;f.userPreference(t,e,r.courier)||(n=!1);var o=f._couriers[r.courier].media[e].onRun;if(i.isFunction(o)){var a=o.call(new m,r,t,n);if(!a.command)throw new Error("Herald:"+e+" onRun did not return a command");n=h(r,e,a,n)}if(n){f._clientRunners[e].call(f._couriers[r.courier].media[e],r,t);var s={};s["media."+e]={send:!1,sent:!0},f.collection.update(r._id,{$set:s})}else{var s={};s["media."+e+".send"]=!1,f.collection.update(r._id,{$set:s})}}})}}.call(this),"undefined"==typeof Package&&(Package={}),Package["kestanous:herald"]={Herald:f}}();

!function(){var e=Package.meteor.Meteor,a=Package["kestanous:herald"].Herald,n=Package.underscore._;(function(){var e={name:"email",where:["server"]};e.run=function(e,a){this.emailRunner.call(e,a)},e.check=function(){if(!n.isFunction(this.emailRunner))throw new Error("Herald-Email: emailRunner must be a function")},a.addRunner(e)}).call(this),"undefined"==typeof Package&&(Package={}),Package["kestanous:herald-email"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["telescope-lib"].deepExtend,a=Package["telescope-lib"].camelToDash,n=Package["telescope-lib"].dashToCamel,o=Package["telescope-lib"].camelCaseify,i=Package["telescope-lib"].getSetting,c=Package["telescope-lib"].getThemeSetting,s=Package["telescope-lib"].getSiteUrl,r=Package["telescope-lib"].trimWords,l=Package["telescope-lib"].can,u=Package.underscore._,p=Package["telescope-lib"].capitalise,f=Package["telescope-base"].adminNav,m=Package["telescope-base"].viewNav,d=Package["telescope-base"].addToPostSchema,k=Package["telescope-base"].addToCommentsSchema,b=Package["telescope-base"].addToSettingsSchema,g=Package["telescope-base"].preloadSubscriptions,h=Package["telescope-base"].primaryNav,_=Package["telescope-base"].secondaryNav,P=Package["telescope-base"].viewParameters,S=Package["telescope-base"].footerModules,v=Package["telescope-base"].heroModules,w=Package["telescope-base"].postModules,I=Package["telescope-base"].postHeading,C=Package["telescope-base"].postMeta,y=Package["telescope-base"].modulePositions,N=Package["telescope-base"].postSubmitRenderedCallbacks,T=Package["telescope-base"].postSubmitClientCallbacks,M=Package["telescope-base"].postSubmitMethodCallbacks,E=Package["telescope-base"].postAfterSubmitMethodCallbacks,R=Package["telescope-base"].postEditRenderedCallbacks,A=Package["telescope-base"].postEditClientCallbacks,U=Package["telescope-base"].postEditMethodCallbacks,V=Package["telescope-base"].postAfterEditMethodCallbacks,L=Package["telescope-base"].commentSubmitRenderedCallbacks,j=Package["telescope-base"].commentSubmitClientCallbacks,H=Package["telescope-base"].commentSubmitMethodCallbacks,D=Package["telescope-base"].commentAfterSubmitMethodCallbacks,B=Package["telescope-base"].commentEditRenderedCallbacks,O=Package["telescope-base"].commentEditClientCallbacks,x=Package["telescope-base"].commentEditMethodCallbacks,z=Package["telescope-base"].commentAfterEditMethodCallbacks,W=Package["telescope-base"].getTemplate,q=Package["telescope-base"].templates,$=Package["telescope-base"].themeSettings,Q=Package["telescope-email"].buildEmailTemplate,Y=Package["telescope-email"].sendEmail,F=Package["telescope-email"].buildAndSendEmail,G=Package["telescope-email"].getEmailTemplate,J=Package["iron:router"].Router,K=Package["iron:router"].RouteController,X=Package["kestanous:herald"].Herald,Z=Package["tap:i18n"].TAPi18next,et=Package["tap:i18n"].TAPi18n,tt=Package.jquery.$,at=Package.jquery.jQuery,nt=Package.templating.Template,ot=Package.tracker.Tracker,it=Package.tracker.Deps,ct=Package["iron:core"].Iron,st=Package.blaze.Blaze,rt=Package.blaze.UI,lt=Package.blaze.Handlebars,ut=Package.htmljs.HTML,X,pt,ft,mt,dt,kt,bt,gt;(function(){E.push(function(t){if(e.isServer){var a=e.users.find({"profile.notifications.posts":1},{fields:{}}).map(function(e){return e._id});X.createNotification(a,{courier:"newPost",data:t})}return t}),D.push(function(t){if(e.isServer){var a=t.parentCommentId,n=e.user(),o=Posts.findOne(t.postId),i=e.users.findOne(o.userId),c={comment:u.pick(t,"_id","userId","author","body"),post:u.pick(o,"_id","title","url")};if(a){var s=Comments.findOne(a),r=e.users.findOne(s.userId);c.parentComment=u.pick(s,"_id","userId","author"),r._id!=n._id&&X.createNotification(r._id,{courier:"newReply",data:c}),i._id!=n._id&&s.userId!=o.userId&&X.createNotification(i._id,{courier:"newComment",data:c})}else i._id!=n._id&&X.createNotification(i._id,{courier:"newComment",data:c})}return t});var t={propertyName:"emailNotifications",propertySchema:{type:Boolean,optional:!0,defaultValue:!0,autoform:{group:"notifications",instructions:"Enable email notifications for new posts and new comments (requires restart)."}}};b.push(t)}).call(this),function(){e.startup(function(){X.collection.deny({update:!l.editById,remove:!l.editById}),X.settings.overrides.email=i("emailNotifications",!0)?!1:!0});var t=function(t){var a=this;e.setTimeout(function(){mt=pt(a),Y(getEmail(t),mt.subject,mt.html)},1)},a=function(t){var a=e.users.findOne(t.userId);return a?getProfileUrl(a):getProfileUrlById(t.userId)},n=function(t){var a=e.users.findOne(t.userId);return a?getUserName(a):t.author};X.addCourier("newPost",{media:{email:{emailRunner:function(e){var t=getPostProperties(this.data),a=t.postAuthorName+" has created a new post: "+t.postTitle,n=Q(G("emailNewPost")(t));Y(getEmail(e),a,n)}}}}),X.addCourier("newComment",{media:{onsite:{},email:{emailRunner:t}},message:{"default":function(e){return st.toHTML(st.With(this,function(){return nt[W("notificationNewComment")]}))}},transform:{profileUrl:function(){return a(this.data.comment)},postCommentUrl:function(){return"/posts/"+this.data.post._id},author:function(){return n(this.data.comment)},postTitle:function(){return this.data.post.title},url:function(){return/comments/+this.comment._id}}}),X.addCourier("newReply",{media:{onsite:{},email:{emailRunner:t}},message:{"default":function(e){return st.toHTML(st.With(this,function(){return nt[W("notificationNewReply")]}))}},transform:{profileUrl:function(){return a(this.data.comment)},postCommentUrl:function(){return"/posts/"+this.data.post._id},author:function(){return n(this.data.comment)},postTitle:function(){return this.data.post.title},url:function(){return/comments/+this.parentComment._id}}})}.call(this),function(){et.packages["telescope-notifications"]={translation_function_name:"__",helper_name:"_",namespace:"telescope-notifications"},dt=et._getPackageI18nextProxy("telescope-notifications"),kt=et._getRegisterHelpersProxy("telescope-notifications"),bt=kt;var e=Package.underscore._;gt=e.keys(nt)}.call(this),function(){nt.__checkName("notificationItem"),nt.notificationItem=new nt("Template.notificationItem",function(){var e=this;return ut.LI({"class":function(){return["notification-item ",st.If(function(){return Spacebars.call(e.lookup("read"))},function(){return"read"})]}},"\n    ",ut.SPAN({"class":"notification-timestamp"},st.View(function(){return Spacebars.mustache(e.lookup("timeAgo"),e.lookup("timestamp"))})),"\n    ",ut.DIV({"class":"notification-html"},"\n      ",st.View(function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("notificationHTML")))}),"\n    "),"\n  ")})}.call(this),function(){nt[W("notificationItem")].helpers({properties:function(){return this.data},notificationHTML:function(){return this.message()}}),nt[W("notificationItem")].events({"click .action-link":function(e,t){var a=t.data._id;X.collection.update({_id:a},{$set:{read:!0}},function(e,t){e&&console.log(e)})}})}.call(this),function(){nt.__checkName("notificationNewComment"),nt.notificationNewComment=new nt("Template.notificationNewComment",function(){var e=this;return ut.P("\n    ",ut.A({href:function(){return Spacebars.mustache(e.lookup("profileUrl"))}},st.View(function(){return Spacebars.mustache(e.lookup("author"))}))," \n    ",st.View(function(){return Spacebars.mustache(e.lookup("_"),"left_a_new_comment_on")}),"  \n    ",ut.A({href:function(){return Spacebars.mustache(e.lookup("postCommentUrl"))},"class":"action-link"},st.View(function(){return Spacebars.mustache(e.lookup("postTitle"))})),"\n  ")})}.call(this),function(){nt.__checkName("notificationNewReply"),nt.notificationNewReply=new nt("Template.notificationNewReply",function(){var e=this;return ut.P("\n    ",ut.A({href:function(){return Spacebars.mustache(e.lookup("profileUrl"))}},st.View(function(){return Spacebars.mustache(e.lookup("author"))})),"\n    ",st.View(function(){return Spacebars.mustache(e.lookup("_"),"has_replied_to_your_comment_on")})," \n    ",ut.A({href:function(){return Spacebars.mustache(e.lookup("postCommentUrl"))},"class":"action-link"},st.View(function(){return Spacebars.mustache(e.lookup("postTitle"))})),"\n  ")})}.call(this),function(){nt.__checkName("notificationsMenu"),nt.notificationsMenu=new nt("Template.notificationsMenu",function(){var e=this;return st.If(function(){return Spacebars.call(e.lookup("isLoggedIn"))},function(){return["\n    ",ut.DIV({"class":"dropdown notifications-menu header-submodule"},"\n      ",ut.A({"class":"view  dropdown-top-level",href:"/"},st.View(function(){return Spacebars.mustache(e.lookup("notification_count"))})),"\n      ",ut.DIV({"class":"dropdown-menu"},"\n        ",ut.UL({role:"menu","aria-labelledby":"dLabel"},"\n          ",st.If(function(){return Spacebars.call(e.lookup("hasNotifications"))},function(){return["\n            ",ut.LI(ut.A({href:"#","class":"button mark-as-read"},st.View(function(){return Spacebars.mustache(e.lookup("_"),"mark_as_read")}))),"  \n            ",st.Each(function(){return Spacebars.call(e.lookup("notifications"))},function(){return["\n              ",st._TemplateWith(function(){return{template:Spacebars.call(e.lookup("notificationItem"))}},function(){return Spacebars.include(function(){return Spacebars.call(nt.__dynamic)})}),"\n            "]}),"\n          "]},function(){return["\n            ",ut.LI(st.View(function(){return Spacebars.mustache(e.lookup("_"),"no_notifications")})),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  "]})})}.call(this),function(){nt[W("notificationsMenu")].helpers({notificationItem:function(){return W("notificationItem")},notifications:function(){return X.collection.find({userId:e.userId(),read:!1},{sort:{timestamp:-1}})},hasNotifications:function(){return!!X.collection.find({userId:e.userId(),read:!1},{sort:{timestamp:-1}}).count()},notification_count:function(){var t=X.collection.find({userId:e.userId(),read:!1}).fetch();return 0==t.length?dt("no_notifications"):1==t.length?dt("1_notification"):t.length+" "+dt("notifications")},notification_class:function(){var t=X.collection.find({userId:e.userId(),read:!1}).fetch();return 0==t.length?"no-notifications":void 0}}),nt[W("notificationsMenu")].events({"click .notifications-toggle":function(e){e.preventDefault(),tt("body").toggleClass("notifications-open")},"click .mark-as-read":function(){e.call("markAllNotificationsAsRead",function(e,t){e&&console.log(e)})}})}.call(this),function(){nt.__checkName("unsubscribe"),nt.unsubscribe=new nt("Template.unsubscribe",function(){var e=this;return ut.DIV({"class":"grid-small grid-block dialog admin"},"\n    ",ut.P(st.View(function(){return Spacebars.mustache(e.lookup("unsubscribed"))})),"\n  ")})}.call(this),function(){nt[W("unsubscribe")].created=function(){var t=this.data.hash;e.call("unsubscribeUser",t,function(e,t){t?Session.set("unsubscribedMessage",dt("you_have_been_unsubscribed_from_all_notifications")):Session.set("unsubscribedMessage",dt("user_not_found"))}),trackEvent("notificationsUnsubcribe",{hash:t})},nt[W("unsubscribe")].helpers({unsubscribed:function(){return Session.get("unsubscribedMessage")}})}.call(this),function(){var e=Package.underscore._,t="telescope-notifications",a="telescope-notifications";"project"!=t&&(a=et.packages[t].namespace);for(var n=e.difference(e.keys(nt),gt),o=0;o<n.length;o++){var i=n[o];kt(i)}}.call(this),function(){var e=Package.underscore._,t="telescope-notifications",a="telescope-notifications";"project"!=t&&(a=et.packages[t].namespace),et.addResourceBundle("en",a,{left_a_new_comment_on:"left a new comment on",has_replied_to_your_comment_on:"has replied to your comment on",mark_as_read:"Mark as read",no_notifications:"No notifications",you_have_been_unsubscribed_from_all_notifications:"You have been unsubscribed from all notifications.",user_not_found:"User not found","1_notification":"1 notification",notifications:"notifications"})}.call(this),function(){var e=Package.underscore._,t="telescope-notifications",a="telescope-notifications";"project"!=t&&(a=et.packages[t].namespace)}.call(this),function(){var e=Package.underscore._,t="telescope-notifications",a="telescope-notifications";"project"!=t&&(a=et.packages[t].namespace)}.call(this),function(){var e=Package.underscore._,t="telescope-notifications",a="telescope-notifications";"project"!=t&&(a=et.packages[t].namespace)}.call(this),function(){var e=Package.underscore._,t="telescope-notifications",a="telescope-notifications";"project"!=t&&(a=et.packages[t].namespace)}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-notifications"]={Herald:X,buildEmailNotification:pt,getUnsubscribeLink:ft}}();

!function(){var t=Package.meteor.Meteor,e=Package["accounts-base"].Accounts,i=Package.check.check,n=Package.check.Match,o=Package.underscore._,r=Package["iron:router"].Router,s=Package["iron:router"].RouteController,a=Package["reactive-var"].ReactiveVar,l=Package.blaze.Blaze,u=Package.blaze.UI,c=Package.blaze.Handlebars,d=Package["reactive-dict"].ReactiveDict,p=Package.sha.SHA256,f=Package["iron:core"].Iron,g=Package.htmljs.HTML,h,m,v,w,S,y,b,k,P,_,O,T,x,I,E,L,A;(function(){m=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},v=function(){var e=t.user();return e?e.username?e.username:e.profile&&e.profile.name?e.profile.name:e.emails&&e.emails[0]?e.emails[0].address:"Signed In":void 0}}).call(this),function(){w=function(t){i(t,x),o.defaults(this,t),this.validating=new a(!1),this.status=new a(null)},t.isClient&&(w.prototype.clearStatus=function(){return this.status.set(null)}),t.isServer&&(w.prototype.clearStatus=function(){}),w.prototype.fixValue=function(t){return"checkbox"===this.type?!!t:"select"===this.type?t:"radio"===this.type?t:(this.trim&&(t=t.trim()),this.lowercase&&(t=t.toLowerCase()),this.uppercase&&(t=t.toUpperCase()),t)},t.isClient&&(w.prototype.getDisplayName=function(t){var e=this.displayName;return o.isObject(e)&&(e=e[t]||e.default),e||(e=this._id),e}),t.isClient&&(w.prototype.getPlaceholder=function(t){var e=this.placeholder;return o.isObject(e)&&(e=e[t]||e.default),e||(e=this._id),e}),w.prototype.getStatus=function(){return this.status.get()},t.isClient&&(w.prototype.getValue=function(t){return"checkbox"===this.type?!!t.$("#at-field-"+this._id+":checked").val():"radio"===this.type?t.$("[name=at-field-"+this._id+"]:checked").val():t.$("#at-field-"+this._id).val()}),t.isClient&&(w.prototype.hasError=function(){return this.negativeValidation&&this.status.get()}),t.isClient&&(w.prototype.hasIcon=function(){return this.showValidating&&this.isValidating()?!0:this.negativeFeedback&&this.hasError()?!0:this.positiveFeedback&&this.hasSuccess()?!0:void 0}),t.isClient&&(w.prototype.hasSuccess=function(){return this.positiveValidation&&this.status.get()===!1}),t.isClient&&(w.prototype.iconClass=function(){return this.isValidating()?h.texts.inputIcons.isValidating:this.hasError()?h.texts.inputIcons.hasError:this.hasSuccess()?h.texts.inputIcons.hasSuccess:void 0}),t.isClient&&(w.prototype.isValidating=function(){return this.validating.get()}),t.isClient&&(w.prototype.setError=function(t){return i(t,n.OneOf(String,void 0)),console.log(this._id+" setErr: "+t||!0),this.status.set(t||!0)}),t.isServer&&(w.prototype.setError=function(t){}),t.isClient&&(w.prototype.setSuccess=function(){return this.status.set(!1)}),t.isServer&&(w.prototype.setSuccess=function(){}),t.isClient&&(w.prototype.setValidating=function(t){return i(t,Boolean),this.validating.set(t)}),t.isServer&&(w.prototype.setValidating=function(t){}),t.isClient&&(w.prototype.setValue=function(t,e){return"checkbox"===this.type?void t.$("#at-field-"+this._id).prop("checked",!0):"radio"===this.type?void t.$("[name=at-field-"+this._id+"]").prop("checked",!0):void t.$("#at-field-"+this._id).val(e)}),w.prototype.validate=function(t,e){if(i(t,n.OneOf(void 0,String,Boolean)),this.setValidating(!0),this.clearStatus(),!t)return e?this.required?(this.setError("Required Field"),this.setValidating(!1),"Required Field"):(this.setSuccess(),this.setValidating(!1),!1):(this.clearStatus(),this.setValidating(!1),null);var o=t.length,r=this.minLength;if(r&&r>o)return this.setError("Minimum required length: "+r),this.setValidating(!1),"Minimum required length: "+r;var s=this.maxLength;if(s&&o>s)return this.setError("Maximum allowed length: "+s),this.setValidating(!1),"Maximum allowed length: "+s;if(this.re&&o&&!t.match(this.re))return this.setError(this.errStr),this.setValidating(!1),this.errStr;if(this.func&&o){var a=this.func(t);return a===!0?this.errStr||!0:a}return this.setSuccess(),this.setValidating(!1),!1}}.call(this),function(){S={changePwd:n.Optional(String),enrollAccount:n.Optional(String),forgotPwd:n.Optional(String),resetPwd:n.Optional(String),signIn:n.Optional(String),signUp:n.Optional(String)},y={mustBeLoggedIn:n.Optional(String),pwdMismatch:n.Optional(String)},b={emailSent:n.Optional(String),emailVerified:n.Optional(String),pwdReset:n.Optional(String),pwdChanged:n.Optional(String),singUpVerifyEmail:n.Optional(String)},k={isValidating:n.Optional(String),hasError:n.Optional(String),hasSuccess:n.Optional(String)},P=n.Where(function(t){return i(t,Object),o.each(o.values(t),function(t){i(t,String)}),!0}),_={button:n.Optional(S),errors:n.Optional(y),navSignIn:n.Optional(String),navSignOut:n.Optional(String),info:n.Optional(b),inputIcons:n.Optional(k),optionalField:n.Optional(String),pwdLink_pre:n.Optional(String),pwdLink_link:n.Optional(String),pwdLink_suff:n.Optional(String),sep:n.Optional(String),signInLink_pre:n.Optional(String),signInLink_link:n.Optional(String),signInLink_suff:n.Optional(String),signUpLink_pre:n.Optional(String),signUpLink_link:n.Optional(String),signUpLink_suff:n.Optional(String),socialAdd:n.Optional(String),socialConfigure:n.Optional(String),socialIcons:n.Optional(P),socialRemove:n.Optional(String),socialSignIn:n.Optional(String),socialSignUp:n.Optional(String),socialWith:n.Optional(String),termsPreamble:n.Optional(String),termsPrivacy:n.Optional(String),termsAnd:n.Optional(String),termsTerms:n.Optional(String),title:n.Optional(S)},O={confirmPassword:n.Optional(Boolean),defaultState:n.Optional(String),enablePasswordChange:n.Optional(Boolean),enforceEmailVerification:n.Optional(Boolean),forbidClientAccountCreation:n.Optional(Boolean),overrideLoginErrors:n.Optional(Boolean),sendVerificationEmail:n.Optional(Boolean),defaultLayout:n.Optional(String),showAddRemoveServices:n.Optional(Boolean),showForgotPasswordLink:n.Optional(Boolean),showLabels:n.Optional(Boolean),showPlaceholders:n.Optional(Boolean),hideSignInLink:n.Optional(Boolean),hideSignUpLink:n.Optional(Boolean),continuousValidation:n.Optional(Boolean),negativeFeedback:n.Optional(Boolean),negativeValidation:n.Optional(Boolean),positiveValidation:n.Optional(Boolean),positiveFeedback:n.Optional(Boolean),showValidating:n.Optional(Boolean),privacyUrl:n.Optional(String),termsUrl:n.Optional(String),homeRoutePath:n.Optional(String),redirectTimeout:n.Optional(Number),texts:n.Optional(_)},T={"default":n.Optional(String),changePwd:n.Optional(String),enrollAccount:n.Optional(String),forgotPwd:n.Optional(String),resetPwd:n.Optional(String),signIn:n.Optional(String),signUp:n.Optional(String)},x={_id:String,type:String,required:n.Optional(Boolean),displayName:n.Optional(n.OneOf(String,T)),placeholder:n.Optional(n.OneOf(String,T)),select:n.Optional([{text:String,value:n.Any}]),minLength:n.Optional(n.Integer),maxLength:n.Optional(n.Integer),re:n.Optional(RegExp),func:n.Optional(n.Where(o.isFunction)),errStr:n.Optional(String),continuousValidation:n.Optional(Boolean),negativeFeedback:n.Optional(Boolean),negativeValidation:n.Optional(Boolean),positiveValidation:n.Optional(Boolean),positiveFeedback:n.Optional(Boolean),trim:n.Optional(Boolean),lowercase:n.Optional(Boolean),uppercase:n.Optional(Boolean)};var s={name:n.Optional(String),path:n.Optional(String),template:n.Optional(String),layoutTemplate:n.Optional(String),redirect:n.Optional(n.OneOf(String,n.Where(o.isFunction)))};I=function(){},I.prototype.ROUTE_DEFAULT={changePwd:{name:"atChangePwd",path:"/change-password"},enrollAccount:{name:"atEnrollAccount",path:"/enroll-account"},forgotPwd:{name:"atForgotPwd",path:"/forgot-password"},resetPwd:{name:"atResetPwd",path:"/reset-password"},signIn:{name:"atSignIn",path:"/sign-in"},signUp:{name:"atSignUp",path:"/sign-up"},verifyEmail:{name:"atVerifyEmail",path:"/verify-email"}},I.prototype.INPUT_TYPES=["checkbox","email","hidden","password","radio","select","tel","text","url"],I.prototype.options={showAddRemoveServices:!1,showForgotPasswordLink:!1,showLabels:!0,showPlaceholders:!0,confirmPassword:!0,defaultState:"signIn",enablePasswordChange:!1,forbidClientAccountCreation:!1,overrideLoginErrors:!0,sendVerificationEmail:!1,privacyUrl:void 0,termsUrl:void 0,homeRoutePath:"/",redirectTimeout:2e3},I.prototype.SPECIAL_FIELDS=["password_again","username_and_email"],I.prototype._fields=[new w({_id:"email",type:"email",required:!0,lowercase:!0,trim:!0}),new w({_id:"password",type:"password",required:!0,minLength:6,displayName:{"default":"password",changePwd:"newPassword",resetPwd:"newPassword"},placeholder:{"default":"password",changePwd:"newPassword",resetPwd:"newPassword"}})],I.prototype.routes={},I.prototype._initialized=!1,I.prototype._isValidInputType=function(t){return-1!==o.indexOf(this.INPUT_TYPES,t)},I.prototype.addField=function(e){if(this._initialized)throw new Error("AccountsTemplates.addField should strictly be called before AccountsTemplates.init!");if(e=o.pick(e,o.keys(x)),i(e,x),-1!==o.indexOf(o.pluck(this._fields,"_id"),e._id))throw new Error("A field called "+e._id+" already exists!");if(!this._isValidInputType(e.type))throw new Error("field.type is not valid!");if("undefined"!=typeof e.minLength&&e.minLength<=0)throw new Error("field.minLength should be greater than zero!");if("undefined"!=typeof e.maxLength&&e.maxLength<=0)throw new Error("field.maxLength should be greater than zero!");if("undefined"!=typeof e.minLength&&"undefined"!=typeof e.minLength&&e.maxLength<e.minLength)throw new Error("field.maxLength should be greater than field.maxLength!");return t.isServer&&o.contains(this.SPECIAL_FIELDS,e._id)||this._fields.push(new w(e)),this._fields},I.prototype.addFields=function(t){var e;try{e=t.length>0&&"0"in Object(t)}catch(i){throw new Error("field argument should be an array of valid field objects!")}if(!e)throw new Error("field argument should be an array of valid field objects!");return o.map(t,function(t){this.addField(t)},this),this._fields},I.prototype.configure=function(e){if(this._initialized)throw new Error("Configuration options must be set before AccountsTemplates.init!");i(e,O);var n=o.omit(e,"texts");if(this.options=o.defaults(n,this.options),t.isClient&&e.texts){var r=e.texts,s=o.omit(r,"button","errors","info","inputIcons","socialIcons","title");this.texts=o.defaults(s,this.texts),r.button&&(this.texts.button=o.defaults(r.button,this.texts.button)),r.errors&&(this.texts.errors=o.defaults(r.errors,this.texts.errors)),r.info&&(this.texts.info=o.defaults(r.info,this.texts.info)),r.inputIcons&&(this.texts.inputIcons=o.defaults(r.inputIcons,this.texts.inputIcons)),r.socialIcons&&(this.texts.socialIcons=o.defaults(r.socialIcons,this.texts.socialIcons)),r.title&&(this.texts.title=o.defaults(r.title,this.texts.title))}},I.prototype.configureRoute=function(t,e){if(i(t,String),i(e,n.OneOf(void 0,s)),this._initialized)throw new Error("Route Configuration can be done only before AccountsTemplates.init!");if(!(t in this.ROUTE_DEFAULT))throw new Error("Unknown Route!");e&&e.path&&"/"!==e.path[0]&&(e=o.clone(e),e.path="/"+e.path),e=o.defaults(e||{},this.ROUTE_DEFAULT[t]),this.routes[t]=e},I.prototype.hasField=function(t){return!!this.getField(t)},I.prototype.getField=function(t){var e=o.filter(this._fields,function(e){return e._id==t});return 1===e.length?e[0]:void 0},I.prototype.getFields=function(){return this._fields},I.prototype.getFieldIds=function(){return o.pluck(this._fields,"_id")},I.prototype.getRouteName=function(t){return t in this.routes?this.routes[t].name:null},I.prototype.getRoutePath=function(t){return t in this.routes?this.routes[t].path:"#"},I.prototype.oauthServices=function(){var i;i=t.isServer?e.oauth&&e.oauth.serviceNames()||[]:e.oauth&&e.loginServicesConfigured()&&e.oauth.serviceNames()||[];var n=[];e.loginServiceConfiguration&&(n=o.pluck(e.loginServiceConfiguration.find().fetch(),"service"));var r=o.map(i,function(t){return{_id:t,configured:o.contains(n,t)}}),s="undefined"!=typeof e._loginButtonsSession;return s||(r=o.filter(r,function(t){return t.configured})),r=o.sortBy(r,function(t){return t._id})},I.prototype.removeField=function(e){if(this._initialized)throw new Error("AccountsTemplates.removeField should strictly be called before AccountsTemplates.init!");var i=o.indexOf(o.pluck(this._fields,"_id"),e);if(-1!==i)return this._fields.splice(i,1)[0];if(!t.isServer||!o.contains(this.SPECIAL_FIELDS,e))throw new Error("A field called "+e+" does not exist!")},I.prototype.setupRoutes=function(){if(t.isServer){if(!h.options.showForgotPasswordLink||"forgotPwd"in h.routes||console.warn("[AccountsTemplates] WARNING: showForgotPasswordLink set to true, but forgotPwd route is not configured!"),"resetPwd"in h.routes){var i=h.routes.resetPwd.path.substr(1);e.urls.resetPassword=function(e){return t.absoluteUrl(i+"/"+e)}}if("enrollAccount"in h.routes){var n=h.routes.enrollAccount.path.substr(1);e.urls.enrollAccount=function(e){return t.absoluteUrl(n+"/"+e)}}if("verifyEmail"in h.routes){var s=h.routes.verifyEmail.path.substr(1);e.urls.verifyEmail=function(e){return t.absoluteUrl(s+"/"+e)}}}var a=h.options.defaultLayout||r.options.layoutTemplate;o.each(h.routes,function(i,n){if("changePwd"===n&&!h.options.enablePasswordChange)throw new Error("changePwd route configured but enablePasswordChange set to false!");if("forgotPwd"===n&&!h.options.showForgotPasswordLink)throw new Error("forgotPwd route configured but showForgotPasswordLink set to false!");if("signUp"===n&&h.options.forbidClientAccountCreation)throw new Error("signUp route configured but forbidClientAccountCreation set to true!");!t.isServer||"forgotPwd"!==n||process.env.MAIL_URL&&Package.email||console.warn("[AccountsTemplates] WARNING: showForgotPasswordLink set to true, but MAIL_URL is not configured!");var s=i.name,l=i.path,u=i.template||"fullPageAtForm",c=i.layoutTemplate||a;o.contains(["enrollAccount","resetPwd","verifyEmail"],n)?(l+="/:paramToken","verifyEmail"===n?r.route(l,{name:s,template:u,layoutTemplate:c,onBeforeAction:function(){h.setState(n),this.next()},onAfterAction:function(){h.setDisabled(!0);var t=this.params.paramToken;e.verifyEmail(t,function(t){h.setDisabled(!1),h.submitCallback(t,n,function(){h.state.form.set("result",h.texts.info.emailVerified)})})},onStop:function(){h.clearState()}}):r.route(l,{name:s,template:u,layoutTemplate:c,onRun:function(){h.paramToken=this.params.paramToken,this.next()},onBeforeAction:function(){h.setState(n),this.next()},onStop:function(){h.clearState(),h.paramToken=null}})):r.route(l,{name:s,template:u,layoutTemplate:c,onBeforeAction:function(){t.user()&&"changePwd"!=n?h.postSubmitRedirect(n):h.setState(n),this.next()},onStop:function(){h.clearState()}})})}}.call(this),function(){I.prototype.STATES=["changePwd","enrollAccount","forgotPwd","hide","resetPwd","signIn","signUp","verifyEmail"],I.prototype._loginType="",I.prototype._prevPath=null,I.prototype._disabled=!1,I.prototype.avoidRedirect=!1,I.prototype.texts={button:{changePwd:"updateYourPassword",enrollAccount:"createAccount",forgotPwd:"emailResetLink",resetPwd:"setPassword",signIn:"signIn",signUp:"signUp"},errors:{mustBeLoggedIn:"error.accounts.Must be logged in",pwdMismatch:"error.pwdsDontMatch"},navSignIn:"signIn",navSignOut:"signOut",info:{emailSent:"info.emailSent",emailVerified:"info.emailVerified",pwdChanged:"info.passwordChanged",pwdReset:"info.passwordReset",pwdSet:"Password Set",singUpVerifyEmail:"Registration Successful! Please check your email and follow the instructions."},inputIcons:{isValidating:"fa fa-spinner fa-spin",hasSuccess:"fa fa-check",hasError:"fa fa-times"},optionalField:"optional",pwdLink_pre:"",pwdLink_link:"forgotPassword",pwdLink_suff:"",sep:"OR",signInLink_pre:"ifYouAlreadyHaveAnAccount",signInLink_link:"signin",signInLink_suff:"",signUpLink_pre:"dontHaveAnAccount",signUpLink_link:"signUp",signUpLink_suff:"",socialAdd:"add",socialConfigure:"configure",socialIcons:{"meteor-developer":"fa fa-rocket"},socialRemove:"remove",socialSignIn:"signIn",socialSignUp:"signUp",socialWith:"with",termsPreamble:"clickAgree",termsPrivacy:"privacyPolicy",termsAnd:"and",termsTerms:"terms",title:{changePwd:"changePassword",enrollAccount:"createAccount",forgotPwd:"resetYourPassword",resetPwd:"resetYourPassword",signIn:"signIn",signUp:"createAccount"}},I.prototype.knownRoutes=[],I.prototype.paramToken=null,I.prototype._isValidState=function(t){return o.contains(this.STATES,t)},I.prototype.loginType=function(){return this._loginType},I.prototype.getPrevPath=function(){return this._prevPath},I.prototype.setPrevPath=function(t){i(t,String),this._prevPath=t},I.prototype.getState=function(){return this.state.form.get("state")},I.prototype.hashPassword=function(t){return{digest:p(t),algorithm:"sha-256"}},I.prototype.disabled=function(){return this.state.form.equals("disabled",!0)?"disabled":void 0},I.prototype.setDisabled=function(t){return i(t,Boolean),this.state.form.set("disabled",t)},I.prototype.setState=function(e,n){if(i(e,String),!this._isValidState(e))throw new t.Error(500,"Internal server error","accounts-templates-core package got an invalid state value!");this.state.form.set("state",e),this.clearState(),o.isFunction(n)&&n()},I.prototype.clearState=function(){o.each(this._fields,function(t){t.clearStatus()});var t=this.state.form;t.set("error",null),t.set("result",null)},I.prototype.clearError=function(){E.set("error",null)},I.prototype.clearResult=function(){E.set("result",null)},I.prototype.ensureSignedIn=function(){if(t.user())this.next();else{h.setPrevPath(r.current().url),h.setState(h.options.defaultState,function(){var t=h.texts.errors.mustBeLoggedIn;h.state.form.set("error",[t])}),h.avoidRedirect=!0;var e=h.routes.signIn&&h.routes.signIn.template;this.render(e||"fullPageAtForm"),this.renderRegions()}},I.prototype.init=function(){console.warn("[AccountsTemplates] There is no more need to call AccountsTemplates.init()! Simply remove the call ;-)")},I.prototype._init=function(){if(!this._initialized){var e=this.hasField("username"),i=this.hasField("email");if(this._loginType=e&&i?"username_and_email":e?"username":"email","username_and_email"===this._loginType&&(this.hasField("username_and_email")||this.addField({_id:"username_and_email",type:"text",displayName:"usernameOrEmail",placeholder:"usernameOrEmail",required:!0})),this.options.confirmPassword){if(!this.hasField("password_again")){var n=o.clone(this.getField("password"));n._id="password_again",n.displayName={"default":"passwordAgain",changePwd:"newPasswordAgain",resetPwd:"newPasswordAgain"},n.placeholder={"default":"passwordAgain",changePwd:"newPasswordAgain",resetPwd:"newPasswordAgain"},this.addField(n)}}else if(this.hasField("password_again"))throw new Error("AccountsTemplates: a field password_again was added but confirmPassword is set to false!");this.options.enablePasswordChange&&(this.hasField("current_password")||this.addField({_id:"current_password",type:"password",displayName:"currentPassword",placeholder:"currentPassword",required:!0}));var s=function(t,e){var i=h.getFieldIds(),n=o.indexOf(i,e);if(-1!==n){var r=o.indexOf(i,t);if(-1!==r&&-1!==r&&r!==n+1){var s=h._fields.splice(r,1)[0],a=h.getFieldIds(),l=o.indexOf(a,e);h._fields.splice(l+1,0,s)}}};s("username_and_email","username"),s("username_and_email","email"),s("password","current_password"),s("password_again","password");var a=!!h.options.positiveValidation,l=!!h.options.negativeValidation,u=!!h.options.showValidating,c=!!h.options.continuousValidation,p=!!h.options.negativeFeedback,f=!!h.options.positiveFeedback;o.each(this._fields,function(t){switch(t._id){case"current_password":t.visible=["changePwd"];break;case"email":t.visible=["forgotPwd","signUp"],"email"===h.loginType()&&t.visible.push("signIn");break;case"password":t.visible=["changePwd","enrollAccount","resetPwd","signIn","signUp"];break;case"password_again":t.visible=["changePwd","enrollAccount","resetPwd","signUp"];break;case"username":t.visible=["signUp"],"username"===h.loginType()&&t.visible.push("signIn");break;case"username_and_email":t.visible=[],"username_and_email"===h.loginType()&&t.visible.push("signIn");break;default:t.visible=["signUp"]}var e=t.positiveValidation;void 0===e&&(t.positiveValidation=a);var i=t.negativeValidation;void 0===i&&(t.negativeValidation=l),t.validation=t.positiveValidation||t.negativeValidation,void 0===t.continuousValidation&&(t.continuousValidation=c),t.continuousValidation=t.validation&&t.continuousValidation,void 0===t.negativeFeedback&&(t.negativeFeedback=p),void 0===t.positiveFeedback&&(t.positiveFeedback=f),t.feedback=t.negativeFeedback||t.positiveFeedback;var n=t.showValidating;void 0===n&&(t.showValidating=u)}),E=new d,E.set("disabled",!1),E.set("state","signIn"),E.set("result",null),E.set("error",null),this.state={form:E},this.options.showAddRemoveServices&&t.subscribe("userRegisteredServices"),this.knownRoutes=o.pluck(o.values(this.routes),"path"),r.onStop(function(){Tracker.nonreactive(function(){var t=r.current().url;o.contains(h.knownRoutes,t)||h.setPrevPath(t),h.avoidRedirect=!1})}),h.setupRoutes(),this._initialized=!0}},I.prototype.linkClick=function(e){h.disabled()||(h.avoidRedirect||"#"===h.getRoutePath(e)?h.setState(e):t.defer(function(){r.go(h.getRouteName(e))}))},I.prototype.logout=function(){t.logout();var e=h.options.homeRoutePath;e&&r.go(e)},I.prototype.postSubmitRedirect=function(t){if(h.avoidRedirect)h.avoidRedirect=!1;else{var e=h.routes[t]&&h.routes[t].redirect;if(e)o.isFunction(e)?e():r.go(e);else{var i=h.getPrevPath();if(i)r.go(i);else{var n=h.options.homeRoutePath;n&&r.go(n)}}}},I.prototype.submitCallback=function(e,i,n){if(e){if(o.isObject(e.details))o.each(e.details,function(t,e){h.getField(e).setError(t)});else{var r=e.reason?"error.accounts."+e.reason:"error.accounts.Unknown error";h.state.form.set("error",[r])}h.setDisabled(!1)}else if(n&&n(),o.contains(["enrollAccount","forgotPwd","resetPwd","verifyEmail"],i)){var s=h.options.redirectTimeout;s>0&&t.setTimeout(function(){h.setDisabled(!1),h.postSubmitRedirect(i)},s)}else i&&(h.setDisabled(!1),h.postSubmitRedirect(i))},h=new I,t.startup(function(){h._init()})}.call(this),function(){I.prototype.atErrorHelpers={error:function(){return h.state.form.get("error")},errorText:function(){var t,e;return this.field?(t=T9n.get(this.field,L=!1),e=T9n.get(this.err,L=!1)):e=T9n.get(this.valueOf(),L=!1),"error.accounts."===e.substring(0,15)&&(e=e.substring(15)),t?t+": "+e:e}}}.call(this),function(){I.prototype.atFormHelpers={hide:function(){var t=this.state||h.getState();return"hide"===t},showTitle:function(e){var i=e||this.state||h.getState();return"verifyEmail"===i||t.user()&&"signIn"===i?!1:!0},showOauthServices:function(e){var i=e||this.state||h.getState();if("signIn"!==i&&"signUp"!==i)return!1;var n=h.oauthServices();return n.length?t.user()?h.options.showAddRemoveServices:!0:!1},showServicesSeparator:function(e){var i=void 0!==Package["accounts-password"],n=e||this.state||h.getState(),o="signIn"===n||"signUp"===n;return o&&!t.user()&&i&&h.oauthServices().length},showError:function(t){return!!h.state.form.get("error")},showResult:function(t){return!!h.state.form.get("result")},showPwdForm:function(e){if(void 0===Package["accounts-password"])return!1;var i=e||this.state||h.getState();return"verifyEmail"===i||"signIn"===i&&t.user()?!1:!0},showSignInLink:function(t){if(h.options.hideSignInLink)return!1;var e=t||this.state||h.getState();return"signUp"===e},showSignUpLink:function(e){if(h.options.hideSignUpLink)return!1;var i=e||this.state||h.getState();return("signIn"===i&&!t.user()||"forgotPwd"===i)&&!h.options.forbidClientAccountCreation},showTermsLink:function(t){var e=t||this.state||h.getState();return"signUp"===e&&(h.options.privacyUrl||h.options.termsUrl)?!0:!1}}}.call(this),function(){I.prototype.atInputRendered=function(){var t=this.data._id,e=r.current().params.query[t];e&&this.$("input#at-field-"+t).val(e)},I.prototype.atInputHelpers={disabled:function(){return h.disabled()},showLabels:function(){return h.options.showLabels},displayName:function(){var t=Template.parentData(1),e=t&&t.state||h.getState(),i=this.getDisplayName(e);return T9n.get(i,L=!1)},optionalText:function(){return"("+T9n.get(h.texts.optionalField,L=!1)+")"},templateName:function(){return"checkbox"===this.type?"atCheckboxInput":"select"===this.type?"atSelectInput":"radio"===this.type?"atRadioInput":"hidden"===this.type?"atHiddenInput":"atTextInput"},values:function(){var t=this._id;return o.map(this.select,function(e){var i=o.clone(e);return i._id=t+"-"+e.value,i.id=t,i})},errorText:function(){var t=this.getStatus();return T9n.get(t,L=!1)},placeholder:function(){if(h.options.showPlaceholders){var t=Template.parentData(1),e=t&&t.state||h.getState(),i=this.getPlaceholder(e);return T9n.get(i,L=!1)}}},I.prototype.atInputEvents={"focusout input":function(t,e){if(this.validation){var i=Template.parentData(1),n=i&&i.state||h.getState();if("signIn"!==n){var o=this._id,r=this.getValue(e),s=this.fixValue(r);return s!==r&&this.setValue(e,s),s&&"password_again"===o&&s!==$("#at-field-password").val()?this.setError(h.texts.errors.pwdMismatch):void this.validate(s)}}},"keyup input":function(t,e){if(this.continuousValidation){var i=Template.parentData(1),n=i&&i.state||h.getState();if("signIn"!==n){var o=this._id,r=this.getValue(e),s=this.fixValue(r);return s!==r&&this.setValue(e,s),s&&"password_again"===o&&s!==$("#at-field-password").val()?this.setError(h.texts.errors.pwdMismatch):void this.validate(s)}}}}}.call(this),function(){I.prototype.atNavButtonHelpers={text:function(){var e=t.user()?h.texts.navSignOut:h.texts.navSignIn;return T9n.get(e,L=!1)}},I.prototype.atNavButtonEvents={"click #at-nav-button":function(e){t.user()?h.logout():r.go("atSignIn")}}}.call(this),function(){I.prototype.atOauthHelpers={oauthService:function(){return h.oauthServices()}}}.call(this),function(){I.prototype.atPwdFormHelpers={disabled:function(){return h.disabled()},fields:function(){var t=Template.parentData(),e=t&&t.state||h.getState();return o.filter(h.getFields(),function(t){return o.contains(t.visible,e)})},showForgotPasswordLink:function(){var t=Template.parentData(),e=t&&t.state||h.getState();return"signIn"===e&&h.options.showForgotPasswordLink}},I.prototype.atPwdFormEvents={"submit #at-pwd-form":function(i,n){i.preventDefault(),$("#at-btn").blur(),h.setDisabled(!0);var r=Template.parentData(),s=r&&r.state||h.getState(),a="signIn"!==s,l={},u=!1,c=[];if(o.each(h.getFields(),function(t){if(o.contains(t.visible,s)){var e=t._id,i=t.getValue(n),r=t.fixValue(i);if(r!==i&&t.setValue(n,r),void 0!==r&&""!==r&&(l[e]=r),a&&t.getStatus()!==!1){var d=t.validate(r,"strict");if(d){if(t.negativeValidation)t.setError(d);else{var p=T9n.get(t.getDisplayName(),L=!1);c.push({field:t.getDisplayName(),err:d})}u=!0}else t.setSuccess()}}}),h.clearError(),h.clearResult(),u)return c.length&&h.state.form.set("error",c),void h.setDisabled(!1);var d=l.current_password,p=l.email,f=l.password,g=l.password_again,m=l.username,v=l.username_and_email;if(delete l.current_password,delete l.email,delete l.password,delete l.password_again,delete l.username,delete l.username_and_email,h.options.confirmPassword&&g&&f!==g){var w=h.getField("password_again");return w.negativeValidation?w.setError(h.texts.errors.pwdMismatch):h.state.form.set("error",[{field:w.getDisplayName(),err:h.texts.errors.pwdMismatch}]),void h.setDisabled(!1)}if("signIn"===s){var S=!!f,y=!0,b;return p?b={email:p}:m?b={username:m}:v?b=v:y=!1,S&&y?t.loginWithPassword(b,f,function(t){h.submitCallback(t,s)}):void h.setDisabled(!1)}if("signUp"===s){var k=h.hashPassword(f);return t.call("ATCreateUserServer",{username:m,email:p,password:k,profile:l},function(e){h.submitCallback(e,void 0,function(){if(h.options.sendVerificationEmail&&h.options.enforceEmailVerification)return h.state.form.set("result",h.texts.info.singUpVerifyEmail),o.each(h.getFields(),function(t){if(o.contains(t.visible,s)){var e=t._id;n.$("#at-field-"+e).val("")}}),void h.setDisabled(!1);var e;e=p?{email:p}:m?{username:m}:v,t.loginWithPassword(e,f,function(t){h.submitCallback(t,s,function(){h.setState("signIn")})})})})}return"forgotPwd"===s?e.forgotPassword({email:p},function(t){h.submitCallback(t,s,function(){h.state.form.set("result",h.texts.info.emailSent),n.$("#at-field-email").val("")})}):"resetPwd"===s||"enrollAccount"===s?e.resetPassword(h.paramToken,f,function(t){h.submitCallback(t,s,function(){var t;"resetPwd"===s?h.state.form.set("result",h.texts.info.pwdReset):h.state.form.set("result",h.texts.info.pwdSet),n.$("#at-field-password").val(""),h.options.confirmPassword&&n.$("#at-field-password_again").val("")})}):"changePwd"===s?e.changePassword(d,f,function(t){h.submitCallback(t,s,function(){h.state.form.set("result",h.texts.info.pwdChanged),n.$("#at-field-current_password").val(""),n.$("#at-field-password").val(""),h.options.confirmPassword&&n.$("#at-field-password_again").val("")})}):void 0}}}.call(this),function(){I.prototype.atPwdFormBtnHelpers={submitDisabled:function(){var t=o.map(h.getFields(),function(t){return t.hasError()});return o.some(t)?"disabled":void 0},buttonText:function(){var t=Template.parentData(),e=t&&t.state||h.getState();return T9n.get(h.texts.button[e],L=!1)}}}.call(this),function(){I.prototype.atPwdLinkHelpers={disabled:function(){return h.disabled()},forgotPwdLink:function(){return h.getRoutePath("forgotPwd")},preText:function(){return T9n.get(h.texts.pwdLink_pre,L=!1)},linkText:function(){return T9n.get(h.texts.pwdLink_link,L=!1)},suffText:function(){return T9n.get(h.texts.pwdLink_suff,L=!1)}},I.prototype.atPwdLinkEvents={"click #at-forgotPwd":function(t,e){t.preventDefault(),h.linkClick("forgotPwd")}}}.call(this),function(){I.prototype.atResultHelpers={result:function(){var t=h.state.form.get("result");return t?T9n.get(t,L=!1):void 0}}}.call(this),function(){I.prototype.atSepHelpers={sepText:function(){return T9n.get(h.texts.sep,L=!1)}}}.call(this),function(){I.prototype.atSigninLinkHelpers={disabled:function(){return h.disabled()},signInLink:function(){return h.getRoutePath("signIn")},preText:function(){return T9n.get(h.texts.signInLink_pre,L=!1)},linkText:function(){return T9n.get(h.texts.signInLink_link,L=!1)},suffText:function(){return T9n.get(h.texts.signInLink_suff,L=!1)}},I.prototype.atSigninLinkEvents={"click #at-signIn":function(t,e){t.preventDefault(),h.linkClick("signIn")}}}.call(this),function(){I.prototype.atSignupLinkHelpers={disabled:function(){return h.disabled()},signUpLink:function(){return h.getRoutePath("signUp")},preText:function(){return T9n.get(h.texts.signUpLink_pre,L=!1)},linkText:function(){return T9n.get(h.texts.signUpLink_link,L=!1)},suffText:function(){return T9n.get(h.texts.signUpLink_suff,L=!1)}},I.prototype.atSignupLinkEvents={"click #at-signUp":function(t,e){t.preventDefault(),h.linkClick("signUp")}}}.call(this),function(){I.prototype.atSocialHelpers={disabled:function(){if(h.disabled())return"disabled";var e=t.user();if(e){var i=0;if(e.services&&(i=o.keys(e.services).length),2===i&&e.services[this._id])return"disabled"}},name:function(){return this._id},iconClass:function(){var t=h.texts.socialIcons[this._id];return t||(t="fa fa-"+this._id),t},buttonText:function(){var e=this,i=this._id;if("meteor-developer"===i&&(i="meteor"),i=m(i),!e.configured)return T9n.get(h.texts.socialConfigure,L=!1)+" "+i;var n=h.options.showAddRemoveServices,r=t.user();if(r&&n){if(r.services&&r.services[this._id]){var s=o.keys(r.services).length;return 2===s?i:T9n.get(h.texts.socialRemove,L=!1)+" "+i}return T9n.get(h.texts.socialAdd,L=!1)+" "+i}var a=Template.parentData(1),l=a&&a.state||h.getState(),u="signIn"===l?T9n.get(h.texts.socialSignIn,L=!1):T9n.get(h.texts.socialSignUp,L=!1);return u+" "+T9n.get(h.texts.socialWith,L=!1)+" "+i}},I.prototype.atSocialEvents={"click button":function(i,n){if(i.preventDefault(),n.find("button").blur(),!h.disabled()){var r=t.user();if(r&&r.services&&r.services[this._id]){var s=o.keys(r.services).length;if(2===s)return;h.setDisabled(!0),t.call("ATRemoveService",this._id,function(t){h.setDisabled(!1)})}else{h.setDisabled(!0);var a=Template.parentData(1),l=a&&a.state||h.getState(),u=this._id,c;
c="meteor-developer"===u?"loginWithMeteorDeveloperAccount":"loginWith"+m(u);var d=t[c];A={},e.ui&&(e.ui._options.requestPermissions[u]&&(A.requestPermissions=e.ui._options.requestPermissions[u]),e.ui._options.requestOfflineToken[u]&&(A.requestOfflineToken=e.ui._options.requestOfflineToken[u])),d(A,function(t){if(h.setDisabled(!1),t&&t instanceof e.LoginCancelledError);else if(t&&t instanceof ServiceConfiguration.ConfigError){if(e._loginButtonsSession)return e._loginButtonsSession.configureService(u)}else h.submitCallback(t,l)})}}}}}.call(this),function(){I.prototype.atTermsLinkHelpers={disabled:function(){return h.disabled()},text:function(){return T9n.get(h.texts.termsPreamble,L=!1)},privacyUrl:function(){return h.options.privacyUrl},privacyLinkText:function(){return T9n.get(h.texts.termsPrivacy,L=!1)},showTermsAnd:function(){return!!h.options.privacyUrl&&!!h.options.termsUrl},and:function(){return T9n.get(h.texts.termsAnd,L=!1)},termsUrl:function(){return h.options.termsUrl},termsLinkText:function(){return T9n.get(h.texts.termsTerms,L=!1)}},I.prototype.atTermsLinkEvents={"click a":function(t){h.disabled()&&t.preventDefault()}}}.call(this),function(){I.prototype.atTitleHelpers={title:function(){var t=Template.parentData(),e=t&&t.state||h.getState();return T9n.get(h.texts.title[e],L=!1)}}}.call(this),function(){t.methods({ATRemoveService:function(e){var i=this.userId;if(i){var n=t.users.findOne(i),r=o.keys(n.services).length;if(2===r)throw new t.Error(403,"Cannot remove the only active service!",{});var s={};s["services."+e]="",t.users.update(i,{$unset:s})}}}),t.isServer&&t.methods({ATCreateUserServer:function(n){if(h.options.forbidClientAccountCreation)throw new t.Error(403,"Client side accounts creation is disabled!!!");i(n,Object);var r=h.getFieldIds(),s=n.profile;s=o.pick(s,r),s=o.omit(s,"username","email","password");var a=o.clone(s);n.username&&(a.username=n.username),n.email&&(a.email=n.email),n.password&&(a.password=n.password);var l={},u=!1;if(o.each(h.getFields(),function(t){var e=t._id,n=a[e];if("password"===e)return void i(n,Object);var o=t.validate(n,"strict");o&&(l[e]=o,u=!0)}),u)throw new t.Error(403,"Validation Errors",l);o.isEmpty(n.profile)&&delete n.profile;var c=e.createUser(n);if(!c)throw new Error("createUser failed to insert new user");n.email&&h.options.sendVerificationEmail&&e.sendVerificationEmail(c,n.email)}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["useraccounts:core"]={AccountsTemplates:h}}();

!function(){var e=Package.meteor.Meteor,a=Package.tracker.Tracker,n=Package.tracker.Deps,i,s;(function(){s="object"==typeof s?s:{};var a=s;e.startup(function(){return e.isClient?UI.registerHelper("t9n",function(e){return i.get(e)}):void 0}),i=function(){function e(){}return e.maps={},e.defaultLanguage="en",e.language="",e.dep=new n.Dependency,e.depLanguage=new n.Dependency,e.missingPrefix=">",e.missingPostfix="<",e.map=function(e,a){return this.maps[e]||(this.maps[e]={}),this.registerMap(e,"",!1,a),this.dep.changed()},e.get=function(e,a,n){var i,s,o;return null==a&&(a=!0),null==n&&(n={}),this.dep.depend(),this.depLanguage.depend(),"string"!=typeof e?"":(i=(null!=(s=this.maps[this.language])?s[e]:void 0)||(null!=(o=this.maps[this.defaultLanguage])?o[e]:void 0)||(a?this.missingPrefix+e+this.missingPostfix:e),0===Object.keys(n).length?i:this.replaceParams(e,n))},e.registerMap=function(e,a,n,i){var s,o,r;if("string"==typeof i)return this.maps[e][a]=i;if("object"==typeof i){n&&(a+="."),r=[];for(s in i)o=i[s],r.push(this.registerMap(e,a+s,!0,o));return r}},e.getLanguage=function(){return this.depLanguage.depend(),this.language},e.getLanguages=function(){return this.dep.depend(),Object.keys(this.maps).sort()},e.setLanguage=function(e){return this.maps[e]&&this.language!==e?(this.language=e,this.depLanguage.changed()):void 0},e.replaceParams=function(e,a){var n,i,s;for(n in a)s=a[n],i=new RegExp("@{"+n+"}","g"),e=e.replace(i,s);return e},e}(),this.T9n=i,this.t9n=function(e){return i.get(e)}}).call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"اضف",and:"و",back:"رجوع",changePassword:"غير كلمة السر",choosePassword:"اختر كلمة السر",clickAgree:"بفتح حسابك انت توافق على",configure:"تعديل",createAccount:"افتح حساب جديد",currentPassword:"كلمة السر الحالية",dontHaveAnAccount:"ليس عندك حساب؟",email:"البريد الالكترونى",emailAddress:"البريد الالكترونى",emailResetLink:"اعادة تعيين البريد الالكترونى",forgotPassword:"نسيت كلمة السر؟",ifYouAlreadyHaveAnAccount:"اذا كان عندك حساب",newPassword:"كلمة السر الجديدة",newPasswordAgain:"كلمة السر الجديدة مرة اخرى",optional:"اختيارى",OR:"او",password:"كلمة السر",passwordAgain:"كلمة السر مرة اخرى",privacyPolicy:"سياسة الخصوصية",remove:"ازالة",resetYourPassword:"اعادة تعيين كلمة السر",setPassword:"تعيين كلمة السر",sign:"تسجيل",signIn:"تسجيل الدخول",signin:"تسجيل الدخول",signOut:"تسجيل الخروج",signUp:"افتح حساب جديد",signupCode:"رمز التسجيل",signUpWithYourEmailAddress:"سجل ببريدك الالكترونى",terms:"شروط الاستخدام",updateYourPassword:"جدد كلمة السر",username:"اسم المستخدم",usernameOrEmail:"اسم المستخدم او البريد الالكترونى","with":"مع",info:{emailSent:"تم ارسال البريد الالكترونى",emailVerified:"تم تأكيد البريد الالكترونى",passwordChanged:"تم تغيير كلمة السر",passwordReset:"تم اعادة تعيين كلمة السر"},error:{emailRequired:"البريد الالكترونى مطلوب",minChar:"سبعة حروف هو الحد الادنى لكلمة السر",pwdsDontMatch:"كلمتين السر لا يتطابقان",pwOneDigit:"كلمة السر يجب ان تحتوى على رقم واحد على الاقل",pwOneLetter:"كلمة السر تحتاج الى حرف اخر",signInRequired:"عليك بتسجبل الدخول لفعل ذلك",signupCodeIncorrect:"رمز التسجيل غير صحيح",signupCodeRequired:"رمز التسجيل مطلوب",usernameIsEmail:"اسم المستخدم لا يمكن ان يكون بريد الكترونى",usernameRequired:"اسم المستخدم مطلوب",accounts:{"Email already exists.":"البريد الالكترونى مسجل","Email doesn't match the criteria.":"البريد الالكترونى لا يتوافق مع الشروط","Invalid login token":"رمز الدخول غير صالح","Login forbidden":"تسجيل الدخول غير مسموح","Service unknown":"خدمة غير معروفة","Unrecognized options for login request":"اختيارات غير معلومة عند تسجيل الدخول","User validation failed":"تأكيد المستخدم فشل","Username already exists.":"اسم المستخدم مسجل","You are not logged in.":"لم تسجل دخولك","You've been logged out by the server. Please log in again.":"لقد تم تسجيل خروجك من قبل الخادم. قم بتسجيل الدخول مجددا.","Your session has expired. Please log in again.":"لقد انتهت جلستك. قم بتسجيل الدخول مجددا.","No matching login attempt found":"لم نجد محاولة دخول مطابقة","Password is old. Please reset your password.":"كلمة السر قديمة. قم باعادة تعيين كلمة السر.","Incorrect password":"كلمة السر غير صحيحة.","Invalid email":"البريد الالكترونى غير صالح","Must be logged in":"يجب ان تسجل دخولك","Need to set a username or email":"يجب تعيين اسم مستخدم او بريد الكترونى","old password format":"صيغة كلمة السر القديمة","Password may not be empty":"كلمة السر لا يمكن ان تترك فارغة","Signups forbidden":"فتح الحسابات غير مسموح","Token expired":"انتهى زمن الرمز","Token has invalid email address":"الرمز يحتوى على بريد الكترونى غير صالح","User has no password set":"المستخدم لم يقم بتعيين كلمة سر","User not found":"اسم المستخدم غير موجود","Verify email link expired":"انتهى زمن رابط تأكيد البريد الالكترونى","Verify email link is for unknown address":"رابط تأكيد البريد الالكترونى ينتمى الى بريد الكترونى غير معروف","Match failed":"المطابقة فشلت","Unknown error":"خطأ غير معروف"}}},i.map("ar",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"添加",and:"和",back:"返回",changePassword:"修改密码",choosePassword:"新密码",clickAgree:"点击注册表示您同意",configure:"配置",createAccount:"创建账户",currentPassword:"当前密码",dontHaveAnAccount:"没有账户？",email:"电子邮箱",emailAddress:"电邮地址",emailResetLink:"邮件重置链接",forgotPassword:"忘记密码？",ifYouAlreadyHaveAnAccount:"如果您已有账户",newPassword:"新密码",newPasswordAgain:"再输一遍新密码",optional:"可选的",OR:"或",password:"密码",passwordAgain:"再输一遍密码",privacyPolicy:"隐私条例",remove:"移除",resetYourPassword:"重置您的密码",setPassword:"设置密码",sign:"登",signIn:"登陆",signin:"登陆",signOut:"登出",signUp:"注册",signupCode:"注册码",signUpWithYourEmailAddress:"用您的电子邮件地址注册",terms:"使用条例",updateYourPassword:"更新您的密码",username:"用户名",usernameOrEmail:"用户名或电子邮箱","with":"与",info:{emailSent:"邮件已发出",emailVerified:"邮件验证成功",passwordChanged:"密码修改成功",passwordReset:"密码重置成功"},error:{emailRequired:"必须填写电子邮件",minChar:"密码至少7个字符长",pwdsDontMatch:"两次密码不一致",pwOneDigit:"密码中至少有一位数字",pwOneLetter:"密码中至少有一位字母",signInRequired:"您必须登陆后才能查看",signupCodeIncorrect:"注册码错误",signupCodeRequired:"必须有注册码",usernameIsEmail:"是用户名而不是电子邮件地址",usernameRequired:"必须填写用户名。",accounts:{"Email already exists.":"该电子邮件地址已被使用。","Email doesn't match the criteria.":"错误的的电子邮件地址。","Invalid login token":"登陆密匙错误","Login forbidden":"登陆被阻止","Service unknown":"未知服务","Unrecognized options for login request":"登陆请求存在无法识别的选项","User validation failed":"用户验证失败","Username already exists.":"用户名已被占用。","You are not logged in.":"您还没有登陆。","You've been logged out by the server. Please log in again.":"您被服务器登出了。请重新登陆。","Your session has expired. Please log in again.":"会话过期，请重新登陆。","No matching login attempt found":"未发现对应登陆请求","Password is old. Please reset your password.":"密码过于老了，请重置您的密码。","Incorrect password":"错误的密码","Invalid email":"不合法的电子邮件地址","Must be logged in":"必须先登陆","Need to set a username or email":"必须设置用户名或电子邮件地址","old password format":"较老的密码格式","Password may not be empty":"密码不应该为空","Signups forbidden":"注册被禁止","Token expired":"密匙过期","Token has invalid email address":"密匙对应的电子邮箱地址不合法","User has no password set":"用户没有密码","User not found":"未找到该用户","Verify email link expired":"激活验证邮件的链接已过期","Verify email link is for unknown address":"验证邮件的链接去向未知地址","Match failed":"匹配失败","Unknown error":"未知错误"}}},i.map("zh-cn",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"přidat",and:"a",back:"zpět",changePassword:"Změnte heslo",choosePassword:"Zvolte heslo",clickAgree:"Stiskem tlačítka Registrovat souhlasíte s",configure:"Nastavit",createAccount:"Vytvořit účet",currentPassword:"Současné heslo",dontHaveAnAccount:"Nemáte účet?",email:"Email",emailAddress:"Emailová adresa",emailResetLink:"Odkaz na reset emailu",forgotPassword:"Zapomenuté heslo?",ifYouAlreadyHaveAnAccount:"Pokud již máte účet",newPassword:"Nové heslo",newPasswordAgain:"Nové heslo (zopakovat)",optional:"Volitelný",OR:"nebo",password:"Heslo",passwordAgain:"Heslo (zopakovat)",privacyPolicy:"Nastavení soukromí",remove:"odstranit",resetYourPassword:"Resetovat heslo",setPassword:"Nastavit heslo",sign:"Přihlášení",signIn:"Přihlásit se",signin:"přihlásit se",signOut:"Odhlásit se",signUp:"Registrovat",signupCode:"Registrační kód",signUpWithYourEmailAddress:"Registrovat se emailovou adresou",terms:"Podmínky použití",updateYourPassword:"Aktualizujte si své heslo",username:"Uživatelské jméno",usernameOrEmail:"Uživatelské jméno nebo email","with":"s",info:{emailSent:"Email odeslán",emailVerified:"Email ověřen",passwordChanged:"Heslo změněno",passwordReset:"Heslo resetováno"},error:{emailRequired:"Email je povinný.",minChar:"minimální délka hesla je 7 znaků.",pwdsDontMatch:"Hesla nesouhlasí",pwOneDigit:"Heslo musí obsahovat alespoň jednu číslici.",pwOneLetter:"Heslo musí obsahovat alespoň 1 slovo.",signInRequired:"Musíte být příhlášeni.",signupCodeIncorrect:"Registrační kód je chybný.",signupCodeRequired:"Registrační kód je povinný.",usernameIsEmail:"Uživatelské jméno nemůže být emailová adresa.",usernameRequired:"Uživatelské jméno je povinné."},accounts:{"A login handler should return a result or undefined":"Přihlašovací rutina musí vracet výsledek nebo undefined","Email already exists.":"Email již existuje.","Email doesn't match the criteria.":"Email nesplňuje požadavky.","Invalid login token":"Neplatný přihlašovací token","Login forbidden":"Přihlášení je zakázáno","Service unknown":"Neznámá služba","Unrecognized options for login request":"Nerozpoznaná volba přihlašovacího požadavku","User validation failed":"Validace uživatele selhala","Username already exists.":"Uživatelské jméno již existuje.","You are not logged in.":"Nejste přihlášený.","You've been logged out by the server. Please log in again.":"Byl jste odhlášen. Prosím přihlašte se znovu.","Your session has expired. Please log in again.":"Vaše připojení vypršelo. Prosím přihlašte se znovu.","No matching login attempt found":"Nenalezen odpovídající způsob přihlášení","Password is old. Please reset your password.":"Heslo je staré. Prosíme nastavte si ho znovu.","Incorrect password":"Chybné heslo","Invalid email":"Neplatný email","Must be logged in":"Uživatel musí být přihlášen","Need to set a username or email":"Je třeba zadat uživatelské jméno nebo email","old password format":"starý formát hesla","Password may not be empty":"Heslo nemůže být prázdné","Signups forbidden":"Registrace je zakázaná","Token expired":"Token vypršel","Token has invalid email address":"Token má neplatnou emailovou adresu","User has no password set":"Uživatel nemá nastavené heslo","User not found":"Uživatel nenalezen","Verify email link expired":"Odkaz pro ověření emailu vypršel","Verify email link is for unknown address":"Odkaz pro ověření emailu má neznámou adresu","Match failed":"Nesouhlasí","Unknown error":"Neznámá chyba"}},i.map("cs",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"tilføj",and:"og",back:"tilbage",changePassword:"Skift kodeord",choosePassword:"Vælg kodeord",clickAgree:"Ved at klikke på tilmeld accepterer du vores",configure:"Konfigurer",createAccount:"Opret konto",currentPassword:"Nuværende kodeord",dontHaveAnAccount:"Har du ikke en konto?",email:"E-mail",emailAddress:"E-mail adresse",emailResetLink:"Nulstil E-mail Link",forgotPassword:"Glemt kodeord?",ifYouAlreadyHaveAnAccount:"Hvis jeg allerede har en konto",newPassword:"Nyt kodeord",newPasswordAgain:"Nyt kodeord (igen)",optional:"Frivilligt",OR:"eller",password:"Kodeord",passwordAgain:"Kodeord (igen)",privacyPolicy:"Privatlivspolitik",remove:"fjern",resetYourPassword:"Nulstil dit kodeord",setPassword:"Sæt kodeord",sign:"Log",signIn:"Log ind",signin:"Log ind",signOut:"Log ud",signUp:"Tilmeld",signupCode:"Tilmeldingskode",signUpWithYourEmailAddress:"Tilmeld med din e-mail adresse",terms:"Betingelser for brug",updateYourPassword:"Skift dit kodeord",username:"Brugernavn",usernameOrEmail:"Brugernavn eller e-mail","with":"med",info:{emailSent:"E-mail sendt",emailVerified:"Email verificeret",passwordChanged:"Password ændret",passwordReset:"Password reset"},error:{emailRequired:"E-mail er påkrævet.",minChar:"Kodeordet skal være mindst 7 tegn.",pwdsDontMatch:"De to kodeord er ikke ens.",pwOneDigit:"Kodeord kræver mindste et tal.",pwOneLetter:"Kodeord kræver mindst et bogstav.",signInRequired:"Du skal være logget ind for at kunne gøre det.",signupCodeIncorrect:"Tilmeldingskode er forkert.",signupCodeRequired:"Tilmeldingskode er påkrævet.",usernameIsEmail:"Brugernavn kan ikke være en e-mail adresse.",usernameRequired:"Brugernavn skal udfyldes.",accounts:{"Email already exists.":"E-mail findes allerede.","Email doesn't match the criteria.":"E-mail modsvarer ikke kriteriet.","Invalid login token":"Invalid log ind token","Login forbidden":"Log ind forbudt","Service unknown":"Service ukendt","Unrecognized options for login request":"Ukendte options for login forsøg","User validation failed":"Bruger validering fejlede","Username already exists.":"Brugernavn findes allerede.","You are not logged in.":"Du er ikke logget ind.","You've been logged out by the server. Please log in again.":"Du er blevet logget af serveren. Log ind igen.","Your session has expired. Please log in again.":"Din session er udløbet. Log ind igen.","No matching login attempt found":"Der fandtes ingen login forsøg","Password is old. Please reset your password.":"Kodeordet er for gammelt. Du skal resette det.","Incorrect password":"Forkert kodeord","Invalid email":"Invalid e-mail","Must be logged in":"Du skal være logget ind","Need to set a username or email":"Du skal angive enten brugernavn eller e-mail","old password format":"gammelt kodeord format","Password may not be empty":"Kodeord skal være udfyldt","Signups forbidden":"Tilmeldinger forbudt","Token expired":"Token udløbet","Token has invalid email address":"Token har en invalid e-mail adresse","User has no password set":"Bruger har ikke angivet noget kodeord","User not found":"Bruger ej fundet","Verify email link expired":"Verify email link expired","Verify email link is for unknown address":"Verificer e-mail link for ukendt adresse","Match failed":"Match fejlede","Unknown error":"Ukendt fejl"}}},i.map("da",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"hinzufügen",and:"und",back:"zurück",changePassword:"Passwort ändern",choosePassword:"Passwort auswählen",clickAgree:"Durch die Registrierung akzeptieren Sie unsere",configure:"Konfigurieren",createAccount:"Konto erzeugen",currentPassword:"Aktuelles Passwort",dontHaveAnAccount:"Noch kein Konto?",email:"E-Mail",emailAddress:"E-Mail Adresse",emailResetLink:"Senden",forgotPassword:"Passwort vergessen?",ifYouAlreadyHaveAnAccount:"Falls Sie ein Konto haben, bitte hier",newPassword:"Neues Passwort",newPasswortAgain:"Neues Passwort (wiederholen)",optional:"Optional",OR:"ODER",password:"Passwort",passwordAgain:"Passwort (wiederholen)",privacyPolicy:"Datenschutzerklärung",remove:"entfernen",resetYourPassword:"Passwort zurücksetzen",setPassword:"Passwort bestimmen",sign:"Anmelden",signIn:"Anmelden",signin:"anmelden",signOut:"Abmelden",signUp:"Registrieren",signupCode:"Registrierungscode",signUpWithYourEmailAddress:"Mit E-Mail registrieren",terms:"Geschäftsbedingungen",updateYourPassword:"Passwort aktualisieren",username:"Benutzername",usernameOrEmail:"Benutzername oder E-Mail","with":"mit",info:{emailSent:"E-Mail gesendet",emailVerified:"E-Mail verifiziert",PasswortChanged:"Passwort geändert",PasswortReset:"Passwort zurückgesetzt"},error:{emailRequired:"E-Mail benötigt.",minChar:"Passwort muss mindesten 7 Zeichen lang sein.",pwdsDontMatch:"Passwörter stimmen nicht überein.",pwOneDigit:"Passwort muss mindestens eine Ziffer enthalten.",pwOneLetter:"Passwort muss mindestens einen Buchstaben enthalten.",signInRequired:"Sie müssen sich anmelden.",signupCodeIncorrect:"Registrierungscode ungültig.",signupCodeRequired:"Registrierungscode benötigt.",usernameIsEmail:"Benutzername kann nicht eine E-Mail.",usernameRequired:"Benutzername benötigt.",accounts:{"Email already exists.":"Die E-Mail Adresse ist bereits vergeben.","Email doesn't match the criteria.":"E-Mail Adresse erfüllt nicht die Anforderungen.","Invalid login token":"Ungültiger Login Token","Login forbidden":"Anmeldung verboten","Service unknown":"Dienst unbekannt","Unrecognized options for login request":"Unbekannte Optionen für Login Request","User validation failed":"Die Benutzerdaten scheinen nicht korrekt","Username already exists.":"Den Benutzer gibt es schon.","You are not logged in.":"Sie sind nicht eingeloggt.","You've been logged out by the server. Please log in again.":"Der Server hat Dich ausgeloggt. Bitte melde Dich erneut an.","Your session has expired. Please log in again.":"Ihre Sitzung ist abgelaufen. Bitte melden Sie sich erneut an.","No matching login attempt found":"Kein passender Loginversuch gefunden.","Passwort is old. Please reset your Passwort.":"Passwort ist abgelaufen. Bitte setzen Sie es zurück.","Incorrect Passwort":"Falschen Passwort","Invalid email":"Ungültige E-Mail Adresse","Must be logged in":"Sie müssen sich anmelden","Need to set a username or email":"Benutzername oder E-Mail Adresse müssen angegeben werden","Passwort may not be empty":"Das Passwort darf nicht leer sein","Signups forbidden":"Anmeldungen sind verboten","Token expired":"Token ist abgelaufen","Token has invalid email address":"E-Mail Adresse passt nicht zum Token","User has no Passwort set":"Kein Passwort für den Benutzer angegeben","User not found":"Benutzer nicht gefunden","Verify email link expired":"Link zur E-Mail Verifizierung ist abgelaufen","Verify email link is for unknown address":"Link zur Verifizierung ist für eine unbekannte E-Mail Adresse","Match failed":"Abgleich fehlgeschlagen","Unknown error":"Unbekannter Fehler"}}},i.map("de",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"προσθέστε",and:"και",back:"πίσω",changePassword:"Αλλαγή Κωδικού",choosePassword:"Επιλογή Κωδικού",clickAgree:"Πατώντας Εγγραφή, συμφωνείτε σε",configure:"Διαμόρφωση",createAccount:"Δημιουργία Λογαριασμού",currentPassword:"Τρέχων Κωδικός",dontHaveAnAccount:"Δεν έχετε λογαριασμό;",email:"Email",emailAddress:"Ηλεκτρονική Διεύθυνση",emailResetLink:"Αποστολή Συνδέσμου Επαναφοράς",forgotPassword:"Ξεχάσατε τον κωδικό;",ifYouAlreadyHaveAnAccount:"Αν έχετε ήδη λογαριασμό",newPassword:"Νέος Κωδικός",newPasswordAgain:"Νέος Κωδικός (ξανά)",optional:"Προαιρετικά",OR:"Ή",password:"Κωδικός",passwordAgain:"Κωδικός (ξανά)",privacyPolicy:"Πολιτική Απορρήτου",remove:"αφαιρέστε",resetYourPassword:"Επαναφορά κωδικού",setPassword:"Ορίστε Κωδικό",sign:"Σύνδεση",signIn:"Είσοδος",signin:"συνδεθείτε",signOut:"Αποσύνδεση",signUp:"Εγγραφή",signupCode:"Κώδικας Εγγραφής",signUpWithYourEmailAddress:"Εγγραφή με την ηλεκτρονική σας διεύθυνση",terms:"Όροι Χρήσης",updateYourPassword:"Ανανεώστε τον κωδικό σας",username:"Όνομα χρήστη",usernameOrEmail:"Όνομα χρήστη ή email","with":"με",info:{emailSent:"Το Email στάλθηκε",emailVerified:"Το Email επιβεβαιώθηκε",passwordChanged:"Ο Κωδικός άλλαξε",passwordReset:"Ο Κωδικός επαναφέρθηκε"},error:{emailRequired:"Το Email απαιτείται.",minChar:"7 χαρακτήρες τουλάχιστον.",pwdsDontMatch:"Οι κωδικοί δεν ταιριάζουν",pwOneDigit:"Ο κωδικός πρέπει να έχει τουλάχιστον ένα ψηφίο.",pwOneLetter:"Ο κωδικός πρέπει να έχει τουλάχιστον ένα γράμμα.",signInRequired:"Πρέπει να είστε συνδεδεμένος για να πραγματοποιήσετε αυτή την ενέργεια.",signupCodeIncorrect:"Ο κώδικας εγγραφής δεν είναι σωστός.",signupCodeRequired:"Ο κώδικας εγγραφής απαιτείται.",usernameIsEmail:"Το όνομα χρήστη δεν μπορεί να είναι μια διεύθυνση email.",usernameRequired:"Το όνομα χρήστη απαιτείται.",accounts:{"Email already exists.":"Αυτό το email υπάρχει ήδη.","Email doesn't match the criteria.":"Το email δεν ταιριάζει με τα κριτήρια.","Invalid login token":"Άκυρο διακριτικό σύνδεσης","Login forbidden":"Η είσοδος απαγορεύεται","Service unknown":"Άγνωστη υπηρεσία","Unrecognized options for login request":"Μη αναγνωρίσιμες επιλογές για αίτημα εισόδου","User validation failed":"Η επικύρωση του χρήστη απέτυχε","Username already exists.":"Αυτό το όνομα χρήστη υπάρχει ήδη.","You are not logged in.":"Δεν είστε συνδεδεμένος.","You've been logged out by the server. Please log in again.":"Αποσυνδεθήκατε από τον διακομιστή. Παρακαλούμε συνδεθείτε ξανά.","Your session has expired. Please log in again.":"Η συνεδρία έληξε. Παρακαλούμε συνδεθείτε ξανά.","No matching login attempt found":"Δεν βρέθηκε καμία απόπειρα σύνδεσης που να ταιριάζει","Password is old. Please reset your password.":"Ο κωδικός είναι παλιός. Παρακαλούμε επαναφέρετε τον κωδικό σας.","Incorrect password":"Εσφαλμένος κωδικός","Invalid email":"Εσφαλμένο email","Must be logged in":"Πρέπει να είστε συνδεδεμένος","Need to set a username or email":"Χρειάζεται να ορίσετε όνομα χρήστη ή email","old password format":"κωδικός παλιάς μορφής","Password may not be empty":"Ο κωδικός δεν μπορεί να είναι άδειος","Signups forbidden":"Οι εγγραφές απαγορεύονται","Token expired":"Το διακριτικό σύνδεσης έληξε","Token has invalid email address":"Το διακριτικό σύνδεσης έχει άκυρη διεύθυνση email","User has no password set":"Ο χρήστης δεν έχει ορίσει κωδικό","User not found":"Ο χρήστης δεν βρέθηκε","Verify email link expired":"Ο σύνδεσμος επαλήθευσης του email έληξε","Verify email link is for unknown address":"Ο σύνδεσμος επαλήθευσης του email είναι για άγνωστη διεύθυνση","Match failed":"Η αντιστοίχηση απέτυχε","Unknown error":"Άγνωστο σφάλμα"}}},i.map("el",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"add",and:"and",back:"back",changePassword:"Change Password",choosePassword:"Choose a Password",clickAgree:"By clicking Register, you agree to our",configure:"Configure",createAccount:"Create an Account",currentPassword:"Current Password",dontHaveAnAccount:"Don't have an account?",email:"Email",emailAddress:"Email Address",emailResetLink:"Email Reset Link",forgotPassword:"Forgot your password?",ifYouAlreadyHaveAnAccount:"If you already have an account",newPassword:"New Password",newPasswordAgain:"New Password (again)",optional:"Optional",OR:"OR",password:"Password",passwordAgain:"Password (again)",privacyPolicy:"Privacy Policy",remove:"remove",resetYourPassword:"Reset your password",setPassword:"Set Password",sign:"Sign",signIn:"Sign In",signin:"sign in",signOut:"Sign Out",signUp:"Register",signupCode:"Registration Code",signUpWithYourEmailAddress:"Register with your email address",terms:"Terms of Use",updateYourPassword:"Update your password",username:"Username",usernameOrEmail:"Username or email","with":"with",info:{emailSent:"Email sent",emailVerified:"Email verified",passwordChanged:"Password changed",passwordReset:"Password reset"},error:{emailRequired:"Email is required.",minChar:"7 character minimum password.",pwdsDontMatch:"Passwords don't match",pwOneDigit:"Password must have at least one digit.",pwOneLetter:"Password requires 1 letter.",signInRequired:"You must be signed in to do that.",signupCodeIncorrect:"Registration code is incorrect.",signupCodeRequired:"Registration code is required.",usernameIsEmail:"Username cannot be an email address.",usernameRequired:"Username is required.",accounts:{"Email already exists.":"Email already exists.","Email doesn't match the criteria.":"Email doesn't match the criteria.","Invalid login token":"Invalid login token","Login forbidden":"Login forbidden","Service unknown":"Service unknown","Unrecognized options for login request":"Unrecognized options for login request","User validation failed":"User validation failed","Username already exists.":"Username already exists.","You are not logged in.":"You are not logged in.","You've been logged out by the server. Please log in again.":"You've been logged out by the server. Please log in again.","Your session has expired. Please log in again.":"Your session has expired. Please log in again.","No matching login attempt found":"No matching login attempt found","Password is old. Please reset your password.":"Password is old. Please reset your password.","Incorrect password":"Incorrect password","Invalid email":"Invalid email","Must be logged in":"Must be logged in","Need to set a username or email":"Need to set a username or email","old password format":"old password format","Password may not be empty":"Password may not be empty","Signups forbidden":"Signups forbidden","Token expired":"Token expired","Token has invalid email address":"Token has invalid email address","User has no password set":"User has no password set","User not found":"User not found","Verify email link expired":"Verify email link expired","Verify email link is for unknown address":"Verify email link is for unknown address","Match failed":"Match failed","Unknown error":"Unknown error"}}},i.map("en",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"agregar",and:"y",back:"atrás",changePassword:"Cambiar Contraseña",choosePassword:"Eligir Contraseña",clickAgree:"Si haces clic en Sucribir estas de acuerdo con la",configure:"Disposición",createAccount:"Crear cuenta",currentPassword:"Contraseña actual",dontHaveAnAccount:"No tenés una cuenta?",email:"Email",emailAddress:"Dirección de Email",emailResetLink:"Reiniciar Email",forgotPassword:"Contraseña olvidada?",ifYouAlreadyHaveAnAccount:"Si ya tenés una cuenta",newPassword:"Nueva Contraseña",newPasswordAgain:"Nueva Contraseña (repetición)",optional:"Opcional",OR:"O",password:"Contraseña",passwordAgain:"Contraseña (repetición)",privacyPolicy:"Póliza de Privacidad",remove:"remover",resetYourPassword:"Resetear tu contraseña",setPassword:"Definir Contraseña",sign:"Ingresar",signIn:"Entrar",signin:"entrar",signOut:"Salir",signUp:"Suscribir",signupCode:"Codigo para suscribir",signUpWithYourEmailAddress:"Suscribir con tu email",terms:"Terminos de Uso",updateYourPassword:"Actualizar tu contraseña",username:"Usuario",usernameOrEmail:"Usuario o email","with":"con",info:{emailSent:"Email enviado",emailVerified:"Email verificado",passwordChanged:"Contraseña cambiado",passwordReset:"Resetar Contraseña"},error:{emailRequired:"Email es necesario.",minChar:"7 carácteres mínimo.",pwdsDontMatch:"Contraseñas no coninciden",pwOneDigit:"mínimo un dígito.",pwOneLetter:"mínimo una letra.",signInRequired:"Debes iniciar sesión para hacer eso.",signupCodeIncorrect:"Código para suscribir no coincide.",signupCodeRequired:"Código para suscribir es necesario.",usernameIsEmail:"Usuario no puede ser Email.",usernameRequired:"Usuario es necesario.",accounts:{"Email already exists.":"Email ya existe.","Email doesn't match the criteria.":"Email no coincide con los criterios.","User validation failed":"No se ha podido validar el usuario","Username already exists.":"Usuario ya existe.","You've been logged out by the server. Please log in again.":"Has sido desconectado por el servidor. Por favor ingresa otra vez.","Your session has expired. Please log in again.":"Tu session ha expirado. Por favor ingresa otra vez.","Incorrect password":"Contraseña no válida","Must be logged in":"Hay que ingresar","Need to set a username or email":"Tienes que especificar un usuario o un email","Signups forbidden":"Registro prohibido","Token expired":"Token expirado","Token has invalid email address":"Token contiene un Email inválido","User has no password set":"Usuario no tiene contraseña","User not found":"Usuario no encontrado","Verify email link expired":"Enlace para verificar el Email ha expirado","Verify email link is for unknown address":"Enlace para verificar el Email contiene una dirección desconocida"}}},i.map("es",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"agregar",and:"y",back:"atrás",changePassword:"Cambiar Contraseña",choosePassword:"Eligir Contraseña",clickAgree:"Si haces clic en Crear Cuenta estás de acuerdo con la",configure:"Configurar",createAccount:"Crear cuenta",currentPassword:"Contraseña actual",dontHaveAnAccount:"¿No estás registrado?",email:"Email",emailAddress:"Dirección de email",emailResetLink:"Restaurar email",forgotPassword:"¿Has olvidado tu contraseña?",ifYouAlreadyHaveAnAccount:"Ya tienes una cuenta, ",newPassword:"Nueva Contraseña",newPasswordAgain:"Nueva Contraseña (repetición)",optional:"Opcional",OR:"O",password:"Contraseña",passwordAgain:"Contraseña (repetición)",privacyPolicy:"Póliza de Privacidad",remove:"remover",resetYourPassword:"Recuperar tu contraseña",setPassword:"Definir Contraseña",sign:"Entrar",signIn:"Entrar",signin:"entra",signOut:"Salir",signUp:"Regístrate",signupCode:"Código para registrarte",signUpWithYourEmailAddress:"Regístrate con tu email",terms:"Términos de Uso",updateYourPassword:"Actualizar tu contraseña",username:"Usuario",usernameOrEmail:"Usuario o email","with":"con",info:{emailSent:"Email enviado",emailVerified:"Email verificado",passwordChanged:"Contraseña cambiado",passwordReset:"Resetar Contraseña"},error:{emailRequired:"El email es necesario.",minChar:"7 carácteres mínimo.",pwdsDontMatch:"Contraseñas no coninciden",pwOneDigit:"mínimo un dígito.",pwOneLetter:"mínimo una letra.",signInRequired:"Debes iniciar sesión para esta opción.",signupCodeIncorrect:"Código de registro inválido.",signupCodeRequired:"Se requiere un código de registro.",usernameIsEmail:"El usuario no puede ser una dirección de correo.",usernameRequired:"Se quiere nombre de usuario.",accounts:{"Email already exists.":"El correo ya existe.","Email doesn't match the criteria.":"El correo no coincide.","User validation failed":"No hemos podido verificar el usuario","Username already exists.":"Este usuario ya existe.","You've been logged out by the server. Please log in again.":"Has sido desconectado por el servidor. Por favor inicia sesión de nuevo.","Your session has expired. Please log in again.":"Tu session ha expirado. Por favor inicia sesión de nuevo.","Incorrect password":"Contraseña inválida","Must be logged in":"Debes iniciar sesión","Need to set a username or email":"Debes especificar un usuario o email","Signups forbidden":"Los registros no están permitidos en este momento","Token expired":"El token ha expirado","Token has invalid email address":"EL token contiene un email inválido","User has no password set":"El usuario no tiene contraseña","User not found":"Usuario no encontrado","Verify email link expired":"El enlace para verificar el email ha expierado","Verify email link is for unknown address":"El enlace para verificar el email está asociado a una dirección desconocida"}}},i.map("es_ES",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"افزودن",and:"و",back:"برگشت",changePassword:"تعویض گذرواژه",choosePassword:"انتخاب یک گذرواژه",clickAgree:"با انتخاب ثبت‌نام، شما موافق هستید با",configure:"پیکربندی",createAccount:"ایجاد یک حساب",currentPassword:"گذرواژه کنونی",dontHaveAnAccount:"یک حساب ندارید؟",email:"رایانامه",emailAddress:"آدرس رایانامه",emailResetLink:"پیوند بازنشانی رایانامه",forgotPassword:"گذرواژه‌تان را فراموش کرده‌اید؟",ifYouAlreadyHaveAnAccount:"اگر هم‌اکنون یک حساب دارید",newPassword:"گذرواژه جدید",newPasswordAgain:"گذرواژه جدید (تکرار)",optional:"اختيارى",OR:"یا",password:"گذرواژه",passwordAgain:"گذرواژه (دوباره)",privacyPolicy:"حریم خصوصی",remove:"حذف",resetYourPassword:"بازنشانی گذرواژه شما",setPassword:"تنظیم گذرواژه",sign:"نشان",signIn:"ورود",signin:"ورود",signOut:"خروج",signUp:"ثبت‌نام",signupCode:"کد ثبت‌نام",signUpWithYourEmailAddress:"با آدرس رایانامه‌تان ثبت‌نام کنید",terms:"قوانین استفاده",updateYourPassword:"گذرواژه‌تان را به روز کنید",username:"نام کاربری",usernameOrEmail:"نام کاربری یا رایانامه","with":"با",info:{emailSent:"رایانامه ارسال شد",emailVerified:"رایانامه تایید شد",passwordChanged:"گذرواژه تغییر کرد",passwordReset:"گذرواژه بازنشانی شد"},error:{emailRequired:"رایانامه ضروری است.",minChar:"گذرواژه حداقل ۷ کاراکتر.",pwdsDontMatch:"گذرواژه‌ها تطابق ندارند",pwOneDigit:"گذرواژه باید لااقل یک رقم داشته باشد.",pwOneLetter:"گذرواژه یک حرف نیاز دارد.",signInRequired:"برای انجام آن باید وارد شوید.",signupCodeIncorrect:"کد ثبت‌نام نادرست است.",signupCodeRequired:"کد ثبت‌نام ضروری است.",usernameIsEmail:"نام کاربری نمی‌توان آدرس رایانامه باشد.",usernameRequired:"نام کاربری ضروری است.",accounts:{"Email already exists.":"رایانامه هم‌اکنون وجود دارد.","Email doesn't match the criteria.":"رایانامه با ضوابط تطابق ندارد.","Invalid login token":"علامت ورود نامعتبر است","Login forbidden":"ورود ممنوع است","Service unknown":"سرویس ناشناس","Unrecognized options for login request":"گزینه‌های نامشخص برای درخواست ورود","User validation failed":"اعتبارسنجی کاربر ناموفق","Username already exists.":"نام کاربری هم‌اکنون وجود دارد.","You are not logged in.":"شما وارد نشده‌اید.","You've been logged out by the server. Please log in again.":"شما توسط سرور خارج شده‌اید. لطفأ دوباره وارد شوید.","Your session has expired. Please log in again.":"جلسه شما منقضی شده است. لطفا دوباره وارد شوید.","No matching login attempt found":"تلاش ورود مطابق یافت نشد","Password is old. Please reset your password.":"گذرواژه قدیمی است. لطفأ گذرواژه‌تان را بازتنظیم کنید.","Incorrect password":"گذرواژه نادرست","Invalid email":"رایانامه نامعتبر","Must be logged in":"باید وارد شوید","Need to set a username or email":"یک نام کاربری یا ایمیل باید تنظیم شود","old password format":"قالب گذرواژه قدیمی","Password may not be empty":"گذرواژه نمی‌تواند خالی باشد","Signups forbidden":"ثبت‌نام ممنوع","Token expired":"علامت رمز منقظی شده است","Token has invalid email address":"علامت رمز دارای آدرس رایانامه نامعتبر است","User has no password set":"کاربر گذرواژه‌ای تنظیم نکرده است","User not found":"کاربر یافت نشد","Verify email link expired":"پیوند تایید رایانامه منقضی شده است","Verify email link is for unknown address":"پیوند تایید رایانامه برای آدرس ناشناخته است","Match failed":"تطابق ناموفق","Unknown error":"خطای ناشناخته"}}},i.map("fa",a)
}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"Ajouter",and:"et",back:"retour",changePassword:"Modifier le mot de passe",choosePassword:"Choisir le mot de passe",clickAgree:"En cliquant sur S'enregistrer, vous acceptez notre",configure:"Configurer",createAccount:"Créer un compte",currentPassword:"Mot de passe actuel",dontHaveAnAccount:"Vous n'avez pas de compte ?",email:"Email",emailAddress:"Adresse Email",emailResetLink:"Envoyer le mail de réinitialisation",forgotPassword:"Vous avez oublié votre mot de passe ?",ifYouAlreadyHaveAnAccount:"Si vous avez déjà un compte",newPassword:"Nouveau mot de passe",newPasswordAgain:"Confirmer le nouveau mot de passe",optional:"Optionnel",OR:"OU",password:"Mot de passe",passwordAgain:"Confirmer le mot de passe",privacyPolicy:"Politique de confidentialité",remove:"Supprimer",resetYourPassword:"Reinitialiser votre mot de passe",setPassword:"Spécifier le mot de passe",sign:"S'enregistrer",signIn:"Se Connecter",signin:"se connecter",signOut:"Se Deconnecter",signUp:"S'enregistrer",signupCode:"Code d'inscription",signUpWithYourEmailAddress:"S'enregistrer avec votre adresse email",terms:"Conditions d'utilisation",updateYourPassword:"Mettre à jour le mot de passe",username:"Nom d'utilisateur",usernameOrEmail:"Nom d'utilisateur ou email","with":"avec",info:{emailSent:"Email envoyé",emailVerified:"Email verifié",passwordChanged:"Mot de passe modifié",passwordReset:"Mot de passe réinitialisé"},error:{emailRequired:"Un email est requis.",minChar:"Votre mot de passe doit contenir au minimum 7 caractères.",pwdsDontMatch:"Les mots de passe ne correspondent pas",pwOneDigit:"Votre mot de passe doit contenir au moins un chiffre.",pwOneLetter:"Votre mot de passe doit contenir au moins une lettre.",signInRequired:"Vous devez être connecté pour continuer.",signupCodeIncorrect:"Le code d'enregistrement est incorrect.",signupCodeRequired:"Un code d'inscription est requis.",usernameIsEmail:"Le nom d'utilisateur ne peut être le même que l'adresse email.",usernameRequired:"Un nom d'utilisateur est requis.",accounts:{"Email already exists.":"Adresse email déjà utilisée.","Email doesn't match the criteria.":"Adresse email ne correspond pas aux critères.","Invalid login token":"Jeton d'authentification invalide","Login forbidden":"Authentification interdite","Service unknown":"Service inconnu","Unrecognized options for login request":"Options inconnues pour la requête d'authentification","User validation failed":"Echec de la validation de l'utilisateur","Username already exists.":"Nom d'utilisateur déjà utilisé.","You are not logged in.":"Vous n'êtes pas authentifié.","You've been logged out by the server. Please log in again.":"Vous avez été déconnecté par le serveur. Veuillez vous reconnecter.","Your session has expired. Please log in again.":"Votre session a expiré. Veuillez vous reconnecter.","No matching login attempt found":"Aucune tentative d'authentification ne correspond","Password is old. Please reset your password.":"Votre mot de passe est trop ancien. Veuillez le modifier.","Incorrect password":"Mot de passe incorrect","Invalid email":"Email invalide","Must be logged in":"Vous devez être connecté","Need to set a username or email":"Vous devez renseigner un nom d'utilisateur ou une adresse email","old password format":"Ancien format de mot de passe","Password may not be empty":"Le mot de passe ne peut être vide","Signups forbidden":"La création de compte est interdite","Token expired":"Jeton expiré","Token has invalid email address":"Le jeton contient une adresse email invalide","User has no password set":"L'utilisateur n'a pas de mot de passe","User not found":"Utilisateur inconnu","Verify email link expired":"Lien de vérification d'email expiré","Verify email link is for unknown address":"Le lien de vérification d'email réfère à une adresse inconnue","Match failed":"La correspondance a échoué","Unknown error":"Erreur inconnue"}}},i.map("fr",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"הוסף",and:"ו",back:"חזרה",changePassword:"שינוי סיסמא",choosePassword:"בחירת סיסמא",clickAgree:"על ידי לחיצה על הירשם, הינך מסכים",configure:"הגדרות",createAccount:"הוספת חשבון",currentPassword:"סיסמא נוכחית",dontHaveAnAccount:"אין לך חשבון?",email:'דוא"ל',emailAddress:'דוא"ל',emailResetLink:"שלח קישור לאיפוס סיסמא",forgotPassword:"שכחת סיסמא?",ifYouAlreadyHaveAnAccount:"אם יש לך חשבון",newPassword:"סיסמא חדשה",newPasswordAgain:"סיסמא חדשה (שוב)",optional:"רשות",OR:"או",password:"סיסמא",passwordAgain:"סיסמא (שוב)",privacyPolicy:"למדיניות הפרטיות",remove:"הסרה",resetYourPassword:"איפוס סיסמא",setPassword:"עדכון סיסמא",signIn:"כניסה",signin:"כניסה",signOut:"יציאה",signUp:"הרשמה לחשבון",signupCode:"קוד הרשמה",signUpWithYourEmailAddress:'הירשם באמצעות הדוא"ל',terms:"לתנאי השימוש",updateYourPassword:"עדכון סיסמא",username:"שם משתמש",usernameOrEmail:'שם משמש או דוא"ל',"with":"עם",info:{emailSent:'נשלחה הודעה לדוא"ל',emailVerified:'כתובת הדוא"ל וודאה בהצלחה',passwordChanged:"סיסמתך שונתה בהצלחה",passwordReset:"סיסמתך אופסה בהצלחה"},error:{emailRequired:'חובה להזין כתובת דוא"ל',minChar:"חובה להזין סיסמא בעלת 7 תווים לפחות.",pwdsDontMatch:"הסיסמאות אינן זהות.",pwOneDigit:"הסיסמא חייבת לכלול ספרה אחת לפחות.",pwOneLetter:"הסיסמא חייבת לכלול אות אחת לפחות.",signInRequired:"חובה להיכנס למערכת כדי לבצע פעולה זו.",signupCodeIncorrect:"קוד ההרשמה שגוי.",signupCodeRequired:"חובה להזין את קוד ההרשמה.",usernameIsEmail:'של המשתמש לא יכול להיות כתובת דוא"ל.',usernameRequired:"חובה להזין שם משתמש.",accounts:{"Email already exists.":'הדוא"ל כבר רשום לחשבון.',"Email doesn't match the criteria.":'הדוא"ל לא מקיים את הקריטריונים.',"Invalid login token":"Token כניסה שגוי","Login forbidden":"הכניסה נאסרה","Service unknown":"Service לא ידוע","Unrecognized options for login request":"נסיון הכניסה כלל אופציות לא מזוהות","User validation failed":"אימות המשתמש נכשל","Username already exists.":"שם המשתמש כבר קיים.","You are not logged in.":"לא נכנסת לחשבון.","You've been logged out by the server. Please log in again.":"השרת הוציא אותך מהמערכת. נא להיכנס לחשבונך שוב.","Your session has expired. Please log in again.":"ה-session שלך פג תוקף. נא להיכנס לחשבונך שוב.","No matching login attempt found":"לא נמצא נסיון כניסה מתאים","Password is old. Please reset your password.":"סיסמתך ישנה. נא להחליך אותה.","Incorrect password":"סיסמא שגויה","Invalid email":'דוא"ל שגוי',"Must be logged in":"חובה להיכנס למערכת כדי לבצע פעולה זו.","Need to set a username or email":'חובה להגדיר שם משתמש או דוא"ל',"old password format":"פורמט סיסמא ישן","Password may not be empty":"הסיסמא לא יכולה להיות ריקה","Signups forbidden":"אסור להירשם","Token expired":"ה-token פג תוקף","Token has invalid email address":'ה-token מכיל כתובת דוא"ל שגוייה',"User has no password set":"למשתמש אין סיסמא","User not found":"המשתמש לא נמצא","Verify email link expired":'קישור וידוי הדוא"ל פג תוקף',"Verify email link is for unknown address":'קישור וידוי הדוא"ל הוא לכתובת לא ידועה',"Match failed":"ההתאמה נכשלה","Unknown error":"שגיאה לא ידועה"}}},i.map("he",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"aggiungi",and:"e",back:"indietro",changePassword:"Cambia Password",choosePassword:"Scegli una Password",clickAgree:"Cliccando Registrati, accetti la nostra",configure:"Configura",createAccount:"Crea un Account",currentPassword:"Password Corrente",dontHaveAnAccount:"Non hai un account?",email:"Email",emailAddress:"Indirizzo Email",emailResetLink:"Invia Link di Reset",forgotPassword:"Hai dimenticato la password?",ifYouAlreadyHaveAnAccount:"Se hai già un account",newPassword:"Nuova Password",newPasswordAgain:"Nuova Password (di nuovo)",optional:"Opzionale",OR:"OPPURE",password:"Password",passwordAgain:"Password (di nuovo)",privacyPolicy:"Privacy Policy",remove:"rimuovi",resetYourPassword:"Reimposta la password",setPassword:"Imposta Password",sign:"Accedi",signIn:"Accedi",signin:"accedi",signOut:"Esci",signUp:"Registrati",signupCode:"Codice di Registrazione",signUpWithYourEmailAddress:"Registrati con il tuo indirizzo email",terms:"Termini di Servizio",updateYourPassword:"Aggiorna la password",username:"Username",usernameOrEmail:"Nome utente o email","with":"con",info:{emailSent:"Email inviata",emailVerified:"Email verificata",passwordChanged:"Password cambiata",passwordReset:"Password reimpostata"},error:{emailRequired:"L'Email è obbligatoria.",minChar:"La Password deve essere di almeno 7 caratteri.",pwdsDontMatch:"Le Password non corrispondono",pwOneDigit:"La Password deve contenere almeno un numero.",pwOneLetter:"La Password deve contenere 1 lettera.",signInRequired:"Per fare questo devi accedere.",signupCodeIncorrect:"Codice di Registrazione errato.",signupCodeRequired:"Il Codice di Registrazione è obbligatorio.",usernameIsEmail:"Il Nome Utente non può essere un indirizzo email.",usernameRequired:"Il Nome utente è obbligatorio.",accounts:{"Email already exists.":"Indirizzo email già esistente.","Email doesn't match the criteria.":"L'indirizzo email non soddisfa i requisiti.","Invalid login token":"Codice di accesso non valido","Login forbidden":"Accesso non consentito","Service unknown":"Servizio sconosciuto","Unrecognized options for login request":"Opzioni per la richiesta di accesso non ricunosciute","User validation failed":"Validazione utente fallita","Username already exists.":"Nome utente già esistente.","You are not logged in.":"Non hai effettuato l'accesso.","You've been logged out by the server. Please log in again.":"Sei stato disconnesso dal server. Per favore accedi di nuovo.","Your session has expired. Please log in again.":"La tua sessione è scaduta. Per favore accedi di nuovo.","No matching login attempt found":"Tentativo di accesso corrispondente non trovato","Password is old. Please reset your password.":"La password è vecchia. Per favore reimposta la tua password.","Incorrect password":"Password non corretta","Invalid email":"Email non valida","Must be logged in":"Devi aver eseguito l'accesso","Need to set a username or email":"È necessario specificare un nome utente o un indirizzo email","old password format":"vecchio formato password","Password may not be empty":"La password non può essere vuota","Signups forbidden":"Registrazioni non consentite","Token expired":"Codice scaduto","Token has invalid email address":"Il codice ha un indirizzo email non valido","User has no password set":"L'utente non ha una password impostata","User not found":"Utente non trovato","Verify email link expired":"Link per la verifica dell'email scaduto","Verify email link is for unknown address":"Il link per la verifica dell'email fa riferimento ad un indirizzo sconosciuto","Match failed":"Riscontro fallito","Unknown error":"Errore Sconosciuto"}}},i.map("it",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"dodaj",and:"i",back:"powrót",changePassword:"Zmień hasło",choosePassword:"Wybierz hasło",clickAgree:"Klikając na Zarejestruj się zgadzasz się z naszą",configure:"Konfiguruj",createAccount:"Utwórz konto",currentPassword:"Aktualne hasło",dontHaveAnAccount:"Nie masz konta?",email:"Email",emailAddress:"Adres email",emailResetLink:"Wyślij email z linkiem do zmiany hasła",forgotPassword:"Zapomniałeś hasła?",ifYouAlreadyHaveAnAccount:"Jeżeli już masz konto",newPassword:"Nowe hasło",newPasswordAgain:"Nowe hasło (powtórz)",optional:"Nieobowiązkowe",OR:"LUB",password:"Hasło",passwordAgain:"Hasło (powtórz)",privacyPolicy:"polityką prywatności",remove:"usuń",resetYourPassword:"Ustaw nowe hasło",setPassword:"Ustaw hasło",sign:"Podpisz",signIn:"Zaloguj się",signin:"zaloguj się",signOut:"Wyloguj się",signUp:"Zarejestruj się",signupCode:"Kod rejestracji",signUpWithYourEmailAddress:"Zarejestruj się używając adresu email",terms:"warunkami korzystania z serwisu",updateYourPassword:"Zaktualizuj swoje hasło",username:"Nazwa użytkownika",usernameOrEmail:"Nazwa użytkownika lub email","with":"z",info:{emailSent:"Adres email wysłany",emailVerified:"Adres email zweryfikowany",passwordChanged:"Hasło zmienione",passwordReset:"Hasło wyzerowane"},error:{emailRequired:"Wymagany jest adres email.",minChar:"7 znaków to minimalna długość hasła.",pwdsDontMatch:"Hasła są różne",pwOneDigit:"Hasło musi zawierać przynajmniej jedną cyfrę.",pwOneLetter:"Hasło musi zawierać 1 literę.",signInRequired:"Musisz być zalogowany, aby to zrobić.",signupCodeIncorrect:"Kod rejestracji jest nieprawidłowy.",signupCodeRequired:"Wymagany jest kod rejestracji.",usernameIsEmail:"Adres email nie może być nazwą użytkownika.",usernameRequired:"Wymagana jest nazwa użytkownika.",accounts:{"Email already exists.":"Adres email już istnieje.","Email doesn't match the criteria.":"Adres email nie spełnia kryteriów.","Invalid login token":"Błędny token logowania","Login forbidden":"Logowanie zabronione","Service unknown":"Nieznana usługa","Unrecognized options for login request":"Nieznane parametry w żądaniu logowania.","User validation failed":"Niepoprawna nazwa użytkownika","Username already exists.":"Nazwa użytkownika już istnieje.","You are not logged in.":"Nie jesteś zalogowany.","You've been logged out by the server. Please log in again.":"Zostałeś wylogowane przez serwer. Zaloguj się ponownie.","Your session has expired. Please log in again.":"Twoja sesja wygasła. Zaloguj się ponownie.","No matching login attempt found":"Nie dopasowano danych logowania.","Password is old. Please reset your password.":"Hasło jest stare. Proszę wyzerować hasło.","Incorrect password":"Niepoprawne hasło","Invalid email":"Błędny adres email","Must be logged in":"Musisz być zalogowany","Need to set a username or email":"Wymagane ustawienie nazwy użytkownika lub adresu email","old password format":"stary format hasła","Password may not be empty":"Hasło nie może być puste","Signups forbidden":"Rejestracja zabroniona","Token expired":"Token wygasł","Token has invalid email address":"Token ma niewłaściwy adres email","User has no password set":"Użytkownik nie ma ustawionego hasła","User not found":"Nie znaleziono użytkownika","Verify email link expired":"Link weryfikacyjny wygasł","Verify email link is for unknown address":"Link weryfikacyjny jest dla nieznanego adresu","Match failed":"Błędne dopasowanie","Unknown error":"Nieznany błąd"}}},i.map("pl",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={and:"e",clickAgree:"Ao clicar em Entrar, você aceita nosso",configure:"Configurar",createAccount:"Criar Conta",dontHaveAnAccount:"Não tem conta?",email:"E-mail",emailAddress:"Endereço de e-mail",emailResetLink:"Gerar nova senha",forgotPassword:"Esqueceu sua senha?",ifYouAlreadyHaveAnAccount:"Se você já tem uma conta",optional:"Opcional",OR:"OU",password:"Senha",privacyPolicy:"Política de Privacidade",resetYourPassword:"Gerar nova senha",sign:"Entrar",signIn:"Entrar",signin:"entrar",signOut:"Sair",signUp:"Registrar",signupCode:"Código de acesso",signUpWithYourEmailAddress:"Entre usando seu endereço de e-mail",terms:"Termos de Uso",updateYourPassword:"Atualizar senha",username:"Nome de usuário",usernameOrEmail:"Usuario ou e-mail","with":"com",error:{emailRequired:"E-mail é obrigatório.",minChar:"Senha requer um mínimo de 7 caracteres.",pwOneDigit:"Senha deve conter pelo menos um digito.",pwOneLetter:"Senha deve conter pelo menos uma letra.",signInRequired:"Você precisa estar logado para fazer isso.",signupCodeIncorrect:"Código de acesso incorreto.",signupCodeRequired:"É necessário um código de acesso.",usernameIsEmail:"Nome de usuário não pode ser um endereço de e-mail.",usernameRequired:"Nome de usuário é obrigatório."}},i.map("pt",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"добавить",and:"и",back:"назад",changePassword:"Сменить пароль",choosePassword:"Придумайте пароль",clickAgree:"Нажав на Регистрация вы соглашаетесь с условиями",configure:"Конфигурировать",createAccount:"Создать аккаунт",currentPassword:"Текущий пароль",dontHaveAnAccount:"Нет аккаунта?",email:"Email",emailAddress:"Email",emailResetLink:"Отправить ссылку для сброса",forgotPassword:"Забыли пароль?",ifYouAlreadyHaveAnAccount:"Если у вас уже есть аккаунт",newPassword:"Новый пароль",newPasswordAgain:"Новый пароль (еще раз)",optional:"Необязательно",OR:"ИЛИ",password:"Пароль",passwordAgain:"Пароль (еще раз)",privacyPolicy:"Политики безопасности",remove:"Удалить",resetYourPassword:"Сбросить пароль",setPassword:"Установить пароль",sign:"Подпись",signIn:"Войти",signin:"bойти",signOut:"Выйти",signUp:"Регистрация",signupCode:"Регистрационный код",signUpWithYourEmailAddress:"Зарегистрируйтесь с вашим email адресом",terms:"Условиями пользования",updateYourPassword:"Обновить пароль",username:"Имя пользователя",usernameOrEmail:"Имя пользователя или email","with":"с",info:{emailSent:"Email отправлен",emailVerified:"Email прошел проверку",passwordChanged:"Пароль изменен",passwordReset:"Пароль сброшен"},error:{emailRequired:"Email обязательно.",minChar:"Минимальное кол-во символов для пароля 7.",pwdsDontMatch:"Пароли не совпадают",pwOneDigit:"В пароле должна быть хотя бы одна цифра.",pwOneLetter:"В пароле должна быть хотя бы одна буква.",signInRequired:"Необходимо войти для чтобы продолжить.",signupCodeIncorrect:"Неправильный регистрационный код.",signupCodeRequired:"Необходим регистрациооный код.",usernameIsEmail:"Имя пользователя не может быть адресом email.",usernameRequired:"Имя пользователя обязательно.",accounts:{"Email already exists.":"Email уже существует","Email doesn't match the criteria.":"Email не соответствует критериям.","Invalid login token":"Неверный токен для входа","Login forbidden":"Вход запрещен","Service unknown":"Cервис неизвестен","Unrecognized options for login request":"Неизвестные параметры для запроса входа","User validation failed":"Проверка пользователя неудалась","Username already exists.":"Пользователь существует.","You are not logged in.":"Вы не вошли.","You've been logged out by the server. Please log in again.":"Сервер инициировал выход. Пожалуйста войдите еще раз.","Your session has expired. Please log in again.":"Ваша сессия устарела. Пожалуйста войдите еще раз.","No matching login attempt found":"Не было найдено соответствующей попытки войти","Password is old. Please reset your password.":"Пароль устарел. Пожалуйста сбросьте Ваш пароль.","Incorrect password":"Неправильный пароль","Invalid email":"Несуществующий Email","Must be logged in":"Необходимо войти","Need to set a username or email":"Необходимо имя пользователя или email","old password format":"старый формат пароля","Password may not be empty":"Пароль не может быть пустым","Signups forbidden":"Регистрация отключена","Token expired":"Время действия токена истекло","Token has invalid email address":"У токена неправильный email адрес","User has no password set":"У пользователя не установлен пароль","User not found":"Пользователь не найден","Verify email link expired":"Ссылка подтверждения email устарела","Verify email link is for unknown address":"Ссылка подтверждения email для неизвестного адреса","Match failed":"Не совпадают","Unknown error":"Неизвестная ошибка"}}},i.map("ru",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"dodaj",and:"in",back:"nazaj",changePassword:"Spremeni geslo",choosePassword:"Izberi geslo",clickAgree:"S klikom na Registracija se strinjaš",configure:"Nastavi",createAccount:"Nova registracija",currentPassword:"Trenutno geslo",dontHaveAnAccount:"Nisi registriran(a)?",email:"Email",emailAddress:"Email naslov",emailResetLink:"Pošlji ponastavitveno povezavo",forgotPassword:"Pozabljeno geslo?",ifYouAlreadyHaveAnAccount:"Če si že registriran(a),",newPassword:"Novo geslo",newPasswordAgain:"Novo geslo (ponovno)",optional:"Po želji",OR:"ALI",password:"Geslo",passwordAgain:"Geslo (ponovno)",privacyPolicy:"z našimi pogoji uporabe",remove:"briši",resetYourPassword:"Ponastavi geslo",setPassword:"Nastavi geslo",sign:"Prijava",signIn:"Prijava",signin:"se prijavi",signOut:"Odjava",signUp:"Registracija",signupCode:"Prijavna koda",signUpWithYourEmailAddress:"Prijava z email naslovom",terms:"Pogoji uporabe",updateYourPassword:"Spremeni geslo",username:"Uporabniško ime",usernameOrEmail:"Uporabniško ime ali email","with":"z",info:{emailSent:"E-pošta poslana",emailVerified:"Email naslov preverjen",passwordChanged:"Geslo spremenjeno",passwordReset:"Geslo ponastavljeno"},error:{emailRequired:"Email je obvezen vnos.",minChar:"Geslo mora imeti vsaj sedem znakov.",pwdsDontMatch:"Gesli se ne ujemata",pwOneDigit:"V geslu mora biti vsaj ena številka.",pwOneLetter:"V geslu mora biti vsaj ena črka.",signInRequired:"Za to moraš biti prijavljen(a).",signupCodeIncorrect:"Prijavna koda je napačna.",signupCodeRequired:"Prijavna koda je obvezen vnos.",usernameIsEmail:"Uporabniško ime ne more biti email naslov.",usernameRequired:"Uporabniško ime je obvezen vnos.",accounts:{"Email already exists.":"Email že obstaja.","Email doesn't match the criteria.":"Email ne odgovarja kriterijem.","Invalid login token":"Napačen prijavni žeton","Login forbidden":"Prijava ni dovoljena","Service unknown":"Neznana storitev","Unrecognized options for login request":"Neznane možnosti v prijavnem zahtevku","User validation failed":"Preverjanje uporabnika neuspešno","Username already exists.":"Uporabniško ime že obstaja","You are not logged in.":"Nisi prijavljen(a).","You've been logged out by the server. Please log in again.":"Odjavljen(a) si s strežnika. Ponovi prijavo.","Your session has expired. Please log in again.":"Seja je potekla. Ponovi prijavo.","No matching login attempt found":"Prijava ne obstaja","Password is old. Please reset your password.":"Geslo je staro. Zamenjaj ga.","Incorrect password":"Napačno geslo","Invalid email":"Napačen email","Must be logged in":"Moraš biti prijavljane(a)","Need to set a username or email":"Prijava ali email sta obvezna","old password format":"stara oblika gesla","Password may not be empty":"Geslo ne sme biti prazno","Signups forbidden":"Prijave onemogočene","Token expired":"Žeton je potekel","Token has invalid email address":"Žeton vsebuje napačen email","User has no password set":"Uporabnik nima gesla","User not found":"Uporabnik ne obstaja","Verify email link expired":"Povezava za potrditev je potekla","Verify email link is for unknown address":"Povezava za potrditev vsebuje neznan naslov","Match failed":"Prijava neuspešna","Unknown error":"Neznana napaka"}}},i.map("sl",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"lägg till",and:"och",back:"tillbaka",changePassword:"Ändra lösenord",choosePassword:"Välj lösenord",clickAgree:"När du väljer att skapa ett konto så godkänner du också vår",configure:"Konfigurera",createAccount:"Skapa ett konto",currentPassword:"Nuvarande lösenord",dontHaveAnAccount:"Har du inget konto?",email:"E-postadress",emailAddress:"E-postadress",emailResetLink:"E-post återställningslänk",forgotPassword:"Glömt din e-postadress?",ifYouAlreadyHaveAnAccount:"Om du redan har ett konto",newPassword:"Nytt lösenord",newPasswordAgain:"Nytt lösenord (upprepa)",optional:"Valfri",OR:"ELLER",password:"Lösenord",passwordAgain:"Lösenord (upprepa)",privacyPolicy:"integritetspolicy",remove:"ta bort",resetYourPassword:"Återställ ditt lösenord",setPassword:"Sätt ett lösenord",sign:"Logga",signIn:"Logga in",signin:"logga in",signOut:"Logga ut",signUp:"Skapa konto",signupCode:"Registreringskod",signUpWithYourEmailAddress:"Skapa ett konto med din e-postadress",terms:"användarvilkor",updateYourPassword:"Uppdatera ditt lösenord",username:"Användarnamn",usernameOrEmail:"Användarnamn eller e-postadress","with":"med",info:{emailSent:"E-post skickades",emailVerified:"E-post verifierades",passwordChanged:"Lösenordet har ändrats",passwordReset:"Återställ lösenordet"},error:{emailRequired:"Det krävs ett lösenord.",minChar:"Det krävs minst 7 tecken i ditt lösenord.",pwdsDontMatch:"Lösenorden matchar inte.",pwOneDigit:"Lösenordet måste ha minst 1 siffra.",pwOneLetter:"Lösenordet måste ha minst 1 bokstav.",signInRequired:"Inloggning krävs här.",signupCodeIncorrect:"Registreringskoden är felaktig.",signupCodeRequired:"Det krävs en registreringskod.",usernameIsEmail:"Användarnamnet kan inte vara en e-postadress.",usernameRequired:"Det krävs ett användarnamn.",accounts:{"Email already exists.":"E-postadressen finns redan.","Email doesn't match the criteria.":"E-postadressen uppfyller inte kriterierna.","Invalid login token":"Felaktig login-token","Login forbidden":"Inloggning tillåts ej","Service unknown":"Okänd service","Unrecognized options for login request":"Okända val för inloggningsförsöket","User validation failed":"Validering av användare misslyckades","Username already exists.":"Användarnamn finns redan.","You are not logged in.":"Du är inte inloggad.","You've been logged out by the server. Please log in again.":"Du har loggats ut av servern. Vänligen logga in igen.","Your session has expired. Please log in again.":"Din session har gått ut. Vänligen ligga in igen.","No matching login attempt found":"Inget matchande loginförsök kunde hittas","Password is old. Please reset your password.":"Ditt lösenord är gammalt. Vänligen återställ ditt lösenord.","Incorrect password":"Felaktigt lösenord","Invalid email":"Ogiltig e-postadress","Must be logged in":"Måste vara inloggad","Need to set a username or email":"Ett användarnamn eller en e-postadress krävs.","old password format":"gammalt lösenordsformat","Password may not be empty":"Lösenordet får inte vara tomt","Signups forbidden":"Registrering förbjuden","Token expired":"Token har gått ut","Token has invalid email address":"Token har ogiltig e-postadress","User has no password set":"Användaren har inget lösenord","User not found":"Användaren hittades inte","Verify email link expired":"Länken för att verifera e-postadress har gått ut","Verify email link is for unknown address":"Länken för att verifiera e-postadress är för en okänd adress.","Match failed":"Matchning misslyckades","Unknown error":"Okänt fel"}}},i.map("sv",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"додати",and:"та",back:"назад",changePassword:"Змінити пароль",choosePassword:"Придумайте пароль",clickAgree:"Натиснувши на Реєстрація ви погоджуєтеся з умовами",configure:"Налаштувати",createAccount:"Створити аккаунт",currentPassword:"Діючий пароль",dontHaveAnAccount:"Немає аккаунта?",email:"Email",emailAddress:"Email",emailResetLink:"Отримати посилання для оновлення паролю",forgotPassword:"Забули пароль?",ifYouAlreadyHaveAnAccount:"Якщо у вас вже є аккаунт:",newPassword:"Новий пароль",newPasswordAgain:"Новий пароль (ще раз)",optional:"Необов’язково",OR:"АБО",password:"Пароль",passwordAgain:"Пароль (ще раз)",privacyPolicy:"Політики безпеки",remove:"Видалити",resetYourPassword:"Відновити пароль",setPassword:"Встановити пароль",sign:"Підпис",signIn:"Увійти",signin:"увійти",signOut:"Вийти",signUp:"Зареєструватися",signupCode:"Реєстраційний код",signUpWithYourEmailAddress:"Зареєструйтесь з вашою email адресою",terms:"Умовами користування",updateYourPassword:"Оновити пароль",username:"Ім’я користувача",usernameOrEmail:"Ім’я користувача або email","with":"з",info:{emailSent:"Email відправлено",emailVerified:"Email пройшов перевірку",passwordChanged:"Пароль змінено",passwordReset:"Пароль скинуто"},error:{emailRequired:"Email є обов’язковим.",minChar:"Мінімальна кіл-ть символів для паролю 7.",pwdsDontMatch:"Паролі не співпадають",pwOneDigit:"Пароль повинен містити хоча б одну цифру.",pwOneLetter:"Пароль повинен містити хоча б одну букву.",signInRequired:"Для продовження необхідно увійти.",signupCodeIncorrect:"Невірний реєстраційний код.",signupCodeRequired:"Необхідний реєстраційний код.",usernameIsEmail:"Ім’я користувача не може бути email адресою.",usernameRequired:"Ім’я користувача є обов’язковим.",accounts:{"Email already exists.":"Email вже існує","Email doesn't match the criteria.":"Email відповідає критеріям.","Invalid login token":"Невірний токен для входу","Login forbidden":"Вхід заборонено","Service unknown":"Невідомий сервіс","Unrecognized options for login request":"Невідомі параметри для запиту входу","User validation failed":"Перевірка користувача не вдалася","Username already exists.":"Користувач існує.","You are not logged in.":"Ви не ввійшли.","You've been logged out by the server. Please log in again.":"Сервер ініціював вихід. Будь ласка увійдіть ще раз.","Your session has expired. Please log in again.":"Ваша сесія застаріла. Будь ласка увійдіть ще раз.","No matching login attempt found":"Не було знайдено відповідної спроби увійти","Password is old. Please reset your password.":"Пароль застарів. Будь ласка, скиньте Ваш пароль.","Incorrect password":"Невірний пароль","Invalid email":"Неіснуючий Email","Must be logged in":"Необхідно увійти","Need to set a username or email":"Необхідно ім’я користувача або email","old password format":"старий формат паролю","Password may not be empty":"Пароль не може бути пустим","Signups forbidden":"Реєстрацію відключено","Token expired":"Час дії токена вичерпано","Token has invalid email address":"Невірна email адреса для токена","User has no password set":"У користувача не встановлено пароль","User not found":"Користувач не знайдений","Verify email link expired":"Посилання підтвердження email застаріло","Verify email link is for unknown address":"Посилання підтвердження email для невідомої адреси","Match failed":"Не співпадають","Unknown error":"Невідома помилка"}}},i.map("uk",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"thêm",and:"và",back:"trở lại",changePassword:"Đổi mật khẩu",choosePassword:"Chọn một mật khẩu",clickAgree:"Bằng cách nhấn vào Đăng ký, bạn đã đồng ý với",configure:"Cấu hình",createAccount:"Tạo Tài khoản",currentPassword:"Mật khẩu hiện tại",dontHaveAnAccount:"Chưa có tài khoản?",email:"Email",emailAddress:"Địa chỉ Email",emailResetLink:"Gửi",forgotPassword:"Quên mật khẩu?",ifYouAlreadyHaveAnAccount:"Nếu bạn đã có tài khoản",newPassword:"Mật khẩu mới",newPasswordAgain:"Mật khẩu mới (nhập lại)",optional:"Tùy chọn",OR:"Hoặc",password:"Mật khẩu",passwordAgain:"Mật khẩu (nhập lại)",privacyPolicy:"Chính sách bảo mật",remove:"xóa",resetYourPassword:"Lấy lại mật khẩu",setPassword:"Thiết lập mật khẩu",sign:"Ký",signIn:"Đăng nhập",signin:"đăng nhập",signOut:"Đăng xuất",signUp:"Đăng ký",signupCode:"Mã đăng ký",signUpWithYourEmailAddress:"Đăng ký với email của bạn",terms:"Điều khoản sử dụng",updateYourPassword:"Cập nhật mật khẩu",username:"Tên đăng nhập",usernameOrEmail:"Tên đăng nhập hoặc email","with":"với",info:{emailSent:"Email đã được gửi đi!",emailVerified:"Email đã được xác minh",passwordChanged:"Đã đổi mật khẩu",passwordReset:"Lất lại mật khẩu"},error:{emailRequired:"Email phải có.",minChar:"Mật khẩu phải có ít nhất 7 ký tự.",pwdsDontMatch:"Mật khẩu không giống nhau",pwOneDigit:"Mật khẩu phải có ít nhất 1 chữ số.",pwOneLetter:"Mật khẩu phải có 1 ký tự chữ.",signInRequired:"Phải đăng nhập.",signupCodeIncorrect:"Mã số đăng ký sai.",signupCodeRequired:"Phải có mã số đăng ký.",usernameIsEmail:"Tên đăng nhập không thể là địa chỉ email.",usernameRequired:"Phải có tên đăng nhập.",accounts:{"A login handler should return a result or undefined":"Bộ xử lý đăng nhập phải trả về một kết quả hoặc undefined","Email already exists.":"Email đã tồn tại.","Email doesn't match the criteria.":"Email không phù hợp.","Invalid login token":"Mã đăng nhập không đúng","Login forbidden":"Đăng nhập bị cấm","Service unknown":"Chưa biết Dịch vụ","Unrecognized options for login request":"Tùy chọn không được công nhận đối với yêu cầu đăng nhập","User validation failed":"Xác nhận người dùng thất bại","Username already exists.":"Tên đăng nhập đã tồn tại.","You are not logged in.":"Bạn chưa đăng nhập.","You've been logged out by the server. Please log in again.":"Bạn đã bị đăng xuất bởi máy chủ. Vui lòng đăng nhập lại.","Your session has expired. Please log in again.":"Thời gian đăng nhập đã hết. Vui lòng đăng nhập lại.","No matching login attempt found":"Không tìm thấy đăng nhập phù hợp","Password is old. Please reset your password.":"Mật khẩu đã cũ. Vui lòng lấy lại mật khẩu.","Incorrect password":"Mật khẩu sai","Invalid email":"Email sai","Must be logged in":"Phải đăng nhập","Need to set a username or email":"Phải điền tên đăng nhập hoặc email","old password format":"định dạng mật khẩu cũ","Password may not be empty":"mật khẩu không được để trống","Signups forbidden":"Đăng ký đã bị cấm","Token expired":"Hết phiên đăng nhập","Token has invalid email address":"Phiên đăng nhập chứa địa chỉ email sai","User has no password set":"Người dùng chưa có mật khẩu","User not found":"Không tìm thấy người dùng","Verify email link expired":"Đường dẫn xác nhận email đã hết hạn","Verify email link is for unknown address":"Đường dẫn xác nhận email là cho địa chỉ chưa xác định","Match failed":"Không đúng","Unknown error":"Lỗi chưa được biết"}}},i.map("vi",a)
}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"legg til",and:"og",back:"tilbake",changePassword:"Bytt passord",choosePassword:"Velg passord",clickAgree:"Ved å klikke meld på godtar du vår",configure:"Konfigurer",createAccount:"Oprett konto",currentPassword:"Nåværende passord",dontHaveAnAccount:"Har du ikke en konto?",email:"E-post",emailAddress:"E-postadresse",emailResetLink:"Epost nullstillingslenke",forgotPassword:"Glemt passord?",ifYouAlreadyHaveAnAccount:"Hvis du allerede har en konto",newPassword:"Nytt passord",newPasswordAgain:"Gjengi nytt passord",optional:"Frivillig",OR:"eller",password:"Passord",passwordAgain:"Gjengi passord",privacyPolicy:"Personvern",remove:"fjern",resetYourPassword:"Nullstill passord",setPassword:"Sett passord",sign:"Logg",signIn:"Logg inn",signin:"Logg inn",signOut:"Logg ut",signUp:"Meld på",signupCode:"Påmeldingskode",signUpWithYourEmailAddress:"Meld på med din e-postadresse",terms:"Betingelser for bruk",updateYourPassword:"Oppdater passord",username:"Brukernavn",usernameOrEmail:"Brukernavn eller e-epost","with":"med",info:{emailSent:"E-post sendt",emailVerified:"E-post bekreftet",passwordChanged:"Passord endret",passwordReset:"Passord nullstillt"},error:{emailRequired:"E-post obligatorisk.",minChar:"Passordet må ha minst 7 tegn.",pwdsDontMatch:"Passordene er ikke like.",pwOneDigit:"Passordet må ha minst ett tall.",pwOneLetter:"Passordet må ha minst en bokstav.",signInRequired:"Du må være logget inn for å gjøre dette.",signupCodeIncorrect:"Påmelding gikk galt.",signupCodeRequired:"Påmeldingskode kreves.",usernameIsEmail:"Brukernavn kan ikke være en e-postadresse.",usernameRequired:"Brukernavn må utfylles.",accounts:{"Email already exists.":"E-postadressen finnes allerede.","Email doesn't match the criteria.":"E-postadressen møter ikke kriteriet.","Invalid login token":"Ugyldig innloggingstegn","Login forbidden":"Innlogging forbudt","Service unknown":"Ukjent tjeneste","Unrecognized options for login request":"Ukjendte valg ved innloggingsforsøk","User validation failed":"Brukergodkjenning gikk galt","Username already exists.":"Brukernavnet finnes allerede.","You are not logged in.":"Du er ikke logget inn.","You've been logged out by the server. Please log in again.":"Tjeneren loggt deg ut. Logg inn på ny.","Your session has expired. Please log in again.":"Din økt er utløpt. Logg inn på ny.","No matching login attempt found":"Fant ingen samsvarende innloggingsførsøk","Password is old. Please reset your password.":"Passordet er for gammelt. Nullstill passordet ditt.","Incorrect password":"Feil passord","Invalid email":"Ugyldig e-postadresse","Must be logged in":"Du må være innlogget","Need to set a username or email":"Oppgi brukernavn eller e-postadresse","old password format":"gammelt passordformat","Password may not be empty":"Passord må være utfyllt","Signups forbidden":"Påmeldinger ikke tillatt","Token expired":"Økten er utløpt","Token has invalid email address":"Innloggingstegnet har ugyldig e-postadresse","User has no password set":"Brukeren har ikke angitt passord","User not found":"Bruker ikke funnet","Verify email link expired":"Lenke for e-postbekreftelse er utløpt","Verify email link is for unknown address":"Lenke for e-postbekreftelse er for en ukjent adresse","Match failed":"Ikke samsvar","Unknown error":"Ukjent feil"}}},i.map("no_NB",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"toevoegen",and:"en",back:"terug",changePassword:"Wachtwoord wijzigen",choosePassword:"Wachtwoord kiezen",clickAgree:"Door te registreren accepteer je onze",configure:"Configureren",createAccount:"Account aanmaken",currentPassword:"Huidige wachtwoord",dontHaveAnAccount:"Nog geen account?",email:"E-mail",emailAddress:"E-mailadres",emailResetLink:"Verzenden",forgotPassword:"Wachtwoord vergeten?",ifYouAlreadyHaveAnAccount:"Heb je al een account?",newPassword:"Nieuwe wachtwoord",newPasswordAgain:"Nieuwe wachtwoord (herhalen)",optional:"Optioneel",OR:"OF",password:"Wachtwoord",passwordAgain:"Wachtwoord (herhalen)",privacyPolicy:"privacy verklaring",remove:"verwijderen",resetYourPassword:"Wachtwoord resetten",setPassword:"Wachtwoord instellen",sign:"Aanmelden",signIn:"Aanmelden",signin:"aanmelden",signOut:"Afmelden",signUp:"Registreren",signupCode:"Registratiecode",signUpWithYourEmailAddress:"Met e-mailadres registreren",terms:"gebruiksvoorwaarden",updateYourPassword:"Wachtwoord actualiseren",username:"Gebruikersnaam",usernameOrEmail:"Gebruikersnaam of e-mailadres","with":"met",info:{emailSent:"E-mail verzonden",emailVerified:"E-mail geverifieerd",PasswordChanged:"Wachtwoord gewijzigd",PasswordReset:"Wachtwoord gereset"},error:{emailRequired:"E-mailadres is verplicht",minChar:"Wachtwoord moet tenminste 7 tekens lang zijn.",pwdsDontMatch:"Wachtwoorden zijn niet gelijk.",pwOneDigit:"Wachtwoord moet tenminste 1 cijfer bevatten.",pwOneLetter:"Wachtwoord moet tenminste 1 letter bevatten.",signInRequired:"Je moet aangemeld zijn.",signupCodeIncorrect:"Registratiecode is ongeldig.",signupCodeRequired:"Registratiecode is verplicht.",usernameIsEmail:"Gebruikersnaam is gelijk aan e-mail.",usernameRequired:"Gebruikersnaam is verplicht.",accounts:{"Email already exists.":"Dit e-mailadres is al in gebruik.","Email doesn't match the criteria.":"e-mail voldoet niet aan de voorwaarden.","Invalid login token":"Ongeldig login token","Login forbidden":"Aanmelden verboden","Service unknown":"Sevice onbekend","Unrecognized options for login request":"Onbekende optie voor login request","User validation failed":"Gebruikers validatie mislukt","Username already exists.":"Gebruikersnaam bestaat al.","You are not logged in.":"Je bent niet ingelogd.","You've been logged out by the server. Please log in again.":"Je bent door de server uitgelogd. Opnieuw aanmelden svp.","Your session has expired. Please log in again.":"Je sessie is verlopen. Opnieuw aanmelden svp.","No matching login attempt found":"Geen overeenkomstig login verzoek gevonden.","Password is old. Please reset your Password.":"Wachtwoord is verlopen. Wachtwoord resetten svp.","Incorrect Password":"Onjuist wachtwoord","Invalid email":"Ongeldig e-mailadres","Must be logged in":"Je moet aangemeld zijn","Need to set a username or email":"Gebruikersnaam of e-mailadres moet ingesteld zijn","Password may not be empty":"Wachtwoord mag niet leeg zijn","Signups forbidden":"Registratie verboden","Token expired":"Token is verlopen","Token has invalid email address":"Token heeft ongeldig e-mailadres","User has no Password set":"Geen wachtwoord ingesteld voor gebruiker","User not found":"Gebruiker niet gevonden","Verify email link expired":"E-mail verificatie link is verlopen","Verify email link is for unknown address":"E-mail verificatie link is voor onbekend e-mailadres","Match failed":"Geen match","Unknown error":"Onbekende fout"}}},i.map("nl",a)}.call(this),function(){s="object"==typeof s?s:{};var e=s,a;a={add:"添加",and:"和",back:"返回",changePassword:"修改密碼",choosePassword:"選擇密碼",clickAgree:"點擊註冊, 您同意我們的",configure:"配置",createAccount:"建立帳號",currentPassword:"當前密碼",dontHaveAnAccount:"還沒有賬戶?",email:"電子郵箱",emailAddress:"電郵地址",emailResetLink:"電子郵件重設連結",forgotPassword:"忘記密碼?",ifYouAlreadyHaveAnAccount:"如果您已有賬戶",newPassword:"新密碼",newPasswordAgain:"新密碼 (重新輸入)",optional:"可選的",OR:"或",password:"密碼",passwordAgain:"密碼 (重新輸入)",privacyPolicy:"隱私政策",remove:"刪除",resetYourPassword:"重置您的密碼",setPassword:"設置密碼",sign:"登",signIn:"登入",signin:"登入",signOut:"登出",signUp:"註冊",signupCode:"註冊碼",signUpWithYourEmailAddress:"使用您的電郵地址註冊",terms:"使用條款",updateYourPassword:"更新您的密碼",username:"用戶名",usernameOrEmail:"用戶名或電子郵箱","with":"與",info:{emailSent:"郵件已發送",emailVerified:"郵件已驗證",passwordChanged:"密碼已修改",passwordReset:"密碼重置"},error:{emailRequired:"必須填寫電子郵件。",minChar:"密碼至少需要7個字符。",pwdsDontMatch:"密碼不一致。",pwOneDigit:"密碼必須至少有一位數字。",pwOneLetter:"密碼必須至少有一位字母。",signInRequired:"您必須先登錄才能繼續。",signupCodeIncorrect:"註冊碼錯誤。",signupCodeRequired:"必須有註冊碼。",usernameIsEmail:"用戶名不能為電郵地址。",usernameRequired:"必須有用戶名。",accounts:{"Email already exists.":"電郵地址已被使用。","Email doesn't match the criteria.":"電郵地址不符合條件。","Invalid login token":"無效的登錄令牌","Login forbidden":"禁止登錄","Service unknown":"未知服務","Unrecognized options for login request":"無法識別的登錄請求選項","User validation failed":"用戶驗證失敗","Username already exists.":"用戶名已經存在。","You are not logged in.":"您尚未登入。","You've been logged out by the server. Please log in again.":"你已被伺服器登出，請重新登入。","Your session has expired. Please log in again.":"您的協定已過期，請重新登入。","No matching login attempt found":"沒有找到匹配的登入請求","Password is old. Please reset your password.":"密碼是舊的。請重置您的密碼。","Incorrect password":"密碼不正確","Invalid email":"無效的電子郵件","Must be logged in":"必須先登入","Need to set a username or email":"必須設置用戶名或電郵地址","old password format":"舊密碼格式","Password may not be empty":"密碼不能為空的","Signups forbidden":"註冊被禁止","Token expired":"密匙過期","Token has invalid email address":"密匙具有無效的電郵地址","User has no password set":"用戶沒有設置密碼","User not found":"找不到用戶","Verify email link expired":"驗證電郵連結已過期","Verify email link is for unknown address":"驗證電郵連結是未知的地址","Match failed":"匹配失敗","Unknown error":"未知錯誤"}}},i.map("zh_tw",a)}.call(this),"undefined"==typeof Package&&(Package={}),Package["softwarerero:accounts-t9n"]={T9n:i}}();

!function(){var n=Package.meteor.Meteor,t=Package.templating.Template,e=Package["useraccounts:core"].AccountsTemplates,a=Package.blaze.Blaze,u=Package.blaze.UI,r=Package.blaze.Handlebars,c=Package["accounts-base"].Accounts,o=Package["softwarerero:accounts-t9n"].T9n,i=Package["iron:router"].Router,l=Package["iron:router"].RouteController,s=Package.htmljs.HTML,p=Package["iron:core"].Iron;(function(){t.__checkName("atError"),t.atError=new t("Template.atError",function(){var n=this;return s.DIV({"class":"at-error"},"\n    ",a.Each(function(){return Spacebars.call(n.lookup("error"))},function(){return["\n      ",s.P(a.View(function(){return Spacebars.mustache(n.lookup("errorText"))})),"\n    "]}),"\n  ")})}).call(this),function(){t.atError.helpers(e.atErrorHelpers)}.call(this),function(){t.__checkName("atForm"),t.atForm=new t("Template.atForm",function(){var n=this;return a.Unless(function(){return Spacebars.call(n.lookup("hide"))},function(){return["\n    ",s.DIV({"class":"at-form"},"\n      ",a.If(function(){return Spacebars.call(n.lookup("showTitle"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atTitle")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showOauthServices"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atOauth")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showServicesSeparator"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atSep")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showError"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atError")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showResult"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atResult")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showPwdForm"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atPwdForm")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showSignInLink"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atSigninLink")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showSignUpLink"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atSignupLink")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showTermsLink"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atTermsLink")),"\n      "]}),"\n    "),"\n  "]})})}.call(this),function(){t.atForm.helpers(e.atFormHelpers)}.call(this),function(){t.__checkName("atInput"),t.atInput=new t("Template.atInput",function(){var n=this;return a._TemplateWith(function(){return{template:Spacebars.call(n.lookup("templateName"))}},function(){return Spacebars.include(function(){return Spacebars.call(t.__dynamic)})})}),t.__checkName("atTextInput"),t.atTextInput=new t("Template.atTextInput",function(){var n=this;return s.DIV({"class":function(){return["at-input ",a.If(function(){return Spacebars.call(n.lookup("isValidating"))},function(){return"validating"})," ",a.If(function(){return Spacebars.call(n.lookup("hasError"))},function(){return"has-error"})," ",a.If(function(){return Spacebars.call(n.lookup("hasSuccess"))},function(){return"has-success"})," ",a.If(function(){return Spacebars.call(n.lookup("feedback"))},function(){return"has-feedback"})]}},"\n    ",a.If(function(){return Spacebars.call(n.lookup("showLabels"))},function(){return["\n      ",s.LABEL({"for":function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]}},"\n        ",a.View(function(){return Spacebars.mustache(n.lookup("displayName"))})," ",a.Unless(function(){return Spacebars.call(n.lookup("required"))},function(){return a.View(function(){return Spacebars.mustache(n.lookup("optionalText"))})}),"\n      "),"\n    "]}),"\n    ",s.INPUT({type:function(){return Spacebars.mustache(n.lookup("type"))},id:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]},name:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]},placeholder:function(){return Spacebars.mustache(n.lookup("placeholder"))},autocapitalize:"none",autocorrect:"off"}),"\n    ",a.If(function(){return Spacebars.call(n.lookup("hasIcon"))},function(){return["\n        ",s.SPAN({"class":function(){return Spacebars.mustache(n.lookup("iconClass"))}}),"\n    "]}),"\n    ",a.If(function(){return Spacebars.call(n.lookup("hasError"))},function(){return["\n      ",s.SPAN(a.View(function(){return Spacebars.mustache(n.lookup("errorText"))})),"\n    "]}),"\n  ")}),t.__checkName("atCheckboxInput"),t.atCheckboxInput=new t("Template.atCheckboxInput",function(){var n=this;return s.DIV({"class":"at-input"},"\n      ",s.INPUT(s.Attrs({type:function(){return Spacebars.mustache(n.lookup("type"))},id:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]},name:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]}},function(){return Spacebars.attrMustache(n.lookup("disabled"))})),"\n      ",s.LABEL({"for":function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]}},a.View(function(){return Spacebars.mustache(n.lookup("displayName"))})),"\n  ")}),t.__checkName("atSelectInput"),t.atSelectInput=new t("Template.atSelectInput",function(){var n=this;return s.DIV({"class":"at-input"},"\n    ",s.LABEL({"for":function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]}},a.View(function(){return Spacebars.mustache(n.lookup("displayName"))})),"\n    ",s.SELECT({id:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]},name:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]}},"\n      ",a.Each(function(){return Spacebars.call(n.lookup("values"))},function(){return["\n        ",s.OPTION({value:function(){return Spacebars.mustache(n.lookup("value"))}},a.View(function(){return Spacebars.mustache(n.lookup("text"))})),"\n      "]}),"\n    "),"\n  ")}),t.__checkName("atRadioInput"),t.atRadioInput=new t("Template.atRadioInput",function(){var n=this;return[s.DIV({"class":"at-input"},"\n    ",s.LABEL(a.View(function(){return Spacebars.mustache(n.lookup("displayName"))})),"\n  "),"\n  ",a.Each(function(){return Spacebars.call(n.lookup("values"))},function(){return["\n    ",s.DIV({"class":"at-input"},"\n      ",s.INPUT({id:function(){return["at-field-",Spacebars.mustache(n.lookup("id")),"-choice-",Spacebars.mustache(n.lookup("value"))]},type:"radio",name:function(){return["at-field-",Spacebars.mustache(n.lookup("id"))]},value:function(){return Spacebars.mustache(n.lookup("value"))}}),"\n      ",s.LABEL(a.View(function(){return Spacebars.mustache(n.lookup("text"))})),"\n    "),"\n  "]})]}),t.__checkName("atHiddenInput"),t.atHiddenInput=new t("Template.atHiddenInput",function(){var n=this;return s.INPUT({type:"hidden",id:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]},name:function(){return["at-field-",Spacebars.mustache(n.lookup("_id"))]}})})}.call(this),function(){t.atInput.rendered=e.atInputRendered,t.atInput.helpers(e.atInputHelpers),t.atInput.events(e.atInputEvents),t.atTextInput.helpers(e.atInputHelpers),t.atCheckboxInput.helpers(e.atInputHelpers),t.atSelectInput.helpers(e.atInputHelpers),t.atRadioInput.helpers(e.atInputHelpers),t.atHiddenInput.helpers(e.atInputHelpers)}.call(this),function(){t.__checkName("atNavButton"),t.atNavButton=new t("Template.atNavButton",function(){var n=this;return s.A({id:"at-nav-button"},a.View(function(){return Spacebars.mustache(n.lookup("text"))}))})}.call(this),function(){t.atNavButton.helpers(e.atNavButtonHelpers),t.atNavButton.events(e.atNavButtonEvents)}.call(this),function(){t.__checkName("atOauth"),t.atOauth=new t("Template.atOauth",function(){var n=this;return s.DIV({"class":"at-oauth"},"\n    ",a.Each(function(){return Spacebars.call(n.lookup("oauthService"))},function(){return["\n      ",Spacebars.include(n.lookupTemplate("atSocial")),"\n    "]}),"\n  ")})}.call(this),function(){t.atOauth.helpers(e.atOauthHelpers)}.call(this),function(){t.__checkName("atPwdForm"),t.atPwdForm=new t("Template.atPwdForm",function(){var n=this;return s.DIV({"class":"at-pwd-form"},"\n    ",s.FORM({role:"form",id:"at-pwd-form","class":function(){return Spacebars.mustache(n.lookup("disabled"))},novalidate:"",action:"#",method:"POST"},"\n      ",a.Each(function(){return Spacebars.call(n.lookup("fields"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atInput")),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showForgotPasswordLink"))},function(){return["\n        ",Spacebars.include(n.lookupTemplate("atPwdLink")),"\n      "]}),"\n      ",Spacebars.include(n.lookupTemplate("atPwdFormBtn")),"\n    "),"\n  ")})}.call(this),function(){t.atPwdForm.helpers(e.atPwdFormHelpers),t.atPwdForm.events(e.atPwdFormEvents)}.call(this),function(){t.__checkName("atPwdFormBtn"),t.atPwdFormBtn=new t("Template.atPwdFormBtn",function(){var n=this;return s.BUTTON({type:"submit","class":function(){return["at-btn submit ",Spacebars.mustache(n.lookup("submitDisabled"))]},id:"at-btn"},"\n    ",a.View(function(){return Spacebars.mustache(n.lookup("buttonText"))}),"\n  ")})}.call(this),function(){t.atPwdFormBtn.helpers(e.atPwdFormBtnHelpers)}.call(this),function(){t.__checkName("atPwdLink"),t.atPwdLink=new t("Template.atPwdLink",function(){var n=this;return s.DIV({"class":"at-pwd-link"},"\n    ",s.P("\n      ",a.View(function(){return Spacebars.mustache(n.lookup("preText"))}),"\n      ",s.A({href:function(){return Spacebars.mustache(n.lookup("forgotPwdLink"))},id:"at-forgotPwd","class":function(){return["at-link at-pwd ",Spacebars.mustache(n.lookup("disabled"))]}},a.View(function(){return Spacebars.mustache(n.lookup("linkText"))})),"\n      ",a.View(function(){return Spacebars.mustache(n.lookup("suffText"))}),"\n    "),"\n  ")})}.call(this),function(){t.atPwdLink.helpers(e.atPwdLinkHelpers),t.atPwdLink.events(e.atPwdLinkEvents)}.call(this),function(){t.__checkName("atResult"),t.atResult=new t("Template.atResult",function(){var n=this;return s.DIV({"class":"at-result"},"\n    ",a.View(function(){return Spacebars.mustache(n.lookup("result"))}),"\n  ")})}.call(this),function(){t.atResult.helpers(e.atResultHelpers)}.call(this),function(){t.__checkName("atSep"),t.atSep=new t("Template.atSep",function(){var n=this;return s.DIV({"class":"at-sep"},"\n    ",s.STRONG(a.View(function(){return Spacebars.mustache(n.lookup("sepText"))})),"\n  ")})}.call(this),function(){t.atSep.helpers(e.atSepHelpers)}.call(this),function(){t.__checkName("atSigninLink"),t.atSigninLink=new t("Template.atSigninLink",function(){var n=this;return s.DIV({"class":"at-signin-link"},"\n    ",s.P("\n      ",a.View(function(){return Spacebars.mustache(n.lookup("preText"))}),"\n      ",s.A({href:function(){return Spacebars.mustache(n.lookup("signInLink"))},id:"at-signIn","class":function(){return["at-link at-signin ",Spacebars.mustache(n.lookup("disabled"))]}},a.View(function(){return Spacebars.mustache(n.lookup("linkText"))})),"\n      ",a.View(function(){return Spacebars.mustache(n.lookup("suffText"))}),"\n    "),"\n  ")})}.call(this),function(){t.atSigninLink.helpers(e.atSigninLinkHelpers),t.atSigninLink.events(e.atSigninLinkEvents)}.call(this),function(){t.__checkName("atSignupLink"),t.atSignupLink=new t("Template.atSignupLink",function(){var n=this;return s.DIV({"class":"at-signup-link"},"\n    ",s.P("\n      ",a.View(function(){return Spacebars.mustache(n.lookup("preText"))}),"\n      ",s.A({href:function(){return Spacebars.mustache(n.lookup("signUpLink"))},id:"at-signUp","class":function(){return["at-link at-signup ",Spacebars.mustache(n.lookup("disabled"))]}},a.View(function(){return Spacebars.mustache(n.lookup("linkText"))})),"\n      ",a.View(function(){return Spacebars.mustache(n.lookup("suffText"))}),"\n    "),"\n  ")})}.call(this),function(){t.atSignupLink.helpers(e.atSignupLinkHelpers),t.atSignupLink.events(e.atSignupLinkEvents)}.call(this),function(){t.__checkName("atSocial"),t.atSocial=new t("Template.atSocial",function(){var n=this;return s.BUTTON({"class":function(){return["at-social-btn ",Spacebars.mustache(n.lookup("disabled"))]},id:function(){return["at-",Spacebars.mustache(n.lookup("name"))]},name:function(){return Spacebars.mustache(n.lookup("name"))}},"\n    ",s.I({"class":function(){return Spacebars.mustache(n.lookup("iconClass"))}})," ",a.View(function(){return Spacebars.mustache(n.lookup("buttonText"))}),"\n  ")})}.call(this),function(){t.atSocial.helpers(e.atSocialHelpers),t.atSocial.events(e.atSocialEvents)}.call(this),function(){t.__checkName("atTermsLink"),t.atTermsLink=new t("Template.atTermsLink",function(){var n=this;return s.DIV({"class":"at-terms-link"},"\n    ",s.P("\n      ",a.View(function(){return Spacebars.mustache(n.lookup("text"))}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("privacyUrl"))},function(){return["\n        ",s.A({href:function(){return Spacebars.mustache(n.lookup("privacyUrl"))},"class":function(){return Spacebars.mustache(n.lookup("disabled"))}},a.View(function(){return Spacebars.mustache(n.lookup("privacyLinkText"))})),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("showTermsAnd"))},function(){return["\n        ",a.View(function(){return Spacebars.mustache(n.lookup("and"))}),"\n      "]}),"\n      ",a.If(function(){return Spacebars.call(n.lookup("termsUrl"))},function(){return["\n        ",s.A({href:function(){return Spacebars.mustache(n.lookup("termsUrl"))},"class":function(){return Spacebars.mustache(n.lookup("disabled"))}},a.View(function(){return Spacebars.mustache(n.lookup("termsLinkText"))})),"\n      "]}),"\n    "),"\n  ")})}.call(this),function(){t.atTermsLink.helpers(e.atTermsLinkHelpers),t.atTermsLink.events(e.atTermsLinkEvents)}.call(this),function(){t.__checkName("atTitle"),t.atTitle=new t("Template.atTitle",function(){var n=this;return s.DIV({"class":"at-title"},"\n    ",s.H3(a.View(function(){return Spacebars.mustache(n.lookup("title"))})),"\n  ")})}.call(this),function(){t.atTitle.helpers(e.atTitleHelpers)}.call(this),function(){t.__checkName("fullPageAtForm"),t.fullPageAtForm=new t("Template.fullPageAtForm",function(){var n=this;return Spacebars.include(n.lookupTemplate("atForm"))})}.call(this),"undefined"==typeof Package&&(Package={}),Package["useraccounts:unstyled"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["telescope-theme-medbook"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.templating.Template,n=Package.blaze.Blaze,r=Package.blaze.UI,a=Package.blaze.Handlebars,o=Package.jquery.$,i=Package.jquery.jQuery,s=Package.htmljs.HTML;(function(){function r(e){var t="Template.";return 0===e.indexOf(t)?e.slice(t.length):e}function a(e,t,n){var r,a=c[e],o=a.length;for(r=0;o>r;r++)a[r].apply(t,n)}function i(e,t,n){var a,o=r(t.view.name),i=d[e][o],s=i?i.length:0;for(a=0;s>a;a++)i[a].apply(t,n)}var s=["created","rendered","destroyed"],c={created:[],rendered:[],destroyed:[]},d={created:{},rendered:{},destroyed:{}};e.startup(function(){t.forEach(function(e){function t(t){var n=e[t];e[t]=function(){a(t,this,arguments),i(t,this,arguments),"function"==typeof n&&n.apply(this,arguments)}}var n;for(n=s.length-1;n>=0;n--)t(s[n])})}),t.forEach=function(e){var r=!1;for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];n.isTemplate(o)&&("body"===o.viewName?r||(r=!0,e(o)):e(o))}},t.onCreated=function(e){c.created.push(e)},t.onRendered=function(e){c.rendered.push(e)},t.onDestroyed=function(e){c.destroyed.push(e)},t.prototype.hooks=function(e){var t=this;if("object"!=typeof e)throw new Error("hooks argument must be an object with created, rendered, and/or destroyed properties, each set to a function");var n=r(t.viewName),a,o;for(a=s.length-1;a>=0;a--)o=s[a],"function"==typeof e[o]&&(d[o][n]=d[o][n]||[],d[o][n].push(e[o]))},t.prototype.replaces=function(e){var n=this,a=t[e];if(!a)return void console.warn("Can't replace template "+e+" because it hasn't been defined yet.");var o=r(n.viewName);a.renderFunction=t[o].renderFunction},t.prototype.inheritsHelpersFrom=function(e){var n=this,a=t[e];if(!a)return void console.warn("Can't inherit helpers from template "+e+" because it hasn't been defined yet.");var i=r(n.viewName),s=t[i];if(a.__helpers)s.__helpers=o.extend({},s.__helpers,a.__helpers);else for(var c in a)a.hasOwnProperty(c)&&"__"!==c.slice(0,2)&&"viewName"!==c&&"renderFunction"!==c&&(s[c]=a[c])},t.prototype.inheritsEventsFrom=function(e){var n=this,a=t[e];if(!a)return void console.warn("Can't inherit events from template "+e+" because it hasn't been defined yet.");var o=r(n.viewName);t[o].__eventMaps=a.__eventMaps},t.prototype.copyAs=function(e){var n=this,a=t[e]=new t("Template."+e,n.renderFunction),o=r(n.viewName);a.inheritsHelpersFrom(o),a.inheritsEventsFrom(o)}}).call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:template-extension"]={}}();

!function(){var a=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["cfs:standard-packages"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package.blaze.Blaze,t=Package.blaze.UI,n=Package.blaze.Handlebars,r=Package.templating.Template,o=Package.htmljs.HTML;(function(){var e;e="undefined"!=typeof a&&"undefined"!=typeof a.View?r.prototype:t.Component;var n=e.events,o=function p(e){e.stopPropagation(),e.preventDefault()};e.events=function i(e){var a=this,t={};for(var r in e)if(/^dropped/.test(r)){var p=r.split(" ")[1],i=r;p&&(t["dragenter/dragexit/dragover/dragend "+p]=o,t["drop "+p]=function(a,t){o(a),e[i].apply(this,[a,t])})}else t[r]=e[r];return n.apply(a,[t])}}).call(this),"undefined"==typeof Package&&(Package={}),Package["raix:ui-dropped-event"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.tracker.Tracker,n=Package.tracker.Deps,i=Package.underscore._,r=Package.ejson.EJSON,o,a;(function(){o={},o.Store={GridFS:function(){throw new Error('To use FS.Store.GridFS, you must add the "cfs-gridfs" package.')},FileSystem:function(){throw new Error('To use FS.Store.FileSystem, you must add the "cfs-filesystem" package.')},S3:function(){throw new Error('To use FS.Store.S3, you must add the "cfs-s3" package.')}},o.AccessPoint={},o.Utility={},o.config={},o._collections={},a={},a.defaultZero=function(t){return+(t||0)},o.Utility.cloneFileRecord=function(t,e){e=e||{};var n={},r=e.full?[]:["collectionName","collection","data","createdByTransform"];for(var o in t)t.hasOwnProperty(o)&&!i.contains(r,o)&&(n[o]=t[o]);return n},o.Utility.defaultCallback=function e(n){if(n){if(!(n instanceof t.Error))throw n;console.error(n.message)}},o.Utility.handleError=function(t,e,n){var i="function"==typeof t?t:o.Utility.defaultCallback,r=e===""+e?new Error(e):e;return i(r,n)},o.Utility.noop=function(){},o.Utility.validateAction=function n(e,r,o){var a=e.deny,c=e.allow;if("object"!=typeof Package||!Package.insecure||a.length+c.length!==0){if(!r.isMounted())throw new t.Error(400,"Bad Request");if(r.getFileRecord(),i.any(a,function(t){return t(o,r)}))throw new t.Error(403,"Access denied");if(i.all(c,function(t){return!t(o,r)}))throw new t.Error(403,"Access denied")}},o.Utility.getFileName=function r(t){t=t.split("?")[0];var e=t.lastIndexOf("/");return-1!==e&&(t=t.slice(e+1)),t},o.Utility.getFileExtension=function c(t){t=o.Utility.getFileName(t);var e=t.lastIndexOf(".");return e>0?t.slice(e+1).toLowerCase():""},o.Utility.setFileExtension=function l(t,e){if(!t||!t.length)return t;var n=o.Utility.getFileExtension(t);return t=n.length?t.slice(0,-1*n.length)+e:t+"."+e},o.Utility.encodeParams=function u(t){var e=[];return i.each(t,function(t,n){e.length&&e.push("&"),e.push(o.Utility.encodeString(n),"=",o.Utility.encodeString(t))}),e.join("").replace(/%20/g,"+")},o.Utility.encodeString=function f(t){return encodeURIComponent(t).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},o.Utility._btoa=function s(t){var e;return e=t instanceof Buffer?t:new Buffer(t.toString(),"binary"),e.toString("base64")},o.Utility.btoa=function y(t){if("function"==typeof btoa)return btoa(t);if("undefined"!=typeof Buffer)return o.Utility._btoa(t);throw new Error("FS.Utility.btoa: Cannot base64 encode on your system")},o.Utility._atob=function d(t){return new Buffer(t,"base64").toString("binary")},o.Utility.atob=function g(t){if("function"==typeof atob)return atob(t);if("undefined"!=typeof Buffer)return o.Utility._atob(t);throw new Error("FS.Utility.atob: Cannot base64 encode on your system")},o.Utility.extend=i.extend,o.Utility.each=i.each,o.Utility.isEmpty=i.isEmpty,o.Utility.indexOf=i.indexOf,o.Utility.isArray=i.isArray,o.Utility.map=i.map,o.Utility.once=i.once,o.Utility.include=i.include,o.Utility.size=i.size}).call(this),function(){o.Utility.connectionLogin=function(e){"undefined"!=typeof Accounts&&t.startup(function(){n.autorun(function(){var n=t.userId();n?e.onReconnect=function(){var t=Accounts._storedLoginToken();e.apply("login",[{resume:t}],function(t,n){!t&&n&&e.setUserId(n.id)})}:(e.onReconnect=null,e.setUserId(null))})})},o.Utility.eachFile=function(t,e){var n=t.originalEvent||t,i=n.target.files;i&&0!=i.length||(i=n.dataTransfer?n.dataTransfer.files:[]);for(var r=0;r<i.length;r++)e(i[r],r)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:base-package"]={FS:o,_Utility:a}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n;(function(){n=function(e){var t=this;if(!(t instanceof n))throw new Error('use "new" to construct an EventEmitter');e=e||{},t._eventEmitter={onListeners:{},onceListeners:{},maxListeners:e.maxListeners||10}};var r=function(e,t){var n=this;return n._eventEmitter.maxListeners&&t>n._eventEmitter.maxListeners?"warning: possible EventEmitter memory leak detected. "+t+' listeners added on event "'+e+'". Use emitter.setMaxListeners() to increase limit. ('+n._eventEmitter.maxListeners+")":void 0};n.prototype.setMaxListeners=function(e){this._eventEmitter.maxListeners=e};var i=function(e,t,n){var i=this;return"undefined"==typeof e[t]&&(e[t]=[]),r.apply(this,[t,e[t].push(n)])};n.prototype.on=function(e,t){var n=i.apply(this,[this._eventEmitter.onListeners,e,t]);return n&&console.warn(new Error(n).stack),self},n.prototype.once=function(e,t){var n=i.apply(this,[this._eventEmitter.onceListeners,e,t]);return n&&console.warn(new Error(n).stack),self};var o=function(n,r){var i=0;return"undefined"!=typeof n&&t.each(n,function(t){i++,e.setTimeout(function n(){t.apply(window,r)},0)}),i};n.prototype.emit=function(e){var n=this,r=t.rest(arguments),i=0,s=n._eventEmitter.onceListeners[e];return n._eventEmitter.onceListeners[e]=[],i+=o(n._eventEmitter.onListeners[e],r),i+=o(s,r),i>0};var s=function(e,t){for(var n=!1,r=[],i=0;i<e.length;i++)n||e[i]!==t?r.push(e[i]):n=!0;return r};n.prototype.off=function(e,t){var n=this;e?"function"==typeof t?("undefined"!=typeof n._eventEmitter.onListeners[e]&&(n._eventEmitter.onListeners[e]=s(n._eventEmitter.onListeners[e],t)),"undefined"!=typeof n._eventEmitter.onceListeners[e]&&(n._eventEmitter.onceListeners[e]=s(n._eventEmitter.onceListeners[e],t))):(n._eventEmitter.onListeners[e]=[],n._eventEmitter.onceListeners[e]=[]):(n._eventEmitter.onListeners={},n._eventEmitter.onceListeners={})},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=n.prototype.off,n.prototype.one=n.prototype.once,n.prototype.trigger=n.prototype.emit}).call(this),"undefined"==typeof Package&&(Package={}),Package["raix:eventemitter"]={EventEmitter:n}}();

!function(){var e=Package.meteor.Meteor,a=Package["cfs:base-package"].FS,t=Package.tracker.Tracker,r=Package.tracker.Deps,c=Package.check.check,n=Package.check.Match,o=Package.ddp.DDP,g=Package.ejson.EJSON,k=Package["raix:eventemitter"].EventEmitter,i=Package.mongo.Mongo,d;(function(){d={},a.StorageAdapter=function(e,t,r){var c=this;if("undefined"==typeof r)throw new Error("FS.StorageAdapter please define an api");if("undefined"!=typeof d[e])throw new Error('Storage name already exists: "'+e+'"');d[e]=c,a.Utility.extend(this,t||{},{name:e})},a.StorageAdapter.prototype=new k}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:storage-adapter"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.ejson.EJSON,n;(function(){if("function"!=typeof e&&"object"!=typeof e||"undefined"==typeof URL)if("function"!=typeof e&&"object"!=typeof e||"undefined"==typeof webkitURL)var e=function(e){"use strict";var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function g(){this.data=[]},r=function R(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},o=n.prototype,i=r.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},f="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=f.length,l=e.URL||e.webkitURL||e,c=l.createObjectURL,d=l.revokeObjectURL,p=l,b=e.btoa,y=e.atob,w=e.ArrayBuffer,h=e.Uint8Array;for(r.fake=i.fake=!0;u--;)s.prototype[f[u]]=u+1;return l.createObjectURL||(p=e.URL={}),p.createObjectURL=function(e){var t=e.type,n;return null===t&&(t="application/octet-stream"),e instanceof r?(n="data:"+t,"base64"===e.encoding?n+";base64,"+e.data:"URI"===e.encoding?n+","+decodeURIComponent(e.data):b?n+";base64,"+b(e.data):n+","+encodeURIComponent(e.data)):c?c.call(l,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&d&&d.call(l,e)},o.append=function(e){var n=this.data;if(h&&(e instanceof w||e instanceof h)){for(var o="",i=new h(e),f=0,u=i.length;u>f;f++)o+=String.fromCharCode(i[f]);n.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var l=new a;n.push(l.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&y?n.push(y(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,n){var o=arguments.length;return 3>o&&(n=null),new r(this.data.slice(e,o>1?t:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},n}(e);return function n(e,r){var o=r?r.type||"":"",i=new t;if(e)for(var a=0,s=e.length;s>a;a++)i.append(e[a]);return i.getBlob(o)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);else self.URL=webkitURL}).call(this),function(){function r(e,t){for(var n=atob(e.split(",")[1]),r=[],o=0;o<n.length;o++)r.push(n.charCodeAt(o));return new Blob([new Uint8Array(r)],{type:t})}function o(t){if(t){if(!(t instanceof e.Error))throw t;console.error(t.message)}}n=function i(e,n){var o=this;if(!e)throw new Error("DataMan constructor requires a data argument");if("undefined"!=typeof File&&e instanceof File)o.blob=e,o._type=e.type;else if("undefined"!=typeof Blob&&e instanceof Blob)o.blob=e,o._type=e.type;else if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||t.isBinary(e)){if("undefined"==typeof Blob)throw new Error("Browser must support Blobs to handle an ArrayBuffer or Uint8Array");if(!n)throw new Error("DataMan constructor requires a type argument when passed an ArrayBuffer or Uint8Array");o.blob=new Blob([e],{type:n}),o._type=n}else{if("string"!=typeof e)throw new Error("DataMan constructor received data that it doesn't support");if("data:"===e.slice(0,5))o._type=e.slice(5,e.indexOf(";")),o.blob=r(e,o._type);else{if("http:"!==e.slice(0,5)&&"https:"!==e.slice(0,6))throw new Error("DataMan constructor received unrecognized data string");if(!n)throw new Error("DataMan constructor requires a type argument when passed a URL");o.url=e,o._type=n}}},n.prototype.getBlob=function a(e){var t=this;if(!e){if(t.url)throw new Error("DataMan.getBlob requires a callback when managing a URL");return t.blob}if(t.blob)e(null,t.blob);else if(t.url){var n=new XMLHttpRequest;n.open("GET",t.url,!0),n.responseType="blob",n.onload=function(r){t.blob=n.response,e(null,t.blob)},n.onerror=function(t){e(t)},n.send()}},n.prototype.getBinary=function s(e,t,n){function r(e){if("undefined"==typeof FileReader)return void n(new Error("Browser does not support FileReader"));var t=new FileReader;t.onload=function(e){n(null,new Uint8Array(e.target.result))},t.onerror=function(e){n(e)},t.readAsArrayBuffer(e)}var i=this;"function"==typeof e&&(n=e),n=n||o,i.getBlob(function(o,a){if(o)n(o);else if("number"==typeof e&&"number"==typeof t){var s=a.size;if(e>=s)return void n(new Error("DataMan.getBinary: start position beyond end of data ("+s+")"));t=Math.min(s,t);var f=a.slice||a.webkitSlice||a.mozSlice;if("undefined"==typeof f)return void n(new Error("Browser does not support File.slice"));r(f.call(a,e,t,i._type))}else r(a)})},n.prototype.saveAs=function f(e){var t=this;if("undefined"==typeof window)throw new Error("window must be defined to use saveLocal");return window.saveAs?void t.getBlob(function(t,n){if(t)throw t;window.saveAs(n,e)}):void console.warn("DataMan.saveAs: window.saveAs not supported by this browser - add cfs-filesaver package")},n.prototype.getDataUri=function u(e){var t=this;if("function"!=typeof e)throw new Error("getDataUri requires callback function");if("undefined"==typeof FileReader)return void e(new Error("Browser does not support FileReader"));var n=new FileReader;n.onload=function(t){var n=t.target.result;e(null,n)},n.onerror=function(t){e(t)},t.getBlob(function(t,r){t?e(t):n.readAsDataURL(r)})},n.prototype.size=function l(e){var t=this;if(!e){if(t.url)throw new Error("On the client, DataMan.size requires a callback when getting size for a URL on the client");if("number"==typeof t._size)return t._size;var n=t.getBlob();return t._size=n.size,t._size}"number"==typeof t._size?e(null,t._size):t.getBlob(function(n,r){n?e(n):(t._size=r.size,e(null,t._size))})},n.prototype.type=function c(){return this._type}}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:data-man"]={DataMan:n}}();

!function(){var e=Package.meteor.Meteor,t=Package["cfs:base-package"].FS,o=Package.tracker.Tracker,i=Package.tracker.Deps,n=Package.check.check,a=Package.check.Match,r=Package.ddp.DDP,l=Package.http.HTTP,s=Package["cfs:data-man"].DataMan,c=Package["raix:eventemitter"].EventEmitter,p=Package.mongo.Mongo;(function(){function o(e,t,o){var i;return i=t&&e.hasStored(t)?e.type({store:t}):e.type(),"string"==typeof i?0===i.indexOf(o):!1}function n(e){return e===Object(e)&&Object.getPrototypeOf(e)===Object.prototype}t.File=function(e,o){var i=this;i.createdByTransform=!!o,e instanceof t.File||n(e)?t.Utility.extend(i,t.Utility.cloneFileRecord(e,{full:!0})):e&&i.attachData(e)},t.File.prototype=new c,t.File.prototype.attachData=function a(o,i,n){function a(e){l.data=new s(o,e,c),l.type(l.data.type()),l.size()?r():n?l.data.size(function(e,t){e?n&&n(e):(l.size(t),r())}):(l.size(l.data.size()),r())}function r(){l.name()||"string"!=typeof o||("http:"===o.slice(0,5)||"https:"===o.slice(0,6)?t.Utility.getFileExtension(o).length&&l.name(t.Utility.getFileName(o)):"data:"!==o.slice(0,5)&&l.name(t.Utility.getFileName(o))),n&&n()}var l=this;if(n||"function"!=typeof i||(n=i,i={}),i=i||{},!o)throw new Error("FS.File.attachData requires a data argument with some data");var c;if("undefined"!=typeof File&&o instanceof File)l.name(o.name),l.updatedAt(o.lastModifiedDate),l.size(o.size),a(o.type);else if("undefined"!=typeof Blob&&o instanceof Blob)l.updatedAt(new Date),l.size(o.size),a(o.type);else if("string"!=typeof o||"http:"!==o.slice(0,5)&&"https:"!==o.slice(0,6))a(i.type);else if(c=t.Utility.extend({},i),c.type&&delete c.type,n)e.call("_cfs_getUrlInfo",o,c,function(e,o){t.debug&&console.log("URL HEAD RESULT:",o),e?n(e):(t.Utility.extend(l,{original:o}),a(o.type))});else{if(e.isClient)throw new Error("FS.File.attachData requires a callback when attaching a URL on the client");var p=e.call("_cfs_getUrlInfo",o,c);t.Utility.extend(l,{original:p}),a(p.type)}return l},t.File.prototype.uploadProgress=function(){var e=this;return e.getFileRecord(),e.uploadedAt?100:Math.round((e.chunkCount||0)/(e.chunkSum||1)*100)},t.File.prototype.controlledByDeps=function(){var e=this;return e.createdByTransform&&i.active},t.File.prototype.getCollection=function(){var e=this;if(e.collection)return e.collection;if(e.collectionName)return e.collection=t._collections[e.collectionName],e.collection},t.File.prototype.isMounted=t.File.prototype.getCollection,t.File.prototype.getFileRecord=function(){var e=this;if(e.controlledByDeps())return e;if(e.isMounted()){t.debug&&console.log("GET FILERECORD: "+e._id);var o=e.collection.files.findOne({_id:e._id})||{};return t.Utility.extend(e,o),o}return{}},t.File.prototype.update=function(o,i,n){var a=this;return t.debug&&console.log("UPDATE: "+JSON.stringify(o)),n||"function"!=typeof i||(n=i,i={}),n=n||t.Utility.defaultCallback,a.isMounted()?a.collection.files.update({_id:a._id},o,i,function(t,o){o>0&&e.isClient&&a.getFileRecord(),n(t,o)}):void n(new Error("Cannot update a file that is not associated with a collection"))},t.File.prototype._saveChanges=function(e){var o=this;if(o.isMounted()){t.debug&&console.log("FS.File._saveChanges:",e||"all");var i={$set:{}};if("_original"===e)i.$set.original=o.original;else if("string"==typeof e){var n=o.copies[e];n&&(i.$set["copies."+e]=n)}else i.$set.original=o.original,i.$set.copies=o.copies;o.update(i)}},t.File.prototype.remove=function(e){var o=this;return t.debug&&console.log("REMOVE: "+o._id),e=e||t.Utility.defaultCallback,o.isMounted()?o.collection.files.remove({_id:o._id},function(t,i){t||(delete o._id,delete o.collection,delete o.collectionName),e(t,i)}):void e(new Error("Cannot remove a file that is not associated with a collection"))},t.File.prototype.getExtension=function(e){var t=this;return t.extension(e)},t.File.prototype.isImage=function(e){return o(this,(e||{}).store,"image/")},t.File.prototype.isVideo=function(e){return o(this,(e||{}).store,"video/")},t.File.prototype.isAudio=function(e){return o(this,(e||{}).store,"audio/")},t.File.prototype.formattedSize=function r(e){var t=this;if("function"!=typeof numeral)throw new Error("You must add the numeral package if you call FS.File.formattedSize");e=e||{},e=e.hash||e;var o=t.size(e)||0;return numeral(o).format(e.formatString||"0.00 b")},t.File.prototype.isUploaded=function(){var e=this;return e.getFileRecord(),!!e.uploadedAt},t.File.prototype.hasStored=function(e,o){var i=this;return i.getFileRecord(),t.Utility.isEmpty(i.copies)?!!o:"string"==typeof e?!!(i.copies&&i.copies[e]&&i.copies[e].key):!1},t.File.prototype.hasCopy=t.File.prototype.hasStored,t.File.prototype.getCopyInfo=function(e){var t=this;return t.getFileRecord(),t.copies&&t.copies[e]||null},t.File.prototype._getInfo=function(e,t){var o=this;return t=t||{},t.updateFileRecordFirst&&o.getFileRecord(),e?o.copies&&o.copies[e]||{}:o.original||{}},t.File.prototype._setInfo=function(e,t,o,i){var n=this;"string"==typeof e?(n.copies=n.copies||{},n.copies[e]=n.copies[e]||{},n.copies[e][t]=o,i&&n._saveChanges(e)):(n.original=n.original||{},n.original[t]=o,i&&n._saveChanges("_original"))},t.File.prototype.name=function(e,t){var o=this;return t||("object"!=typeof e||null===e)&&"undefined"!=typeof e?(t=t||{},o._setInfo(t.store,"name",e,"boolean"==typeof t.save?t.save:!0)):(t=e||{},t=t.hash||t,o._getInfo(t.store,t).name)},t.File.prototype.extension=function(e,o){var i=this;if(o||("object"!=typeof e||null===e)&&"undefined"!=typeof e){o=o||{};var n=t.Utility.setFileExtension(i.name(o)||"",e);return i._setInfo(o.store,"name",n,"boolean"==typeof o.save?o.save:!0)}return o=e||{},t.Utility.getFileExtension(i.name(o)||"")},t.File.prototype.size=function(e,t){var o=this;return t||("object"!=typeof e||null===e)&&"undefined"!=typeof e?(t=t||{},o._setInfo(t.store,"size",e,"boolean"==typeof t.save?t.save:!0)):(t=e||{},t=t.hash||t,o._getInfo(t.store,t).size)},t.File.prototype.type=function(e,t){var o=this;return t||("object"!=typeof e||null===e)&&"undefined"!=typeof e?(t=t||{},o._setInfo(t.store,"type",e,"boolean"==typeof t.save?t.save:!0)):(t=e||{},t=t.hash||t,o._getInfo(t.store,t).type)},t.File.prototype.updatedAt=function(e,t){var o=this;return t||("object"!=typeof e||null===e||e instanceof Date)&&"undefined"!=typeof e?(t=t||{},o._setInfo(t.store,"updatedAt",e,"boolean"==typeof t.save?t.save:!0)):(t=e||{},t=t.hash||t,o._getInfo(t.store,t).updatedAt)},"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype})}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:file"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["cfs:base-package"].FS;(function(){t.Store.FileSystem=function(e,a){var r=this;if(!(r instanceof t.Store.FileSystem))throw new Error('FS.Store.FileSystem missing keyword "new"');return new t.StorageAdapter(e,a,{typeName:"storage.filesystem"})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:filesystem"]={}}();

!function(){var e=Package.meteor.Meteor,r=Package["cfs:base-package"].FS;(function(){r.Store.GridFS=function(e,a){var t=this;if(!(t instanceof r.Store.GridFS))throw new Error('FS.Store.GridFS missing keyword "new"');return new r.StorageAdapter(e,a,{typeName:"storage.gridfs"})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:gridfs"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package["cfs:base-package"].FS;"undefined"==typeof Package&&(Package={}),Package["cfs:tempstore"]={}}();

!function(){var e=Package.meteor.Meteor,t,a;(function(){t=Package.http&&Package.http.HTTP||{},t.methods=function(e){throw new Error("HTTP.methods not implemented on client-side")}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:http-methods"]={HTTP:t,_methodHTTP:a}}();

!function(){var e=Package.meteor.Meteor,n=Package["cfs:http-methods"].HTTP,t;(function(){n.publish=function(){throw new Error("HTTP.publish not implemented on client-side")},n.publishFormats=function(){throw new Error("HTTP.publishFormats not implemented on client-side")},n.unpublish=function(){throw new Error("HTTP.unpublish not implemented on client-side")}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:http-publish"]={_publishHTTP:t}}();

!function(){var e=Package.meteor.Meteor,t=Package["cfs:base-package"].FS,o=Package.check.check,n=Package.check.Match,i=Package.ejson.EJSON,r=Package["cfs:http-methods"].HTTP,a;(function(){a="/cfs",t.HTTP=t.HTTP||{},t.HTTP.uploadUrl=a+"/files",t.HTTP.setBaseUrl=function o(n){"/"!==n.slice(0,1)&&(n="/"+n),"/"===n.slice(-1)&&(n=n.slice(0,-1)),a=n,t.HTTP.uploadUrl=a+"/files",e.isServer&&!t.Utility.isEmpty(_existingMountPoints)&&mountUrls()},t.File.prototype.url=function(o){var n=this;if(o=o||{},o=t.Utility.extend({store:null,auth:null,download:!1,metadata:!1,brokenIsFine:!1,uploading:null,storing:null,filename:null},o.hash||o),o.uploading&&!n.isUploaded())return o.uploading;if(n.isMounted()){var i=o.store||n.collection.primaryStore.name;if(!n.hasStored(i)){if(o.storing)return o.storing;if(!o.brokenIsFine)return null}var r=o.filename||n.name({store:i});r="string"==typeof r&&r.length?"/"+r:"";var s="";if(e.isClient&&"undefined"!=typeof Accounts&&"function"==typeof Accounts._storedLoginToken){if(o.auth!==!1){e.userId();var l={authToken:Accounts._storedLoginToken()||""};o.auth===+o.auth&&(l.expiration=t.HTTP.now()+1e3*o.auth);var c=JSON.stringify(l);s=t.Utility.btoa(c)}}else"string"==typeof o.auth&&(s=o.auth);var T={};""!==s&&(T.token=s),o.download&&(T.download=!0),o.store&&(T.store=o.store);var f=t.Utility.encodeParams(T);f.length&&(f="?"+f);var u;return u=o.metadata?"/record":"/files",a+u+"/"+n.collection.name+"/"+n._id+r+f}}}).call(this),function(){t.HTTP.setHeadersForGet=function o(){},t.HTTP.now=function(){return Date.now()+t.HTTP._serverTimeDiff},t.HTTP._storage=function(){var e,t,o;try{o="test",(e=window.localStorage).setItem(o,o),t=e.getItem(o)!==o,e.removeItem(o),t&&(e=!1)}catch(n){console.log("Error initializing storage for FS.HTTP"),console.log(n)}return e},t.HTTP.storage=t.HTTP._storage(),t.HTTP._prefix="fsHTTP.",t.HTTP._serverTimeDiff=0,t.HTTP.storage&&(t.HTTP._serverTimeDiff=1*t.HTTP.storage.getItem(t.HTTP._prefix+"timeDiff")||0,e.startup(function(){r.get("/cfs/servertime",function(e,o){if(e)console.log(e.message);else{var n=new Date(+o.content);t.HTTP._serverTimeDiff=n-Date.now(),t.HTTP.storage.setItem(t.HTTP._prefix+"timeDiff",t.HTTP._serverTimeDiff)}})}))}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:access-point"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.tracker.Tracker,t=Package.tracker.Deps,a,c,o;(function(){c=function(){},o={changed:c,depend:c},a=function(e,n){var a=this,c=n===!1?o:new t.Dependency;a.value=e,a.onChange=function(){},a.changed=function(){c.changed(),a.onChange(a.value)},a.get=function(){return c.depend(),a.value},a.set=function(e){a.value!==e&&(a.value=e,a.changed())},a.dec=function(e){a.value-=e||1,a.changed()},a.inc=function(e){a.value+=e||1,a.changed()},a.getset=function(e){return"undefined"==typeof e?a.get():void a.set(e)},a.toString=function(){var e=a.get();return e?e.toString():""},a.toText=a.toString}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:reactive-property"]={ReactiveProperty:a}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,o;(function(){var e=function(){},t={changed:e,depend:e};o=function(e){var o=this;o.lookup={},o._length=0,o.first,o.last,o.sort=e&&e.sort||function(e,t){return e.key<t.key},o.isReactive=e?e.reactive!==!1:!0,(e===!0||e&&e.sort===!0)&&(o.sort=function(e,t){return e.key>t.key}),o._listDeps=o.isReactive?new n.Dependency:t,o._lengthDeps=o.isReactive?new n.Dependency:t},o.prototype.length=function(){var e=this;return e._lengthDeps.depend(),e._length},o.prototype.reset=function(){var e=this;e.first=void 0,e.last=void 0,e.lookup={},e._length=0,e._lengthDeps.changed(),e._listDeps.changed()},o.prototype.update=function(e,t){var n=this;if("undefined"==typeof n.lookup[e])throw new Error('Reactive list cannot update, key "'+e+'" not found');n.lookup[e].value=t,n._listDeps.changed()},o.prototype.insert=function(e,t){var n=this;if("undefined"!=typeof n.lookup[e])throw new Error('Reactive list could not insert: key "'+e+'" allready found');for(var o={key:e,value:t},r=n.first,i=!1;"undefined"!=typeof r&&!i;)n.sort(o,r)&&("undefined"==typeof r.prev&&(n.first=o),o.prev=r.prev,o.next=r,r.prev&&(r.prev.next=o),r.prev=o,i=!0),r=r.next;i||(o.prev=n.last,n.last&&(n.last.next=o),n.last=o,0===n._length&&(n.first=o)),n.lookup[e]=o,n._length++,n._lengthDeps.changed(),n._listDeps.changed()},o.prototype.remove=function(e){var t=this,n=t.lookup[e];if("undefined"!=typeof n){var o=n.prev,r=n.next;"undefined"!=typeof o?o.next=r:t.first=r,"undefined"!=typeof r?r.prev=o:t.last=o,t.lookup[e].last=null,t.lookup[e].prev=null,t.lookup[e]=null,o=null,delete t.lookup[e],t._length--,t._lengthDeps.changed(),t._listDeps.changed()}},o.prototype.getLastItem=function(e){var t=this,n=e?t.first:t.last;return"undefined"!=typeof n?(t.remove(n.key),n.value):void 0},o.prototype.getFirstItem=function(){return this.getLastItem(!0)},o.prototype.forEach=function(e,t,n){var o=this;if("function"!=typeof e)throw new Error("ReactiveList forEach requires a function");t||o._listDeps.depend();for(var r=n?o.last:o.first;r;)e(r.value,r.key),r=n?r.prev:r.next},o.prototype.forEachReverse=function(e,t){this.forEach(e,t,!0)},o.prototype.fetch=function(e){var t=this,n=[];return t.forEach(function o(e){n.push(e)},e),n}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:reactive-list"]={ReactiveList:o}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,a=Package["cfs:reactive-property"].ReactiveProperty,r,o,i;(function(){"undefined"==typeof o&&Package["micro-queue"]&&(o=Package["micro-queue"].MicroQueue),"undefined"==typeof i&&Package["reactive-list"]&&(i=Package["reactive-list"].ReactiveList),"undefined"==typeof o&&Package["cfs:micro-queue"]&&(o=Package["cfs:micro-queue"].MicroQueue),"undefined"==typeof i&&Package["cfs:reactive-list"]&&(i=Package["cfs:reactive-list"].ReactiveList),r=function(e){var t=this,n=5;t.reactive=e&&e.reactive===!1?!1:!0;var r="undefined"!=typeof o&&o||void 0;if(r="undefined"!=typeof i&&i||r,e&&"undefined"!=typeof e.spinalQueue&&(r=e.spinalQueue),"undefined"==typeof r)throw console.log("Error: You need to add a spinal queue to the project"),console.log('Please add "micro-queue", "reactive-list" to the project'),new Error('Please add "micro-queue", "reactive-list" or other spinalQueue compatible packages');t.invocations=new r({sort:e&&(e.filo||e.lifo),reactive:t.reactive}),t._processList=new r({reactive:t.reactive}),t._maxProcessing=new a(e&&e.maxProcessing||1,t.reactive),t._isProcessing=new a(0,t.reactive),t._paused=new a(e&&e.isPaused||!1,t.reactive),t._running=new a(!1,t.reactive),t._errors=new a(0,t.reactive),t._failures=new a(0,t.reactive),t._jumpOnFailure=e&&e.jumpOnFailure===!1?!1:!0,t._maxLength=new a(0,t.reactive),t._autostart=new a(e&&e.autostart===!1?!1:!0,t.reactive),t._maxFailures=new a(e&&e.maxFailures||5,t.reactive),t.title=e&&e.name||"Queue",t.debug=!(!e||!e.debug),t.total=t._maxLength.get,t.isPaused=t._paused.get,t.processing=t._isProcessing.get,t.errors=t._errors.get,t.failures=t._failures.get,t.isRunning=t._running.get,t.maxProcessing=t._maxProcessing.getset,t._maxProcessing.onChange=function(){t.updateThrottleUp(),t.updateThrottleDown()},t.autostart=t._autostart.getset,t.maxFailures=t._maxFailures.getset,t.onPaused=e&&e.onPaused||function(){t.debug&&console.log(t.title+" ENDED")},t.onEnded=e&&e.onEnded||function(){t.debug&&console.log(t.title+" ENDED")},t.onRelease=e&&e.onRelease||function(){t.debug&&console.log(t.title+" RELEASED")},t.onAutostart=e&&e.onAutostart||function(){t.debug&&console.log(t.title+" Autostart")}},r.prototype.processingList=function(){var e=this;return e._processList.fetch()},r.prototype.isHalted=function(){var e=this;return!e._running.get()||e._paused.get()},r.prototype.length=function(){var e=this;return e.invocations.length()},r.prototype.progress=function(){var e=this,t=e._maxLength.get()-e.invocations.length()-e._isProcessing.get();return e._maxLength.value>0?Math.round(t/e._maxLength.value*100):0},r.prototype.usage=function(){var e=this;return Math.round(e._isProcessing.get()/e._maxProcessing.get()*100)},r.prototype.reset=function(){var e=this;e.debug&&console.log(e.title+" RESET"),e._running.set(!1),e._paused.set(!1),e.invocations.reset(),e._processList.reset(),e._maxLength.set(0),e._failures.set(0),e._errors.set(0)},r.prototype._autoStartTasks=function(){var e=this;e._paused.value||(!e._running.value&&e._autostart.value&&(e.onAutostart(),e._running.set(!0)),e._running.value&&e.next(null))},r.prototype.add=function(e,t,n){var a=this,r=a._jumpOnFailure||"undefined"==typeof n,o=r?a._maxLength.value+1:n;a.invocations.insert(o,{_id:o,data:e,failures:t||0}),r&&a._maxLength.inc(),a._autoStartTasks()},r.prototype.updateThrottleUp=function(){var e=this,t=e._maxProcessing.value-e._isProcessing.value;!e._paused.value&&e._running.value&&t>0&&e.invocations._length>0&&(e._isProcessing.inc(),e.runTask(e.invocations.getFirstItem()),e.updateThrottleUp())},r.prototype.updateThrottleDown=function(){var e=this,t=e._isProcessing.value-e._maxProcessing.value;t>0&&e._processList.forEachReverse(function(e){t>0&&e.queue instanceof r&&(t--,e.queue.pause())},!0)},r.prototype.next=function(e){var t=this;t.updateThrottleUp(),t._running.value&&0===t._isProcessing.value&&null!==e&&(t.onRelease(t.invocations._length),t.invocations._length||(t._running.set(!1),t.onEnded()))},r.prototype.runTaskDone=function(t,n){var a=this;if(t instanceof e.Error)a._maxFailures.value>0&&n.failures++,a._failures.inc(),console.error('Error: "'+a.title+'" '+t.message+", "+t.stack),n.failures<a._maxFailures.value?a.add(n.data,n.failures,n._id):(a._errors.inc(),a.errorHandler(n.data,a.add,n.failures));else if(t instanceof Error)throw t;if(t&&null===t&&a.invocations.insert(n._id,{data:n.data,failures:n.failures,_id:n._id}),t===""+t){var r={pause:function(){a.pause()},stop:function(){a.stop()},reset:function(){a.reset()},cancel:function(){a.cancel()}};if("function"!=typeof r[t])throw new Error('Unknown queue command "'+t+'"');r[t]()}a._isProcessing.value>0&&a._isProcessing.dec(),a._processList.remove(n._id),n.data=null,n.failures=null,n._id=null,n=null,delete n,e.setTimeout(function(){a.next()},0)},r.prototype.runTask=function(e){var t=this;try{e.data instanceof r?(t._processList.insert(e._id,{id:e._id,queue:e.data}),t.queueTaskHandler(e.data,function a(n){t.runTaskDone(n,e)},e.failures)):(t._processList.insert(e._id,e.data),t.taskHandler(e.data,function o(n){t.runTaskDone(n,e)},e.failures))}catch(n){throw new Error("Error while running taskHandler for queue, Error: "+n.message)}},r.prototype.queueTaskHandler=function(e,t,n){var a=this;e.onRelease=function(e){e>0?t(null):t()},e.run()},r.prototype.taskHandler=function(e,t,n){var a=this;if("function"!=typeof e)throw new Error("Default task handler expects a function");try{e(t,n)}catch(r){t(r)}},r.prototype.errorHandler=function(e,t,n){var a=this;a.debug&&console.log("Terminate at "+n+" failures")},r.prototype.pause=function(){var e=this;e._paused.value||(e._paused.set(!0),e._processList.forEach(function(e){e.queue instanceof r&&e.queue.pause()},!0),e.onPaused())},r.prototype.resume=function(){var e=this;e.run()},r.prototype.run=function(){var e=this;!e._paused.value&&e._running.value||!e.invocations._length||(e._paused.set(!1),e._running.set(!0),e.next(null))},r.prototype.stop=function(){var e=this;e._running.set(!1)},r.prototype.cancel=function(){var e=this;e.reset()}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:power-queue"]={PowerQueue:r}}();

!function(){var e=Package.meteor.Meteor,n=Package["cfs:base-package"].FS,t=Package["cfs:power-queue"].PowerQueue,r=Package["cfs:reactive-list"].ReactiveList,a,o,i,u,s,l,c;(function(){a=function(t,r,a,u){if(u||"function"!=typeof a||(u=a,a=null),a=a||{},"function"!=typeof u)throw new Error("Can't make a blocking HTTP call from the client; callback required.");t=(t||"").toUpperCase();var c={},f=a.content;a.data&&(f=JSON.stringify(a.data),c["Content-Type"]="application/json");var p,d;f||"GET"===t||"HEAD"===t?p=a.params:d=a.params;var h=/^(.*?)(\?.*)?$/.exec(r);if(r=o(h[1],h[2],a.query,p),a.followRedirects===!1)throw new Error("Option followRedirects:false not supported on client.");var y,g;if(a.auth){var m=a.auth.indexOf(":");if(0>m)throw new Error('auth option should be of the form "username:password"');y=a.auth.substring(0,m),g=a.auth.substring(m+1)}d&&(f=i(d)),n.Utility.extend(c,a.headers||{}),u=function(e){return function(n,t){n&&t&&(n.response=t),e(n,t)}}(u),u=n.Utility.once(u);try{var v;if("undefined"!=typeof XMLHttpRequest)v=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw new Error("Can't create XMLHttpRequest");v=new ActiveXObject("Microsoft.XMLHttp")}v.open(t,r,!0,y,g);var k;"ejson-binary"===a.responseType?(v.responseType="arraybuffer",k=!0):v.responseType=a.responseType;for(var w in c)v.setRequestHeader(w,c[w]);var T=!1,b;a.timeout&&(b=e.setTimeout(function(){T=!0,v.abort()},a.timeout)),v.onreadystatechange=function(t){if(4===v.readyState)if(b&&e.clearTimeout(b),T)u(new Error("timeout"));else if(v.status){var r={};r.statusCode=v.status;var o=v.response||v.responseText;if("json"===a.responseType&&"string"==typeof o)try{o=JSON.parse(o)}catch(i){o=null}if(k&&"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&o instanceof ArrayBuffer){for(var c=new Uint8Array(o),f=o.byteLength,p=EJSON.newBinary(f),d=0;f>d;d++)p[d]=c[d];o=p}r.content=o,r.headers={};var h=v.getAllResponseHeaders();""===h&&v.getResponseHeader("content-type")&&(h="content-type: "+v.getResponseHeader("content-type"));var y=h.split(/\r?\n/);n.Utility.each(y,function(e){var n=/^(.*?):(?:\s+)(.*)$/.exec(e);n&&3===n.length&&(r.headers[n[1].toLowerCase()]=n[2])}),l(r);var g=null;r.statusCode>=400&&(g=s(r.statusCode,r.content)),u(g,r)}else u(new Error("network"))},v.send(f)}catch(P){u(P)}},o=function(e,n,t,r){var a=e,o=n?n.slice(1):null;if("string"==typeof t&&(o=String(t)),r){o=o||"";var u=i(r);o&&u&&(o+="&"),o+=u}var s=a;return null!==o&&(s+="?"+o),s},i=function(e){var t=[];return n.Utility.each(e,function(e,n){t.length&&t.push("&"),t.push(u(n),"=",u(e))}),t.join("").replace(/%20/g,"+")},u=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},s=function(e,n){var t=160,r=function(e,n){return e.length>n?e.slice(0,n)+"...":e},a="failed ["+e+"]";return n&&(a+=" "+r(n.replace(/\n/g," "),t)),new Error(a)},l=function(e){var t=(e.headers["content-type"]||";").split(";")[0];if(n.Utility.include(["application/json","text/javascript"],t))try{e.data=JSON.parse(e.content)}catch(r){e.data=null}else e.data=null}}).call(this),function(){n.HTTP=n.HTTP||{}}.call(this),function(){var o=2097152,i=function(t,r){n.debug&&console.log("uploading chunk "+t.chunk+", bytes "+t.start+" to "+Math.min(t.end,t.fileObj.size())+" of "+t.fileObj.size()),t.fileObj.data.getBinary(t.start,t.end,function o(i,u){i?r(new e.Error(i.error,i.message)):(n.debug&&console.log("PUT to URL",t.url,t.urlParams),a("PUT",t.url,{params:n.Utility.extend({chunk:t.chunk},t.urlParams),content:u,headers:{"Content-Type":t.fileObj.type()}},function(n,a){t=null,n?r(new e.Error(n.error,n.message)):r()}))})},u=function(e,n,t){};c=function(e){e=e||{};var a=new t({name:"HTTPUploadTransferQueue",maxProcessing:1,maxFailures:5,jumpOnFailure:!0,autostart:!0,isPaused:!1,filo:!1,debug:n.debug});return a.files={},a.cancel=a.reset,a.isUploadingFile=function(e){return!!(e&&e._id&&e.collectionName&&(a.files[e.collectionName]||{})[e._id])},a.resumeUploadingFile=function(e){if(!(e instanceof n.File))throw new Error("Transfer queue expects a FS.File");e.isMounted()&&(a.files[e.collectionName]=a.files[e.collectionName]||{},a.files[e.collectionName][e._id]=!1,a.uploadFile(e))},a.uploadFile=function(e){if(n.debug&&console.log("HTTP uploadFile"),!(e instanceof n.File))throw new Error("Transfer queue expects a FS.File");if("number"!=typeof e.size())throw new Error("TransferQueue upload failed: fileObj size not set");if(!a.isUploadingFile(e)&&!e.isUploaded()&&e.isMounted()){var s=e.collectionName,l=e._id;if(e.chunkSize=e.collection.options.chunkSize||n.config.uploadChunkSize||o,e.chunkCount=0,e.chunkSum=Math.ceil(e.size()/e.chunkSize),0===e.chunkSum)return;e.update({$set:{chunkSize:e.chunkSize,chunkCount:e.chunkCount,chunkSum:e.chunkSum}});var c=new t({onEnded:function v(){a.files[s][l]=!1,e.emit("uploaded")},spinalQueue:r,maxProcessing:1,maxFailures:5,jumpOnFailure:!0,autostart:!1,isPaused:!1,filo:!1});c.taskHandler=i,c.errorHandler=u,a.files[s]=a.files[s]||{},a.files[s][l]=!0;var f=n.HTTP.uploadUrl+"/"+s;l&&(f+="/"+l);var p="";if("undefined"!=typeof Accounts){var d={authToken:Accounts._storedLoginToken()||""},h=JSON.stringify(d);p=n.Utility.btoa(h)}var y={filename:e.name()};""!==p&&(y.token=p);for(var g=0,m;g<e.chunkSum;g++)m=g*e.chunkSize,c.add({chunk:g,name:e.name(),url:f,urlParams:y,fileObj:e,start:m,end:(g+1)*e.chunkSize});a.add(c)}},a},n.HTTP.uploadQueue=new c,n.File.prototype.resume=function(e){var t=this;n.uploadQueue.resumeUploadingFile(t)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:upload-http"]={}}();

!function(){var e=Package.meteor.Meteor,o=Package["cfs:base-package"].FS,t=Package.tracker.Tracker,n=Package.tracker.Deps,i=Package.check.check,l=Package.check.Match,r=Package.ddp.DDP,a=Package["raix:eventemitter"].EventEmitter,s=Package.mongo.Mongo;(function(){o.Collection=function(t,n){var i=this;if(i.storesLookup={},i.primaryStore={},i.options={filter:null,stores:[],chunkSize:null},o.HTTP&&o.HTTP.uploadQueue?i.options.uploader=o.HTTP.uploadQueue.uploadFile:o.DDP&&o.DDP.uploadQueue&&(i.options.uploader=o.DDP.uploadQueue.uploadFile),o.Utility.extend(i.options,n||{}),i.name=t,o.Utility.isEmpty(i.options.stores))throw new Error("You must specify at least one store. Please consult the documentation.");o.Utility.each(i.options.stores,function(n,l){if(0===l&&(i.primaryStore=n),"undefined"!=typeof i.storesLookup[n.name])throw new Error("FS.Collection store names must be uniq, duplicate found: "+n.name);i.storesLookup[n.name]=n,e.isServer&&(n.on("stored",function(e,l){if(e===n.name){if(l.collectionName===t){var r=i.emit("stored",l,n.name);o.debug&&!r&&console.log(l.name({store:n.name})+" was successfully saved to the "+n.name+' store. You are seeing this informational message because you enabled debugging and you have not defined any listeners for the "stored" event on the '+t+" collection.")}l.emit("stored",n.name)}}),n.on("error",function(e,l,r){if(e===n.name){if(r.collectionName===t){l=new Error("Error storing file to the "+n.name+" store: "+l.message);var a=i.emit("error",l,r,n.name);o.debug&&!a&&console.log(l.message)}r.emit("error",n.name)}}))});var l={transform:function(e){var n=new o.File(e,!0);return n.collectionName=t,n}},r="cfs."+t+".filerecord";if(i.files=new e.Collection(r,l),i._validators={download:{allow:[],deny:[]}},i.filters&&i.filters(i.options.filter),o._collections[t]=this,e.isServer&&o.FileWorker&&o.FileWorker.observe(this),o.TempStore)o.TempStore.on("stored",function(e,n){if(e.collectionName===t){var l=i.emit("uploaded",e);o.debug&&!l&&console.log(e.name()+' was successfully uploaded. You are seeing this informational message because you enabled debugging and you have not defined any listeners for the "uploaded" event on the '+t+" collection.")}}),o.TempStore.on("error",function(e,o){o.collectionName===t&&i.emit("error",new Error("Error storing uploaded file to TempStore: "+e.message),o)});else if(e.isServer)throw new Error("FS.Collection constructor: FS.TempStore must be defined before constructing any FS.Collections.")},o.Collection.prototype=new a}).call(this),function(){o.Collection.prototype.insert=function(t,n){function i(t){e.isClient?r.options.uploader&&r.options.uploader(t):e.isServer&&t.createReadStream().pipe(o.TempStore.createWriteStream(t))}function l(e){return r.allowsFile(e)?(e.collectionName=r.name,n?e._id=r.files.insert(o.Utility.cloneFileRecord(e),function(o,t){o?e._id&&delete e._id:(e._id=t,i(e)),n(o,o?void 0:e)}):(e._id=r.files.insert(o.Utility.cloneFileRecord(e)),i(e)),e):o.Utility.handleError(n,"FS.Collection insert: file does not pass collection filters")}var r=this;if(e.isClient&&!n&&(n=o.Utility.defaultCallback),t instanceof o.File)return l(t);var a=new o.File(t);return n?a.attachData(t,function s(e){e?n(e):l(a)}):(a.attachData(t),l(a)),a},o.Collection.prototype.update=function(e,t,n,i){var l=this;if(e instanceof o.File){if(e.collectionName===l.files._name)return e.update(t,n,i);throw new Error('FS.Collection cannot update file belongs to: "'+e.collectionName+'" not: "'+l.files._name+'"')}return l.files.update(e,t,n,i)},o.Collection.prototype.remove=function(e,t){var n=this;if(e instanceof o.File){if(e.collectionName===n.files._name)return e.remove(t);throw new Error('FS.Collection cannot remove file belongs to: "'+e.collectionName+'" not: "'+n.files._name+'"')}return t=t||o.Utility.defaultCallback,n.files.remove(e,t)},o.Collection.prototype.findOne=function(e){var o=this;return o.files.findOne.apply(o.files,arguments)},o.Collection.prototype.find=function(e){var o=this;return o.files.find.apply(o.files,arguments)},o.Collection.prototype.allow=function(e){var o=this;if(e.download){if(!(e.download instanceof Function))throw new Error("allow: Value for `download` must be a function");o._validators.download.allow.push(e.download),delete e.download}return o.files.allow.call(o.files,e)},o.Collection.prototype.deny=function(e){var o=this;if(e.download){if(!(e.download instanceof Function))throw new Error("deny: Value for `download` must be a function");o._validators.download.deny.push(e.download),delete e.download}return o.files.deny.call(o.files,e)},o.Collection.prototype.allowsFile=function t(e){return!0}}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:collection"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package["cfs:base-package"].FS;(function(){function e(e,n){for(var t,i=!1,o=0,a=e.length;a>o;o++){if(t=e[o],t===n){i=!0;break}if("image/*"===t&&0===n.indexOf("image/")){i=!0;break}if("audio/*"===t&&0===n.indexOf("audio/")){i=!0;break}if("video/*"===t&&0===n.indexOf("video/")){i=!0;break}}return i}n.Collection.prototype.filters=function t(e){var t=this;if(e){if(n.Utility.each(["allow","deny"],function(n){if(e[n]){if("object"!=typeof e[n])throw new Error(n+" filter must be an object")}else e[n]={}}),"undefined"==typeof e.maxSize)e.maxSize=null;else if(e.maxSize&&"number"!=typeof e.maxSize)throw new Error("maxSize filter must be an number");n.Utility.each(["allow","deny"],function(t){if(e[t].extensions){if(!n.Utility.isArray(e[t].extensions))throw new Error(t+".extensions filter must be an array of extensions");for(var i=0,o=e[t].extensions.length;o>i;i++)e[t].extensions[i]=e[t].extensions[i].toLowerCase()}else e[t].extensions=[]}),n.Utility.each(["allow","deny"],function(t){if(e[t].contentTypes){if(!n.Utility.isArray(e[t].contentTypes))throw new Error(t+".contentTypes filter must be an array of content types")}else e[t].contentTypes=[]}),t.options.filter=e}t.files.deny({insert:function(e,n){return!t.allowsFile(n)},update:function(e,n,i,o){return!t.allowsFile(n)},fetch:[]}),Package&&Package.insecure&&t.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},download:function(){return!0},fetch:[],transform:null})},n.Collection.prototype.allowsFile=function i(t){var i=this,o=i.options.filter;if(!o)return!0;var a=0===o.allow.extensions.length,r=0===o.allow.contentTypes.length,l=t.name(),s=t.type();if(!s)return o.onInvalid&&o.onInvalid(l+" has an unknown content type"),!1;var f=t.size();if(!f||isNaN(f))return o.onInvalid&&o.onInvalid(l+" has an unknown file size"),!1;if(l){var c=t.getExtension();if(!a&&-1===n.Utility.indexOf(o.allow.extensions,c)||-1!==n.Utility.indexOf(o.deny.extensions,c))return o.onInvalid&&o.onInvalid(l+' has the extension "'+c+'", which is not allowed'),!1}return!r&&!e(o.allow.contentTypes,s)||e(o.deny.contentTypes,s)?(o.onInvalid&&o.onInvalid(l+' is of the type "'+s+'", which is not allowed'),!1):"number"==typeof o.maxSize&&f>o.maxSize?(o.onInvalid&&o.onInvalid(l+" is too big"),!1):!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:collection-filters"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package["cfs:base-package"].FS,c=Package.ddp.DDP,g=Package["cfs:power-queue"].PowerQueue,o=Package.mongo.Mongo;"undefined"==typeof Package&&(Package={}),Package["cfs:worker"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,a=Package.templating.Template,s=Package["aldeed:autoform"].AutoForm,c=Package.blaze.Blaze,f=Package.blaze.UI,i=Package.blaze.Handlebars,n=Package["aldeed:simple-schema"].SimpleSchema,l=Package["aldeed:simple-schema"].MongoObject,o=Package.htmljs.HTML;(function(){a.__checkName("cfsFileField_bootstrap3"),a.cfsFileField_bootstrap3=new a("Template.cfsFileField_bootstrap3",function(){var e=this;return[o.INPUT(o.Attrs({type:"file","class":"cfsaf-hidden","data-cfs-collection":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"atts","collection"))}},function(){return Spacebars.attrMustache(e.lookup("fileInputAtts"))})),"\n  ",o.INPUT(o.Attrs({type:"text",readonly:""},function(){return Spacebars.attrMustache(e.lookup("textInputAtts"))}))]}),a.__checkName("cfsFilesField_bootstrap3"),a.cfsFilesField_bootstrap3=new a("Template.cfsFilesField_bootstrap3",function(){var e=this;return[o.INPUT(o.Attrs({type:"file","class":"cfsaf-hidden",multiple:"","data-cfs-collection":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"atts","collection"))}},function(){return Spacebars.attrMustache(e.lookup("fileInputAtts"))})),"\n  ",o.INPUT(o.Attrs({type:"text",readonly:""},function(){return Spacebars.attrMustache(e.lookup("textInputAtts"))}))]})}).call(this),function(){function c(){var e=t.clone(this.atts);return delete e.collection,delete e["data-schema-key"],e["class"]=(e["class"]||"")+" form-control",e}function f(){return{"data-schema-key":this.atts["data-schema-key"]}}function i(e){e.$(".cfsaf-hidden").each(function(){var e=$(this).data("cfsaf_uploaded-files")||[];t.each(e,function(e){e.remove()})})}function n(e){s.addHooks(e,{before:{insert:function(a,c){function f(e,t,s){r++,e?d++:o[s]?a[s].push(t._id):a[s]=t._id,r===l&&(d>0?(i(c),n.result(!1)):n.result(a))}var n=this;if(!s.validateForm(e))return!1;var l=0,o={};if(c.$(".cfsaf-hidden").each(function(){var e=$(this),s=e.attr("data-schema-key");delete a[s];var c=e.data("cfsaf_files");if(c)l+=c.length;else{var f=e.data("cfsaf_files_multi");f&&(o[s]=!0,t.each(f,function(e){l+=e.length}),a[s]=[])}}),0===l)return a;var r=0,d=0;c.$(".cfsaf-hidden").each(function(){function e(e){t.each(e,function(e){var t=new FS.File(e);t.once("uploaded",function(){var e=a.data("cfsaf_uploaded-files")||[];e.push(t),a.data("cfsaf_uploaded-files",e),f(null,t,s)}),i.insert(t,function(e,t){e&&f(e,t,s)})})}var a=$(this),s=a.attr("data-schema-key"),c=a.attr("data-cfs-collection"),i=FS._collections[c];e(a.data("cfsaf_files")),t.each(a.data("cfsaf_files_multi"),function(t){e(t)})})}},after:{insert:function(e,t,a){var c=a.$(".cfsaf-hidden");e?(i(a),(FS.debug||s._debug)&&console.log("There was an error inserting so all uploaded files were removed.",e)):(c.removeData("cfsaf_files"),c.removeData("cfsaf_files_multi")),c.removeData("cfsaf_uploaded-files")}}})}if(e.isClient){s.addInputType("cfs-file",{template:"cfsFileField",valueOut:function(){return"dummyId"},contextAdjust:function(e){return e.atts.placeholder=e.atts.placeholder||"Click to upload a file or drop it here",e.atts["class"]=(e.atts["class"]||"")+" cfsaf-field",e}}),s.addInputType("cfs-files",{template:"cfsFilesField",valueOut:function(){return["dummyId"]},contextAdjust:function(e){return e.atts.placeholder=e.atts.placeholder||"Click to upload files or drop them here",e.atts["class"]=(e.atts["class"]||"")+" cfsaf-field",e}}),a.cfsFileField_bootstrap3.helpers({textInputAtts:c,fileInputAtts:f}),a.cfsFilesField_bootstrap3.helpers({textInputAtts:c,fileInputAtts:f});var l={};a.cfsFileField_bootstrap3.rendered=a.cfsFilesField_bootstrap3.rendered=function(){var e=s.find(),t=e.formId;l[t]||(l[t]=!0,n(t))};var o=function(e,t){var a=[];FS.Utility.eachFile(e,function(e){a.push(e.name)}),t.$(".cfsaf-field").val(a.join(", "));var a=e.originalEvent.dataTransfer?e.originalEvent.dataTransfer.files:e.currentTarget.files;t.$(".cfsaf-hidden").data("cfsaf_files",a)};a.cfsFileField_bootstrap3.events({"click .cfsaf-field":function(e,t){t.$(".cfsaf-hidden").click()},"change .cfsaf-hidden":o,"dropped .cfsaf-field":o});var r=function(e,a){var s=e.originalEvent.dataTransfer?e.originalEvent.dataTransfer.files:e.currentTarget.files,c=a.$(".cfsaf-hidden").data("cfsaf_files_multi")||[];c.push(s),a.$(".cfsaf-hidden").data("cfsaf_files_multi",c);var f=[];t.each(c,function(e){t.each(e,function(e){f.push(e.name)})}),a.$(".cfsaf-field").val(f.join(", "))};a.cfsFilesField_bootstrap3.events({"click .cfsaf-field":function(e,t){t.$(".cfsaf-hidden").click()},"change .cfsaf-hidden":r,"dropped .cfsaf-field":r})}}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:autoform"]={}}();

!function(){var a=Package.meteor.Meteor,e;"undefined"==typeof Package&&(Package={}),Package["cfs:graphicsmagick"]={gm:e}}();

!function(){var e=Package.meteor.Meteor,t=Package["cfs:base-package"].FS;(function(){t.Store.S3=function(e,a){var o=this;if(!(o instanceof t.Store.S3))throw new Error('FS.Store.S3 missing keyword "new"');return new t.StorageAdapter(e,a,{typeName:"storage.s3"})},t.Store.S3.prototype.fileKey=function(e){return e.collectionName+"/"+e._id+"-"+e.name()}}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:s3"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["cfs:base-package"].FS,a=Package.blaze.Blaze,r=Package.blaze.UI,n=Package.blaze.Handlebars,s=Package.templating.Template,o=Package.htmljs.HTML,c;(function(){s.__checkName("_fs_DeleteButton"),s._fs_DeleteButton=new s("Template._fs_DeleteButton",function(){var e=this;return a._TemplateWith(function(){return{atts:Spacebars.call(e.lookup(".")),fileObj:Spacebars.call(e.lookup("..")),contentBlock:Spacebars.call(e.templateContentBlock)}},function(){return Spacebars.include(e.lookupTemplate("_fs_DeleteButton2"))})}),s.__checkName("_fs_DeleteButton2"),s._fs_DeleteButton2=new s("Template._fs_DeleteButton2",function(){var e=this;return o.BUTTON(o.Attrs({type:"button"},function(){return Spacebars.attrMustache(e.lookup("atts"))}),Spacebars.With(function(){return Spacebars.call(e.lookup("contentBlock"))},function(){return Spacebars.include(e.lookupTemplate("."))},function(){return"Delete"}))}),s.__checkName("_fs_UploadProgressBar"),s._fs_UploadProgressBar=new s("Template._fs_UploadProgressBar",function(){var e=this;return Spacebars.With(function(){return Spacebars.dataMustache(e.lookup("getAttsAndFileObj"),e.lookup("."),e.lookup(".."))},function(){return["\n  ",a.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"useBootstrap"))},function(){return["\n  ",o.DIV({"class":"progress"},"\n  	",o.DIV(o.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(e.lookup("."),"atts"))}),"\n	   ",o.SPAN({"class":"sr-only"},a.View(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"progress"))}),"% Complete"),"\n    "),"\n  "),"\n  "]},function(){return["\n  ",a.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"useSemantic"))},function(){return["\n  ",o.DIV(o.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(e.lookup("."),"atts"))}),"\n    ",o.DIV({"class":"bar",style:function(){return["width: ",Spacebars.mustache(Spacebars.dot(e.lookup("."),"progress")),"%"]}}),"\n  "),"\n  "]},function(){return["\n  ",o.PROGRESS(o.Attrs({value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"progress"))},max:"100"},function(){return Spacebars.attrMustache(Spacebars.dot(e.lookup("."),"atts"))}),a.View(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"progress"))}),"%"),"\n  "]}),"\n  "]}),"\n  "]})})}).call(this),function(){c={},r.registerHelper("FS",c),c.GetFile=function e(a,r){var n=t._collections[a];return n?n.findOne(r):null},c.DeleteButton=s._fs_DeleteButton,s._fs_DeleteButton2.events({"click button":function(e,t){var a=t.data.fileObj;return a?(a.remove(),!1):!1}}),c.UploadProgressBar=s._fs_UploadProgressBar,s._fs_UploadProgressBar.getAttsAndFileObj=function a(e,r){e instanceof t.File?(r=e,e={}):e=e||{};var n;n=r instanceof t.File?function(){return r.uploadProgress()}:function(){return t.HTTP.uploadQueue.progress()},e=t.Utility.extend({},e);var s=!1,o=!1;if(e.semantic)o=!0,"string"==typeof e["class"]?e["class"]+=" ui progress":e["class"]="ui progress",delete e.semantic;else if(e.bootstrap){s=!0;var c=n();"string"==typeof e["class"]?e["class"]+=" progress-bar":e["class"]="progress-bar","string"==typeof e.style?e.style+=" width: "+c+"%;":e.style="width: "+c+"%;",e.role="progressbar",e["aria-valuenow"]=""+c,e["aria-valuemin"]="0",e["aria-valuemax"]="100",delete e.bootstrap}return{progress:n,atts:e,useBootstrap:s,useSemantic:o}},t.EventHandlers={},t.EventHandlers.insertFiles=function n(e,a){function r(a,r){t.Utility.eachFile(a,function(a){var r=new t.File(a);s&&t.Utility.extend(r,s(r)),e.insert(r,n)})}a=a||{};var n=a.after,s=a.metadata;return r}}.call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:ui"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,a=Package.retry.Retry,r=Package.ddp.DDP,o=Package.mongo.Mongo,i=Package.underscore._,s,c;(function(){var t=__meteor_runtime_config__.autoupdateVersion||"unknown",n=__meteor_runtime_config__.autoupdateVersionRefreshable||"unknown";c=new o.Collection("meteor_autoupdate_clientVersions"),s={},s.newClientAvailable=function(){return!!c.findOne({_id:"version",version:{$ne:t}})||!!c.findOne({_id:"version-refreshable",version:{$ne:n}})};var r=!1,u=new a({minCount:0,baseTimeout:3e4}),d=0;s._retrySubscription=function(){e.subscribe("meteor_autoupdate_clientVersions",{onError:function(t){e._debug("autoupdate subscription failed:",t),d++,u.retryLater(d,function(){s._retrySubscription()})},onReady:function(){if(Package.reload)var a=function(a){var s=this;if("version-refreshable"===a._id&&a.version!==n){n=a.version;var c=a.assets&&a.assets.allCss||[],u=[];i.each(document.getElementsByTagName("link"),function(e){"__meteor-css__"===e.className&&u.push(e)});var d=function(t,n){var a=i.once(n);if(t.onload=function(){r=!0,a()},!r)var o=e.setInterval(function(){t.sheet&&(a(),e.clearInterval(o))},50)},l=i.after(c.length,function(){i.each(u,function(e){e.parentNode.removeChild(e)})}),_=function(t){document.getElementsByTagName("head").item(0).appendChild(t),d(t,function(){e.setTimeout(l,200)})};0!==c.length?i.each(c,function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("class","__meteor-css__"),t.setAttribute("href",e.url),_(t)}):l()}else"version"===a._id&&a.version!==t&&(o&&o.stop(),Package.reload.Reload._reload())},o=c.find().observe({added:a,changed:a})}})},s._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:s}}();

!function(){var a=Package.meteor.Meteor,e=Package.reload.Reload,o=Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["meteor-platform"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,i=Package.jquery.jQuery;(function(){if("undefined"==typeof i)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(i),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new o(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.2.0",o.prototype.close=function(e){function i(){n.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var n=t(s);e&&e.preventDefault(),n.length||(n=o.hasClass("alert")?o:o.parent()),n.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.button"),n="object"==typeof e&&e;s||o.data("bs.button",s=new i(this,n)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,s=o.is("input")?"val":"html",n=o.data();e+="Text",null==n.resetText&&o.data("resetText",o[s]()),o[s](null==n[e]?this.options[e]:n[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),i.preventDefault()})}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.carousel"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:n.slide;s||o.data("bs.carousel",s=new i(this,n)),"number"==typeof e?s.to(e):a?s[a]():n.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.to=function(e){var i=this,o=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):o==e?this.pause().cycle():this.slide(e>o?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),s=i||o[e](),n=this.interval,a="next"==e?"left":"right",r="next"==e?"first":"last",l=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[r]()}if(s.hasClass("active"))return this.sliding=!1;var h=s[0],p=t.Event("slide.bs.carousel",{relatedTarget:h,direction:a});if(this.$element.trigger(p),!p.isDefaultPrevented()){if(this.sliding=!0,n&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:h,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*o.css("transition-duration").slice(0,-1))):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),n&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var o,s=t(this),n=t(s.attr("data-target")||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=t.extend({},n.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),e.call(n,a),r&&n.data("bs.carousel").to(r),i.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.collapse"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);!s&&n.toggle&&"show"==e&&(e=!e),s||o.data("bs.collapse",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var o=this.$parent&&this.$parent.find("> .panel > .in");if(o&&o.length){var s=o.data("bs.collapse");if(s&&s.transitioning)return;e.call(o,"hide"),s||o.data("bs.collapse",null)}var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var r=t.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(350)[n](this.$element[0][r])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(350):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var o=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o,s=t(this),n=s.attr("data-target")||i.preventDefault()||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""),a=t(n),r=a.data("bs.collapse"),l=r?"toggle":s.data(),h=s.attr("data-parent"),p=h&&t(h);r&&r.transitioning||(p&&p.find('[data-toggle="collapse"][data-parent="'+h+'"]').not(s).addClass("collapsed"),s[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(a,l)})}(i),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(n).each(function(){var o=i(t(this)),s={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||o.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var s=".dropdown-backdrop",n='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.2.0",a.prototype.toggle=function(o){var s=t(this);if(!s.is(".disabled, :disabled")){var n=i(s),a=n.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(n.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;s.trigger("focus"),n.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var s=i(o),a=s.hasClass("open");if(!a||a&&27==e.keyCode)return 27==e.which&&s.find(n).trigger("focus"),o.trigger("click");var r=" li:not(.divider):visible a",l=s.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var h=l.index(l.filter(":focus"));38==e.keyCode&&h>0&&h--,40==e.keyCode&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,a.prototype.toggle).on("keydown.bs.dropdown.data-api",n+', [role="menu"], [role="listbox"]',a.prototype.keydown)}(i),+function(t){"use strict";function e(e,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new i(this,a)),"string"==typeof e?n[e](o):a.show&&n.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var n=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(150):n()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),s=o.attr("href"),n=t(o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&i.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(n,a,this)})}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tooltip"),n="object"==typeof e&&e;(s||"destroy"!=e)&&(s||o.data("bs.tooltip",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),n=s.length;n--;){var a=s[n];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,s=this.tip(),n=this.getUID(this.type);this.setContent(),s.attr("id",n),this.$element.attr("aria-describedby",n),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,l=r.test(a);l&&(a=a.replace(r,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(l){var d=a,f=this.$element.parent(),u=this.getPosition(f);a="bottom"==a&&h.top+h.height+c-u.scroll>u.height?"top":"top"==a&&h.top-u.scroll-c<0?"bottom":"right"==a&&h.right+p>u.width?"left":"left"==a&&h.left-p<u.left?"right":a,s.removeClass(d).addClass(a)}var g=this.getCalculatedOffset(a,h,p,c);this.applyPlacement(g,a);var v=function(){o.$element.trigger("shown.bs."+o.type),o.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(150):v()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),s=o[0].offsetWidth,n=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=n&&(e.top=e.top+n-h);var p=this.getViewportAdjustedDelta(i,e,l,h);p.left?e.left+=p.left:e.top+=p.top;var c=p.left?2*p.left-s+l:2*p.top-n+h,d=p.left?"left":"top",f=p.left?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&o.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,o=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:o?t(window).width():e.outerWidth(),height:o?t(window).height():e.outerHeight()},o?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var s={top:0,left:0};if(!this.$viewport)return s;var n=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-n-a.scroll,l=e.top+n-a.scroll+o;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var h=e.left-n,p=e.left+n+i;h<a.left?s.left=a.left-h:p>a.width&&(s.left=a.left+a.width-p)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.popover"),n="object"==typeof e&&e;(s||"destroy"!=e)&&(s||o.data("bs.popover",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(i),+function(t){"use strict";function e(i,o){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),s=o.data("bs.scrollspy"),n="object"==typeof i&&i;s||o.data("bs.scrollspy",s=new e(this,n)),"string"==typeof i&&s[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var o=this;this.$body.find(this.selector).map(function(){var o=t(this),s=o.data("target")||o.attr("href"),n=/^#./.test(s)&&t(s);return n&&n.length&&n.is(":visible")&&[[n[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},e.prototype.process=function(){var t=this.$scrollElement.scrollTop()+this.options.offset,e=this.getScrollHeight(),i=this.options.offset+e-this.$scrollElement.height(),o=this.offsets,s=this.targets,n=this.activeTarget,a;if(this.scrollHeight!=e&&this.refresh(),t>=i)return n!=(a=s[s.length-1])&&this.activate(a);if(n&&t<=o[0])return n!=(a=s[0])&&this.activate(a);for(a=o.length;a--;)n!=s[a]&&t>=o[a]&&(!o[a+1]||t<=o[a+1])&&this.activate(s[a])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tab");s||o.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a")[0],n=t.Event("show.bs.tab",{relatedTarget:s});if(e.trigger(n),!n.isDefaultPrevented()){var a=t(o);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:s})})}}},i.prototype.activate=function(e,i,o){function s(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),o&&o()}var n=i.find("> .active"),a=o&&t.support.transition&&n.hasClass("fade");a?n.one("bsTransitionEnd",s).emulateTransitionEnd(150):s(),n.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(i),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.affix"),n="object"==typeof e&&e;s||o.data("bs.affix",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),o=this.$target.scrollTop(),s=this.$element.offset(),n=this.options.offset,a=n.top,r=n.bottom;"object"!=typeof n&&(r=a=n),"function"==typeof a&&(a=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var l=null!=this.unpin&&o+this.unpin<=s.top?!1:null!=r&&s.top+this.$element.height()>=e-r?"bottom":null!=a&&a>=o?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var h="affix"+(l?"-"+l:""),p=t.Event(h+".bs.affix");this.$element.trigger(p),p.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(t.Event(h.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-r}))}}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},o.offsetBottom&&(o.offset.bottom=o.offsetBottom),o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(i)}).call(this),"undefined"==typeof Package&&(Package={}),Package["mizzao:bootstrap-3"]={}}();

!function(){var n=Package.meteor.Meteor,e=Package.jquery.$,t=Package.jquery.jQuery;(function(){t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(n,e,a,u,r){return t.easing[t.easing.def](n,e,a,u,r)},easeInQuad:function(n,e,t,a,u){return a*(e/=u)*e+t},easeOutQuad:function(n,e,t,a,u){return-a*(e/=u)*(e-2)+t},easeInOutQuad:function(n,e,t,a,u){return(e/=u/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t},easeInCubic:function(n,e,t,a,u){return a*(e/=u)*e*e+t},easeOutCubic:function(n,e,t,a,u){return a*((e=e/u-1)*e*e+1)+t},easeInOutCubic:function(n,e,t,a,u){return(e/=u/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t},easeInQuart:function(n,e,t,a,u){return a*(e/=u)*e*e*e+t},easeOutQuart:function(n,e,t,a,u){return-a*((e=e/u-1)*e*e*e-1)+t},easeInOutQuart:function(n,e,t,a,u){return(e/=u/2)<1?a/2*e*e*e*e+t:-a/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(n,e,t,a,u){return a*(e/=u)*e*e*e*e+t},easeOutQuint:function(n,e,t,a,u){return a*((e=e/u-1)*e*e*e*e+1)+t},easeInOutQuint:function(n,e,t,a,u){return(e/=u/2)<1?a/2*e*e*e*e*e+t:a/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(n,e,t,a,u){return-a*Math.cos(e/u*(Math.PI/2))+a+t},easeOutSine:function(n,e,t,a,u){return a*Math.sin(e/u*(Math.PI/2))+t},easeInOutSine:function(n,e,t,a,u){return-a/2*(Math.cos(Math.PI*e/u)-1)+t},easeInExpo:function(n,e,t,a,u){return 0==e?t:a*Math.pow(2,10*(e/u-1))+t},easeOutExpo:function(n,e,t,a,u){return e==u?t+a:a*(-Math.pow(2,-10*e/u)+1)+t},easeInOutExpo:function(n,e,t,a,u){return 0==e?t:e==u?t+a:(e/=u/2)<1?a/2*Math.pow(2,10*(e-1))+t:a/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(n,e,t,a,u){return-a*(Math.sqrt(1-(e/=u)*e)-1)+t},easeOutCirc:function(n,e,t,a,u){return a*Math.sqrt(1-(e=e/u-1)*e)+t},easeInOutCirc:function(n,e,t,a,u){return(e/=u/2)<1?-a/2*(Math.sqrt(1-e*e)-1)+t:a/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,e,t,a,u){var r=1.70158,i=0,s=a;if(0==e)return t;if(1==(e/=u))return t+a;if(i||(i=.3*u),s<Math.abs(a)){s=a;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(a/s);return-(s*Math.pow(2,10*(e-=1))*Math.sin(2*(e*u-r)*Math.PI/i))+t},easeOutElastic:function(n,e,t,a,u){var r=1.70158,i=0,s=a;if(0==e)return t;if(1==(e/=u))return t+a;if(i||(i=.3*u),s<Math.abs(a)){s=a;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(a/s);return s*Math.pow(2,-10*e)*Math.sin(2*(e*u-r)*Math.PI/i)+a+t},easeInOutElastic:function(n,e,t,a,u){var r=1.70158,i=0,s=a;if(0==e)return t;if(2==(e/=u/2))return t+a;if(i||(i=.3*u*1.5),s<Math.abs(a)){s=a;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(a/s);return 1>e?-.5*s*Math.pow(2,10*(e-=1))*Math.sin(2*(e*u-r)*Math.PI/i)+t:s*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*u-r)*Math.PI/i)*.5+a+t},easeInBack:function(n,e,t,a,u,r){return void 0==r&&(r=1.70158),a*(e/=u)*e*((r+1)*e-r)+t},easeOutBack:function(n,e,t,a,u,r){return void 0==r&&(r=1.70158),a*((e=e/u-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(n,e,t,a,u,r){return void 0==r&&(r=1.70158),(e/=u/2)<1?a/2*e*e*(((r*=1.525)+1)*e-r)+t:a/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+t},easeInBounce:function(n,e,a,u,r){return u-t.easing.easeOutBounce(n,r-e,0,u,r)+a},easeOutBounce:function(n,e,t,a,u){return(e/=u)<1/2.75?7.5625*a*e*e+t:2/2.75>e?a*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?a*(7.5625*(e-=2.25/2.75)*e+.9375)+t:a*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(n,e,a,u,r){return r/2>e?.5*t.easing.easeInBounce(n,2*e,0,u,r)+a:.5*t.easing.easeOutBounce(n,2*e-r,0,u,r)+.5*u+a}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:jquery-easing"]={}}();

!function(){var e=Package.meteor.Meteor,n;(function(){(function(){function e(e){this._value=e}function n(e,n,t,r){var i=Math.pow(10,n),a,u;return u=(t(e*i)/i).toFixed(n),r&&(a=new RegExp("0{1,"+r+"}$"),u=u.replace(a,"")),u}function t(e,n,t){var r;return r=n.indexOf("$")>-1?i(e,n,t):n.indexOf("%")>-1?a(e,n,t):n.indexOf(":")>-1?u(e,n):o(e._value,n,t)}function r(e,n){var t=n,r,i,a,u,o=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1,f;if(n.indexOf(":")>-1)e._value=l(n);else if(n===m)e._value=0;else{for("."!==p[v].delimiters.decimal&&(n=n.replace(/\./g,"").replace(p[v].delimiters.decimal,".")),r=new RegExp("[^a-zA-Z]"+p[v].abbreviations.thousand+"(?:\\)|(\\"+p[v].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+p[v].abbreviations.million+"(?:\\)|(\\"+p[v].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+p[v].abbreviations.billion+"(?:\\)|(\\"+p[v].currency.symbol+")?(?:\\))?)?$"),u=new RegExp("[^a-zA-Z]"+p[v].abbreviations.trillion+"(?:\\)|(\\"+p[v].currency.symbol+")?(?:\\))?)?$"),f=0;f<=o.length&&!(c=n.indexOf(o[f])>-1?Math.pow(1024,f+1):!1);f++);e._value=(c?c:1)*(t.match(r)?Math.pow(10,3):1)*(t.match(i)?Math.pow(10,6):1)*(t.match(a)?Math.pow(10,9):1)*(t.match(u)?Math.pow(10,12):1)*(n.indexOf("%")>-1?.01:1)*((n.split("-").length+Math.min(n.split("(").length-1,n.split(")").length-1))%2?1:-1)*Number(n.replace(/[^0-9\.]+/g,"")),e._value=c?Math.ceil(e._value):e._value}return e._value}function i(e,n,t){var r=n.indexOf("$"),i=n.indexOf("("),a=n.indexOf("-"),u="",l,c;return n.indexOf(" $")>-1?(u=" ",n=n.replace(" $","")):n.indexOf("$ ")>-1?(u=" ",n=n.replace("$ ","")):n=n.replace("$",""),c=o(e._value,n,t),1>=r?c.indexOf("(")>-1||c.indexOf("-")>-1?(c=c.split(""),l=1,(i>r||a>r)&&(l=0),c.splice(l,0,p[v].currency.symbol+u),c=c.join("")):c=p[v].currency.symbol+u+c:c.indexOf(")")>-1?(c=c.split(""),c.splice(-1,0,u+p[v].currency.symbol),c=c.join("")):c=c+u+p[v].currency.symbol,c}function a(e,n,t){var r="",i,a=100*e._value;return n.indexOf(" %")>-1?(r=" ",n=n.replace(" %","")):n=n.replace("%",""),i=o(a,n,t),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,r+"%"),i=i.join("")):i=i+r+"%",i}function u(e){var n=Math.floor(e._value/60/60),t=Math.floor((e._value-60*n*60)/60),r=Math.round(e._value-60*n*60-60*t);return n+":"+(10>t?"0"+t:t)+":"+(10>r?"0"+r:r)}function l(e){var n=e.split(":"),t=0;return 3===n.length?(t+=60*Number(n[0])*60,t+=60*Number(n[1]),t+=Number(n[2])):2===n.length&&(t+=60*Number(n[0]),t+=Number(n[1])),Number(t)}function o(e,t,r){var i=!1,a=!1,u=!1,l="",o=!1,c=!1,f=!1,s=!1,h=!1,d="",b="",g=Math.abs(e),y=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],x,w,O,M,_,B,N="",$=!1;if(0===e&&null!==m)return m;if(t.indexOf("(")>-1?(i=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(a=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(o=t.indexOf("aK")>=0,c=t.indexOf("aM")>=0,f=t.indexOf("aB")>=0,s=t.indexOf("aT")>=0,h=o||c||f||s,t.indexOf(" a")>-1?(l=" ",t=t.replace(" a","")):t=t.replace("a",""),g>=Math.pow(10,12)&&!h||s?(l+=p[v].abbreviations.trillion,e/=Math.pow(10,12)):g<Math.pow(10,12)&&g>=Math.pow(10,9)&&!h||f?(l+=p[v].abbreviations.billion,e/=Math.pow(10,9)):g<Math.pow(10,9)&&g>=Math.pow(10,6)&&!h||c?(l+=p[v].abbreviations.million,e/=Math.pow(10,6)):(g<Math.pow(10,6)&&g>=Math.pow(10,3)&&!h||o)&&(l+=p[v].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(d=" ",t=t.replace(" b","")):t=t.replace("b",""),O=0;O<=y.length;O++)if(x=Math.pow(1024,O),w=Math.pow(1024,O+1),e>=x&&w>e){d+=y[O],x>0&&(e/=x);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(b=" ",t=t.replace(" o","")):t=t.replace("o",""),b+=p[v].ordinal(e)),t.indexOf("[.]")>-1&&(u=!0,t=t.replace("[.]",".")),M=e.toString().split(".")[0],_=t.split(".")[1],B=t.indexOf(","),_?(_.indexOf("[")>-1?(_=_.replace("]",""),_=_.split("["),N=n(e,_[0].length+_[1].length,r,_[1].length)):N=n(e,_.length,r),M=N.split(".")[0],N=N.split(".")[1].length?p[v].delimiters.decimal+N.split(".")[1]:"",u&&0===Number(N.slice(1))&&(N="")):M=n(e,null,r),M.indexOf("-")>-1&&(M=M.slice(1),$=!0),B>-1&&(M=M.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[v].delimiters.thousands)),0===t.indexOf(".")&&(M=""),(i&&$?"(":"")+(!i&&$?"-":"")+(!$&&a?"+":"")+M+N+(b?b:"")+(l?l:"")+(d?d:"")+(i&&$?")":"")}function c(e,n){p[e]=n}function f(e){var n=e.toString().split(".");return n.length<2?1:Math.pow(10,n[1].length)}function s(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,n){var t=f(e),r=f(n);return t>r?t:r},-1/0)}var h,d="1.5.3",p={},v="en",m=null,b="0,0",g="undefined"!=typeof module&&module.exports;h=function(n){return h.isNumeral(n)?n=n.value():0===n||"undefined"==typeof n?n=0:Number(n)||(n=h.fn.unformat(n)),new e(Number(n))},h.version=d,h.isNumeral=function(n){return n instanceof e},h.language=function(e,n){if(!e)return v;if(e&&!n){if(!p[e])throw new Error("Unknown language : "+e);v=e}return(n||!p[e])&&c(e,n),h},h.languageData=function(e){if(!e)return p[v];if(!p[e])throw new Error("Unknown language : "+e);return p[e]},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var n=e%10;return 1===~~(e%100/10)?"th":1===n?"st":2===n?"nd":3===n?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(e){m="string"==typeof e?e:null},h.defaultFormat=function(e){b="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,n){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,r,i=this.length>>>0,a=!1;for(1<arguments.length&&(r=n,a=!0),t=0;i>t;++t)this.hasOwnProperty(t)&&(a?r=e(r,this[t],t,this):(r=this[t],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return r}),h.fn=e.prototype={clone:function(){return h(this)},format:function(e,n){return t(this,e?e:b,void 0!==n?n:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:r(this,e?e:b)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function n(e,n,r,i){return e+t*n}var t=s.call(null,this._value,e);return this._value=[this._value,e].reduce(n,0)/t,this},subtract:function(e){function n(e,n,r,i){return e-t*n}var t=s.call(null,this._value,e);return this._value=[e].reduce(n,this._value*t)/t,this},multiply:function(e){function n(e,n,t,r){var i=s(e,n);return e*i*n*i/(i*i)}return this._value=[this._value,e].reduce(n,1),this},divide:function(e){function n(e,n,t,r){var i=s(e,n);return e*i/(n*i)}return this._value=[this._value,e].reduce(n),this},difference:function(e){return Math.abs(h(this._value).subtract(e).value())}},g&&(module.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define([],function(){return h})}).call(this)}).call(this),function(){n=this.numeral}.call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:numeral"]={numeral:n}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["patte:mime-npm"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,o=Package.jquery.jQuery,n;(function(){var e=window.Handsontable={plugins:{},helper:{}};!function(e,t,o){"use strict";function n(){this.refCounter=0,this.init()}function i(){function e(){var e=this;e._registerTimeout(setTimeout(function(){e.updateSettings({observeChanges:!0})},0))}function t(e){return function(t,o){return t[1]===o[1]?0:null===t[1]?1:null===o[1]?-1:t[1]<o[1]?e?-1:1:t[1]>o[1]?e?1:-1:0}}function n(e){return function(t,o){if(t[1]===o[1])return 0;if(null===t[1])return 1;if(null===o[1])return-1;var n=new Date(t[1]),i=new Date(o[1]);return i>n?e?-1:1:n>i?e?1:-1:0}}function i(e){return"undefined"!=typeof e.sortColumn}var r=this;this.init=function(t){var o=this,n=o.getSettings().columnSorting,i,s;if(o.sortingEnabled=!!n,o.sortingEnabled){o.sortIndex=[];var c=l.call(o);"undefined"!=typeof c?(i=c.sortColumn,s=c.sortOrder):(i=n.column,s=n.sortOrder),r.sortByColumn.call(o,i,s),o.sort=function(){var e=Array.prototype.slice.call(arguments);return r.sortByColumn.apply(o,e)},"undefined"==typeof o.getSettings().observeChanges&&e.call(o),"afterInit"==t&&(a.call(o),o.addHook("afterCreateRow",r.afterCreateRow),o.addHook("afterRemoveRow",r.afterRemoveRow),o.addHook("afterLoadData",r.init))}else delete o.sort,o.removeHook("afterCreateRow",r.afterCreateRow),o.removeHook("afterRemoveRow",r.afterRemoveRow),o.removeHook("afterLoadData",r.init)},this.setSortingColumn=function(e,t){var o=this;return"undefined"==typeof e?(delete o.sortColumn,void delete o.sortOrder):(o.sortOrder=o.sortColumn===e&&"undefined"==typeof t?!o.sortOrder:"undefined"!=typeof t?t:!0,void(o.sortColumn=e))},this.sortByColumn=function(e,t){var n=this;r.setSortingColumn.call(n,e,t),"undefined"!=typeof n.sortColumn&&(o.hooks.run(n,"beforeColumnSort",n.sortColumn,n.sortOrder),r.sort.call(n),n.render(),s.call(n),o.hooks.run(n,"afterColumnSort",n.sortColumn,n.sortOrder))};var s=function(){var e=this,t={};"undefined"!=typeof e.sortColumn&&(t.sortColumn=e.sortColumn),"undefined"!=typeof e.sortOrder&&(t.sortOrder=e.sortOrder),(t.hasOwnProperty("sortColumn")||t.hasOwnProperty("sortOrder"))&&o.hooks.run(e,"persistentStateSave","columnSorting",t)},l=function(){var e=this,t={};return o.hooks.run(e,"persistentStateLoad","columnSorting",t),t.value},a=function(){function e(){var e=n.view.TBODY.querySelector("tr").querySelectorAll("th");return e.length}function t(t){var n=o.Dom.closest(t,"TH");return o.Dom.index(n)-e()}var n=this;n.rootElement.on("click.handsontable",".columnSorting",function(e){var o=t(e.target);r.sortByColumn.call(n,o)})};this.sort=function(){var e=this;if("undefined"!=typeof e.sortOrder){e.sortingEnabled=!1,e.sortIndex.length=0;for(var o=this.colOffset(),i=0,r=this.countRows()-e.getSettings().minSpareRows;r>i;i++)this.sortIndex.push([i,e.getDataAtCell(i,this.sortColumn+o)]);var s=e.getCellMeta(0,e.sortColumn),l;switch(s.type){case"date":l=n;break;default:l=t}this.sortIndex.sort(l(e.sortOrder));for(var i=this.sortIndex.length;i<e.countRows();i++)this.sortIndex.push([i,e.getDataAtCell(i,this.sortColumn+o)]);e.sortingEnabled=!0}},this.translateRow=function(e){var t=this;return t.sortingEnabled&&t.sortIndex&&t.sortIndex.length&&t.sortIndex[e]?t.sortIndex[e][0]:e},this.untranslateRow=function(e){var t=this;if(t.sortingEnabled&&t.sortIndex&&t.sortIndex.length)for(var o=0;o<t.sortIndex.length;o++)if(t.sortIndex[o][0]==e)return o},this.getColHeader=function(e,t){this.getSettings().columnSorting&&o.Dom.addClass(t.querySelector(".colHeader"),"columnSorting")},this.afterCreateRow=function(e,t){var o=this;if(i(o)){for(var n=0;n<o.sortIndex.length;n++)o.sortIndex[n][0]>=e&&(o.sortIndex[n][0]+=t);for(var n=0;t>n;n++)o.sortIndex.splice(e+n,0,[e+n,o.getData()[e+n][o.sortColumn+o.colOffset()]]);s.call(o)}},this.afterRemoveRow=function(e,t){var o=this;if(i(o)){var n=r.translateRow.call(o,e);o.sortIndex.splice(e,t);for(var l=0;l<o.sortIndex.length;l++)o.sortIndex[l][0]>n&&(o.sortIndex[l][0]-=t);s.call(o)}},this.afterChangeSort=function(e){var t=this,o=!1,n={};if(e){for(var i=0;i<e.length;i++)if(e[i][1]==t.sortColumn){o=!0,n.row=r.translateRow.call(t,e[i][0]),n.col=e[i][1];break}o&&t._registerTimeout(setTimeout(function(){r.sort.call(t),t.render(),t.selectCell(r.untranslateRow.call(t,n.row),n.col)},0))}}}function r(t){var n=function(e,t,o,n){n.setCellMeta(e,t,"comment",o),n.render()},i=function(e,t,o){n(e.from.row,e.from.col,t,o)},r=function(){var e=c();e.style.display="none",e.value=""},s=function(n){function s(o){if(e(document).off("mouseover.htCommment"),"htCommentTextArea"!=o.target.className&&-1==o.target.innerHTML.indexOf("Comment")){var s=document.getElementsByClassName("htCommentTextArea")[0].value;s.trim().length>1&&i(n,s,t),l(),r()}}e(document).on("mousedown.htCommment",o.helper.proxy(s))},l=function(){e(document).off("mousedown.htCommment"),e(document).on("mouseover.htCommment",o.helper.proxy(h))},a=function(e,n){var i=t.view.wt.wtTable.getCell(e.from),r=o.Dom.offset(i),l=t.getColWidth(e.from.col);n.style.position="absolute",n.style.left=r.left+l+"px",n.style.top=r.top+"px",n.style.zIndex=2,s(e,n)},c=function(e){var t=document.getElementsByClassName("htComments")[0];if(!t){t=document.createElement("DIV");var n=document.createElement("TEXTAREA");o.Dom.addClass(n,"htCommentTextArea"),t.appendChild(n),o.Dom.addClass(t,"htComments"),document.getElementsByTagName("body")[0].appendChild(t)}return e=e||"",document.getElementsByClassName("htCommentTextArea")[0].value=e,t},h=function(e){if(-1!=e.target.className.indexOf("htCommentCell")){l();var n=t.view.wt.wtTable.getCoords(e.target),i={from:new f(n.row,n.col)};o.Comments.showComment(i)}else"htCommentTextArea"!=e.target.className&&r()};return{init:function(){e(document).on("mouseover.htCommment",o.helper.proxy(h))},showComment:function(e){var o=t.getCellMeta(e.from.row,e.from.col),n="";o.comment&&(n=o.comment);var i=c(n);i.style.display="block",a(e,i)},removeComment:function(e,o){t.removeCellMeta(e,o,"comment"),t.render()},checkSelectionCommentsConsistency:function(){var e=!1,o=t.getSelectedRange().from;return t.getCellMeta(o.row,o.col).comment&&(e=!0),e}}}function s(e){var o,n=function(){t.localStorage[e+"__persistentStateKeys"]=JSON.stringify(o)},i=function(){var n=t.localStorage[e+"__persistentStateKeys"],i="string"==typeof n?JSON.parse(n):void 0;o=i?i:[]},r=function(){o=[],n()};i(),this.saveValue=function(i,r){t.localStorage[e+"_"+i]=JSON.stringify(r),-1==o.indexOf(i)&&(o.push(i),n())},this.loadValue=function(o,n){o="undefined"!=typeof o?o:n;var i=t.localStorage[e+"_"+o];return"undefined"==typeof i?void 0:JSON.parse(i)},this.reset=function(o){t.localStorage.removeItem(e+"_"+o)},this.resetAll=function(){for(var n=0;n<o.length;n++)t.localStorage.removeItem(e+"_"+o[n]);r()}}function l(){this.boundaries=null,this.callback=null}function a(){var e=[];return e.getInfo=function(e,t){for(var o=0,n=this.length;n>o;o++)if(this[o].row<=e&&this[o].row+this[o].rowspan-1>=e&&this[o].col<=t&&this[o].col+this[o].colspan-1>=t)return this[o]},e.setInfo=function(e){for(var t=0,o=this.length;o>t;t++)if(this[t].row===e.row&&this[t].col===e.col)return void(this[t]=e);this.push(e)},e.removeInfo=function(e,t){for(var o=0,n=this.length;n>o;o++)if(this[o].row===e&&this[o].col===t){this.splice(o,1);break}},e}function c(e){if(this.mergedCellInfoCollection=new a,o.helper.isArray(e))for(var t=0,n=e.length;n>t;t++)this.mergedCellInfoCollection.setInfo(e[t])}function h(){}function u(e){this.instance=e}function d(t,o){var n;if(o){this.instance=t,this.settings=o,this.main=document.createElement("div"),n=this.main.style,n.position="absolute",n.top=0,n.left=0;for(var i=["top","left","bottom","right","corner"],r=0;5>r;r++){var s=i[r],l=document.createElement("DIV");l.className="wtBorder "+(this.settings.className||""),this.settings[s]&&this.settings[s].hide&&(l.className+=" hidden"),n=l.style,n.backgroundColor=this.settings[s]&&this.settings[s].color?this.settings[s].color:o.border.color,n.height=this.settings[s]&&this.settings[s].width?this.settings[s].width+"px":o.border.width+"px",n.width=this.settings[s]&&this.settings[s].width?this.settings[s].width+"px":o.border.width+"px",this.main.appendChild(l)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width="5px",this.cornerStyle.height="5px",this.cornerStyle.border="2px solid #FFF",this.disappear(),t.wtTable.bordersHolder||(t.wtTable.bordersHolder=document.createElement("div"),t.wtTable.bordersHolder.className="htBorders",t.wtTable.hider.appendChild(t.wtTable.bordersHolder)),t.wtTable.bordersHolder.insertBefore(this.main,t.wtTable.bordersHolder.firstChild);var a=!1,c=e(document.body);c.on("mousedown.walkontable."+t.guid,function(){a=!0}),c.on("mouseup.walkontable."+t.guid,function(){a=!1}),e(this.main.childNodes).on("mouseenter",function(o){if(a&&t.getSetting("hideBorderOnMouseDownOver")){o.preventDefault(),o.stopImmediatePropagation();var n=this.getBoundingClientRect(),i=e(this);i.hide();var r=function(e){return e.clientY<Math.floor(n.top)?!0:e.clientY>Math.ceil(n.top+n.height)?!0:e.clientX<Math.floor(n.left)?!0:e.clientX>Math.ceil(n.left+n.width)?!0:void 0};c.on("mousemove.border."+t.guid,function(e){r(e)&&(c.off("mousemove.border."+t.guid),i.show())})}})}}function f(e,t){"undefined"!=typeof e&&"undefined"!=typeof t?(this.row=e,this.col=t):(this.row=null,this.col=null)}function p(e,t,o){this.highlight=e,this.from=t,this.to=o}function m(e,t){this.total=e,this.countTH=t}function g(e,t,o,n){var i,r=0;for(u.apply(this,arguments),this.containerSizeFn=t,this.cellSizesSum=0,this.cellSizes=[],this.cellStretch=[],this.cellCount=0,this.visibleCellCount=0,this.remainingSize=0,this.strategy=n;;){if(i=o(r),void 0===i)break;this.cellSizesSum<this.getContainerSize(this.cellSizesSum+i)&&this.visibleCellCount++,this.cellSizes.push(i),this.cellSizesSum+=i,this.cellCount++,r++}var s=this.getContainerSize(this.cellSizesSum);this.remainingSize=this.cellSizesSum-s}function w(e){var t=[];if(this.guid="wt_"+b(),e.cloneSource?(this.cloneSource=e.cloneSource,this.cloneOverlay=e.cloneOverlay,this.wtSettings=e.cloneSource.wtSettings,this.wtTable=new H(this,e.table),this.wtScroll=new T(this),this.wtViewport=e.cloneSource.wtViewport,this.wtEvent=new v(this),this.selections=this.cloneSource.selections):(this.wtSettings=new O(this,e),this.wtTable=new H(this,e.table),this.wtScroll=new T(this),this.wtViewport=new M(this),this.wtEvent=new v(this),this.selections=this.getSetting("selections"),this.wtScrollbars=new A(this)),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var n=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;i>n;n++)t.push(this.wtTable.THEAD.childNodes[0].childNodes[n].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(e,n){o.Dom.fastInnerText(n,t[e])}])}this.drawn=!1,this.drawInterrupted=!1}function y(t){this.instance=t,this.init(),this.clone=this.makeClone("debug"),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",this.lastTimeout=null;var n=this,i=0,r=0,s=n.clone.wtTable.holder.parentNode;e(document.body).on("mousemove."+this.instance.guid,function(e){n.instance.wtTable.holder.parentNode&&(e.clientX-i>-5&&e.clientX-i<5&&e.clientY-r>-5&&e.clientY-r<5||(i=e.clientX,r=e.clientY,o.Dom.addClass(s,"wtDebugHidden"),o.Dom.removeClass(s,"wtDebugVisible"),clearTimeout(this.lastTimeout),this.lastTimeout=setTimeout(function(){o.Dom.removeClass(s,"wtDebugHidden"),o.Dom.addClass(s,"wtDebugVisible")},1e3)))})}function v(n){var i=this;this.instance=n;var r=[null,null];this.dblClickTimeout=[null,null];var s=function(e){var t=i.parentCell(e.target);o.Dom.hasClass(e.target,"corner")?i.instance.getSetting("onCellCornerMouseDown",e,e.target):t.TD&&i.instance.hasSetting("onCellMouseDown")&&i.instance.getSetting("onCellMouseDown",e,t.coords,t.TD,i.instance),2!==e.button&&t.TD&&(r[0]=t.TD,clearTimeout(i.dblClickTimeout[0]),i.dblClickTimeout[0]=setTimeout(function(){r[0]=null},1e3))},l,a=function(e){if(i.instance.hasSetting("onCellMouseOver")){var t=i.instance.wtTable.TABLE,n=o.Dom.closest(e.target,["TD","TH"],t);n&&n!==l&&o.Dom.isChildOf(n,t)&&(l=n,i.instance.getSetting("onCellMouseOver",e,i.instance.wtTable.getCoords(n),n,i.instance))}},c=function(e){if(2!==e.button){var t=i.parentCell(e.target);t.TD===r[0]&&t.TD===r[1]?(o.Dom.hasClass(e.target,"corner")?i.instance.getSetting("onCellCornerDblClick",e,t.coords,t.TD,i.instance):i.instance.getSetting("onCellDblClick",e,t.coords,t.TD,i.instance),r[0]=null,r[1]=null):t.TD===r[0]&&(r[1]=t.TD,clearTimeout(i.dblClickTimeout[1]),i.dblClickTimeout[1]=setTimeout(function(){r[1]=null},500))}};e(this.instance.wtTable.holder).on("mousedown",s),e(this.instance.wtTable.TABLE).on("mouseover",a),e(this.instance.wtTable.holder).on("mouseup",c),e(t).on("resize."+this.instance.guid,function(){i.instance.draw()})}function C(){for(var e=arguments[0],t=arguments[1],o=1,n=arguments.length/2;n>o;o++)if(e<=arguments[2*o+1]&&t>=arguments[2*o])return!0;return!1}function b(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}function S(e,t,o){this.offset=e,this.total=t,this.countTH=o}function R(e,t,o){u.apply(this,arguments),this.containerSizeFn=t,this.sizeAtIndex=o,this.cellSizesSum=0,this.cellSizes=[],this.cellCount=0,this.visiblCellCount=0,this.remainingSize=-1/0,this.maxOuts=10,this.curOuts=this.maxOuts}function T(e){this.instance=e}function E(e){this.instance=e,this.type="corner",this.init(),this.clone=this.makeClone("corner")}function k(e){this.instance=e,this.type="horizontal",this.cellSize=50,this.offset=0,this.init(),this.clone=this.makeClone("left")}function D(e){this.instance=e,this.type="vertical",this.cellSize=this.instance.wtSettings.settings.defaultRowHeight,this.offset,this.total,this.init(),this.clone=this.makeClone("top")}function A(e){this.instance=e,e.update("scrollbarWidth",o.Dom.getScrollbarWidth()),e.update("scrollbarHeight",o.Dom.getScrollbarWidth()),this.vertical=new D(e),this.horizontal=new k(e),this.corner=new E(e),e.getSetting("debug")&&(this.debug=new y(e)),this.registerListeners()}function x(e,t){this.settings=e,this.cellRange=t||null,this.instanceBorders={}}function O(e,t){var n=this;this.instance=e,this.defaults={table:void 0,debug:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,data:void 0,offsetRow:0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,width:null,height:null,cellRenderer:function(e,t,i){var r=n.getSetting("data",e,t);o.Dom.fastInnerText(i,void 0===r||null===r?"":r)},columnWidth:50,rowHeight:function(e){return 23},defaultRowHeight:23,selections:null,hideBorderOnMouseDownOver:!1,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1},this.settings={};for(var i in this.defaults)if(this.defaults.hasOwnProperty(i))if(void 0!==t[i])this.settings[i]=t[i];else{if(void 0===this.defaults[i])throw new Error('A required setting "'+i+'" was not provided');this.settings[i]=this.defaults[i]}}function H(e,t){this.instance=e,this.TABLE=t,o.Dom.removeTextNodes(this.TABLE);var n=this.TABLE.parentNode;if(!n||1!==n.nodeType||!o.Dom.hasClass(n,"wtHolder")){var i=document.createElement("DIV");i.className="wtSpreader",n&&n.insertBefore(i,this.TABLE),i.appendChild(this.TABLE)}if(this.spreader=this.TABLE.parentNode,n=this.spreader.parentNode,!n||1!==n.nodeType||!o.Dom.hasClass(n,"wtHolder")){var r=document.createElement("DIV");r.className="wtHider",n&&n.insertBefore(r,this.spreader),r.appendChild(this.spreader)}if(this.hider=this.spreader.parentNode,this.hiderStyle=this.hider.style,this.hiderStyle.position="relative",n=this.hider.parentNode,!n||1!==n.nodeType||!o.Dom.hasClass(n,"wtHolder")){var s=document.createElement("DIV");s.style.position="relative",s.className="wtHolder",e.cloneSource||(s.className+=" ht_master"),n&&n.insertBefore(s,this.hider),s.appendChild(this.hider)}if(this.holder=this.hider.parentNode,this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0],this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0],this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0],this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.instance.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length){var l=document.createElement("TR");this.THEAD.appendChild(l)}this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null,this.columnWidthCache=[]}function P(e){this.wtTable=e,this.instance=e.instance,this.rowFilter=e.rowFilter,this.columnFilter=e.columnFilter,this.TABLE=e.TABLE,this.THEAD=e.THEAD,this.TBODY=e.TBODY,this.COLGROUP=e.COLGROUP,this.utils=P.utils}function M(o){this.instance=o,this.resetSettings();var n=this;e(t).on("resize.walkontable."+this.instance.guid,function(){n.clientHeight=n.getWorkspaceHeight()})}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,o=Number(arguments[1])||0;for(o=0>o?Math.ceil(o):Math.floor(o),0>o&&(o+=t);t>o;o++)if(o in this&&this[o]===e)return o;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e,t){function o(e){return/NodeList/i.test(e.item)}function n(e){for(var t=[],o=0,n=e.length;n>o;o++)t[o]=e[o];return t}if("undefined"==typeof this||null===this)throw new TypeError;if("function"!=typeof e)throw new TypeError;t=t||this,o(t)&&(t=n(t));var i=t.length,r=[],s,l;for(s=0;i>s;s+=1)t.hasOwnProperty(s)&&(l=t[s],e.call(t,l,s,t)&&r.push(l));return r}),"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty;try{var o=!0;e(function(){},"foo",{})}catch(n){o=!1}var i=+new Date%1e9,r=function(){this.name="__st"+(1e9*Math.random()>>>0)+(i++ +"__"),o||(this._wmCache=[])};r.prototype=o?{set:function(t,o){var n=t[this.name];n&&n[0]===t?n[1]=o:e(t,this.name,{value:[t,o],writable:!0})},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){this.set(e,void 0)}}:{set:function(e,t){if("undefined"!=typeof e&&"undefined"!=typeof t){for(var o=0,n=this._wmCache.length;n>o;o++)if(this._wmCache[o].key==e)return void(this._wmCache[o].value=t);this._wmCache.push({key:e,value:t})}},get:function(e){if("undefined"!=typeof e)for(var t=0,o=this._wmCache.length;o>t;t++)if(this._wmCache[t].key==e)return this._wmCache[t].value},"delete":function(e){if("undefined"!=typeof e)for(var t=0,o=this._wmCache.length;o>t;t++)this._wmCache[t].key==e&&Array.prototype.slice.call(this._wmCache,t,1)}},t.WeakMap=r}(),o.activeGuid=null,o.Core=function(n,i){function r(){var e=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,e=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==e&&(e=!0,this.onQueueEmpty())}}}function s(t,n,i){function s(){var r;t.length&&(r=o.hooks.execute(C,"beforeChange",t,n),"function"==typeof r?e.when(result).then(function(){i()}):r===!1&&t.splice(0,t.length)),"function"!=typeof r&&i()}var l=new r;l.onQueueEmpty=s;for(var a=t.length-1;a>=0;a--)if(null===t[a])t.splice(a,1);else{var c=t[a][0],h=g.propToCol(t[a][1]),u=C.runHooksAndReturn("modifyCol",h),d=C.getCellMeta(c,u);if("numeric"===d.type&&"string"==typeof t[a][3]&&t[a][3].length>0&&/^-?[\d\s]*(\.|\,)?\d*$/.test(t[a][3])){var f=t[a][3].length;numeral.language("undefined"==typeof d.language?"en":t[a][3].indexOf(".")===f-3&&-1===t[a][3].indexOf(",")?"en":d.language),t[a][3]=numeral().unformat(t[a][3]||"0")}C.getCellValidator(d)&&(l.addValidatorToQueue(),C.validateCell(t[a][3],d,function(e,o){return function(n){if("boolean"!=typeof n)throw new Error("Validation error: result is not boolean");n===!1&&o.allowInvalid===!1&&(t.splice(e,1),o.valid=!0,--e),l.removeValidatorFormQueue()}}(a,d),n))}l.checkIfQueueIsEmpty()}function l(e,t){var n=e.length-1;if(!(0>n)){for(;n>=0;n--)if(null!==e[n]){if(null!=e[n][2]||null!=e[n][3]){if(m.settings.minSpareRows)for(;e[n][0]>C.countRows()-1;)g.createRow();if("array"===C.dataType&&m.settings.minSpareCols)for(;g.propToCol(e[n][1])>C.countCols()-1;)g.createCol();g.set(e[n][0],e[n][1],e[n][3])}}else e.splice(n,1);C.forceFullRender=!0,w.adjustRowsAndCols(),o.hooks.run(C,"beforeChangeRender",e,t),y.refreshBorders(null,!0),o.hooks.run(C,"afterChange",e,t||"edit")}}function a(t,o,n){return"object"==typeof t?t:e.isPlainObject(n)?n:[[t,o,n]]}function c(e){if(e.hasOwnProperty("type")){var t,n={};if("object"==typeof e.type)t=e.type;else if("string"==typeof e.type&&(t=o.cellTypes[e.type],void 0===t))throw new Error('You declared cell type "'+e.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(n[i]=t[i]);return n}}function h(e){return o.hooks.execute(C,"modifyRow",e)}function u(e){return o.hooks.execute(C,"modifyCol",e)}function d(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var m,g,w,y,v,C=this,b=function(){},S=e(document.documentElement),R=e(document.body);o.helper.extend(b.prototype,N.prototype),o.helper.extend(b.prototype,i),o.helper.extend(b.prototype,c(i)),this.rootElement=n,this.container=document.createElement("DIV"),this.container.className="htContainer",n.prepend(this.container),this.container=e(this.container),this.guid="ht_"+o.helper.randomString(),this.rootElement[0].id&&"ht_"!==this.rootElement[0].id.substring(0,3)||(this.rootElement[0].id=this.guid),m={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new b,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},w={alter:function(e,t,n,i,r){var s;switch(n=n||1,e){case"insert_row":s=g.createRow(t,n),s&&(y.isSelected()&&m.selRange.from.row>=t?(m.selRange.from.row=m.selRange.from.row+s,y.transformEnd(s,0)):y.refreshBorders());break;case"insert_col":if(s=g.createCol(t,n)){if(o.helper.isArray(C.getSettings().colHeaders)){var l=[t,0];l.length+=s,Array.prototype.splice.apply(C.getSettings().colHeaders,l)}y.isSelected()&&m.selRange.from.col>=t?(m.selRange.from.col=m.selRange.from.col+s,y.transformEnd(0,s)):y.refreshBorders()}break;case"remove_row":g.removeRow(t,n),m.cellSettings.splice(t,n),w.adjustRowsAndCols(),y.refreshBorders();break;case"remove_col":g.removeCol(t,n);for(var a=0,c=g.getAll().length;c>a;a++)a in m.cellSettings&&m.cellSettings[a].splice(t,n);o.helper.isArray(C.getSettings().colHeaders)&&("undefined"==typeof t&&(t=-1),C.getSettings().colHeaders.splice(t,n)),m.columnSettings.splice(t,n),w.adjustRowsAndCols(),y.refreshBorders();break;default:throw new Error('There is no such action "'+e+'"')}r||w.adjustRowsAndCols()},adjustRowsAndCols:function(){var e,t,o,n;if(t=C.countRows(),t<m.settings.minRows)for(e=0;e<m.settings.minRows-t;e++)g.createRow(C.countRows(),1,!0);if(o=C.countEmptyRows(!0),o<m.settings.minSpareRows)for(;o<m.settings.minSpareRows&&C.countRows()<m.settings.maxRows;o++)g.createRow(C.countRows(),1,!0);if(n=C.countEmptyCols(!0),!m.settings.columns&&C.countCols()<m.settings.minCols)for(;C.countCols()<m.settings.minCols;n++)g.createCol(C.countCols(),1,!0);if(!m.settings.columns&&"array"===C.dataType&&n<m.settings.minSpareCols)for(;n<m.settings.minSpareCols&&C.countCols()<m.settings.maxCols;n++)g.createCol(C.countCols(),1,!0);var i=C.countRows(),r=C.countCols();if((0===i||0===r)&&y.deselect(),y.isSelected()){var s,l=m.selRange.from.row,a=m.selRange.from.col,c=m.selRange.to.row,h=m.selRange.to.col;l>i-1?(l=i-1,s=!0,c>l&&(c=l)):c>i-1&&(c=i-1,s=!0,l>c&&(l=c)),a>r-1?(a=r-1,s=!0,h>a&&(h=a)):h>r-1&&(h=r-1,s=!0,a>h&&(a=h)),s&&C.selectCell(l,a,c,h)}},populateFromArray:function(e,t,n,i,r){var s,l,a,c,h=[],u={};if(l=t.length,0===l)return!1;var d,f,p,g;switch(r){case"shift_down":for(d=n?n.col-e.col+1:0,f=n?n.row-e.row+1:0,t=o.helper.translateRowsToColumns(t),a=0,c=t.length,p=Math.max(c,d);p>a;a++)if(c>a){for(s=0,l=t[a].length;f-l>s;s++)t[a].push(t[a][s%l]);t[a].unshift(e.col+a,e.row,0),C.spliceCol.apply(C,t[a])}else t[a%c][0]=e.col+a,C.spliceCol.apply(C,t[a%c]);break;case"shift_right":for(d=n?n.col-e.col+1:0,f=n?n.row-e.row+1:0,s=0,l=t.length,g=Math.max(l,f);g>s;s++)if(l>s){for(a=0,c=t[s].length;d-c>a;a++)t[s].push(t[s][a%c]);t[s].unshift(e.row+s,e.col,0),C.spliceRow.apply(C,t[s])}else t[s%l][0]=e.row+s,C.spliceRow.apply(C,t[s%l]);break;case"overwrite":default:for(u.row=e.row,u.col=e.col,s=0;l>s&&!(n&&u.row>n.row||!m.settings.minSpareRows&&u.row>C.countRows()-1||u.row>=m.settings.maxRows);s++){for(u.col=e.col,c=t[s]?t[s].length:0,a=0;c>a&&!(n&&u.col>n.col||!m.settings.minSpareCols&&u.col>C.countCols()-1||u.col>=m.settings.maxCols);a++)C.getCellMeta(u.row,u.col).readOnly||h.push([u.row,u.col,t[s][a]]),u.col++,n&&a===c-1&&(a=-1);u.row++,n&&s===l-1&&(s=-1)}C.setDataAtCell(h,null,null,i||"populateFromArray")}}},this.selection=y={inProgress:!1,begin:function(){C.selection.inProgress=!0},finish:function(){var e=C.getSelected();o.hooks.run(C,"afterSelectionEnd",e[0],e[1],e[2],e[3]),o.hooks.run(C,"afterSelectionEndByProp",e[0],C.colToProp(e[1]),e[2],C.colToProp(e[3])),C.selection.inProgress=!1},isInProgress:function(){return C.selection.inProgress},setRangeStart:function(e){o.hooks.run(C,"beforeSetRangeStart",e),m.selRange=new p(e,e,e),y.setRangeEnd(e)},setRangeEnd:function(e,t){o.hooks.run(C,"beforeSetRangeEnd",e),C.selection.begin(),m.selRange.to=e,m.settings.multiSelect||(m.selRange.from=e),C.view.wt.selections.current.clear(),C.view.wt.selections.current.add(m.selRange.highlight),C.view.wt.selections.area.clear(),y.isMultiple()&&(C.view.wt.selections.area.add(m.selRange.from),C.view.wt.selections.area.add(m.selRange.to)),(m.settings.currentRowClassName||m.settings.currentColClassName)&&(C.view.wt.selections.highlight.clear(),C.view.wt.selections.highlight.add(m.selRange.from),C.view.wt.selections.highlight.add(m.selRange.to)),o.hooks.run(C,"afterSelection",m.selRange.from.row,m.selRange.from.col,m.selRange.to.row,m.selRange.to.col),o.hooks.run(C,"afterSelectionByProp",m.selRange.from.row,g.colToProp(m.selRange.from.col),m.selRange.to.row,g.colToProp(m.selRange.to.col)),t!==!1&&C.view.mainViewIsActive()&&C.view.scrollViewport(e),y.refreshBorders()},refreshBorders:function(e,t){t||v.destroyEditor(e),C.view.render(),y.isSelected()&&!t&&v.prepareEditor()},isMultiple:function(){var e=!(m.selRange.to.col===m.selRange.from.col&&m.selRange.to.row===m.selRange.from.row),t=o.hooks.execute(C,"afterIsMultipleSelection",e);return e?t:void 0},transformStart:function(e,t,o){var n=new f(e,t);C.runHooks("modifyTransformStart",n),m.selRange.highlight.row+e>C.countRows()-1?o&&m.settings.minSpareRows>0?C.alter("insert_row",C.countRows()):m.settings.autoWrapCol&&(n.row=1-C.countRows(),n.col=m.selRange.highlight.col+n.col==C.countCols()-1?1-C.countCols():1):m.settings.autoWrapCol&&m.selRange.highlight.row+n.row<0&&m.selRange.highlight.col+n.col>=0&&(n.row=C.countRows()-1,n.col=m.selRange.highlight.col+n.col==0?C.countCols()-1:-1),m.selRange.highlight.col+n.col>C.countCols()-1?o&&m.settings.minSpareCols>0?C.alter("insert_col",C.countCols()):m.settings.autoWrapRow&&(n.row=m.selRange.highlight.row+n.row==C.countRows()-1?1-C.countRows():1,n.col=1-C.countCols()):m.settings.autoWrapRow&&m.selRange.highlight.col+n.col<0&&m.selRange.highlight.row+n.row>=0&&(n.row=m.selRange.highlight.row+n.row==0?C.countRows()-1:-1,n.col=C.countCols()-1);var i=C.countRows(),r=C.countCols(),s=new f(m.selRange.highlight.row+n.row,m.selRange.highlight.col+n.col);s.row<0?s.row=0:s.row>0&&s.row>=i&&(s.row=i-1),s.col<0?s.col=0:s.col>0&&s.col>=r&&(s.col=r-1),y.setRangeStart(s)},transformEnd:function(e,t){var o=new f(e,t);C.runHooks("modifyTransformEnd",o);var n=C.countRows(),i=C.countCols(),r=new f(m.selRange.to.row+o.row,m.selRange.to.col+o.col);r.row<0?r.row=0:r.row>0&&r.row>=n&&(r.row=n-1),r.col<0?r.col=0:r.col>0&&r.col>=i&&(r.col=i-1),y.setRangeEnd(r)},isSelected:function(){return null!==m.selRange},inInSelection:function(e){return y.isSelected()?m.selRange.includes(e):!1},deselect:function(){y.isSelected()&&(C.selection.inProgress=!1,m.selRange=null,C.view.wt.selections.current.clear(),C.view.wt.selections.area.clear(),(m.settings.currentRowClassName||m.settings.currentColClassName)&&C.view.wt.selections.highlight.clear(),v.destroyEditor(),y.refreshBorders(),o.hooks.run(C,"afterDeselect"))},selectAll:function(){m.settings.multiSelect&&(y.setRangeStart(new f(0,0)),y.setRangeEnd(new f(C.countRows()-1,C.countCols()-1),!1))},empty:function(){if(y.isSelected()){var e=m.selRange.getTopLeftCorner(),t=m.selRange.getBottomRightCorner(),o,n,i=[];for(o=e.row;o<=t.row;o++)for(n=e.col;n<=t.col;n++)C.getCellMeta(o,n).readOnly||i.push([o,n,""]);C.setDataAtCell(i)}}},this.init=function(){o.hooks.run(C,"beforeInit"),this.updateSettings(m.settings,!0),this.view=new o.TableView(this),v=new o.EditorManager(C,m,y,g),this.forceFullRender=!0,this.view.render(),"object"==typeof m.firstRun&&(o.hooks.run(C,"afterChange",m.firstRun[0],m.firstRun[1]),m.firstRun=!1),o.hooks.run(C,"afterInit")},this.validateCell=function(e,t,n,i){var r=C.getCellValidator(t);"[object RegExp]"===Object.prototype.toString.call(r)&&(r=function(e){return function(t,o){o(e.test(t))}}(r)),"function"==typeof r?(e=o.hooks.execute(C,"beforeValidate",e,t.row,t.prop,i),C._registerTimeout(setTimeout(function(){return r.call(t,e,function(r){t.valid=r,r=o.hooks.execute(C,"afterValidate",r,e,t.row,t.prop,i),n(r)}),e},0))):(t.valid=!0,n(!0))},this.setDataAtCell=function(e,t,o,n){var i=a(e,t,o),r,c,h=[],u;for(r=0,c=i.length;c>r;r++){if("object"!=typeof i[r])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof i[r][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");u=g.colToProp(i[r][1]),h.push([i[r][0],u,g.get(i[r][0],u),i[r][2]])}n||"object"!=typeof e||(n=t),s(h,n,function(){l(h,n)})},this.setDataAtRowProp=function(e,t,o,n){var i=a(e,t,o),r,c,h=[];for(r=0,c=i.length;c>r;r++)h.push([i[r][0],i[r][1],g.get(i[r][0],i[r][1]),i[r][2]]);n||"object"!=typeof e||(n=t),s(h,n,function(){l(h,n)})},this.listen=function(){o.activeGuid=C.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){o.activeGuid=null},this.isListening=function(){return o.activeGuid===C.guid},this.destroyEditor=function(e){y.refreshBorders(e)},this.populateFromArray=function(e,t,o,n,i,r,s){if("object"!=typeof o||"object"!=typeof o[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return w.populateFromArray(new f(e,t),o,"number"==typeof n?new f(n,i):null,r,s)},this.spliceCol=function(e,t,o){return g.spliceCol.apply(g,arguments)},this.spliceRow=function(e,t,o){return g.spliceRow.apply(g,arguments)},this.getSelected=function(){return y.isSelected()?[m.selRange.from.row,m.selRange.from.col,m.selRange.to.row,m.selRange.to.col]:void 0
},this.getSelectedRange=function(){return y.isSelected()?m.selRange:void 0},this.render=function(){C.view&&(C.forceFullRender=!0,y.refreshBorders(null,!0))},this.loadData=function(e){function t(){m.cellSettings.length=0}if("object"==typeof e&&null!==e)e.push&&e.splice||(e=[e]);else{if(null!==e)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof e+" given)");e=[];for(var n,i=0,r=m.settings.startRows;r>i;i++){n=[];for(var s=0,l=m.settings.startCols;l>s;s++)n.push(null);e.push(n)}}m.isPopulated=!1,b.prototype.data=e,C.dataType=m.settings.dataSchema instanceof Array||e[0]instanceof Array?"array":"function"==typeof m.settings.dataSchema?"function":"object",g=new o.DataMap(C,m,b),t(),w.adjustRowsAndCols(),o.hooks.run(C,"afterLoadData"),m.firstRun?m.firstRun=[null,"loadData"]:(o.hooks.run(C,"afterChange",null,"loadData"),C.render()),m.isPopulated=!0},this.getData=function(e,t,o,n){return"undefined"==typeof e?g.getAll():g.getRange(new f(e,t),new f(o,n),g.DESTINATION_RENDERER)},this.getCopyableData=function(e,t,o,n){return g.getCopyableText(new f(e,t),new f(o,n))},this.updateSettings=function(e,t){var n,i;if("undefined"!=typeof e.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if("undefined"!=typeof e.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(n in e)"data"!==n&&(void 0!==o.hooks.hooks[n]||void 0!==o.hooks.legacy[n]?("function"==typeof e[n]||o.helper.isArray(e[n]))&&C.addHook(n,e[n]):!t&&e.hasOwnProperty(n)&&(b.prototype[n]=e[n]));if(void 0===e.data&&void 0===m.settings.data?C.loadData(null):void 0!==e.data?C.loadData(e.data):void 0!==e.columns&&g.createMap(),i=C.countCols(),m.cellSettings.length=0,i>0){var r,s;for(n=0;i>n;n++)m.columnSettings[n]=o.helper.columnFactory(b,m.columnsSettingConflicts),r=m.columnSettings[n].prototype,b.prototype.columns&&(s=b.prototype.columns[n],o.helper.extend(r,s),o.helper.extend(r,c(s)))}if("undefined"!=typeof e.cell)for(n in e.cell){var l=e.cell[n];C.setCellMetaObject(l.row,l.col,l)}if(o.hooks.run(C,"afterCellMetaReset"),"undefined"!=typeof e.className&&(b.prototype.className&&C.rootElement.removeClass(b.prototype.className),e.className&&C.rootElement.addClass(e.className)),"undefined"!=typeof e.height){var a=e.height;"function"==typeof a&&(a=a()),C.rootElement[0].style.height=a+"px"}if("undefined"!=typeof e.width){var h=e.width;"function"==typeof h&&(h=h()),C.rootElement[0].style.width=h+"px"}a&&(C.rootElement[0].style.overflow="auto"),t||o.hooks.run(C,"afterUpdateSettings"),w.adjustRowsAndCols(),C.view&&!m.firstRun&&(C.forceFullRender=!0,y.refreshBorders(null,!0))},this.getValue=function(){var e=C.getSelected();if(b.prototype.getValue){if("function"==typeof b.prototype.getValue)return b.prototype.getValue.call(C);if(e)return C.getData()[e[0]][b.prototype.getValue]}else if(e)return C.getDataAtCell(e[0],e[1])},this.getSettings=function(){return m.settings},this.clear=function(){y.selectAll(),y.empty()},this.alter=function(e,t,o,n,i){w.alter(e,t,o,n,i)},this.getCell=function(e,t){return C.view.getCellAtCoords(new f(e,t))},this.colToProp=function(e){return g.colToProp(e)},this.propToCol=function(e){return g.propToCol(e)},this.getDataAtCell=function(e,t){return g.get(e,g.colToProp(t))},this.getDataAtRowProp=function(e,t){return g.get(e,t)},this.getDataAtCol=function(e){var t=[];return t.concat.apply(t,g.getRange(new f(0,e),new f(m.settings.data.length-1,e),g.DESTINATION_RENDERER))},this.getDataAtProp=function(e){var t=[];return t.concat.apply(t,g.getRange(new f(0,g.propToCol(e)),new f(m.settings.data.length-1,g.propToCol(e)),g.DESTINATION_RENDERER))},this.getSourceDataAtCol=function(e){for(var t=[],o=m.settings.data,n=0;n<o.length;n++)t.push(o[n][e]);return t},this.getSourceDataAtRow=function(e){return m.settings.data[e]},this.getDataAtRow=function(e){var t=g.getRange(new f(e,0),new f(e,this.countCols()-1),g.DESTINATION_RENDERER);return t[0]},this.removeCellMeta=function(e,t,o){var n=C.getCellMeta(e,t);void 0!=n[o]&&delete m.cellSettings[e][t][o]},this.setCellMetaObject=function(e,t,o){if("object"==typeof o)for(var n in o){var i=n,r=o[n];this.setCellMeta(e,t,i,r)}},this.setCellMeta=function(e,t,n,i){m.cellSettings[e]||(m.cellSettings[e]=[]),m.cellSettings[e][t]||(m.cellSettings[e][t]=new m.columnSettings[t]),m.cellSettings[e][t][n]=i,o.hooks.run(C,"afterSetCellMeta",e,t,n,i)},this.getCellMeta=function(e,t){var n=g.colToProp(t),i;if(e=h(e),t=u(t),m.columnSettings[t]||(m.columnSettings[t]=o.helper.columnFactory(b,m.columnsSettingConflicts)),m.cellSettings[e]||(m.cellSettings[e]=[]),m.cellSettings[e][t]||(m.cellSettings[e][t]=new m.columnSettings[t]),i=m.cellSettings[e][t],i.row=e,i.col=t,i.prop=n,i.instance=C,o.hooks.run(C,"beforeGetCellMeta",e,t,i),o.helper.extend(i,c(i)),i.cells){var r=i.cells.call(i,e,t,n);r&&(o.helper.extend(i,r),o.helper.extend(i,c(r)))}return o.hooks.run(C,"afterGetCellMeta",e,t,i),i};var T=o.helper.cellMethodLookupFactory("renderer");this.getCellRenderer=function(e,t){var n=T.call(this,e,t);return o.renderers.getRenderer(n)},this.getCellEditor=o.helper.cellMethodLookupFactory("editor"),this.getCellValidator=o.helper.cellMethodLookupFactory("validator"),this.validateCells=function(e){var t=new r;t.onQueueEmpty=e;for(var o=C.countRows()-1;o>=0;){for(var n=C.countCols()-1;n>=0;)t.addValidatorToQueue(),C.validateCell(C.getDataAtCell(o,n),C.getCellMeta(o,n),function(){t.removeValidatorFormQueue()},"validateCells"),n--;o--}t.checkIfQueueIsEmpty()},this.getRowHeader=function(e){if(void 0===e){for(var t=[],o=0,n=C.countRows();n>o;o++)t.push(C.getRowHeader(o));return t}return"[object Array]"===Object.prototype.toString.call(m.settings.rowHeaders)&&void 0!==m.settings.rowHeaders[e]?m.settings.rowHeaders[e]:"function"==typeof m.settings.rowHeaders?m.settings.rowHeaders(e):m.settings.rowHeaders&&"string"!=typeof m.settings.rowHeaders&&"number"!=typeof m.settings.rowHeaders?e+1:m.settings.rowHeaders},this.hasRowHeaders=function(){return!!m.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==m.settings.colHeaders&&null!==m.settings.colHeaders)return!!m.settings.colHeaders;for(var e=0,t=C.countCols();t>e;e++)if(C.getColHeader(e))return!0;return!1},this.getColHeader=function(e){if(void 0===e){for(var t=[],n=0,i=C.countCols();i>n;n++)t.push(C.getColHeader(n));return t}var r=e;return e=o.hooks.execute(C,"modifyCol",e),m.settings.columns&&m.settings.columns[e]&&m.settings.columns[e].title?m.settings.columns[e].title:"[object Array]"===Object.prototype.toString.call(m.settings.colHeaders)&&void 0!==m.settings.colHeaders[e]?m.settings.colHeaders[e]:"function"==typeof m.settings.colHeaders?m.settings.colHeaders(e):m.settings.colHeaders&&"string"!=typeof m.settings.colHeaders&&"number"!=typeof m.settings.colHeaders?o.helper.spreadsheetColumnLabel(r):m.settings.colHeaders},this._getColWidthFromSettings=function(e){var t=C.getCellMeta(0,e),o=t.width;if((void 0===o||o===m.settings.width)&&(o=t.colWidths),void 0!==o&&null!==o){switch(typeof o){case"object":o=o[e];break;case"function":o=o(e)}"string"==typeof o&&(o=parseInt(o,10))}return o},this.getColWidth=function(e){var t=C._getColWidthFromSettings(e);return t||(t=50),t=o.hooks.execute(C,"modifyColWidth",t,e)},this._getRowHeightFromSettings=function(e){var t=m.settings.rowHeights;if(void 0!==t&&null!==t){switch(typeof t){case"object":t=t[e];break;case"function":t=t(e)}"string"==typeof t&&(t=parseInt(t,10))}return t},this.getRowHeight=function(e){var t=C._getRowHeightFromSettings(e),n=C.checkIfRowIsOversized(e);return t=o.hooks.execute(C,"modifyRowHeight",t,e),n&&(t=t?Math.max(t,n):n),t},this.checkIfRowIsOversized=function(e){return C.view.wt.wtTable.oversizedRows?C.view.wt.wtTable.oversizedRows[e]:void 0},this.countRows=function(){return m.settings.data.length},this.countCols=function(){return"object"===C.dataType||"function"===C.dataType?m.settings.columns&&m.settings.columns.length?m.settings.columns.length:g.colToPropCache.length:"array"===C.dataType?m.settings.columns&&m.settings.columns.length?m.settings.columns.length:m.settings.data&&m.settings.data[0]&&m.settings.data[0].length?m.settings.data[0].length:0:void 0},this.rowOffset=function(){return C.view.wt.getSetting("offsetRow")},this.colOffset=function(){return 0},this.countVisibleRows=function(){return C.view.wt.drawn?C.view.wt.wtTable.rowStrategy.countVisible():-1},this.countVisibleCols=function(){return C.view.wt.drawn?C.view.wt.wtTable.columnStrategy.countVisible():-1},this.countEmptyRows=function(e){for(var t=C.countRows()-1,n=0,i;t>=0;){if(i=o.hooks.execute(this,"modifyRow",t),C.isEmptyRow(i))n++;else if(e)break;t--}return n},this.countEmptyCols=function(e){if(C.countRows()<1)return 0;for(var t=C.countCols()-1,o=0;t>=0;){if(C.isEmptyCol(t))o++;else if(e)break;t--}return o},this.isEmptyRow=function(e){return m.settings.isEmptyRow.call(C,e)},this.isEmptyCol=function(e){return m.settings.isEmptyCol.call(C,e)},this.selectCell=function(e,t,o,n,i){if("number"!=typeof e||0>e||e>=C.countRows())return!1;if("number"!=typeof t||0>t||t>=C.countCols())return!1;if("undefined"!=typeof o){if("number"!=typeof o||0>o||o>=C.countRows())return!1;if("number"!=typeof n||0>n||n>=C.countCols())return!1}var r=new f(e,t);return m.selRange=new p(r,r,r),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),C.listen(),"undefined"==typeof o?y.setRangeEnd(m.selRange.from,i):y.setRangeEnd(new f(o,n),i),C.selection.finish(),!0},this.selectCellByProp=function(e,t,o,n,i){return arguments[1]=g.propToCol(arguments[1]),"undefined"!=typeof arguments[3]&&(arguments[3]=g.propToCol(arguments[3])),C.selectCell.apply(C,arguments)},this.deselectCell=function(){y.deselect()},this.destroy=function(){C._clearTimeouts(),C.view&&C.view.wt.destroy(),C.rootElement.empty(),C.rootElement.removeData("handsontable"),C.rootElement.off(".handsontable"),e(t).off("."+C.guid),S.off("."+C.guid),R.off("."+C.guid),o.hooks.run(C,"afterDestroy"),o.hooks.destroy(C);for(var n in C)C.hasOwnProperty(n)&&("function"==typeof C[n]?"runHooks"!==n&&"runHooksAndReturn"!==n&&(C[n]=d):"guid"!==n&&(C[n]=null));m=null,g=null,w=null,y=null,v=null,C=null,b=null,S=null,R=null},this.getActiveEditor=function(){return v.getActiveEditor()},this.getInstance=function(){return C},this.addHook=function(e,t){o.hooks.add(e,t,C)},this.addHookOnce=function(e,t){o.hooks.once(e,t,C)},this.removeHook=function(e,t){o.hooks.remove(e,t,C)},this.runHooks=function(e,t,n,i,r,s,l){o.hooks.run(C,e,t,n,i,r,s,l)},this.runHooksAndReturn=function(e,t,n,i,r,s,l){return o.hooks.execute(C,e,t,n,i,r,s,l)},this.timeouts=[],this._registerTimeout=function(e){this.timeouts.push(e)},this._clearTimeouts=function(){for(var e=0,t=this.timeouts.length;t>e;e++)clearTimeout(this.timeouts[e])},this.version="0.11.3"};var N=function(){};if(N.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,colWidths:void 0,columns:void 0,cells:void 0,cell:[],minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",currentRowClassName:void 0,currentColClassName:void 0,stretchH:"none",isEmptyRow:function(e){for(var t,o=0,n=this.countCols();n>o;o++)if(t=this.getDataAtCell(e,o),""!==t&&null!==t&&"undefined"!=typeof t)return!1;return!0},isEmptyCol:function(e){for(var t,o=0,n=this.countRows();n>o;o++)if(t=this.getDataAtCell(o,e),""!==t&&null!==t&&"undefined"!=typeof t)return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,type:"text",copyable:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0},o.DefaultSettings=N,e.fn.handsontable=function(e){var t,n,i,r,s,l=this.first(),a=l.data("handsontable");if("string"!=typeof e)return s=e||{},a?a.updateSettings(s):(a=new o.Core(l,s),l.data("handsontable",a),a.init()),l;if(i=[],arguments.length>1)for(t=1,n=arguments.length;n>t;t++)i.push(arguments[t]);if(a){if("undefined"==typeof a[e])throw new Error("Handsontable do not provide action: "+e);r=a[e].apply(a,i)}return r},function(e){function t(){function e(e){return null!==e&&!o(e)&&("string"==typeof e||"number"==typeof e)}function t(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function o(e){return e!==e}var n={arrayMap:[],weakMap:new WeakMap};return{get:function(o){return e(o)?n.arrayMap[o]:t(o)?n.weakMap.get(o):void 0},set:function(o,i){if(e(o))n.arrayMap[o]=i;else{if(!t(o))throw new Error("Invalid key type");n.weakMap.set(o,i)}},"delete":function(o){e(o)?delete n.arrayMap[o]:t(o)&&n.weakMap["delete"](o)}}}e.MultiMap||(e.MultiMap=t)}(t),!t.Handsontable)var o={};o.Dom={},o.Dom.closest=function(e,t,o){for(;null!=e&&e!==o;){if(1===e.nodeType&&t.indexOf(e.nodeName)>-1)return e;e=e.parentNode}return null},o.Dom.isChildOf=function(e,t){for(var o=e.parentNode;null!=o;){if(o==t)return!0;o=o.parentNode}return!1},o.Dom.index=function(e){for(var t=0;e=e.previousSibling;)++t;return t},document.documentElement.classList?(o.Dom.hasClass=function(e,t){return e.classList.contains(t)},o.Dom.addClass=function(e,t){e.classList.add(t)},o.Dom.removeClass=function(e,t){e.classList.remove(t)}):(o.Dom.hasClass=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},o.Dom.addClass=function(e,t){""==e.className?e.className=t:this.hasClass(e,t)||(e.className+=" "+t)},o.Dom.removeClass=function(e,t){if(this.hasClass(e,t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ").trim()}}),o.Dom.removeTextNodes=function(e,t){if(3===e.nodeType)t.removeChild(e);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(e.nodeName)>-1)for(var o=e.childNodes,n=o.length-1;n>=0;n--)this.removeTextNodes(o[n],e)},o.Dom.empty=function(e){for(var t;t=e.lastChild;)e.removeChild(t)},o.Dom.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,o.Dom.fastInnerHTML=function(e,t){this.HTML_CHARACTERS.test(t)?e.innerHTML=t:this.fastInnerText(e,t)},o.Dom.fastInnerText=document.createTextNode("test").textContent?function(e,t){var o=e.firstChild;o&&3===o.nodeType&&null===o.nextSibling?o.textContent=t:(this.empty(e),e.appendChild(document.createTextNode(t)))}:function(e,t){var o=e.firstChild;o&&3===o.nodeType&&null===o.nextSibling?o.data=t:(this.empty(e),e.appendChild(document.createTextNode(t)))},o.Dom.isVisible=function(e){for(var t=e;t!==document.documentElement;){if(null===t)return!1;if(11===t.nodeType){if(t.host){if(t.host.impl)return o.Dom.isVisible(t.host.impl);if(t.host)return o.Dom.isVisible(t.host);throw new Error("Lost in Web Components world")}return!1}if("none"===t.style.display)return!1;t=t.parentNode}return!0},o.Dom.offset=function(e){if(this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName){var o=e.getBoundingClientRect();return{top:o.top+(t.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),left:o.left+(t.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)}}for(var n=e.offsetLeft,i=e.offsetTop,r=e;(e=e.offsetParent)&&e!==document.body;)n+=e.offsetLeft,i+=e.offsetTop,r=e;return r&&"fixed"===r.style.position&&(n+=t.pageXOffset||document.documentElement.scrollLeft,i+=t.pageYOffset||document.documentElement.scrollTop),{left:n,top:i}},o.Dom.getWindowScrollTop=function(){var e=t.scrollY;return void 0==e&&(e=document.documentElement.scrollTop),e},o.Dom.getWindowScrollLeft=function(){var e=t.scrollX;return void 0==e&&(e=document.documentElement.scrollLeft),e},o.Dom.getScrollTop=function(e){return e===t?o.Dom.getWindowScrollTop(e):e.scrollTop},o.Dom.getScrollLeft=function(e){return e===t?o.Dom.getWindowScrollLeft(e):e.scrollLeft},o.Dom.getComputedStyle=function(e){return e.currentStyle||document.defaultView.getComputedStyle(e)},o.Dom.outerWidth=function(e){return e.offsetWidth},o.Dom.outerHeight=function(e){return this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName?e.offsetHeight+e.firstChild.offsetHeight:e.offsetHeight},o.Dom.innerHeight=function(e){return e.clientHeight},o.Dom.innerWidth=function(e){return e.innerWidth},function(){function e(){var e=document.createElement("TABLE");e.style.borderSpacing=0,e.style.borderWidth=0,e.style.padding=0;var t=document.createElement("TBODY");e.appendChild(t),t.appendChild(document.createElement("TR")),t.firstChild.appendChild(document.createElement("TD")),t.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var o=document.createElement("CAPTION");o.innerHTML="c<br>c<br>c<br>c",o.style.padding=0,o.style.margin=0,e.insertBefore(o,t),document.body.appendChild(e),n=e.offsetHeight<2*e.lastChild.offsetHeight,document.body.removeChild(e)}function t(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),(document.body||document.documentElement).appendChild(t);var o=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return o==n&&(n=t.clientWidth),(document.body||document.documentElement).removeChild(t),o-n}var n;o.Dom.hasCaptionProblem=function(){return void 0===n&&e(),n},o.Dom.getCaretPosition=function(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var o=e.createTextRange(),n=o.duplicate();return o.moveToBookmark(t.getBookmark()),n.setEndPoint("EndToStart",o),n.text.length}return 0},o.Dom.getSelectionEndPosition=function(e){if(e.selectionEnd)return e.selectionEnd;if(document.selection){var t=document.selection.createRange();if(null==t)return 0;var o=e.createTextRange();return o.text.indexOf(t.text)+t.text.length}},o.Dom.setCaretPosition=function(e,t,o){if(void 0===o&&(o=t),e.setSelectionRange)e.focus(),e.setSelectionRange(t,o);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",o),n.moveStart("character",t),n.select()}};var i;o.Dom.getScrollbarWidth=function(){return void 0===i&&(i=t()),i}}(),o.TableView=function(n){var i=this,r=e(document.documentElement);this.instance=n,this.settings=n.getSettings(),n.rootElement.data("originalStyle",n.rootElement[0].getAttribute("style")),n.rootElement.addClass("handsontable");var s=document.createElement("TABLE");s.className="htCore",this.THEAD=document.createElement("THEAD"),s.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),s.appendChild(this.TBODY),n.$table=e(s),n.container.prepend(n.$table),n.rootElement.on("mousedown.handsontable",function(e){i.isTextSelectionAllowed(e.target)||(a(),e.preventDefault(),t.focus())}),r.on("keyup."+n.guid,function(e){n.selection.isInProgress()&&!e.shiftKey&&n.selection.finish()});var l;this.isMouseDown=function(){return l},r.on("mouseup."+n.guid,function(e){n.selection.isInProgress()&&1===e.which&&n.selection.finish(),l=!1,o.helper.isOutsideInput(document.activeElement)&&n.unlisten()}),r.on("mousedown."+n.guid,function(e){var t=e.target;if(!l){if(t!==i.wt.wtTable.spreader)for(;t!==document.documentElement;){if(null===t)return;if(t===n.rootElement[0])return;t=t.parentNode}i.settings.outsideClickDeselects?n.deselectCell():n.destroyEditor()}}),n.$table.on("selectstart",function(e){i.settings.fragmentSelection||e.preventDefault()});var a=function(){t.getSelection?t.getSelection().empty?t.getSelection().empty():t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges():document.selection&&document.selection.empty()},c=[new x({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return i.settings.fillHandle&&!i.isCellEdited()&&!n.selection.isMultiple()}}}),new x({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return i.settings.fillHandle&&!i.isCellEdited()&&n.selection.isMultiple()}}}),new x({className:"highlight",highlightRowClassName:i.settings.currentRowClassName,highlightColumnClassName:i.settings.currentColClassName}),new x({className:"fill",border:{width:1,color:"red"}})];c.current=c[0],c.area=c[1],c.highlight=c[2],c.fill=c[3];var h={debug:function(){return i.settings.debug},table:s,stretchH:this.settings.stretchH,data:n.getDataAtCell,totalRows:n.countRows,totalColumns:n.countCols,offsetRow:0,fixedColumnsLeft:function(){return i.settings.fixedColumnsLeft},fixedRowsTop:function(){return i.settings.fixedRowsTop},renderAllRows:i.settings.renderAllRows,rowHeaders:function(){return n.hasRowHeaders()?[function(e,t){i.appendRowHeader(e,t)}]:[]},columnHeaders:function(){return n.hasColHeaders()?[function(e,t){i.appendColHeader(e,t)}]:[]},columnWidth:n.getColWidth,rowHeight:n.getRowHeight,cellRenderer:function(e,t,n){var r=i.instance.colToProp(t),s=i.instance.getCellMeta(e,t),l=i.instance.getCellRenderer(s),a=i.instance.getDataAtRowProp(e,r);l(i.instance,n,e,t,r,a,s),o.hooks.run(i.instance,"afterRenderer",n,e,t,r,a,s)},selections:c,hideBorderOnMouseDownOver:function(){return i.settings.fragmentSelection},onCellMouseDown:function(e,t,r,s){n.listen(),i.activeWt=s,l=!0,2===e.button&&n.selection.inInSelection(t)||(e.shiftKey?t.row>=0&&t.col>=0&&n.selection.setRangeEnd(t):t.row<0||t.col<0?(t.row<0&&n.selectCell(0,t.col,n.countRows()-1,t.col),t.col<0&&n.selectCell(t.row,0,t.row,n.countCols()-1)):n.selection.setRangeStart(t)),o.hooks.run(n,"afterOnCellMouseDown",e,t,r),i.activeWt=i.wt},onCellMouseOver:function(e,t,r,s){i.activeWt=s,t.row>=0&&t.col>=0&&l&&n.selection.setRangeEnd(t),o.hooks.run(n,"afterOnCellMouseOver",e,t,r),i.activeWt=i.wt},onCellCornerMouseDown:function(e){e.preventDefault(),o.hooks.run(n,"afterOnCellCornerMouseDown",e)},beforeDraw:function(e){i.beforeRender(e)},onDraw:function(e){i.onDraw(e)},onScrollVertically:function(){n.runHooks("afterScrollVertically")},onScrollHorizontally:function(){n.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(e,t){n.runHooks("beforeDrawBorders",e,t)}};o.hooks.run(n,"beforeInitWalkontable",h),this.wt=new w(h),this.activeWt=this.wt,e(i.wt.wtTable.spreader).on("mousedown.handsontable, contextmenu.handsontable",function(e){e.target===i.wt.wtTable.spreader&&3===e.which&&e.stopPropagation()}),r.on("click."+n.guid,function(){i.settings.observeDOMVisibility&&i.wt.drawInterrupted&&(i.instance.forceFullRender=!0,i.render())})},o.TableView.prototype.isTextSelectionAllowed=function(e){return o.helper.isInput(e)?!0:this.settings.fragmentSelection&&o.Dom.isChildOf(e,this.TBODY)?!0:!1},o.TableView.prototype.isCellEdited=function(){var e=this.instance.getActiveEditor();return e&&e.isOpened()},o.TableView.prototype.beforeRender=function(e){e&&o.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender)},o.TableView.prototype.onDraw=function(e){e&&o.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},o.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.rootElement.triggerHandler("render.handsontable")},o.TableView.prototype.getCellAtCoords=function(e){var t=this.wt.wtTable.getCell(e);return 0>t?null:t},o.TableView.prototype.scrollViewport=function(e){this.wt.scrollViewport(e)},o.TableView.prototype.appendRowHeader=function(e,t){var n=document.createElement("DIV"),i=document.createElement("SPAN");n.className="relative",i.className="rowHeader",e>-1?o.Dom.fastInnerHTML(i,this.instance.getRowHeader(e)):o.Dom.fastInnerText(i," "),n.appendChild(i),o.Dom.empty(t),t.appendChild(n),o.hooks.run(this.instance,"afterGetRowHeader",e,t)},o.TableView.prototype.appendColHeader=function(e,t){var n=document.createElement("DIV"),i=document.createElement("SPAN");n.className="relative",i.className="colHeader",o.Dom.fastInnerHTML(i,this.instance.getColHeader(e)),n.appendChild(i),o.Dom.empty(t),t.appendChild(n),o.hooks.run(this.instance,"afterGetColHeader",e,t)},o.TableView.prototype.maximumVisibleElementWidth=function(e){this.wt.wtScrollbars.horizontal.readWindowSize();var t=this.wt.wtViewport.getWorkspaceWidth(),o=t-e;return o>0?o:0},o.TableView.prototype.maximumVisibleElementHeight=function(e){this.wt.wtScrollbars.vertical.readWindowSize();var t=this.wt.wtViewport.getWorkspaceHeight(),o=t-e;return o>0?o:0},o.TableView.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},function(e){function t(e){var t,o;o={},t=e,this.getInstance=function(e){return e.guid in o||(o[e.guid]=new t(e)),o[e.guid]}}var o={},n=new WeakMap;e.editors={registerEditor:function(e,i){var r=new t(i);"string"==typeof e&&(o[e]=r),n.set(i,r)},getEditor:function(e,t){var i;if("function"==typeof e)n.get(e)||this.registerEditor(null,e),i=n.get(e);else{if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter ');i=o[e]}if(!i)throw Error('No editor registered under name "'+e+'"');return i.getInstance(t)}}}(o),function(t){t.EditorManager=function(o,n,i){var r=this,s=e(document),l=t.helper.keyCode,a=!1,c,h=function(){function e(e){if(o.isListening()&&(n.settings.beforeOnKeyDown&&n.settings.beforeOnKeyDown.call(o,e),t.hooks.run(o,"beforeKeyDown",e),!a&&!e.isImmediatePropagationStopped()&&(n.lastKeyCode=e.keyCode,i.isSelected()))){var s=(e.ctrlKey||e.metaKey)&&!e.altKey;if(!(c.isWaiting()||t.helper.isMetaKey(e.keyCode)||s||r.isEditorOpened()))return void r.openEditor("");var h=e.shiftKey?i.setRangeEnd:i.setRangeStart;switch(e.keyCode){case l.A:s&&(i.selectAll(),e.preventDefault(),e.stopPropagation());break;case l.ARROW_UP:r.isEditorOpened()&&!c.isWaiting()&&r.closeEditorAndSaveChanges(s),d(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case l.ARROW_DOWN:r.isEditorOpened()&&!c.isWaiting()&&r.closeEditorAndSaveChanges(s),p(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case l.ARROW_RIGHT:r.isEditorOpened()&&!c.isWaiting()&&r.closeEditorAndSaveChanges(s),m(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case l.ARROW_LEFT:r.isEditorOpened()&&!c.isWaiting()&&r.closeEditorAndSaveChanges(s),g(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case l.TAB:var w="function"==typeof n.settings.tabMoves?n.settings.tabMoves(e):n.settings.tabMoves;e.shiftKey?i.transformStart(-w.row,-w.col):i.transformStart(w.row,w.col,!0),e.preventDefault(),e.stopPropagation();break;case l.BACKSPACE:case l.DELETE:i.empty(e),r.prepareEditor(),e.preventDefault();break;case l.F2:r.openEditor(),e.preventDefault();break;case l.ENTER:r.isEditorOpened()?(c.state!==t.EditorState.WAITING&&r.closeEditorAndSaveChanges(s),u(e.shiftKey)):o.getSettings().enterBeginsEditing?r.openEditor():u(e.shiftKey),e.preventDefault(),e.stopImmediatePropagation();break;case l.ESCAPE:r.isEditorOpened()&&r.closeEditorAndRestoreOriginalValue(s),e.preventDefault();break;case l.HOME:h(e.ctrlKey||e.metaKey?new f(0,n.selRange.from.col):new f(n.selRange.from.row,0)),e.preventDefault(),e.stopPropagation();break;case l.END:h(e.ctrlKey||e.metaKey?new f(o.countRows()-1,n.selRange.from.col):new f(n.selRange.from.row,o.countCols()-1)),e.preventDefault(),e.stopPropagation();break;case l.PAGE_UP:i.transformStart(-o.countVisibleRows(),0),o.view.wt.scrollVertical(-o.countVisibleRows()),o.view.render(),e.preventDefault(),e.stopPropagation();break;case l.PAGE_DOWN:i.transformStart(o.countVisibleRows(),0),o.view.wt.scrollVertical(o.countVisibleRows()),o.view.render(),e.preventDefault(),e.stopPropagation()}}}function h(e,t,o){"TD"==o.nodeName&&r.openEditor()}function u(e){var t="function"==typeof n.settings.enterMoves?n.settings.enterMoves(event):n.settings.enterMoves;e?i.transformStart(-t.row,-t.col):i.transformStart(t.row,t.col,!0)}function d(e){e?i.transformEnd(-1,0):i.transformStart(-1,0)}function p(e){e?i.transformEnd(1,0):i.transformStart(1,0)}function m(e){e?i.transformEnd(0,1):i.transformStart(0,1)}function g(e){e?i.transformEnd(0,-1):i.transformStart(0,-1)}o.addHook("afterDocumentKeyDown",function(t){e(t)}),s.on("keydown."+o.guid,function(e){o.runHooks("afterDocumentKeyDown",e)}),o.view.wt.update("onCellDblClick",h),o.addHook("afterDestroy",function(){a=!0})};this.destroyEditor=function(e){this.closeEditor(e)},this.getActiveEditor=function(){return c},this.prepareEditor=function(){if(c&&c.isWaiting())return void this.closeEditor(!1,!1,function(e){e&&r.prepareEditor()});var e=n.selRange.highlight.row,i=n.selRange.highlight.col,s=o.colToProp(i),l=o.getCell(e,i),a=o.getDataAtCell(e,i),h=o.getCellMeta(e,i),u=o.getCellEditor(h);c=t.editors.getEditor(u,o),c.prepare(e,i,s,l,a,h)},this.isEditorOpened=function(){return c.isOpened()},this.openEditor=function(e){c.cellProperties.readOnly||c.beginEditing(e)},this.closeEditor=function(e,t,o){c?c.finishEditing(e,t,o):o&&o(!1)},this.closeEditorAndSaveChanges=function(e){return this.closeEditor(!1,e)},this.closeEditorAndRestoreOriginalValue=function(e){return this.closeEditor(!0,e)},h()}}(o),function(e){var t={};e.renderers={registerRenderer:function(e,o){t[e]=o},getRenderer:function(e){if("function"==typeof e)return e;if("string"!=typeof e)throw Error('Only strings and functions can be passed as "renderer" parameter ');if(!(e in t))throw Error('No editor registered under name "'+e+'"');return t[e]}}}(o),o.helper.isPrintableChar=function(e){return 32==e||e>=48&&57>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||e>=226||e>=65&&90>=e},o.helper.isMetaKey=function(e){var t=o.helper.keyCode,n=[t.ARROW_DOWN,t.ARROW_UP,t.ARROW_LEFT,t.ARROW_RIGHT,t.HOME,t.END,t.DELETE,t.BACKSPACE,t.F1,t.F2,t.F3,t.F4,t.F5,t.F6,t.F7,t.F8,t.F9,t.F10,t.F11,t.F12,t.TAB,t.PAGE_DOWN,t.PAGE_UP,t.ENTER,t.ESCAPE,t.SHIFT,t.CAPS_LOCK,t.ALT];return-1!=n.indexOf(e)},o.helper.isCtrlKey=function(e){var t=o.helper.keyCode;return-1!=[t.CONTROL_LEFT,224,t.COMMAND_LEFT,t.COMMAND_RIGHT].indexOf(e)},o.helper.stringify=function(e){switch(typeof e){case"string":case"number":return e+"";case"object":return null===e?"":e.toString();case"undefined":return"";default:return e.toString()}},o.helper.spreadsheetColumnLabel=function(e){for(var t=e+1,o="",n;t>0;)n=(t-1)%26,o=String.fromCharCode(65+n)+o,t=parseInt((t-n)/26,10);return o},o.helper.isNumeric=function(e){var t=typeof e;return"number"==t?!isNaN(e)&&isFinite(e):"string"==t?e.length?1==e.length?/\d/.test(e):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(e):!1:"object"==t?!(!e||"number"!=typeof e.valueOf()||e instanceof Date):!1},o.helper.isDescendant=function(e,t){for(var o=t.parentNode;null!=o;){if(o==e)return!0;o=o.parentNode}return!1},o.helper.randomString=function(){return b()},o.helper.inherit=function(e,t){return t.prototype.constructor=t,e.prototype=new t,e.prototype.constructor=e,e},o.helper.extend=function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},o.helper.getPrototypeOf=function(e){var t;if("object"==typeof e.__proto__)t=e.__proto__;else{var o,n=e.constructor;"function"==typeof e.constructor&&(o=n,delete e.constructor&&(n=e.constructor,e.constructor=o)),t=n?n.prototype:null}return t},o.helper.columnFactory=function(e,t){function n(){}o.helper.inherit(n,e);for(var i=0,r=t.length;r>i;i++)n.prototype[t[i]]=void 0;return n},o.helper.translateRowsToColumns=function(e){var t,o,n,i,r=[],s=0;for(t=0,o=e.length;o>t;t++)for(n=0,i=e[t].length;i>n;n++)n==s&&(r.push([]),s++),r[n].push(e[t][n]);return r},o.helper.to2dArray=function(e){for(var t=0,o=e.length;o>t;)e[t]=[e[t]],t++},o.helper.extendArray=function(e,t){for(var o=0,n=t.length;n>o;)e.push(t[o]),o++},o.helper.isInput=function(e){var t=["INPUT","SELECT","TEXTAREA"];return t.indexOf(e.nodeName)>-1
},o.helper.isOutsideInput=function(e){return o.helper.isInput(e)&&-1==e.className.indexOf("handsontableInput")},o.helper.keyCode={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},o.helper.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},o.helper.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"==Object.prototype.toString.call(e)},o.helper.pivot=function(e){var t=[];if(!e||0==e.length||!e[0]||0==e[0].length)return t;for(var o=e.length,n=e[0].length,i=0;o>i;i++)for(var r=0;n>r;r++)t[r]||(t[r]=[]),t[r][i]=e[i][r];return t},o.helper.proxy=function(e,t){return function(){return e.apply(t,arguments)}},o.helper.cellMethodLookupFactory=function(e,t){function n(e){var t=o.cellTypes[e];if("undefined"==typeof t)throw new Error('You declared cell type "'+e+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return t}return t="undefined"==typeof t?!0:t,function i(r,s){return function l(i){if(i){if(i.hasOwnProperty(e)&&void 0!==i[e])return i[e];if(i.hasOwnProperty("type")&&i.type){var r;if("string"!=typeof i.type)throw new Error("Cell type must be a string ");if(r=n(i.type),r.hasOwnProperty(e))return r[e];if(t)return}return l(o.helper.getPrototypeOf(i))}}("number"==typeof r?this.getCellMeta(r,s):r)}},o.helper.toString=function(e){return""+e},function(t){t.DataMap=function(e,t,o){this.instance=e,this.priv=t,this.GridSettings=o,this.dataSource=this.instance.getSettings().data,this.duckSchema=this.dataSource[0]?this.recursiveDuckSchema(this.dataSource[0]):{},this.createMap()},t.DataMap.prototype.DESTINATION_RENDERER=1,t.DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,t.DataMap.prototype.recursiveDuckSchema=function(t){var o;if(e.isPlainObject(t)){o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]=e.isPlainObject(t[n])?this.recursiveDuckSchema(t[n]):null)}else o=[];return o},t.DataMap.prototype.recursiveDuckColumns=function(t,o,n){var i,r;if("undefined"==typeof o&&(o=0,n=""),e.isPlainObject(t))for(r in t)t.hasOwnProperty(r)&&(null===t[r]?(i=n+r,this.colToPropCache.push(i),this.propToColCache.set(i,o),o++):o=this.recursiveDuckColumns(t[r],o,r+"."));return o},t.DataMap.prototype.createMap=function(){if("undefined"==typeof this.getSchema())throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");var e,t,o=this.getSchema();this.colToPropCache=[],this.propToColCache=new MultiMap;var n=this.instance.getSettings().columns;if(n)for(e=0,t=n.length;t>e;e++)"undefined"!=typeof n[e].data&&(this.colToPropCache[e]=n[e].data,this.propToColCache.set(n[e].data,e));else this.recursiveDuckColumns(o)},t.DataMap.prototype.colToProp=function(e){return e=t.hooks.execute(this.instance,"modifyCol",e),this.colToPropCache&&"undefined"!=typeof this.colToPropCache[e]?this.colToPropCache[e]:e},t.DataMap.prototype.propToCol=function(e){var o;return o="undefined"!=typeof this.propToColCache.get(e)?this.propToColCache.get(e):e,o=t.hooks.execute(this.instance,"modifyCol",o)},t.DataMap.prototype.getSchema=function(){var e=this.instance.getSettings().dataSchema;return e?"function"==typeof e?e():e:this.duckSchema},t.DataMap.prototype.createRow=function(o,n,i){var r,s=this.instance.countCols(),l=0,a;n||(n=1),("number"!=typeof o||o>=this.instance.countRows())&&(o=this.instance.countRows()),a=o;for(var c=this.instance.getSettings().maxRows;n>l&&this.instance.countRows()<c;){if("array"===this.instance.dataType){r=[];for(var h=0;s>h;h++)r.push(null)}else r="function"===this.instance.dataType?this.instance.getSettings().dataSchema(o):e.extend(!0,{},this.getSchema());o===this.instance.countRows()?this.dataSource.push(r):this.dataSource.splice(o,0,r),l++,a++}return t.hooks.run(this.instance,"afterCreateRow",o,l,i),this.instance.forceFullRender=!0,l},t.DataMap.prototype.createCol=function(e,o,n){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var i=this.instance.countRows(),r=this.dataSource,s,l=0,a;o||(o=1),a=e;for(var c=this.instance.getSettings().maxCols;o>l&&this.instance.countCols()<c;){if(s=t.helper.columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof e||e>=this.instance.countCols()){for(var h=0;i>h;h++)"undefined"==typeof r[h]&&(r[h]=[]),r[h].push(null);this.priv.columnSettings.push(s)}else{for(var h=0;i>h;h++)r[h].splice(a,0,null);this.priv.columnSettings.splice(a,0,s)}l++,a++}return t.hooks.run(this.instance,"afterCreateCol",e,l,n),this.instance.forceFullRender=!0,l},t.DataMap.prototype.removeRow=function(e,o){o||(o=1),"number"!=typeof e&&(e=-o),e=(this.instance.countRows()+e)%this.instance.countRows();var n=this.physicalRowsToLogical(e,o),i=t.hooks.execute(this.instance,"beforeRemoveRow",e,o);if(i!==!1){var r=this.dataSource,s=r.filter(function(e,t){return-1==n.indexOf(t)});r.length=0,Array.prototype.push.apply(r,s),t.hooks.run(this.instance,"afterRemoveRow",e,o),this.instance.forceFullRender=!0}},t.DataMap.prototype.removeCol=function(e,o){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");o||(o=1),"number"!=typeof e&&(e=-o),e=(this.instance.countCols()+e)%this.instance.countCols();var n=t.hooks.execute(this.instance,"beforeRemoveCol",e,o);if(n!==!1){for(var i=this.dataSource,r=0,s=this.instance.countRows();s>r;r++)i[r].splice(e,o);this.priv.columnSettings.splice(e,o),t.hooks.run(this.instance,"afterRemoveCol",e,o),this.instance.forceFullRender=!0}},t.DataMap.prototype.spliceCol=function(e,o,n){var i=4<=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getDataAtCol(e),s=r.slice(o,o+n),l=r.slice(o+n);t.helper.extendArray(i,l);for(var a=0;n>a;)i.push(null),a++;return t.helper.to2dArray(i),this.instance.populateFromArray(o,e,i,null,null,"spliceCol"),s},t.DataMap.prototype.spliceRow=function(e,o,n){var i=4<=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getSourceDataAtRow(e),s=r.slice(o,o+n),l=r.slice(o+n);t.helper.extendArray(i,l);for(var a=0;n>a;)i.push(null),a++;return this.instance.populateFromArray(e,o,[i],null,null,"spliceRow"),s},t.DataMap.prototype.get=function(e,o){if(e=t.hooks.execute(this.instance,"modifyRow",e),"string"==typeof o&&o.indexOf(".")>-1){var n=o.split("."),i=this.dataSource[e];if(!i)return null;for(var r=0,s=n.length;s>r;r++)if(i=i[n[r]],"undefined"==typeof i)return null;return i}return"function"==typeof o?o(this.dataSource.slice(e,e+1)[0]):this.dataSource[e]?this.dataSource[e][o]:null};var o=t.helper.cellMethodLookupFactory("copyable",!1);t.DataMap.prototype.getCopyable=function(e,t){return o.call(this.instance,e,this.propToCol(t))?this.get(e,t):""},t.DataMap.prototype.set=function(e,o,n,i){if(e=t.hooks.execute(this.instance,"modifyRow",e,i||"datamapGet"),"string"==typeof o&&o.indexOf(".")>-1){for(var r=o.split("."),s=this.dataSource[e],l=0,a=r.length-1;a>l;l++)"undefined"==typeof s[r[l]]&&(s[r[l]]={}),s=s[r[l]];s[r[l]]=n}else"function"==typeof o?o(this.dataSource.slice(e,e+1)[0],n):this.dataSource[e][o]=n},t.DataMap.prototype.physicalRowsToLogical=function(e,o){for(var n=this.instance.countRows(),i=(n+e)%n,r=[],s=o,l;n>i&&s;)l=t.hooks.execute(this.instance,"modifyRow",i),r.push(l),s--,i++;return r},t.DataMap.prototype.clear=function(){for(var e=0;e<this.instance.countRows();e++)for(var t=0;t<this.instance.countCols();t++)this.set(e,this.colToProp(t),"")},t.DataMap.prototype.getAll=function(){return this.dataSource},t.DataMap.prototype.getRange=function(e,t,o){var n,i,r,s,l=[],a,c=o===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(i=Math.max(e.row,t.row),s=Math.max(e.col,t.col),n=Math.min(e.row,t.row);i>=n;n++){for(a=[],r=Math.min(e.col,t.col);s>=r;r++)a.push(c.call(this,n,this.colToProp(r)));l.push(a)}return l},t.DataMap.prototype.getText=function(e,t){return SheetClip.stringify(this.getRange(e,t,this.DESTINATION_RENDERER))},t.DataMap.prototype.getCopyableText=function(e,t){return SheetClip.stringify(this.getRange(e,t,this.DESTINATION_CLIPBOARD_GENERATOR))}}(o),function(e){e.renderers.cellDecorator=function(t,o,n,i,r,s,l){l.className&&(o.className=o.className?o.className+" "+l.className:l.className),l.readOnly&&e.Dom.addClass(o,l.readOnlyCellClassName),l.valid===!1&&l.invalidCellClassName&&e.Dom.addClass(o,l.invalidCellClassName),l.wordWrap===!1&&l.noWordWrapClassName&&e.Dom.addClass(o,l.noWordWrapClassName),!s&&l.placeholder&&e.Dom.addClass(o,l.placeholderCellClassName)}}(o),function(e){var t=function(t,o,n,i,r,s,l){e.renderers.cellDecorator.apply(this,arguments),!s&&l.placeholder&&(s=l.placeholder);var a=e.helper.stringify(s);if(l.rendererTemplate){e.Dom.empty(o);var c=document.createElement("TEMPLATE");c.setAttribute("bind","{{}}"),c.innerHTML=l.rendererTemplate,HTMLTemplateElement.decorate(c),c.model=t.getSourceDataAtRow(n),o.appendChild(c)}else e.Dom.fastInnerText(o,a)};e.renderers.TextRenderer=t,e.renderers.registerRenderer("text",t)}(o),function(e){var t=document.createElement("DIV");t.className="htAutocompleteWrapper";var o=document.createElement("DIV");o.className="htAutocompleteArrow",o.appendChild(document.createTextNode("▼"));var n=function(t,o){o.innerHTML=t.innerHTML,e.Dom.empty(t),t.appendChild(o)},i=function(n,i,r,s,l,a,c){var h=t.cloneNode(!0),u=o.cloneNode(!0);e.renderers.TextRenderer(n,i,r,s,l,a,c),i.appendChild(u),e.Dom.addClass(i,"htAutocomplete"),i.firstChild||i.appendChild(document.createTextNode(" ")),n.acArrowListener||(n.acArrowListener=function(){n.view.wt.getSetting("onCellDblClick",null,new f(r,s),i)},n.rootElement.on("mousedown.htAutocompleteArrow",".htAutocompleteArrow",n.acArrowListener),n.addHookOnce("afterDestroy",function(){this.rootElement.off("mousedown.htAutocompleteArrow")}))};e.AutocompleteRenderer=i,e.renderers.AutocompleteRenderer=i,e.renderers.registerRenderer("autocomplete",i)}(o),function(t){var o=document.createElement("INPUT");o.className="htCheckboxRendererInput",o.type="checkbox",o.setAttribute("autocomplete","off");var n=function(n,i,r,s,l,a,c){"undefined"==typeof c.checkedTemplate&&(c.checkedTemplate=!0),"undefined"==typeof c.uncheckedTemplate&&(c.uncheckedTemplate=!1),t.Dom.empty(i);var h=o.cloneNode(!1);a===c.checkedTemplate||a===t.helper.stringify(c.checkedTemplate)?(h.checked=!0,i.appendChild(h)):a===c.uncheckedTemplate||a===t.helper.stringify(c.uncheckedTemplate)?i.appendChild(h):null===a?(h.className+=" noValue",i.appendChild(h)):t.Dom.fastInnerText(i,"#bad value#");var u=e(h);c.readOnly?u.on("click",function(e){e.preventDefault()}):(u.on("mousedown",function(e){e.stopPropagation()}),u.on("mouseup",function(e){e.stopPropagation()}),u.on("change",function(){this.checked?n.setDataAtRowProp(r,l,c.checkedTemplate):n.setDataAtRowProp(r,l,c.uncheckedTemplate)})),n.CheckboxRenderer&&n.CheckboxRenderer.beforeKeyDownHookBound||(n.CheckboxRenderer={beforeKeyDownHookBound:!0},n.addHook("beforeKeyDown",function(o){if(o.keyCode==t.helper.keyCode.SPACE)for(var i,r,s,l=n.getSelectedRange(),a=l.getTopLeftCorner(),c=l.getBottomRightCorner(),h=a.row;h<=c.row;h++)for(var u=a.col;u<=c.col;u++)if(i=n.getCell(h,u),s=n.getCellMeta(h,u),r=i.querySelectorAll("input[type=checkbox]"),r.length>0&&!s.readOnly){o.isImmediatePropagationStopped()||(o.stopImmediatePropagation(),o.preventDefault());for(var d=0,f=r.length;f>d;d++)r[d].checked=!r[d].checked,e(r[d]).trigger("change")}}))};t.CheckboxRenderer=n,t.renderers.CheckboxRenderer=n,t.renderers.registerRenderer("checkbox",n)}(o),function(e){var t=function(t,o,n,i,r,s,l){e.helper.isNumeric(s)&&("undefined"!=typeof l.language&&numeral.language(l.language),s=numeral(s).format(l.format||"0"),e.Dom.addClass(o,"htNumeric")),e.renderers.TextRenderer(t,o,n,i,r,s,l)};e.NumericRenderer=t,e.renderers.NumericRenderer=t,e.renderers.registerRenderer("numeric",t)}(o),function(e){var t=function(e,t,n,i,r,s,l){o.renderers.TextRenderer.apply(this,arguments),s=t.innerHTML;var a,c=l.hashLength||s.length,h=l.hashSymbol||"*";for(a="";a.split(h).length-1<c;a+=h);o.Dom.fastInnerHTML(t,a)};e.PasswordRenderer=t,e.renderers.PasswordRenderer=t,e.renderers.registerRenderer("password",t)}(o),function(e){function t(t,o,n,i,r,s,l){e.renderers.cellDecorator.apply(this,arguments),e.Dom.fastInnerHTML(o,s)}e.renderers.registerRenderer("html",t),e.renderers.HtmlRenderer=t}(o),function(e){function t(t){this.instance=t,this.state=e.EditorState.VIRGIN,this._opened=!1,this._closeCallback=null,this.init()}e.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},t.prototype._fireCallbacks=function(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)},t.prototype.init=function(){},t.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},t.prototype.setValue=function(e){throw Error("Editor setValue() method unimplemented")},t.prototype.open=function(){throw Error("Editor open() method unimplemented")},t.prototype.close=function(){throw Error("Editor close() method unimplemented")},t.prototype.prepare=function(t,o,n,i,r,s){this.TD=i,this.row=t,this.col=o,this.prop=n,this.originalValue=r,this.cellProperties=s,this.state=e.EditorState.VIRGIN},t.prototype.extend=function(){function e(){o.apply(this,arguments)}function t(e,t){function o(){}return o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e,e}var o=this.constructor;return t(e,o)},t.prototype.saveValue=function(e,t){if(t){var o=this.instance.getSelected(),n;o[0]>o[2]&&(n=o[0],o[0]=o[2],o[2]=n),o[1]>o[3]&&(n=o[1],o[1]=o[3],o[3]=n),this.instance.populateFromArray(o[0],o[1],e,o[2],o[3],"edit")}else this.instance.populateFromArray(this.row,this.col,e,null,null,"edit")},t.prototype.beginEditing=function(t){this.state==e.EditorState.VIRGIN&&(this.instance.view.scrollViewport(new f(this.row,this.col)),this.instance.view.render(),this.state=e.EditorState.EDITING,t="string"==typeof t?t:this.originalValue,this.setValue(e.helper.stringify(t)),this.open(),this._opened=!0,this.focus(),this.instance.view.render())},t.prototype.finishEditing=function(t,o,n){if(n){var i=this._closeCallback;this._closeCallback=function(e){i&&i(e),n(e)}}if(!this.isWaiting()){if(this.state==e.EditorState.VIRGIN){var r=this;return void this.instance._registerTimeout(setTimeout(function(){r._fireCallbacks(!0)},0))}if(this.state==e.EditorState.EDITING){if(t)return void this.cancelChanges();var s=[[String.prototype.trim.call(this.getValue())]];if(this.state=e.EditorState.WAITING,this.saveValue(s,o),this.instance.getCellValidator(this.cellProperties)){var r=this;this.instance.addHookOnce("afterValidate",function(t){r.state=e.EditorState.FINISHED,r.discardEditor(t)})}else this.state=e.EditorState.FINISHED,this.discardEditor(!0)}}},t.prototype.cancelChanges=function(){this.state=e.EditorState.FINISHED,this.discardEditor()},t.prototype.discardEditor=function(t){this.state===e.EditorState.FINISHED&&(t===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=e.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this.state=e.EditorState.VIRGIN,this._fireCallbacks(!0)))},t.prototype.isOpened=function(){return this._opened},t.prototype.isWaiting=function(){return this.state===e.EditorState.WAITING},e.editors.BaseEditor=t}(o),function(t){var o=t.editors.BaseEditor.prototype.extend();o.prototype.init=function(){this.createElements(),this.bindEvents(),this.autoResize=L()},o.prototype.getValue=function(){return this.TEXTAREA.value},o.prototype.setValue=function(e){this.TEXTAREA.value=e};var n=function i(e){var o=this,n=o.getActiveEditor(),i=t.helper.keyCode,r=(e.ctrlKey||e.metaKey)&&!e.altKey;if(e.target===n.TEXTAREA&&!e.isImmediatePropagationStopped()){if(17===e.keyCode||224===e.keyCode||91===e.keyCode||93===e.keyCode)return void e.stopImmediatePropagation();switch(e.keyCode){case i.ARROW_RIGHT:t.Dom.getCaretPosition(n.TEXTAREA)!==n.TEXTAREA.value.length&&e.stopImmediatePropagation();break;case i.ARROW_LEFT:0!==t.Dom.getCaretPosition(n.TEXTAREA)&&e.stopImmediatePropagation();break;case i.ENTER:var s=n.instance.getSelected(),l=!(s[0]===s[2]&&s[1]===s[3]);(r&&!l||e.altKey)&&(n.isOpened()?(n.setValue(n.getValue()+"\n"),n.focus()):n.beginEditing(n.originalValue+"\n"),e.stopImmediatePropagation()),e.preventDefault();break;case i.A:case i.X:case i.C:case i.V:r&&e.stopImmediatePropagation();break;case i.BACKSPACE:case i.DELETE:case i.HOME:case i.END:e.stopImmediatePropagation()}}};o.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",n)},o.prototype.close=function(){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",n)},o.prototype.focus=function(){this.TEXTAREA.focus(),t.Dom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},o.prototype.createElements=function(){this.$body=e(document.body),this.TEXTAREA=document.createElement("TEXTAREA"),this.$textarea=e(this.TEXTAREA),t.Dom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),t.Dom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);var o=this;this.instance._registerTimeout(setTimeout(function(){o.refreshDimensions()},0))},o.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},o.prototype.getEditedCell=function(){var e=this.checkEditorSection(),t;switch(e){case"top":t=this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"corner":t=this.instance.view.wt.wtScrollbars.corner.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":t=this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:t=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return-1!=t&&-2!=t?t:void 0},o.prototype.refreshDimensions=function(){if(this.state===t.EditorState.EDITING&&(this.TD=this.getEditedCell(),this.TD)){var o=e(this.TD),n=t.Dom.offset(this.TD),i=t.Dom.offset(this.instance.rootElement[0]),r=n.top-i.top-1,s=n.left-i.left-1,l=this.instance.getSettings(),a=l.rowHeaders===!1?0:1,c=l.colHeaders===!1?0:1,h=this.checkEditorSection();0>r&&(r=0),0>s&&(s=0),a>0&&parseInt(o.css("border-top-width"),10)>0&&(r+=1),c>0&&parseInt(o.css("border-left-width"),10)>0&&(s+=1),this.textareaParentStyle.top=r+"px",this.textareaParentStyle.left=s+"px";var u=this.TD.offsetTop,d=this.TD.offsetLeft-this.instance.view.wt.wtScrollbars.horizontal.getScrollPosition(),f=o.width(),p=this.instance.view.maximumVisibleElementWidth(d)-10,m=o.outerHeight()-4,g=this.instance.view.maximumVisibleElementHeight(u)-2;parseInt(o.css("border-top-width"),10)>0&&(m-=1),parseInt(o.css("border-left-width"),10)>0&&a>0&&(f-=1),this.TEXTAREA.style.fontSize=t.Dom.getComputedStyle(this.TD).fontSize,this.TEXTAREA.style.fontFamily=t.Dom.getComputedStyle(this.TD).fontFamily,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(m,g),maxHeight:g,minWidth:Math.min(f,p),maxWidth:p}),this.textareaParentStyle.display="block"}},o.prototype.bindEvents=function(){var e=this;this.$textarea.on("cut.editor",function(e){e.stopPropagation()}),this.$textarea.on("paste.editor",function(e){e.stopPropagation()}),this.instance.addHook("afterScrollVertically",function(){e.refreshDimensions()})},t.editors.TextEditor=o,t.editors.registerEditor("text",t.editors.TextEditor)}(o),function(t){var o=t.editors.BaseEditor.prototype.extend();o.prototype.beginEditing=function(){var t=this.TD.querySelector('input[type="checkbox"]');t&&e(t).trigger("click")},o.prototype.finishEditing=function(){},o.prototype.init=function(){},o.prototype.open=function(){},o.prototype.close=function(){},o.prototype.getValue=function(){},o.prototype.setValue=function(){},o.prototype.focus=function(){},t.editors.CheckboxEditor=o,t.editors.registerEditor("checkbox",o)}(o),function(t){var o=t.editors.TextEditor.prototype.extend();o.prototype.init=function(){if(!e.datepicker)throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?");t.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var o=this;this.instance.addHook("afterDestroy",function(){o.destroyElements()})},o.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.datePicker=document.createElement("DIV"),t.Dom.addClass(this.datePicker,"htDatepickerHolder"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=99,document.body.appendChild(this.datePicker),this.$datePicker=e(this.datePicker);var o=this,n={dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,onSelect:function(e){o.setValue(e),o.finishEditing(!1)}};this.$datePicker.datepicker(n),this.$datePicker.on("mousedown",function(e){e.stopPropagation()}),this.hideDatepicker()},o.prototype.destroyElements=function(){this.$datePicker.datepicker("destroy"),this.$datePicker.remove()},o.prototype.open=function(){t.editors.TextEditor.prototype.open.call(this),this.showDatepicker()},o.prototype.finishEditing=function(e,o){this.hideDatepicker(),t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},o.prototype.showDatepicker=function(){var t=e(this.TD),o=t.offset();this.datePickerStyle.top=o.top+t.height()+"px",this.datePickerStyle.left=o.left+"px";var n={defaultDate:this.originalValue||void 0};e.extend(n,this.cellProperties),this.$datePicker.datepicker("option",n),this.originalValue&&this.$datePicker.datepicker("setDate",this.originalValue),this.datePickerStyle.display="block"},o.prototype.hideDatepicker=function(){this.datePickerStyle.display="none"},t.editors.DateEditor=o,t.editors.registerEditor("date",o)}(o),function(t){var o=t.editors.TextEditor.prototype.extend();o.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments);var o=document.createElement("DIV");o.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(o),this.$htContainer=e(o),this.$htContainer.handsontable()},o.prototype.prepare=function(o,n,i,r,s,l){t.editors.TextEditor.prototype.prepare.apply(this,arguments);var a=this,c={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){var e=this.getValue();void 0!==e&&a.setValue(e),a.instance.destroyEditor()}};this.cellProperties.handsontable&&(c=e.extend(c,l.handsontable)),this.$htContainer.handsontable("destroy"),this.$htContainer.handsontable(c)};var n=function(e){if(!e.isImmediatePropagationStopped()){var o=this.getActiveEditor(),n=o.$htContainer.handsontable("getInstance"),i;if(e.keyCode==t.helper.keyCode.ARROW_DOWN)if(n.getSelected()){var r=n.getSelected()[0],s=n.countRows()-1;i=Math.min(s,r+1)}else i=0;else if(e.keyCode==t.helper.keyCode.ARROW_UP&&n.getSelected()){var r=n.getSelected()[0];i=r-1}void 0!==i&&(0>i?n.deselectCell():n.selectCell(i,0),e.preventDefault(),e.stopImmediatePropagation(),o.instance.listen(),o.TEXTAREA.focus())}};o.prototype.open=function(){this.instance.addHook("beforeKeyDown",n),t.editors.TextEditor.prototype.open.apply(this,arguments),this.$htContainer.handsontable("render"),this.cellProperties.strict?(this.$htContainer.handsontable("selectCell",0,0),this.TEXTAREA.style.visibility="hidden"):(this.$htContainer.handsontable("deselectCell"),this.TEXTAREA.style.visibility="visible"),t.Dom.setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length)},o.prototype.close=function(){this.instance.removeHook("beforeKeyDown",n),this.instance.listen(),t.editors.TextEditor.prototype.close.apply(this,arguments)},o.prototype.focus=function(){this.instance.listen(),t.editors.TextEditor.prototype.focus.apply(this,arguments)},o.prototype.beginEditing=function(e){var o=this.instance.getSettings().onBeginEditing;o&&o()===!1||t.editors.TextEditor.prototype.beginEditing.apply(this,arguments)},o.prototype.finishEditing=function(e,o){if(this.$htContainer.handsontable("isListening")&&this.instance.listen(),this.$htContainer.handsontable("getSelected")){var n=this.$htContainer.handsontable("getInstance").getValue();void 0!==n&&this.setValue(n)}return t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},t.editors.HandsontableEditor=o,t.editors.registerEditor("handsontable",o)}(o),function(e){var o=e.editors.HandsontableEditor.prototype.extend();o.prototype.init=function(){e.editors.HandsontableEditor.prototype.init.apply(this,arguments),this.query=null,this.choices=[]},o.prototype.createElements=function(){e.editors.HandsontableEditor.prototype.createElements.apply(this,arguments);var o=function(){return-1!=t.navigator.platform.indexOf("Mac")?"htMacScroll":""};this.$htContainer.addClass("autocompleteEditor"),this.$htContainer.addClass(o())};var n=!1,i=function(t){n=!1;var o=this.getActiveEditor(),i=e.helper.keyCode;(e.helper.isPrintableChar(t.keyCode)||t.keyCode===i.BACKSPACE||t.keyCode===i.DELETE||t.keyCode===i.INSERT)&&o.instance._registerTimeout(setTimeout(function(){o.queryChoices(o.TEXTAREA.value),n=!0},0))};o.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",i),e.editors.HandsontableEditor.prototype.prepare.apply(this,arguments)},o.prototype.open=function(){e.editors.HandsontableEditor.prototype.open.apply(this,arguments),this.TEXTAREA.style.visibility="visible",this.focus();var t=this.$htContainer.handsontable("getInstance"),o=this;t.updateSettings({colWidths:[e.Dom.outerWidth(this.TEXTAREA)-2],afterRenderer:function(e,t,n,i,r){var s=this.getCellMeta(t,n).filteringCaseSensitive===!0,l=s?r.indexOf(this.query):r.toLowerCase().indexOf(o.query.toLowerCase());if(-1!=l){var a=r.substr(l,o.query.length);e.innerHTML=r.replace(a,"<strong>"+a+"</strong>")}}}),n&&(n=!1),o.instance._registerTimeout(setTimeout(function(){o.queryChoices(o.TEXTAREA.value)},0))},o.prototype.close=function(){e.editors.HandsontableEditor.prototype.close.apply(this,arguments)},o.prototype.queryChoices=function(t){if(this.query=t,"function"==typeof this.cellProperties.source){var o=this;this.cellProperties.source(t,function(e){o.updateChoicesList(e)})}else if(e.helper.isArray(this.cellProperties.source)){var n;if(t&&this.cellProperties.filter!==!1){var i=this.cellProperties.filteringCaseSensitive===!0,r=t.toLowerCase();n=this.cellProperties.source.filter(function(e){return i?-1!=e.indexOf(t):-1!=e.toLowerCase().indexOf(r)})}else n=this.cellProperties.source;this.updateChoicesList(n)}else this.updateChoicesList([])},o.prototype.updateChoicesList=function(t){var o=e.Dom.getCaretPosition(this.TEXTAREA),n=e.Dom.getSelectionEndPosition(this.TEXTAREA);this.choices=t,this.$htContainer.handsontable("loadData",e.helper.pivot([t])),this.$htContainer.handsontable("updateSettings",{height:this.getDropdownHeight()}),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(),this.instance.listen(),this.TEXTAREA.focus(),e.Dom.setCaretPosition(this.TEXTAREA,o,o!=n?n:void 0)},o.prototype.finishEditing=function(t){t||this.instance.removeHook("beforeKeyDown",i),e.editors.HandsontableEditor.prototype.finishEditing.apply(this,arguments)},o.prototype.highlightBestMatchingChoice=function(){var e=this.findBestMatchingChoice();"undefined"==typeof e&&this.cellProperties.allowInvalid===!1&&(e=0),"undefined"==typeof e?this.$htContainer.handsontable("deselectCell"):this.$htContainer.handsontable("selectCell",e,0)},o.prototype.findBestMatchingChoice=function(){for(var e={},t=this.getValue().length,o,n,i,r=0,s=this.choices.length;s>r;r++)o=this.choices[r],n=t>0?o.indexOf(this.getValue()):o===this.getValue()?0:-1,-1!=n&&(i=o.length-n-t,("undefined"==typeof e.indexOfValue||e.indexOfValue>n||e.indexOfValue==n&&e.charsLeft>i)&&(e.indexOfValue=n,e.charsLeft=i,e.index=r));return e.index},o.prototype.getDropdownHeight=function(){var e=this.$htContainer.handsontable("getInstance").getRowHeight(0)||23;return this.choices.length>=10?10*e:this.choices.length*e+8;return 230},e.editors.AutocompleteEditor=o,e.editors.registerEditor("autocomplete",o)}(o),function(t){var o=t.editors.TextEditor.prototype.extend();o.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.$textarea=e(this.TEXTAREA),t.Dom.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)},t.editors.PasswordEditor=o,t.editors.registerEditor("password",o)}(o),function(e){var t=e.editors.BaseEditor.prototype.extend();t.prototype.init=function(){this.select=document.createElement("SELECT"),e.Dom.addClass(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement[0].appendChild(this.select)},t.prototype.prepare=function(){e.editors.BaseEditor.prototype.prepare.apply(this,arguments);var t=this.cellProperties.selectOptions,o;o=this.prepareOptions("function"==typeof t?t(this.row,this.col,this.prop):t),e.Dom.empty(this.select);for(var n in o)if(o.hasOwnProperty(n)){var i=document.createElement("OPTION");i.value=n,e.Dom.fastInnerHTML(i,o[n]),this.select.appendChild(i)}},t.prototype.prepareOptions=function(t){var o={};if(e.helper.isArray(t))for(var n=0,i=t.length;i>n;n++)o[t[n]]=t[n];else"object"==typeof t&&(o=t);return o},t.prototype.getValue=function(){return this.select.value},t.prototype.setValue=function(e){this.select.value=e};var o=function(t){var o=this,n=o.getActiveEditor();switch(t.keyCode){case e.helper.keyCode.ARROW_UP:var i=n.select.find("option:selected").prev();1==i.length&&i.prop("selected",!0),t.stopImmediatePropagation(),t.preventDefault();break;case e.helper.keyCode.ARROW_DOWN:var r=n.select.find("option:selected").next();1==r.length&&r.prop("selected",!0),t.stopImmediatePropagation(),t.preventDefault()}};t.prototype.open=function(){var t=e.Dom.outerWidth(this.TD),n=e.Dom.outerHeight(this.TD),i=e.Dom.offset(this.instance.rootElement[0]),r=e.Dom.offset(this.TD);this.select.style.height=n+"px",this.select.style.minWidth=t+"px",this.select.style.top=r.top-i.top+"px",this.select.style.left=r.left-i.left+"px",this.select.style.margin="0px",this.select.style.display="",this.instance.addHook("beforeKeyDown",o)},t.prototype.close=function(){this.select.style.display="none",this.instance.removeHook("beforeKeyDown",o)},t.prototype.focus=function(){this.select.focus()},e.editors.SelectEditor=t,e.editors.registerEditor("select",t)}(o),function(e){var t=e.editors.AutocompleteEditor.prototype.extend();
t.prototype.prepare=function(){e.editors.AutocompleteEditor.prototype.prepare.apply(this,arguments),this.cellProperties.filter=!1,this.cellProperties.strict=!0},e.editors.DropdownEditor=t,e.editors.registerEditor("dropdown",t)}(o),o.NumericValidator=function(e,t){null===e&&(e=""),t(/^-?\d*(\.|\,)?\d*$/.test(e))};var I=function(e,t){var o=e,n="string"==typeof o?o.toLowerCase():null;return function(e){for(var i=!1,r=0,s=e.length;s>r;r++){if(o===e[r]){i=!0;break}if(n===e[r].toLowerCase()){i=!0;break}}t(i)}};o.AutocompleteValidator=function(e,t){this.strict&&this.source?"function"==typeof this.source?this.source(e,I(e,t)):I(e,t)(this.source):t(!0)},o.AutocompleteCell={editor:o.editors.AutocompleteEditor,renderer:o.renderers.AutocompleteRenderer,validator:o.AutocompleteValidator},o.CheckboxCell={editor:o.editors.CheckboxEditor,renderer:o.renderers.CheckboxRenderer},o.TextCell={editor:o.editors.TextEditor,renderer:o.renderers.TextRenderer},o.NumericCell={editor:o.editors.TextEditor,renderer:o.renderers.NumericRenderer,validator:o.NumericValidator,dataType:"number"},o.DateCell={editor:o.editors.DateEditor,renderer:o.renderers.AutocompleteRenderer},o.HandsontableCell={editor:o.editors.HandsontableEditor,renderer:o.renderers.AutocompleteRenderer},o.PasswordCell={editor:o.editors.PasswordEditor,renderer:o.renderers.PasswordRenderer,copyable:!1},o.DropdownCell={editor:o.editors.DropdownEditor,renderer:o.renderers.AutocompleteRenderer,validator:o.AutocompleteValidator},o.cellTypes={text:o.TextCell,date:o.DateCell,numeric:o.NumericCell,checkbox:o.CheckboxCell,autocomplete:o.AutocompleteCell,handsontable:o.HandsontableCell,password:o.PasswordCell,dropdown:o.DropdownCell},o.cellLookup={validator:{numeric:o.NumericValidator,autocomplete:o.AutocompleteValidator}};var L=function(){var e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},n,i=document.body,r=document.createTextNode(""),s=document.createElement("SPAN"),l=function(e,o,n){t.attachEvent?e.attachEvent("on"+o,n):e.addEventListener(o,n,!1)},a=function(e,o,n){t.detachEvent?e.detachEvent("on"+o,n):e.removeEventListener(o,n,!1)},c=function(){void 0!==r.textContent?r.textContent=n.value:r.data=n.value,s.style.fontSize=o.Dom.getComputedStyle(n).fontSize,s.style.fontFamily=o.Dom.getComputedStyle(n).fontFamily,i.appendChild(s);var t=s.clientWidth;i.removeChild(s),n.style.height=e.minHeight+"px",n.style.width=e.minWidth>t?e.minWidth+"px":t>e.maxWidth?e.maxWidth+"px":t+"px";var l=n.scrollHeight;e.minHeight>l?n.style.height=e.minHeight+"px":e.maxHeight<l?(n.style.height=e.maxHeight+"px",n.style.overflowY="visible"):n.style.height=l+"px"},h=function(){t.setTimeout(c,0)},u=function(t){if(t&&t.minHeight)if("inherit"==t.minHeight)e.minHeight=n.clientHeight;else{var o=parseInt(t.minHeight);isNaN(o)||(e.minHeight=o)}if(t&&t.maxHeight)if("inherit"==t.maxHeight)e.maxHeight=n.clientHeight;else{var i=parseInt(t.maxHeight);isNaN(i)||(e.maxHeight=i)}if(t&&t.minWidth)if("inherit"==t.minWidth)e.minWidth=n.clientWidth;else{var l=parseInt(t.minWidth);isNaN(l)||(e.minWidth=l)}if(t&&t.maxWidth)if("inherit"==t.maxWidth)e.maxWidth=n.clientWidth;else{var a=parseInt(t.maxWidth);isNaN(a)||(e.maxWidth=a)}s.firstChild||(s.className="autoResize",s.style.display="inline-block",s.appendChild(r))},d=function(t,o){n=t,u(o),"TEXTAREA"==n.nodeName&&(n.style.resize="none",n.style.overflowY="",n.style.height=e.minHeight+"px",n.style.minWidth=e.minWidth+"px",n.style.maxWidth=e.maxWidth+"px",n.style.overflowY="hidden"),l(n,"change",c),l(n,"cut",h),l(n,"paste",h),l(n,"drop",h),l(n,"keydown",h),c()};return{init:function(e,t){d(e,t)},unObserve:function(){a(n,"change",c),a(n,"cut",h),a(n,"paste",h),a(n,"drop",h),a(n,"keydown",h)}}};!function(e){function t(e){return e.split('"').length-1}e.SheetClip={parse:function(e){var o,n,i,r=[],s=0,l,a,c,h;for(i=e.split("\n"),i.length>1&&""===i[i.length-1]&&i.pop(),o=0,n=i.length;n>o;o+=1){for(i[o]=i[o].split("	"),l=0,a=i[o].length;a>l;l+=1)r[s]||(r[s]=[]),c&&0===l?(h=r[s].length-1,r[s][h]=r[s][h]+"\n"+i[o][0],c&&1&t(i[o][0])&&(c=!1,r[s][h]=r[s][h].substring(0,r[s][h].length-1).replace(/""/g,'"'))):l===a-1&&0===i[o][l].indexOf('"')?(r[s].push(i[o][l].substring(1).replace(/""/g,'"')),c=!0):(r[s].push(i[o][l].replace(/""/g,'"')),c=!1);c||(s+=1)}return r},stringify:function(e){var t,o,n,i,r="",s;for(t=0,o=e.length;o>t;t+=1){for(n=0,i=e[t].length;i>n;n+=1)n>0&&(r+="	"),s=e[t][n],r+="string"==typeof s?s.indexOf("\n")>-1?'"'+s.replace(/"/g,'""')+'"':s:null===s||void 0===s?"":s;o-1>t&&(r+="\n")}return r}}}(t);var W=function(){var e;return{getInstance:function(){return e?e.hasBeenDestroyed()&&e.init():e=new n,e.refCounter++,e}}}();n.prototype.init=function(){var e=this,t,o;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],this.listenerElement=document.documentElement,o=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("DIV"),this.elDiv.id="CopyPasteDiv",t=this.elDiv.style,t.position="fixed",t.top="-10000px",t.left="-10000px",o.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",t=this.elTextarea.style,t.width="10000px",t.height="10000px",t.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof t.opacity&&(t.opacity=0)),this.keydownListener=function(t){var o=!1;if(t.metaKey?o=!0:t.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(o=!0),o){if(document.activeElement!==e.elTextarea&&(""!=e.getSelectionText()||-1!=["INPUT","SELECT","TEXTAREA"].indexOf(document.activeElement.nodeName)))return;e.selectNodeText(e.elTextarea),setTimeout(function(){e.selectNodeText(e.elTextarea)},0)}!o||67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode||(88===t.keyCode?setTimeout(function(){e.triggerCut(t)},0):86===t.keyCode&&setTimeout(function(){e.triggerPaste(t)},0))},this._bindEvent(this.listenerElement,"keydown",this.keydownListener)},n.prototype.selectNodeText=function(e){e.select()},n.prototype.getSelectionText=function(){var e="";return t.getSelection?e=t.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},n.prototype.copyable=function(e){if("string"!=typeof e&&void 0===e.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=e},n.prototype.onCut=function(e){this.cutCallbacks.push(e)},n.prototype.onPaste=function(e){this.pasteCallbacks.push(e)},n.prototype.removeCallback=function(e){var t,o;for(t=0,o=this.copyCallbacks.length;o>t;t++)if(this.copyCallbacks[t]===e)return this.copyCallbacks.splice(t,1),!0;for(t=0,o=this.cutCallbacks.length;o>t;t++)if(this.cutCallbacks[t]===e)return this.cutCallbacks.splice(t,1),!0;for(t=0,o=this.pasteCallbacks.length;o>t;t++)if(this.pasteCallbacks[t]===e)return this.pasteCallbacks.splice(t,1),!0;return!1},n.prototype.triggerCut=function(e){var t=this;t.cutCallbacks&&setTimeout(function(){for(var o=0,n=t.cutCallbacks.length;n>o;o++)t.cutCallbacks[o](e)},50)},n.prototype.triggerPaste=function(e,t){var o=this;o.pasteCallbacks&&setTimeout(function(){for(var n=(t||o.elTextarea.value).replace(/\n$/,""),i=0,r=o.pasteCallbacks.length;r>i;i++)o.pasteCallbacks[i](n,e)},50)},n.prototype.destroy=function(){this.hasBeenDestroyed()||0!=--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),this._unbindEvent(this.listenerElement,"keydown",this.keydownListener))},n.prototype.hasBeenDestroyed=function(){return!this.refCounter},n.prototype._bindEvent=function(){return t.jQuery?function(t,o,n){e(t).on(o+".copypaste",n)}:function(e,t,o){e.addEventListener(t,o,!1)}}(),n.prototype._unbindEvent=function(){return t.jQuery?function(t,o,n){e(t).off(o+".copypaste",n)}:function(e,t,o){e.removeEventListener(t,o,!1)}}();var B;!function(e){function o(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function n(e,t){var i;for(var r in e)if(e.hasOwnProperty(r)){if(e[r]===t)return o(r)+"/";if("object"==typeof e[r]&&(i=n(e[r],t),""!=i))return o(r)+"/"+i}return""}function i(e,t){if(e===t)return"/";var o=n(e,t);if(""===o)throw new Error("Object not found in root");return"/"+o}function r(e){for(var t=0,o=y.length;o>t;t++)if(y[t].obj===e)return y[t]}function s(e,t){for(var o=0,n=e.observers.length;n>o;o++)if(e.observers[o].callback===t)return e.observers[o].observer}function l(e,t){for(var o=0,n=e.observers.length;n>o;o++)if(e.observers[o].observer===t)return void e.observers.splice(o,1)}function a(e,t){d(t),Object.observe?u(t,e):clearTimeout(t.next);var o=r(e);l(o,t)}function c(e,o){var n=[],l=e,a,c=r(e);if(c?a=s(c,o):(c=new v(e),y.push(c)),a)return a;if(Object.observe)a=function(t){u(a,e),h(a,e);for(var r=0,s=t.length;s>r;){if(("length"!==t[r].name||!S(t[r].object))&&"__Jasmine_been_here_before__"!==t[r].name){var c=t[r].type;switch(c){case"new":c="add";break;case"deleted":c="delete";break;case"updated":c="update"}w[c].call(t[r],n,i(l,t[r].object))}r++}n&&o&&o(n),a.patches=n,n=[]};else if(a={},c.value=JSON.parse(JSON.stringify(e)),o){a.callback=o,a.next=null;var f=this.intervals||[100,1e3,1e4,6e4],p=0,m=function(){d(a)},g=function(){clearTimeout(a.next),a.next=setTimeout(function(){m(),p=0,a.next=setTimeout(b,f[p++])},0)},b=function(){m(),p==f.length&&(p=f.length-1),a.next=setTimeout(b,f[p++])};"undefined"!=typeof t&&(t.addEventListener?(t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("keydown",g)):(t.attachEvent("onmousedown",g),t.attachEvent("onmouseup",g),t.attachEvent("onkeydown",g))),a.next=setTimeout(b,f[p++])}return a.patches=n,a.object=e,c.observers.push(new C(o,a)),h(a,e)}function h(e,t){if(Object.observe){Object.observe(t,e);for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];n&&"object"==typeof n&&h(e,n)}}return e}function u(e,t){if(Object.observe){Object.unobserve(t,e);for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];n&&"object"==typeof n&&u(e,n)}}return e}function d(e){if(Object.observe)Object.deliverChangeRecords(e);else{for(var t,o=0,n=y.length;n>o;o++)if(y[o].obj===e.object){t=y[o];break}f(t.value,e.object,e.patches,"")}var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function f(e,t,n,i){for(var r=b(t),s=b(e),l=!1,a=!1,c=s.length-1;c>=0;c--){var h=s[c],u=e[h];if(t.hasOwnProperty(h)){var d=t[h];u instanceof Object?f(u,d,n,i+"/"+o(h)):u!=d&&(l=!0,n.push({op:"replace",path:i+"/"+o(h),value:d}),e[h]=d)}else n.push({op:"remove",path:i+"/"+o(h)}),delete e[h],a=!0}if(a||r.length!=s.length)for(var c=0;c<r.length;c++){var h=r[c];e.hasOwnProperty(h)||(n.push({op:"add",path:i+"/"+o(h),value:t[h]}),e[h]=JSON.parse(JSON.stringify(t[h])))}}function p(e,t){for(var o=!1,n=0,i=t.length,r;i>n;){r=t[n];for(var s=r.path.split("/"),l=e,a=1,c=s.length;;)if(S(l)){var h=parseInt(s[a],10);if(a++,a>=c){o=g[r.op].call(r,l,h,e);break}l=l[h]}else{var u=s[a];if(-1!=u.indexOf("~")&&(u=u.replace(/~1/g,"/").replace(/~0/g,"~")),a++,a>=c){o=m[r.op].call(r,l,u,e);break}l=l[u]}n++}return o}var m={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,o){var n={op:"_get",path:this.from};return p(o,[n]),p(o,[{op:"remove",path:this.from}]),p(o,[{op:"add",path:this.path,value:n.value}]),!0},copy:function(e,t,o){var n={op:"_get",path:this.from};return p(o,[n]),p(o,[{op:"add",path:this.path,value:n.value}]),!0},test:function(e,t){return JSON.stringify(e[t])===JSON.stringify(this.value)},_get:function(e,t){this.value=e[t]}},g={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:m.move,copy:m.copy,test:m.test,_get:m._get},w={add:function(e,t){var n={op:"add",path:t+o(this.name),value:this.object[this.name]};e.push(n)},"delete":function(e,t){var n={op:"remove",path:t+o(this.name)};e.push(n)},update:function(e,t){var n={op:"replace",path:t+o(this.name),value:this.object[this.name]};e.push(n)}},y=[];e.intervals;var v=function(){function e(e){this.observers=[],this.obj=e}return e}(),C=function(){function e(e,t){this.callback=e,this.observer=t}return e}();e.unobserve=a,e.observe=c,e.generate=d;var b;b=Object.keys?Object.keys:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t};var S;S=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=p}(B||(B={})),"undefined"!=typeof exports&&(exports.apply=B.apply,exports.observe=B.observe,exports.unobserve=B.unobserve,exports.generate=B.generate),o.PluginHookClass=function(){function e(){this.hooks=t(),this.globalBucket={},this.legacy=n}var t=function(){return{beforeInitWalkontable:[],beforeInit:[],beforeRender:[],beforeSetRangeEnd:[],beforeDrawBorders:[],beforeChange:[],beforeChangeRender:[],beforeRemoveCol:[],beforeRemoveRow:[],beforeValidate:[],beforeGetCellMeta:[],beforeAutofill:[],beforeKeyDown:[],afterInit:[],afterLoadData:[],afterUpdateSettings:[],afterRender:[],afterRenderer:[],afterChange:[],afterValidate:[],afterGetCellMeta:[],afterSetCellMeta:[],afterGetColHeader:[],afterGetRowHeader:[],afterDestroy:[],afterRemoveRow:[],afterCreateRow:[],afterRemoveCol:[],afterCreateCol:[],afterDeselect:[],afterSelection:[],afterSelectionByProp:[],afterSelectionEnd:[],afterSelectionEndByProp:[],afterOnCellMouseDown:[],afterOnCellMouseOver:[],afterOnCellCornerMouseDown:[],afterScrollVertically:[],afterScrollHorizontally:[],afterCellMetaReset:[],afterIsMultipleSelectionCheck:[],afterDocumentKeyDown:[],modifyColWidth:[],modifyRowHeight:[],modifyRow:[],modifyCol:[]}},n={onBeforeChange:"beforeChange",onChange:"afterChange",onCreateRow:"afterCreateRow",onCreateCol:"afterCreateCol",onSelection:"afterSelection",onCopyLimit:"afterCopyLimit",onSelectionEnd:"afterSelectionEnd",onSelectionByProp:"afterSelectionByProp",onSelectionEndByProp:"afterSelectionEndByProp"};return e.prototype.getBucket=function(e){return e?(e.pluginHookBucket||(e.pluginHookBucket={}),e.pluginHookBucket):this.globalBucket},e.prototype.add=function(e,t,i){if(o.helper.isArray(t))for(var r=0,s=t.length;s>r;r++)this.add(e,t[r]);else{e in n&&(e=n[e]);var l=this.getBucket(i);"undefined"==typeof l[e]&&(l[e]=[]),t.skip=!1,-1==l[e].indexOf(t)&&l[e].push(t)}return this},e.prototype.once=function(e,t,n){if(o.helper.isArray(t))for(var i=0,r=t.length;r>i;i++)t[i].runOnce=!0,this.add(e,t[i],n);else t.runOnce=!0,this.add(e,t,n)},e.prototype.remove=function(e,t,o){var i=!1;e in n&&(e=n[e]);var r=this.getBucket(o);if("undefined"!=typeof r[e])for(var s=0,l=r[e].length;l>s;s++)if(r[e][s]==t){r[e][s].skip=!0,i=!0;break}return i},e.prototype.run=function(e,t,o,i,r,s,l,a){t in n&&(t=n[t]),this._runBucket(this.globalBucket,e,t,o,i,r,s,l,a),this._runBucket(this.getBucket(e),e,t,o,i,r,s,l,a)},e.prototype._runBucket=function(e,t,o,n,i,r,s,l,a){var c=e[o];if(c)for(var h=0,u=c.length;u>h;h++)c[h].skip||(c[h].call(t,n,i,r,s,l,a),c[h].runOnce&&this.remove(o,c[h],e===this.globalBucket?null:t))},e.prototype.destroy=function(e){var t=this.getBucket(e);for(var o in t)if(t.hasOwnProperty(o))for(var n=0,i=t[o].length;i>n;n++)this.remove(o,t[o],e)},e.prototype.execute=function(e,t,o,i,r,s,l,a){return t in n&&(t=n[t]),o=this._executeBucket(this.globalBucket,e,t,o,i,r,s,l,a),o=this._executeBucket(this.getBucket(e),e,t,o,i,r,s,l,a)},e.prototype._executeBucket=function(e,t,o,n,i,r,s,l,a){var c,h=e[o];if(h)for(var u=0,d=h.length;d>u;u++)if(!h[u].skip&&(c=h[u].call(t,n,i,r,s,l,a),void 0!==c&&(n=c),h[u].runOnce&&this.remove(o,h[u],e===this.globalBucket?null:t),c===!1))return!1;return n},e.prototype.register=function(e){this.isRegistered(e)||(this.hooks[e]=[])},e.prototype.deregister=function(e){delete this.hooks[e]},e.prototype.isRegistered=function(e){return"undefined"!=typeof this.hooks[e]},e.prototype.getRegistered=function(){return Object.keys(this.hooks)},e}(),o.hooks=new o.PluginHookClass,o.PluginHooks=o.hooks,function(e){function t(){function t(e){var t=document,o=this;o.table=t.createElement("table"),o.theadTh=t.createElement("th"),o.table.appendChild(t.createElement("thead")).appendChild(t.createElement("tr")).appendChild(o.theadTh),o.tableStyle=o.table.style,o.tableStyle.tableLayout="auto",o.tableStyle.width="auto",o.tbody=t.createElement("tbody"),o.table.appendChild(o.tbody),o.container=t.createElement("div"),o.container.className=e.rootElement[0].className+" hidden",o.containerStyle=o.container.style,o.container.appendChild(o.table)}var n=this,i=5;this.beforeInit=function(){var e=this;e.autoColumnWidths=[],e.getSettings().autoColumnSize!==!1?e.autoColumnSizeTmp||(e.autoColumnSizeTmp={table:null,tableStyle:null,theadTh:null,tbody:null,container:null,containerStyle:null,determineBeforeNextRender:!0},e.addHook("beforeRender",o.determineIfChanged),e.addHook("modifyColWidth",o.modifyColWidth),e.addHook("afterDestroy",o.afterDestroy),e.determineColumnWidth=n.determineColumnWidth):e.autoColumnSizeTmp&&(e.removeHook("beforeRender",o.determineIfChanged),e.removeHook("modifyColWidth",o.modifyColWidth),e.removeHook("afterDestroy",o.afterDestroy),delete e.determineColumnWidth,n.afterDestroy.call(e))},this.determineIfChanged=function(e){e&&o.determineColumnsWidth.apply(this,arguments)},this.determineColumnWidth=function(o){var n=this,r=n.autoColumnSizeTmp;r.container||t.call(r,n),r.container.className=n.rootElement[0].className+" htAutoColumnSize",r.table.className=n.$table[0].className;for(var s=n.countRows(),l={},a=0,c=0;s>c;c++){var h=e.helper.stringify(n.getDataAtCell(c,o)),u=h.length;u>a&&(a=u),l[u]||(l[u]={needed:i,strings:[]}),l[u].needed&&(l[u].strings.push({value:h,row:c}),l[u].needed--)}var d=n.getSettings();d.colHeaders&&n.view.appendColHeader(o,r.theadTh),e.Dom.empty(r.tbody);for(var f in l)if(l.hasOwnProperty(f))for(var p=0,m=l[f].strings.length;m>p;p++){var g=l[f].strings[p].row,w=n.getCellMeta(g,o);w.col=o,w.row=g;var y=n.getCellRenderer(w),v=document.createElement("tr"),C=document.createElement("td");y(n,C,g,o,n.colToProp(o),l[f].strings[p].value,w),c++,v.appendChild(C),r.tbody.appendChild(v)}var b=n.rootElement[0].parentNode;b.appendChild(r.container);var S=e.Dom.outerWidth(r.table);return b.removeChild(r.container),S},this.determineColumnsWidth=function(){var e=this,t=this.getSettings();if(t.autoColumnSize||!t.colWidths)for(var o=this.countCols(),i=0;o>i;i++)e._getColWidthFromSettings(i)||(this.autoColumnWidths[i]=n.determineColumnWidth.call(e,i))},this.modifyColWidth=function(e,t){return this.autoColumnWidths[t]&&this.autoColumnWidths[t]>e?this.autoColumnWidths[t]:e},this.afterDestroy=function(){var e=this;e.autoColumnSizeTmp&&e.autoColumnSizeTmp.container&&e.autoColumnSizeTmp.container.parentNode&&e.autoColumnSizeTmp.container.parentNode.removeChild(e.autoColumnSizeTmp.container),e.autoColumnSizeTmp=null}}var o=new t;e.hooks.add("beforeInit",o.beforeInit),e.hooks.add("afterUpdateSettings",o.beforeInit)}(o);var V=new i;o.hooks.add("afterInit",function(){V.init.call(this,"afterInit")}),o.hooks.add("afterUpdateSettings",function(){V.init.call(this,"afterUpdateSettings")}),o.hooks.add("modifyRow",V.translateRow),o.hooks.add("afterGetColHeader",V.getColHeader),o.hooks.register("beforeColumnSort"),o.hooks.register("afterColumnSort"),function(t){function o(e,t){return-1!=e.indexOf(t)?e:(e=e.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),e+=" "+t)}function n(e,t){return-1!=e.indexOf(t)?e:(e=e.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),e+=" "+t)}function i(e,t,i,r){var s=this.getCellMeta(e,t),l=r;s.className&&(l="vertical"===i?o(s.className,r):n(s.className,r)),this.setCellMeta(e,t,"className",l),this.render()}function r(e,t,o){if(e.from.row==e.to.row&&e.from.col==e.to.col)i.call(this,e.from.row,e.from.col,t,o);else for(var n=e.from.row;n<=e.to.row;n++)for(var r=e.from.col;r<=e.to.col;r++)i.call(this,n,r,t,o)}function s(e,o){this.instance=e;var n=this;n.menus=[],n.triggerRows=[],this.enabled=!0,this.instance.addHook("afterDestroy",function(){n.destroy()}),this.defaultOptions={items:[{key:"row_above",name:"Insert row above",callback:function(e,t){this.alter("insert_row",t.start.row)},disabled:function(){var e=this.getSelected(),t=[0,e[1],this.view.wt.wtTable.getRowStrategy().cellCount-1,e[1]],o=t.join(",")==e.join(",");return e[0]<0||this.countRows()>=this.getSettings().maxRows||o}},{key:"row_below",name:"Insert row below",callback:function(e,t){this.alter("insert_row",t.end.row+1)},disabled:function(){var e=this.getSelected(),t=[0,e[1],this.view.wt.wtTable.getRowStrategy().cellCount-1,e[1]],o=t.join(",")==e.join(",");return this.getSelected()[0]<0||this.countRows()>=this.getSettings().maxRows||o}},s.SEPARATOR,{key:"col_left",name:"Insert column on the left",callback:function(e,t){this.alter("insert_col",t.start.col)},disabled:function(){var e=this.getSelected(),t=[e[0],0,e[0],this.view.wt.wtTable.getColumnStrategy().cellCount-1],o=t.join(",")==e.join(",");return this.getSelected()[1]<0||this.countCols()>=this.getSettings().maxCols||o}},{key:"col_right",name:"Insert column on the right",callback:function(e,t){this.alter("insert_col",t.end.col+1)},disabled:function(){var e=this.getSelected(),t=[e[0],0,e[0],this.view.wt.wtTable.getColumnStrategy().cellCount-1],o=t.join(",")==e.join(",");return e[1]<0||this.countCols()>=this.getSettings().maxCols||o}},s.SEPARATOR,{key:"remove_row",name:"Remove row",callback:function(e,t){var o=t.end.row-t.start.row+1;this.alter("remove_row",t.start.row,o)},disabled:function(){var e=this.getSelected(),t=[0,e[1],this.view.wt.wtTable.getRowStrategy().cellCount-1,e[1]],o=t.join(",")==e.join(",");return e[0]<0||o}},{key:"remove_col",name:"Remove column",callback:function(e,t){var o=t.end.col-t.start.col+1;this.alter("remove_col",t.start.col,o)},disabled:function(){var e=this.getSelected(),t=[e[0],0,e[0],this.view.wt.wtTable.getColumnStrategy().cellCount-1],o=t.join(",")==e.join(",");return e[1]<0||o}},s.SEPARATOR,{key:"undo",name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},{key:"redo",name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}},s.SEPARATOR,{key:"make_read_only",name:function(){var e="Read only",t=n.checkSelectionReadOnlyConsistency(this);return t&&(e=n.markSelected(e)),e},callback:function(){var e=n.checkSelectionReadOnlyConsistency(this),t=this;this.getSelectedRange().forAll(function(o,n){t.getCellMeta(o,n).readOnly=e?!1:!0}),this.render()}},s.SEPARATOR,{key:"alignment",name:"Alignment",submenu:{items:[{name:function(){var e="Left",t=n.checkSelectionAlignment(this,"htLeft");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htLeft")},disabled:!1},{name:function(){var e="Center",t=n.checkSelectionAlignment(this,"htCenter");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htCenter")},disabled:!1},{name:function(){var e="Right",t=n.checkSelectionAlignment(this,"htRight");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htRight")},disabled:!1},{name:function(){var e="Justify",t=n.checkSelectionAlignment(this,"htJustify");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htJustify")},disabled:!1},s.SEPARATOR,{name:function(){var e="Top",t=n.checkSelectionAlignment(this,"htTop");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"vertical","htTop")},disabled:!1},{name:function(){var e="Middle",t=n.checkSelectionAlignment(this,"htMiddle");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"vertical","htMiddle")},disabled:!1},{name:function(){var e="Bottom",t=n.checkSelectionAlignment(this,"htBottom");return t&&(e=n.markSelected(e)),e},callback:function(){r.call(this,this.getSelectedRange(),"vertical","htBottom")},disabled:!1}]}}]},n.options={},t.helper.extend(n.options,this.options),this.bindMouseEvents(),this.markSelected=function(e){return"<span class='selected'>✓</span>"+e},this.checkSelectionAlignment=function(e,t){var o=!1;return e.getSelectedRange().forAll(function(n,i){var r=e.getCellMeta(n,i).className;return r&&-1!=r.indexOf(t)?(o=!0,!1):void 0}),o},this.checkSelectionReadOnlyConsistency=function(e){var t=!1;return e.getSelectedRange().forAll(function(o,n){return e.getCellMeta(o,n).readOnly?(t=!0,!1):void 0}),t},t.hooks.run(e,"afterContextMenuDefaultOptions",this.defaultOptions)}function l(e,t){for(var o=0,n=e.length;n>o;o++)if(e[o].key===t)return e[o]}function a(){if(!this.rootElement[0].className.indexOf("htContextMenu")){for(var e=0,t=0,o=this.getSettings().data.length,n=0;o>n;n++)this.getSettings().data[n].name==s.SEPARATOR?e+=2:t+=26;this.view.wt.wtScrollbars.vertical.fixedContainer.style.height=t+e+"px"}}function c(){var e=this,o=e.getSettings().contextMenu,n=t.helper.isObject(o)?o:{};o?(e.contextMenu||(e.contextMenu=new s(e,n)),e.contextMenu.enable()):e.contextMenu&&(e.contextMenu.destroy(),delete e.contextMenu)}s.prototype.createMenu=function(o,n){o&&(o=o.replace(/ /g,"_"),o="htContextSubMenu_"+o);var i;return i=o?e("body > .htContextMenu."+o)[0]:e("body > .htContextMenu")[0],i||(i=document.createElement("DIV"),t.Dom.addClass(i,"htContextMenu"),o&&t.Dom.addClass(i,o),document.getElementsByTagName("body")[0].appendChild(i)),this.menus.indexOf(i)<0&&(this.menus.push(i),n=n||0,this.triggerRows.push(n)),i},s.prototype.bindMouseEvents=function(){function o(o){var n=this.instance.getSettings();this.closeAll(),o.preventDefault(),o.stopPropagation();var i=this.instance.getSettings().rowHeaders,r=this.instance.getSettings().colHeaders;if(i||r||"TD"==o.target.nodeName||t.Dom.hasClass(o.target,"current")&&t.Dom.hasClass(o.target,"wtBorder")){var l=this.createMenu(),a=this.getItems(n.contextMenu);this.show(l,a),this.setMenuPosition(o,l),e(document).on("mousedown.htContextMenu",t.helper.proxy(s.prototype.closeAll,this))}}this.instance.rootElement.on("contextmenu.htContextMenu",t.helper.proxy(o,this))},s.prototype.bindTableEvents=function(){var e=this;this._afterScrollCallback=function(){},this.instance.addHook("afterScrollVertically",this._afterScrollCallback),this.instance.addHook("afterScrollHorizontally",this._afterScrollCallback)},s.prototype.unbindTableEvents=function(){this._afterScrollCallback&&(this.instance.removeHook("afterScrollVertically",this._afterScrollCallback),this.instance.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},s.prototype.performAction=function(t,o){var n=this,i=e(o).handsontable("getInstance"),r=i.getSelected()[0],l=i.getData()[r];if(l.disabled!==!0&&("function"!=typeof l.disabled||l.disabled.call(this.instance)!==!0)&&!l.hasOwnProperty("submenu")){if("function"!=typeof l.callback)return;var a=this.instance.getSelectedRange(),c=s.utils.normalizeSelection(a);l.callback.call(this.instance,l.key,c,t),n.closeAll()}},s.prototype.unbindMouseEvents=function(){this.instance.rootElement.off("contextmenu.htContextMenu"),e(document).off("mousedown.htContextMenu")},s.prototype.show=function(o,n){o.removeAttribute("style"),o.style.display="block";var i=this;e(o).off("mousedown.htContextMenu").on("mousedown.htContextMenu",function(e){i.performAction(e,o)}),e(o).handsontable({data:n,colHeaders:!1,colWidths:[200],readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:t.helper.proxy(this.renderer,this)}],beforeKeyDown:function(e){i.onBeforeKeyDown(e,o)},afterOnCellMouseOver:function(e,t,n){i.onCellMouseOver(e,t,n,o)},renderAllRows:!0}),this.bindTableEvents(),e(o).handsontable("listen")},s.prototype.close=function(t){this.hide(t),e(document).off("mousedown.htContextMenu"),this.unbindTableEvents(),this.instance.listen()},s.prototype.closeAll=function(){for(;this.menus.length>0;){var e=this.menus.pop();e&&this.close(e)}this.triggerRows=[]},s.prototype.closeLastOpenedSubMenu=function(){var e=this.menus.pop();e&&this.hide(e)},s.prototype.hide=function(t){t.style.display="none",e(t).handsontable("destroy")},s.prototype.renderer=function(o,n,i,r,l,a){function c(e){return e.hasOwnProperty("submenu")}function h(e){return new RegExp(s.SEPARATOR.name,"i").test(e.name)}function u(e){return e.disabled===!0||"function"==typeof e.disabled&&e.disabled.call(d.instance)===!0}var d=this,f=o.getData()[i],p=document.createElement("DIV");"function"==typeof a&&(a=a.call(this.instance)),t.Dom.empty(n),n.appendChild(p),h(f)?t.Dom.addClass(n,"htSeparator"):t.Dom.fastInnerHTML(p,a),u(f)?(t.Dom.addClass(n,"htDisabled"),e(p).on("mouseenter",function(){o.deselectCell()})):c(f)?(t.Dom.addClass(n,"htSubmenu"),e(p).on("mouseenter",function(){o.selectCell(i,r)})):(t.Dom.removeClass(n,"htSubmenu"),t.Dom.removeClass(n,"htDisabled"),e(p).on("mouseenter",function(){o.selectCell(i,r)}))},s.prototype.onCellMouseOver=function(t,o,n,i){var r=e(i).handsontable("getInstance"),s=this.menus.length;if(s>0){var l=this.menus[s-1];l.id!=i.id&&this.closeLastOpenedSubMenu()}else this.closeLastOpenedSubMenu();if(-1!=n.className.indexOf("htSubmenu")){var a=r.getData()[o.row],c=this.getItems(a.submenu),h=this.createMenu(a.name,o.row),u=n.getBoundingClientRect();this.show(h,c),this.setSubMenuPosition(u,h)}},s.prototype.onBeforeKeyDown=function(o,n){function i(e){var t=e.getCell(0,0);s.utils.isSeparator(t)||s.utils.isDisabled(t)?l(0,0,e):e.selectCell(0,0)}function r(e){var t=e.countRows()-1,o=e.getCell(t,0);s.utils.isSeparator(o)||s.utils.isDisabled(o)?a(t,0,e):e.selectCell(t,0)}function l(e,t,o){var n=e+1,i=n<o.countRows()?o.getCell(n,t):null;i&&(s.utils.isSeparator(i)||s.utils.isDisabled(i)?l(n,t,o):o.selectCell(n,t))}function a(e,t,o){var n=e-1,i=n>=0?o.getCell(n,t):null;i&&(s.utils.isSeparator(i)||s.utils.isDisabled(i)?a(n,t,o):o.selectCell(n,t))}function c(t,o,n,i){var r=t.getData()[i],s=o.getItems(r.submenu),l=o.createMenu(r.name,i),a=n.getBoundingClientRect();o.show(l,s),o.setSubMenuPosition(a,l);var c=e(l).handsontable("getInstance");c.selectCell(0,0)}var h=this,u=e(n).handsontable("getInstance"),d=u.getSelected();switch(o.keyCode){case t.helper.keyCode.ESCAPE:h.closeAll(),o.preventDefault(),o.stopImmediatePropagation();break;case t.helper.keyCode.ENTER:d&&h.performAction(o,n);break;case t.helper.keyCode.ARROW_DOWN:d?l(d[0],d[1],u,h):i(u,h),o.preventDefault(),o.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_UP:d?a(d[0],d[1],u,h):r(u,h),o.preventDefault(),o.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_RIGHT:if(d){var f=d[0],p=u.getCell(d[0],0);s.utils.hasSubMenu(p)&&c(u,h,p,f)}o.preventDefault(),o.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_LEFT:if(d){if(-1!=n.className.indexOf("htContextSubMenu_")){h.closeLastOpenedSubMenu();var m=h.menus.length;if(m>0){n=h.menus[m-1];var g=h.triggerRows.pop();u=e(n).handsontable("getInstance"),u.selectCell(g,0)}}o.preventDefault(),o.stopImmediatePropagation()}}},s.prototype.getItems=function(e){function o(e){"string"==typeof e?this.name=e:t.helper.extend(this,e)}var n,i;if(o.prototype=e,e&&e.items&&(e=e.items),e===!0&&(e=this.defaultOptions.items),!0){n=[];for(var r in e)e.hasOwnProperty(r)&&(i="string"==typeof e[r]?l(this.defaultOptions.items,e[r]):l(this.defaultOptions.items,r),i||(i=e[r]),i=new o(i),"object"==typeof e[r]&&t.helper.extend(i,e[r]),i.key||(i.key=r),n.push(i))}return n},s.prototype.setSubMenuPosition=function(e,o){var n=t.Dom.getWindowScrollTop(),i=t.Dom.getWindowScrollLeft(),r={top:n+e.top,topRelative:e.top,left:e.left,leftRelative:e.left-i,scrollTop:n,scrollLeft:i,cellHeight:e.height,cellWidth:e.width};this.menuFitsBelowCursor(r,o)?this.positionMenuBelowCursor(r,o,!0):this.menuFitsAboveCursor(r,o)?this.positionMenuAboveCursor(r,o,!0):this.positionMenuBelowCursor(r,o,!0),this.menuFitsOnRightOfCursor(r,o)?this.positionMenuOnRightOfCursor(r,o,!0):this.positionMenuOnLeftOfCursor(r,o,!0)
},s.prototype.setMenuPosition=function(e,o){var n=e.pageY,i=e.pageX,r=t.Dom.getWindowScrollTop(),s=t.Dom.getWindowScrollLeft(),l={top:n,topRelative:n-r,left:i,leftRelative:i-s,scrollTop:r,scrollLeft:s,cellHeight:e.target.clientHeight,cellWidth:e.target.clientWidth};this.menuFitsBelowCursor(l,o)?this.positionMenuBelowCursor(l,o):this.menuFitsAboveCursor(l,o)?this.positionMenuAboveCursor(l,o):this.positionMenuBelowCursor(l,o),this.menuFitsOnRightOfCursor(l,o)?this.positionMenuOnRightOfCursor(l,o):this.positionMenuOnLeftOfCursor(l,o)},s.prototype.menuFitsAboveCursor=function(e,t){return e.topRelative>=t.offsetHeight},s.prototype.menuFitsBelowCursor=function(e,t){return e.topRelative+t.offsetHeight<=e.scrollTop+document.body.clientHeight},s.prototype.menuFitsOnRightOfCursor=function(e,t){return e.leftRelative+t.offsetWidth<=e.scrollLeft+document.body.clientWidth},s.prototype.positionMenuBelowCursor=function(e,t){t.style.top=e.top+"px"},s.prototype.positionMenuAboveCursor=function(e,t,o){t.style.top=o?e.top+e.cellHeight-t.offsetHeight+"px":e.top-t.offsetHeight+"px"},s.prototype.positionMenuOnRightOfCursor=function(e,t,o){t.style.left=o?1+e.left+e.cellWidth+"px":1+e.left+"px"},s.prototype.positionMenuOnLeftOfCursor=function(e,t,o){t.style.left=o?e.left-t.offsetWidth+"px":e.left-t.offsetWidth+"px"},s.utils={},s.utils.normalizeSelection=function(e){return{start:e.getTopLeftCorner(),end:e.getBottomRightCorner()}},s.utils.isSeparator=function(e){return t.Dom.hasClass(e,"htSeparator")},s.utils.hasSubMenu=function(e){return t.Dom.hasClass(e,"htSubmenu")},s.utils.isDisabled=function(e){return t.Dom.hasClass(e,"htDisabled")},s.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},s.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.closeAll(),this.unbindMouseEvents(),this.unbindTableEvents())},s.prototype.destroy=function(){for(this.closeAll();this.menus.length>0;){var e=this.menus.pop();this.triggerRows.pop(),e&&(this.close(e),this.isMenuEnabledByOtherHotInstance()||this.removeMenu(e))}this.unbindMouseEvents(),this.unbindTableEvents()},s.prototype.isMenuEnabledByOtherHotInstance=function(){for(var t=e(".handsontable"),o=!1,n=0,i=t.length;i>n;n++){var r=e(t[n]).handsontable("getInstance");if(r&&r.getSettings().contextMenu){o=!0;break}}return o},s.prototype.removeMenu=function(e){e.parentNode&&this.menu.parentNode.removeChild(e)},s.SEPARATOR={name:"---------"},t.hooks.add("afterInit",c),t.hooks.add("afterUpdateSettings",c),t.hooks.add("afterInit",a),t.PluginHooks.register("afterContextMenuDefaultOptions"),t.ContextMenu=s}(o);var _=function(){var e=this,t=e.getSettings().comments;t&&(o.Comments=new r(e),o.Comments.init())},z=function(e,t,n,i,r,s){s.comment&&o.Dom.addClass(e,s.commentedCellClassName)},F=function(e){var t=this;t.getSettings().comments&&(e.items.push(o.ContextMenu.SEPARATOR),e.items.push({key:"commentsAddEdit",name:function(){var e=o.Comments.checkSelectionCommentsConsistency();return e?"Edit Comment":"Add Comment"},callback:function(e,t,n){o.Comments.showComment(this.getSelectedRange())},disabled:function(){return!1}}),e.items.push({key:"commentsRemove",name:function(){return"Delete Comment"},callback:function(e,t,n){o.Comments.removeComment(t.start.row,t.start.col)},disabled:function(){var e=o.Comments.checkSelectionCommentsConsistency();return!e}}))};o.hooks.add("beforeInit",_),o.hooks.add("afterContextMenuDefaultOptions",F),o.hooks.add("afterRenderer",z),function(o){function n(){function n(e){f=this,p=e;var t=this.view.wt.wtTable.getCoords(e).col;if(t>=0){d=t;var o=p.getBoundingClientRect();u=o.left,m.style.top=o.top+"px",m.style.left=u+"px",f.rootElement[0].appendChild(m)}}function i(e){var t=e.getBoundingClientRect();m.style.left=t.left+"px"}function r(){var e=this;o.Dom.addClass(m,"active"),o.Dom.addClass(g,"active");var t=p.getBoundingClientRect();g.style.width=t.width+"px",g.style.height=e.view.maximumVisibleElementHeight(0)+"px",g.style.top=m.style.top,g.style.left=u+"px",e.rootElement[0].appendChild(g)}function s(e){g.style.left=u+e+"px"}function l(){o.Dom.removeClass(m,"active"),o.Dom.removeClass(g,"active")}var a,c,h,u,d,f,p,m=document.createElement("DIV"),g=document.createElement("DIV"),w=e(t);m.className="manualColumnMover",g.className="manualColumnMoverGuide";var y=function(){var e=this;o.hooks.run(e,"persistentStateSave","manualColumnPositions",e.manualColumnPositions)},v=function(){var e=this,t={};return o.hooks.run(e,"persistentStateLoad","manualColumnPositions",t),t.value},C=function(){var e=this,t;e.rootElement.on("mouseenter.manualColumnMove."+e.guid,"table thead tr > th",function(o){t?(c=e.view.wt.wtTable.getCoords(o.currentTarget).col,i(o.currentTarget)):n.call(e,o.currentTarget)}),e.rootElement.on("mousedown.manualColumnMove."+e.guid,".manualColumnMover",function(o){h=o.pageX,r.call(e),t=e,a=d,c=d}),w.on("mousemove.manualColumnMove."+e.guid,function(e){t&&s(e.pageX-h)}),w.on("mouseup.manualColumnMove."+e.guid,function(){t&&(l(),t=!1,c>a&&c--,S(e.manualColumnPositions,e.countCols()),e.manualColumnPositions.splice(c,0,e.manualColumnPositions.splice(a,1)[0]),e.forceFullRender=!0,e.view.render(),y.call(e),o.hooks.run(e,"afterColumnMove",a,c),n.call(e,p))}),e.addHook("afterDestroy",b)},b=function(){var e=this;e.rootElement.off("mouseenter.manualColumnMove."+e.guid,"table thead tr > th"),e.rootElement.off("mousedown.manualColumnMove."+e.guid,".manualColumnMover"),w.off("mousemove.manualColumnMove."+e.guid),w.off("mouseup.manualColumnMove."+e.guid)},S=function(e,t){if(e.length<t)for(var o=e.length;t>o;o++)e[o]=o};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(e){var t=this,o=!!this.getSettings().manualColumnMove;if(o){var n=this.getSettings().manualColumnMove,i=v.call(t);this.manualColumnPositions="undefined"!=typeof i?i:n instanceof Array?n:[],"afterInit"==e&&(C.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else b.call(this),this.manualColumnPositions=[]},this.modifyCol=function(e){return this.getSettings().manualColumnMove?("undefined"==typeof this.manualColumnPositions[e]&&S(this.manualColumnPositions,e+1),this.manualColumnPositions[e]):e}}var i=new n;o.hooks.add("beforeInit",i.beforeInit),o.hooks.add("afterInit",function(){i.init.call(this,"afterInit")}),o.hooks.add("afterUpdateSettings",function(){i.init.call(this,"afterUpdateSettings")}),o.hooks.add("modifyCol",i.modifyCol),o.hooks.register("afterColumnMove")}(o),function(o){function n(){function n(e){u=this,a=e;var t=this.view.wt.wtTable.getCoords(e).col;if(t>=0){c=t;var o=a.getBoundingClientRect();m=o.left-6,p=parseInt(o.width,10),g.style.top=o.top+"px",g.style.left=m+p+"px",u.rootElement[0].appendChild(g)}}function i(){g.style.left=m+h+"px"}function r(){var e=this;o.Dom.addClass(g,"active"),o.Dom.addClass(w,"active"),w.style.top=g.style.top,w.style.left=g.style.left,w.style.height=e.view.maximumVisibleElementHeight(0)+"px",e.rootElement[0].appendChild(w)}function s(){w.style.left=g.style.left}function l(){o.Dom.removeClass(g,"active"),o.Dom.removeClass(w,"active")}var a,c,h,u,d,f,p,m,g=document.createElement("DIV"),w=document.createElement("DIV"),y=e(t);g.className="manualColumnResizer",w.className="manualColumnResizerGuide";var v=function(){var e=this;o.hooks.run(e,"persistentStateSave","manualColumnWidths",e.manualColumnWidths)},C=function(){var e=this,t={};return o.hooks.run(e,"persistentStateLoad","manualColumnWidths",t),t.value},b=function(){var e=this,t,u=0,m=null;e.rootElement.on("mouseenter.manualColumnResize."+e.guid,"table thead tr > th",function(o){t||n.call(e,o.currentTarget)}),e.rootElement.on("mousedown.manualColumnResize."+e.guid,".manualColumnResizer",function(n){r.call(e),t=e,null==m&&(m=setTimeout(function(){u>=2&&(d=e.determineColumnWidth.call(e,c),R(c,d),e.forceFullRender=!0,e.view.render(),o.hooks.run(e,"afterColumnResize",c,d)),u=0,m=null},500),e._registerTimeout(m)),u++,f=n.pageX,d=p}),y.on("mousemove.manualColumnResize."+e.guid,function(e){t&&(h=p+(e.pageX-f),d=R(c,h),i(),s())}),y.on("mouseup.manualColumnResize."+e.guid,function(){t&&(l(),t=!1,d!=p&&(e.forceFullRender=!0,e.view.render(),v.call(e),o.hooks.run(e,"afterColumnResize",c,d)),n.call(e,a))}),e.addHook("afterDestroy",S)},S=function(){var e=this;e.rootElement.off("mouseenter.manualColumnResize."+e.guid,"table thead tr > th"),e.rootElement.off("mousedown.manualColumnResize."+e.guid,".manualColumnResizer"),y.off("mousemove.manualColumnResize."+e.guid),y.off("mouseup.manualColumnResize."+e.guid)};this.beforeInit=function(){this.manualColumnWidths=[]},this.init=function(e){var t=this,o=!!this.getSettings().manualColumnResize;if(o){var n=this.getSettings().manualColumnResize,i=C.call(t);this.manualColumnWidths="undefined"!=typeof i?i:n instanceof Array?n:[],"afterInit"==e&&(b.call(this),this.manualColumnWidths.length>0&&(this.forceFullRender=!0,this.render()))}else S.call(this),this.manualColumnWidths=[]};var R=function(e,t){return t=Math.max(t,20),e=o.hooks.execute(u,"modifyCol",e),u.manualColumnWidths[e]=t,t};this.modifyColWidth=function(e,t){return t=this.runHooksAndReturn("modifyCol",t),this.getSettings().manualColumnResize&&this.manualColumnWidths[t]?this.manualColumnWidths[t]:e}}var i=new n;o.hooks.add("beforeInit",i.beforeInit),o.hooks.add("afterInit",function(){i.init.call(this,"afterInit")}),o.hooks.add("afterUpdateSettings",function(){i.init.call(this,"afterUpdateSettings")}),o.hooks.add("modifyColWidth",i.modifyColWidth),o.hooks.register("afterColumnResize")}(o),function(o){function n(){function n(e){u=this,a=e;var t=this.view.wt.wtTable.getCoords(e).row;if(t>=0){c=t;var o=a.getBoundingClientRect();m=o.top-6,p=parseInt(o.height,10),g.style.left=o.left+"px",g.style.top=m+p+"px",u.rootElement[0].appendChild(g)}}function i(){g.style.top=m+h+"px"}function r(){var e=this;o.Dom.addClass(g,"active"),o.Dom.addClass(w,"active"),w.style.top=g.style.top,w.style.left=g.style.left,w.style.width=e.view.maximumVisibleElementWidth(0)+"px",e.rootElement[0].appendChild(w)}function s(){w.style.top=g.style.top}function l(){o.Dom.removeClass(g,"active"),o.Dom.removeClass(w,"active")}var a,c,h,u,d,f,p,m,g=document.createElement("DIV"),w=document.createElement("DIV"),y=e(t);g.className="manualRowResizer",w.className="manualRowResizerGuide";var v=function(){var e=this;o.hooks.run(e,"persistentStateSave","manualRowHeights",e.manualRowHeights)},C=function(){var e=this,t={};return o.hooks.run(e,"persistentStateLoad","manualRowHeights",t),t.value},b=function(){var e=this,t,u=0,m=null;e.rootElement.on("mouseenter.manualRowResize."+e.guid,"table tbody tr > th",function(o){t||n.call(e,o.currentTarget)}),e.rootElement.on("mousedown.manualRowResize."+e.guid,".manualRowResizer",function(n){r.call(e),t=e,null==m&&(m=setTimeout(function(){u>=2&&(R(c,null),e.forceFullRender=!0,e.view.render(),o.hooks.run(e,"afterRowResize",c,d)),u=0,m=null},500),e._registerTimeout(m)),u++,f=n.pageY,d=p}),y.on("mousemove.manualRowResize."+e.guid,function(e){t&&(h=p+(e.pageY-f),d=R(c,h),i(),s())}),y.on("mouseup.manualRowResize."+e.guid,function(){t&&(l(),t=!1,d!=p&&(e.forceFullRender=!0,e.view.render(),v.call(e),o.hooks.run(e,"afterRowResize",c,d)),n.call(e,a))}),e.addHook("afterDestroy",S)},S=function(){var e=this;e.rootElement.off("mouseenter.manualRowResize."+e.guid,"table tbody tr > th"),e.rootElement.off("mousedown.manualRowResize."+e.guid,".manualRowResizer"),y.off("mousemove.manualRowResize."+e.guid),y.off("mouseup.manualRowResize."+e.guid)};this.beforeInit=function(){this.manualRowHeights=[]},this.init=function(e){var t=this,o=!!this.getSettings().manualRowResize;if(o){var n=this.getSettings().manualRowResize,i=C.call(t);this.manualRowHeights="undefined"!=typeof i?i:n instanceof Array?n:[],"afterInit"===e?(b.call(this),this.manualRowHeights.length>0&&(this.forceFullRender=!0,this.render())):(this.forceFullRender=!0,this.render())}else S.call(this),this.manualRowHeights=[]};var R=function(e,t){return e=o.hooks.execute(u,"modifyRow",e),u.manualRowHeights[e]=t,t};this.modifyRowHeight=function(e,t){return this.getSettings().manualRowResize&&(t=this.runHooksAndReturn("modifyRow",t),void 0!==this.manualRowHeights[t])?this.manualRowHeights[t]:e}}var i=new n;o.hooks.add("beforeInit",i.beforeInit),o.hooks.add("afterInit",function(){i.init.call(this,"afterInit")}),o.hooks.add("afterUpdateSettings",function(){i.init.call(this,"afterUpdateSettings")}),o.hooks.add("modifyRowHeight",i.modifyRowHeight),o.hooks.register("afterRowResize")}(o),function ot(){function e(){var e=this,o=e.getSettings().observeChanges;o?(e.observer&&i.call(e),t.call(e),s.call(e)):o||i.call(e)}function t(){var e=this;e.observeChangesActive=!0,e.pauseObservingChanges=function(){e.observeChangesActive=!1},e.resumeObservingChanges=function(){e.observeChangesActive=!0},e.observedData=e.getData(),e.observer=B.observe(e.observedData,function(t){e.observeChangesActive&&(n.call(e,t),e.render()),e.runHooks("afterChangesObserved")})}function n(e){function t(e){var t;return t=n(e),t=o(t)}function o(e){var t=[];return e.filter(function(e){var o=i(e.path);if(-1!=["add","remove"].indexOf(e.op)&&!isNaN(o.col)){if(-1!=t.indexOf(o.col))return!1;t.push(o.col)}return!0})}function n(e){return e.filter(function(e){return!/[/]length/gi.test(e.path)})}function i(e){var t=e.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(t[1],10),col:/^\d*$/.test(t[2])?parseInt(t[2],10):t[2]}}for(var r=this,s=t(e),l=0,a=s.length;a>l;l++){var c=s[l],h=i(c.path);switch(c.op){case"add":isNaN(h.col)?r.runHooks("afterCreateRow",h.row):r.runHooks("afterCreateCol",h.col);break;case"remove":isNaN(h.col)?r.runHooks("afterRemoveRow",h.row,1):r.runHooks("afterRemoveCol",h.col,1);break;case"replace":r.runHooks("afterChange",[h.row,h.col,null,c.value],"external")}}}function i(){var e=this;e.observer&&(r.call(e),l.call(e))}function r(){var e=this;B.unobserve(e.observedData,e.observer),delete e.observeChangesActive,delete e.pauseObservingChanges,delete e.resumeObservingChanges}function s(){var e=this;e.addHook("afterDestroy",i),e.addHook("afterCreateRow",a),e.addHook("afterRemoveRow",a),e.addHook("afterCreateCol",a),e.addHook("afterRemoveCol",a),e.addHook("afterChange",function(e,t){"loadData"!=t&&a.call(this)})}function l(){var e=this;e.removeHook("afterDestroy",i),e.removeHook("afterCreateRow",a),e.removeHook("afterRemoveRow",a),e.removeHook("afterCreateCol",a),e.removeHook("afterRemoveCol",a),e.removeHook("afterChange",a)}function a(){var e=this;e.pauseObservingChanges(),e.addHookOnce("afterChangesObserved",function(){e.resumeObservingChanges()})}o.hooks.add("afterLoadData",e),o.hooks.add("afterUpdateSettings",e),o.hooks.register("afterChangesObserved")}(),function(e){function t(){function t(){var e=this;for(var t in r)r.hasOwnProperty(t)&&e.addHook(t,r[t])}function n(){var e=this;for(var t in r)r.hasOwnProperty(t)&&e.removeHook(t,r[t])}var i=this;this.init=function(){var o=this,r=o.getSettings().persistentState;return i.enabled=!!r,i.enabled?(o.storage||(o.storage=new e(o.rootElement[0].id)),o.resetState=i.resetValue,void t.call(o)):void n.call(o)},this.saveValue=function(e,t){var o=this;o.storage.saveValue(e,t)},this.loadValue=function(e,t){var o=this;t.value=o.storage.loadValue(e)},this.resetValue=function(e){var t=this;"undefined"!=typeof e?t.storage.reset(e):t.storage.resetAll()};var r={persistentStateSave:i.saveValue,persistentStateLoad:i.loadValue,persistentStateReset:i.resetValue};for(var s in r)r.hasOwnProperty(s)&&o.hooks.register(s)}var n=new t;o.hooks.add("beforeInit",n.init),o.hooks.add("afterUpdateSettings",n.init)}(s),function(t){t.UndoRedo=function(e){var o=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,e.addHook("afterChange",function(e,n){if(e){var i=new t.UndoRedo.ChangeAction(e);o.done(i)}}),e.addHook("afterCreateRow",function(e,n,i){if(!i){var r=new t.UndoRedo.CreateRowAction(e,n);o.done(r)}}),e.addHook("beforeRemoveRow",function(e,n){var i=o.instance.getData();e=(i.length+e)%i.length;var r=i.slice(e,e+n),s=new t.UndoRedo.RemoveRowAction(e,r);o.done(s)}),e.addHook("afterCreateCol",function(e,n,i){if(!i){var r=new t.UndoRedo.CreateColumnAction(e,n);o.done(r)}}),e.addHook("beforeRemoveCol",function(n,i){var r=o.instance.getData();n=(o.instance.countCols()+n)%o.instance.countCols();for(var s=[],l=0,a=r.length;a>l;l++)s[l]=r[l].slice(n,n+i);var c;t.helper.isArray(e.getSettings().colHeaders)&&(c=e.getSettings().colHeaders.slice(n,n+s.length));var h=new t.UndoRedo.RemoveColumnAction(n,s,c);o.done(h)})},t.UndoRedo.prototype.done=function(e){this.ignoreNewActions||(this.doneActions.push(e),this.undoneActions.length=0)},t.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var e=this.doneActions.pop();this.ignoreNewActions=!0;var t=this;e.undo(this.instance,function(){t.ignoreNewActions=!1,t.undoneActions.push(e)})}},t.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var e=this.undoneActions.pop();this.ignoreNewActions=!0;var t=this;e.redo(this.instance,function(){t.ignoreNewActions=!1,t.doneActions.push(e)})}},t.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},t.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},t.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},t.UndoRedo.Action=function(){},t.UndoRedo.Action.prototype.undo=function(){},t.UndoRedo.Action.prototype.redo=function(){},t.UndoRedo.ChangeAction=function(e){this.changes=e},t.helper.inherit(t.UndoRedo.ChangeAction,t.UndoRedo.Action),t.UndoRedo.ChangeAction.prototype.undo=function(t,o){for(var n=e.extend(!0,[],this.changes),i=t.countEmptyRows(!0),r=t.countEmptyCols(!0),s=0,l=n.length;l>s;s++)n[s].splice(3,1);t.addHookOnce("afterChange",o),t.setDataAtRowProp(n,null,null,"undo");for(var s=0,l=n.length;l>s;s++)t.getSettings().minSpareRows&&n[s][0]+1+t.getSettings().minSpareRows===t.countRows()&&i==t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(n[s][0]+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&n[s][1]+1+t.getSettings().minSpareCols===t.countCols()&&r==t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(n[s][1]+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())},t.UndoRedo.ChangeAction.prototype.redo=function(t,o){for(var n=e.extend(!0,[],this.changes),i=0,r=n.length;r>i;i++)n[i].splice(2,1);t.addHookOnce("afterChange",o),t.setDataAtRowProp(n,null,null,"redo")},t.UndoRedo.CreateRowAction=function(e,t){this.index=e,this.amount=t},t.helper.inherit(t.UndoRedo.CreateRowAction,t.UndoRedo.Action),t.UndoRedo.CreateRowAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.amount)},t.UndoRedo.CreateRowAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateRow",t),e.alter("insert_row",this.index+1,this.amount)},t.UndoRedo.RemoveRowAction=function(e,t){this.index=e,this.data=t},t.helper.inherit(t.UndoRedo.RemoveRowAction,t.UndoRedo.Action),t.UndoRedo.RemoveRowAction.prototype.undo=function(e,t){var o=[this.index,0];Array.prototype.push.apply(o,this.data),Array.prototype.splice.apply(e.getData(),o),e.addHookOnce("afterRender",t),e.render()},t.UndoRedo.RemoveRowAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.data.length)},t.UndoRedo.CreateColumnAction=function(e,t){this.index=e,this.amount=t},t.helper.inherit(t.UndoRedo.CreateColumnAction,t.UndoRedo.Action),t.UndoRedo.CreateColumnAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount)},t.UndoRedo.CreateColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateCol",t),e.alter("insert_col",this.index+1,this.amount)},t.UndoRedo.RemoveColumnAction=function(e,t,o){this.index=e,this.data=t,this.amount=this.data[0].length,this.headers=o},t.helper.inherit(t.UndoRedo.RemoveColumnAction,t.UndoRedo.Action),t.UndoRedo.RemoveColumnAction.prototype.undo=function(e,t){for(var o,n,i=0,r=e.getData().length;r>i;i++)o=e.getSourceDataAtRow(i),n=[this.index,0],Array.prototype.push.apply(n,this.data[i]),Array.prototype.splice.apply(o,n);"undefined"!=typeof this.headers&&(n=[this.index,0],Array.prototype.push.apply(n,this.headers),Array.prototype.splice.apply(e.getSettings().colHeaders,n)),e.addHookOnce("afterRender",t),e.render()},t.UndoRedo.RemoveColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount)}}(o),function(e){function t(){var t=this,s="undefined"==typeof t.getSettings().undo||t.getSettings().undo;s?t.undoRedo||(t.undoRedo=new e.UndoRedo(t),i(t),t.addHook("beforeKeyDown",o),t.addHook("afterChange",n)):t.undoRedo&&(delete t.undoRedo,r(t),t.removeHook("beforeKeyDown",o),t.removeHook("afterChange",n))}function o(e){var t=this,o=(e.ctrlKey||e.metaKey)&&!e.altKey;o&&(89===e.keyCode||e.shiftKey&&90===e.keyCode?(t.undoRedo.redo(),e.stopImmediatePropagation()):90===e.keyCode&&(t.undoRedo.undo(),e.stopImmediatePropagation()))}function n(e,t){var o=this;return"loadData"==t?o.undoRedo.clear():void 0}function i(e){e.undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()}}function r(e){delete e.undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo}e.hooks.add("afterInit",t),e.hooks.add("afterUpdateSettings",t)}(o),l.prototype.setBoundaries=function(e){this.boundaries=e},l.prototype.setCallback=function(e){this.callback=e},l.prototype.check=function(e,t){var o=0,n=0;t<this.boundaries.top?n=t-this.boundaries.top:t>this.boundaries.bottom&&(n=t-this.boundaries.bottom),e<this.boundaries.left?o=e-this.boundaries.left:e>this.boundaries.right&&(o=e-this.boundaries.right),this.callback(o,n)};var j,U;if("undefined"!=typeof o){var G=function(e){e.dragToScrollListening=!1;var o=e.view.wt.wtScrollbars.vertical.scrollHandler;j=new l,o!==t&&(j.setBoundaries(o?o.getBoundingClientRect():e.$table[0].getBoundingClientRect()),j.setCallback(function(t,n){0>t?o?o.scrollLeft-=50:e.view.wt.scrollHorizontal(-1).draw():t>0&&(o?o.scrollLeft+=50:e.view.wt.scrollHorizontal(1).draw()),0>n?o?o.scrollTop-=20:e.view.wt.scrollVertical(-1).draw():n>0&&(o?o.scrollTop+=20:e.view.wt.scrollVertical(1).draw())}),e.dragToScrollListening=!0)};o.hooks.add("afterInit",function(){var t=this;e(document).on("mouseup."+this.guid,function(){t.dragToScrollListening=!1}),e(document).on("mousemove."+this.guid,function(e){t.dragToScrollListening&&j.check(e.clientX,e.clientY)})}),o.hooks.add("afterDestroy",function(){e(document).off("."+this.guid)}),o.hooks.add("afterOnCellMouseDown",function(){G(this)}),o.hooks.add("afterOnCellCornerMouseDown",function(){G(this)}),o.plugins.DragToScroll=l}if(function(e,t,o){function n(n){function i(){n.isListening()&&n.selection.empty()}function r(e){if(n.isListening()&&n.selection.isSelected()){var t=e.replace(/^[\r\n]*/g,"").replace(/[\r\n]*$/g,""),i=o.parse(t),r=n.getSelected(),s=new f(r[0],r[1]),l=new f(r[2],r[3]),a=new p(s,s,l),c=a.getTopLeftCorner(),h=a.getBottomRightCorner(),u=c,d=new f(Math.max(h.row,i.length-1+c.row),Math.max(h.col,i[0].length-1+c.col));n.addHookOnce("afterChange",function(e,t){e&&e.length&&this.selectCell(u.row,u.col,d.row,d.col)}),n.populateFromArray(u.row,u.col,i,d.row,d.col,"paste",n.getSettings().pasteMode)}}function s(t){if(e.helper.isCtrlKey(t.keyCode)&&n.getSelected())return l.setCopyableText(),void t.stopImmediatePropagation();var o=(t.ctrlKey||t.metaKey)&&!t.altKey;t.keyCode==e.helper.keyCode.A&&o&&n._registerTimeout(setTimeout(e.helper.proxy(l.setCopyableText,l),0))}this.copyPasteInstance=t.getInstance(),this.copyPasteInstance.onCut(i),this.copyPasteInstance.onPaste(r);var l=this;n.addHook("beforeKeyDown",s),this.destroy=function(){this.copyPasteInstance.removeCallback(i),this.copyPasteInstance.removeCallback(r),this.copyPasteInstance.destroy(),n.removeHook("beforeKeyDown",s)},n.addHook("afterDestroy",e.helper.proxy(this.destroy,this)),this.triggerPaste=e.helper.proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=e.helper.proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var t=n.getSettings(),o=t.copyRowsLimit,i=t.copyColsLimit,r=n.getSelectedRange(),s=r.getTopLeftCorner(),l=r.getBottomRightCorner(),a=s.row,c=s.col,h=l.row,u=l.col,d=Math.min(h,a+o-1),f=Math.min(u,c+i-1);n.copyPaste.copyPasteInstance.copyable(n.getCopyableData(a,c,d,f)),(h!==d||u!==f)&&e.hooks.run(n,"afterCopyLimit",h-a+1,u-c+1,o,i)}}function i(){var e=this,t=e.getSettings().copyPaste!==!1;t&&!e.copyPaste?e.copyPaste=new n(e):!t&&e.copyPaste&&(e.copyPaste.destroy(),delete e.copyPaste)}e.hooks.add("afterInit",i),e.hooks.add("afterUpdateSettings",i),e.hooks.register("afterCopyLimit")}(o,W,SheetClip),function(e){function t(){var t=this,o=!!t.getSettings().search;o?t.search=new e.Search(t):delete t.search}e.Search=function n(t){this.query=function(o,n,i){var r=t.countRows(),s=t.countCols(),l=[];n||(n=e.Search.global.getDefaultCallback()),i||(i=e.Search.global.getDefaultQueryMethod());for(var a=0;r>a;a++)for(var c=0;s>c;c++){var h=t.getDataAtCell(a,c),u=t.getCellMeta(a,c),d=u.search.callback||n,f=u.search.queryMethod||i,p=f(o,h);if(p){var m={row:a,col:c,data:h};l.push(m)}d&&d(t,a,c,h,p)}return l}},e.Search.DEFAULT_CALLBACK=function(e,t,o,n,i){e.getCellMeta(t,o).isSearchResult=i},e.Search.DEFAULT_QUERY_METHOD=function(e,t){return"undefined"!=typeof e&&null!=e&&e.toLowerCase&&0!=e.length?"undefined"==typeof t||null==t?!1:-1!=t.toString().toLowerCase().indexOf(e.toLowerCase()):!1},e.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",e.Search.global=function(){var t=e.Search.DEFAULT_CALLBACK,o=e.Search.DEFAULT_QUERY_METHOD,n=e.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return t},setDefaultCallback:function(e){t=e},getDefaultQueryMethod:function(){return o},setDefaultQueryMethod:function(e){o=e},getDefaultSearchResultClass:function(){return n},setDefaultSearchResultClass:function(e){n=e}}}(),e.SearchCellDecorator=function(t,o,n,i,r,s,l){var a="object"==typeof l.search&&l.search.searchResultClass||e.Search.global.getDefaultSearchResultClass();l.isSearchResult?e.Dom.addClass(o,a):e.Dom.removeClass(o,a)};var o=e.renderers.cellDecorator;e.renderers.cellDecorator=function(t,n,i,r,s,l,a){o.apply(this,arguments),e.SearchCellDecorator.apply(this,arguments)},e.hooks.add("afterInit",t),e.hooks.add("afterUpdateSettings",t)}(o),c.prototype.canMergeRange=function(e){return!e.isSingle()},c.prototype.mergeRange=function(e){if(this.canMergeRange(e)){var t=e.getTopLeftCorner(),o=e.getBottomRightCorner(),n={};n.row=t.row,n.col=t.col,n.rowspan=o.row-t.row+1,n.colspan=o.col-t.col+1,this.mergedCellInfoCollection.setInfo(n)}},c.prototype.mergeOrUnmergeSelection=function(e){var t=this.mergedCellInfoCollection.getInfo(e.from.row,e.from.col);t?this.unmergeSelection(e.from):this.mergeSelection(e)},c.prototype.mergeSelection=function(e){this.mergeRange(e)},c.prototype.unmergeSelection=function(e){var t=this.mergedCellInfoCollection.getInfo(e.row,e.col);this.mergedCellInfoCollection.removeInfo(t.row,t.col)},c.prototype.applySpanProperties=function(e,t,o){var n=this.mergedCellInfoCollection.getInfo(t,o);n?n.row===t&&n.col===o?(e.setAttribute("rowspan",n.rowspan),e.setAttribute("colspan",n.colspan)):e.style.display="none":(e.removeAttribute("rowspan"),e.removeAttribute("colspan"))},c.prototype.modifyTransform=function(e,t,o){var n=function(e,t){return t.row>=e.row&&t.row<=e.row+e.rowspan-1?!0:!1},i=function(e,t){return t.col>=e.col&&t.col<=e.col+e.colspan-1?!0:!1},r=function(e){return new f(t.to.row+e.row,t.to.col+e.col)},s={row:o.row,col:o.col};if("modifyTransformStart"==e){this.lastDesiredCoords||(this.lastDesiredCoords=new f(null,null));for(var l=new f(t.highlight.row,t.highlight.col),a=this.mergedCellInfoCollection.getInfo(l.row,l.col),c,h=0,u=this.mergedCellInfoCollection.length;u>h;h++){var d=this.mergedCellInfoCollection[h];if(d=new f(d.row+d.rowspan-1,d.col+d.colspan-1),t.includes(d)){c=!0;break}}if(a){var m=new f(a.row,a.col),g=new f(a.row+a.rowspan-1,a.col+a.colspan-1),w=new p(m,m,g);w.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new f(null,null)),s.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-l.row:s.row,s.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-l.col:s.col,o.row>0?s.row=a.row+a.rowspan-1-l.row+o.row:o.row<0&&(s.row=l.row-a.row+o.row),o.col>0?s.col=a.col+a.colspan-1-l.col+o.col:o.col<0&&(s.col=l.col-a.col+o.col)}var y=new f(t.highlight.row+s.row,t.highlight.col+s.col),v=this.mergedCellInfoCollection.getInfo(y.row,y.col);v&&(this.lastDesiredCoords=y,s={row:v.row-l.row,col:v.col-l.col})}else if("modifyTransformEnd"==e)for(var h=0,u=this.mergedCellInfoCollection.length;u>h;h++){var C=this.mergedCellInfoCollection[h],m=new f(C.row,C.col),g=new f(C.row+C.rowspan-1,C.col+C.colspan-1),b=new p(m,m,g),S=t.getBordersSharedWith(b);if(b.isEqual(t))t.setDirection("NW-SE");else if(S.length>0){var R=t.highlight.isEqual(b.from);S.indexOf("top")>-1?t.to.isSouthEastOf(b.from)&&R?t.setDirection("NW-SE"):t.to.isSouthWestOf(b.from)&&R&&t.setDirection("NE-SW"):S.indexOf("bottom")>-1&&(t.to.isNorthEastOf(b.from)&&R?t.setDirection("SW-NE"):t.to.isNorthWestOf(b.from)&&R&&t.setDirection("SE-NW"))}var y=r(s),T=n(C,y),E=i(C,y);t.includesRange(b)&&(b.includes(y)||T||E)&&(T&&(s.row<0?s.row-=C.rowspan-1:s.row>0&&(s.row+=C.rowspan-1)),E&&(s.col<0?s.col-=C.colspan-1:s.col>0&&(s.col+=C.colspan-1)))}0!=s.row&&(o.row=s.row),0!=s.col&&(o.col=s.col)},"undefined"==typeof o)throw new Error("Handsontable is not defined");var K=function(){var e=this,t=e.getSettings().mergeCells;t&&(e.mergeCells||(e.mergeCells=new c(t)))},X=function(){var e=this;e.mergeCells&&(e.view.wt.wtTable.getCell=function(t){if(e.getSettings().mergeCells){var o=e.mergeCells.mergedCellInfoCollection.getInfo(t.row,t.col);o&&(t=o)}return H.prototype.getCell.call(this,t)})},$=function(e){if(this.mergeCells){var t=(e.ctrlKey||e.metaKey)&&!e.altKey;t&&77===e.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),e.stopImmediatePropagation())}},q=function(e){this.getSettings().mergeCells&&(e.items.push(o.ContextMenu.SEPARATOR),e.items.push({key:"mergeCells",name:function(){var e=this.getSelected(),t=this.mergeCells.mergedCellInfoCollection.getInfo(e[0],e[1]);return t?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return!1}}))},z=function(e,t,o,n,i,r){this.mergeCells&&this.mergeCells.applySpanProperties(e,t,o)},Y=function(e){return function(t){var o=this.getSettings().mergeCells;if(o){var n=this.getSelectedRange();if(this.mergeCells.modifyTransform(e,n,t),"modifyTransformEnd"===e){var i=this.countRows(),r=this.countCols();n.from.row<0?n.from.row=0:n.from.row>0&&n.from.row>=i&&(n.from.row=n.from-1),n.from.col<0?n.from.col=0:n.from.col>0&&n.from.col>=r&&(n.from.col=r-1)}}}},Q=function(e){this.lastDesiredCoords=null;var t=this.getSettings().mergeCells;if(t){var o=this.getSelectedRange();o.highlight=new f(o.highlight.row,o.highlight.col),o.to=e;var n=!1;do{n=!1;for(var i=0,r=this.mergeCells.mergedCellInfoCollection.length;r>i;i++){var s=this.mergeCells.mergedCellInfoCollection[i],l=new f(s.row,s.col),a=new f(s.row+s.rowspan-1,s.col+s.colspan-1),c=new p(l,l,a);o.expandByRange(c)&&(e.row=o.to.row,e.col=o.to.col,n=!0)}}while(n)}},J=function(e,t){if(t&&"area"==t){var o=this.getSettings().mergeCells;if(o)for(var n=this.getSelectedRange(),i=new p(n.from,n.from,n.from),r=new p(n.to,n.to,n.to),s=0,l=this.mergeCells.mergedCellInfoCollection.length;l>s;s++){var a=this.mergeCells.mergedCellInfoCollection[s],c=new f(a.row,a.col),h=new f(a.row+a.rowspan-1,a.col+a.colspan-1),u=new p(c,c,h);
i.expandByRange(u)&&(e[0]=i.from.row,e[1]=i.from.col),r.expandByRange(u)&&(e[2]=r.from.row,e[3]=r.from.col)}}},Z=function(e,t,o){var n=this.getSettings().mergeCells;if(n){var i=this.mergeCells.mergedCellInfoCollection.getInfo(e,t);!i||i.row==e&&i.col==t||(o.copyable=!1)}},et=function(e){if(e&&this.mergeCells){var t=this.mergeCells.mergedCellInfoCollection,o=this.getSelectedRange();for(var n in t)if(o.highlight.row==t[n].row&&o.highlight.col==t[n].col&&o.to.row==t[n].row+t[n].rowspan-1&&o.to.col==t[n].col+t[n].colspan-1)return!1}return e};if(o.hooks.add("beforeInit",K),o.hooks.add("afterInit",X),o.hooks.add("beforeKeyDown",$),o.hooks.add("modifyTransformStart",Y("modifyTransformStart")),o.hooks.add("modifyTransformEnd",Y("modifyTransformEnd")),o.hooks.add("beforeSetRangeEnd",Q),o.hooks.add("beforeDrawBorders",J),o.hooks.add("afterIsMultipleSelection",et),o.hooks.add("afterRenderer",z),o.hooks.add("afterContextMenuDefaultOptions",q),o.hooks.add("afterGetCellMeta",Z),o.MergeCells=c,function(){function e(){}var t,n=function(e){return"boolean"==typeof e&&1==e?!0:"object"==typeof e&&e.length>0?!0:!1},i=function(){n(this.getSettings().customBorders)&&(this.customBorders||(t=this,this.customBorders=new e))},r=function(e){for(var o=0;o<t.view.wt.selections.length;o++)if(t.view.wt.selections[o].settings.className==e)return o;return-1},s=function(e){var o={row:e.row,col:e.col},n=new x(e,new p(o,o,o)),i=r(e.className);i>=0?t.view.wt.selections[i]=n:t.view.wt.selections.push(n)},l=function(e,t,o){var n=f(e,t);n=m(n,o),this.setCellMeta(e,t,"borders",n),s(n)},a=function(e){for(var t=e.range,o=t.from.row;o<=t.to.row;o++)for(var n=t.from.col;n<=t.to.col;n++){var i=f(o,n),r=0;o==t.from.row&&(r++,e.hasOwnProperty("top")&&(i.top=e.top)),o==t.to.row&&(r++,e.hasOwnProperty("bottom")&&(i.bottom=e.bottom)),n==t.from.col&&(r++,e.hasOwnProperty("left")&&(i.left=e.left)),n==t.to.col&&(r++,e.hasOwnProperty("right")&&(i.right=e.right)),r>0&&(this.setCellMeta(o,n,"borders",i),s(i))}},c=function(e,t){return"border_row"+e+"col"+t},h=function(){return{width:1,color:"#000"}},u=function(){return{hide:!0}},d=function(){return{width:1,color:"#000",cornerVisible:!1}},f=function(e,t){return{className:c(e,t),border:d(),row:e,col:t,top:u(),right:u(),bottom:u(),left:u()}},m=function(e,t){return t.hasOwnProperty("border")&&(e.border=t.border),t.hasOwnProperty("top")&&(e.top=t.top),t.hasOwnProperty("right")&&(e.right=t.right),t.hasOwnProperty("bottom")&&(e.bottom=t.bottom),t.hasOwnProperty("left")&&(e.left=t.left),e},g=function(e){for(var t=document.getElementsByClassName(e),o=0;o<t.length;o++)if(t[o]&&"TD"!=t[o].nodeName){var n=t[o].parentNode;n.parentNode.removeChild(n)}},w=function(e,t){var o=c(e,t);g(o),this.removeCellMeta(e,t,"borders")},y=function(e,t,o,n){var i=this.getCellMeta(e,t).borders;i&&void 0!=i.border||(i=f(e,t)),i[o]=n?u():h(),this.setCellMeta(e,t,"borders",i);var r=c(e,t);g(r),s(i),this.render()},v=function(e,t,o){if(e.from.row==e.to.row&&e.from.col==e.to.col)"noBorders"==t?w.call(this,e.from.row,e.from.col):y.call(this,e.from.row,e.from.col,t,o);else switch(t){case"noBorders":for(var n=e.from.col;n<=e.to.col;n++)for(var i=e.from.row;i<=e.to.row;i++)w.call(this,i,n);break;case"top":for(var r=e.from.col;r<=e.to.col;r++)y.call(this,e.from.row,r,t,o);break;case"right":for(var s=e.from.row;s<=e.to.row;s++)y.call(this,s,e.to.col,t);break;case"bottom":for(var l=e.from.col;l<=e.to.col;l++)y.call(this,e.to.row,l,t);break;case"left":for(var a=e.from.row;a<=e.to.row;a++)y.call(this,a,e.from.col,t)}},C=function(e,t){var o=!1;return e.getSelectedRange().forAll(function(n,i){var r=e.getCellMeta(n,i).borders;if(r){if(!t)return o=!0,!1;if(!r[t].hasOwnProperty("hide"))return o=!0,!1}}),o},b=function(e){return"<span class='selected'>✓</span>"+e},S=function(e){this.getSettings().customBorders&&(e.items.push(o.ContextMenu.SEPARATOR),e.items.push({key:"borders",name:"Borders",submenu:{items:{top:{name:function(){var e="Top",t=C(this,"top");return t&&(e=b(e)),e},callback:function(){var e=C(this,"top");v.call(this,this.getSelectedRange(),"top",e)},disabled:!1},right:{name:function(){var e="Right",t=C(this,"right");return t&&(e=b(e)),e},callback:function(){var e=C(this,"right");v.call(this,this.getSelectedRange(),"right",e)},disabled:!1},bottom:{name:function(){var e="Bottom",t=C(this,"bottom");return t&&(e=b(e)),e},callback:function(){var e=C(this,"bottom");v.call(this,this.getSelectedRange(),"bottom",e)},disabled:!1},left:{name:function(){var e="Left",t=C(this,"left");return t&&(e=b(e)),e},callback:function(){var e=C(this,"left");v.call(this,this.getSelectedRange(),"left",e)},disabled:!1},remove:{name:"Remove border(s)",callback:function(){v.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!C(this)}}}}}))};o.hooks.add("beforeInit",i),o.hooks.add("afterContextMenuDefaultOptions",S),o.hooks.add("afterInit",function(){var e=this.getSettings().customBorders;if(e){for(var t=0;t<e.length;t++)e[t].range?a.call(this,e[t]):l.call(this,e[t].row,e[t].col,e[t]);this.render(),this.view.wt.draw(!0)}}),o.CustomBorders=e}(),function(o){function n(){function n(e){U=this,f=e;var t=this.view.wt.wtTable.getCoords(e).row;if(t>=0){d=t;var o=f.getBoundingClientRect();u=o.top,p.style.top=u+"px",p.style.left=o.left+"px",U.rootElement[0].appendChild(p)}}function i(e){var t=e.getBoundingClientRect();p.style.top=t.top+"px"}function r(){var e=this;o.Dom.addClass(p,"active"),o.Dom.addClass(m,"active");var t=f.getBoundingClientRect();m.style.width=e.view.maximumVisibleElementWidth(0)+"px",m.style.height=t.height+"px",m.style.top=u+"px",m.style.left=p.style.left,e.rootElement[0].appendChild(m)}function s(e){m.style.top=u+e+"px"}function l(){o.Dom.removeClass(p,"active"),o.Dom.removeClass(m,"active")}var a,c,h,u,d,f,p=document.createElement("DIV"),m=document.createElement("DIV"),g=e(t);p.className="manualRowMover",m.className="manualRowMoverGuide";var w=function(){var e=this;o.hooks.run(e,"persistentStateSave","manualRowPositions",e.manualRowPositions)},y=function(){var e=this,t={};return o.hooks.run(e,"persistentStateLoad","manualRowPositions",t),t.value},v=function(){var e=this,t;e.rootElement.on("mouseenter.manualRowMove."+e.guid,"table tbody tr > th",function(o){t?(c=e.view.wt.wtTable.getCoords(o.currentTarget).row,i(o.currentTarget)):n.call(e,o.currentTarget)}),e.rootElement.on("mousedown.manualRowMove."+e.guid,".manualRowMover",function(o){h=o.pageY,r.call(e),t=e,a=d,c=d}),g.on("mousemove.manualRowMove."+e.guid,function(e){t&&s(e.pageY-h)}),g.on("mouseup.manualRowMove."+e.guid,function(){t&&(l(),t=!1,c>a&&c--,b(e.manualRowPositions,e.countRows()),e.manualRowPositions.splice(c,0,e.manualRowPositions.splice(a,1)[0]),e.forceFullRender=!0,e.view.render(),w.call(e),o.hooks.run(e,"afterRowMove",a,c),n.call(e,f))}),e.addHook("afterDestroy",C)},C=function(){var e=this;e.rootElement.off("mouseenter.manualRowMove."+e.guid,"table tbody tr > th"),e.rootElement.off("mousedown.manualRowMove."+e.guid,".manualRowMover"),g.off("mousemove.manualRowMove."+e.guid),g.off("mouseup.manualRowMove."+e.guid)},b=function(e,t){if(e.length<t)for(var o=e.length;t>o;o++)e[o]=o};this.beforeInit=function(){this.manualRowPositions=[]},this.init=function(e){var t=this,o=!!t.getSettings().manualRowMove;if(o){var n=t.getSettings().manualRowMove,i=y.call(t);this.manualRowPositions="undefined"!=typeof i?i:n instanceof Array?n:[],"afterInit"===e&&(v.call(this),this.manualRowPositions.length>0&&(t.forceFullRender=!0,t.render()))}else C.call(this),t.manualRowPositions=[]},this.modifyRow=function(e){var t=this;return t.getSettings().manualRowMove?("undefined"==typeof t.manualRowPositions[e]&&b(this.manualRowPositions,e+1),t.manualRowPositions[e]):e}}var i=new n;o.hooks.add("beforeInit",i.beforeInit),o.hooks.add("afterInit",function(){i.init.call(this,"afterInit")}),o.hooks.add("afterUpdateSettings",function(){i.init.call(this,"afterUpdateSettings")}),o.hooks.add("modifyRow",i.modifyRow),o.hooks.register("afterRowMove")}(o),function(o){function n(n){this.instance=n,this.addingStarted=!1;var i=e(document),r,s,l=!1,a=this,c=function(e){return n.autofill?void(n.autofill.handle&&n.autofill.handle.isDragged&&(n.autofill.handle.isDragged>1&&n.autofill.apply(),n.autofill.handle.isDragged=0,l=!1)):!0};e(document).off("mouseup.autofill."+n.guid,this.instance.rootElement).on("mouseup.autofill."+n.guid,this.instance.rootElement,function(e){c(e)}),e(document).off("mousemove.moveOutside_"+n.guid).on("mousemove.moveOutside_"+n.guid,function(e){if(!a.instance.autofill)return 0;var n=o.Dom.offset(a.instance.$table[0]).top-(t.pageYOffset||document.documentElement.scrollTop)+o.Dom.outerHeight(a.instance.$table[0]),i=o.Dom.offset(a.instance.$table[0]).left-(t.pageXOffset||document.documentElement.scrollLeft)+o.Dom.outerWidth(a.instance.$table[0]);a.addingStarted===!1&&a.instance.autofill.handle.isDragged>0&&e.clientY>n&&e.clientX<=i?(this.mouseDragOutside=!0,a.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&setTimeout(function(){a.addingStarted=!1,a.instance.alter("insert_row")},200)}),r=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown,this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(e){n.autofill.handle.isDragged=1,l=!0,r(e)},s=this.instance.view.wt.wtSettings.settings.onCellMouseOver,this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(e,t,o,i){n.autofill&&l&&!n.view.isMouseDown()&&n.autofill.handle&&n.autofill.handle.isDragged&&(n.autofill.handle.isDragged++,n.autofill.showBorder(t),n.autofill.checkIfNewRowNeeded()),s(e,t,o,i)},this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){n.autofill.selectAdjacent()}}n.prototype.init=function(){this.handle={}},n.prototype.disable=function(){this.handle.disabled=!0},n.prototype.selectAdjacent=function(){var e,t,o,n,i;e=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),t=this.instance.getData();e:for(o=e[2]+1;o<this.instance.countRows();o++){for(i=e[1];i<=e[3];i++)if(t[o][i])break e;(t[o][e[1]-1]||t[o][e[3]+1])&&(n=o)}n&&(this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(new f(e[0],e[1])),this.instance.view.wt.selections.fill.add(new f(n,e[3])),this.apply())},n.prototype.apply=function(){var e,t,n,i,r;if(this.handle.isDragged=0,e=this.instance.view.wt.selections.fill.getCorners(),e&&(this.instance.view.wt.selections.fill.clear(),t=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),e[0]===t[0]&&e[1]<t[1]?(n=new f(e[0],e[1]),i=new f(e[2],t[1]-1)):e[0]===t[0]&&e[3]>t[3]?(n=new f(e[0],t[3]+1),i=new f(e[2],e[3])):e[0]<t[0]&&e[1]===t[1]?(n=new f(e[0],e[1]),i=new f(t[0]-1,e[3])):e[2]>t[2]&&e[1]===t[1]&&(n=new f(t[2]+1,e[1]),i=new f(e[2],e[3])),n)){var s={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to};r=this.instance.getData(s.from.row,s.from.col,s.to.row,s.to.col),o.hooks.run(this.instance,"beforeAutofill",n,i,r),this.instance.populateFromArray(n.row,n.col,r,i.row,i.col,"autofill"),this.instance.selection.setRangeStart(new f(e[0],e[1])),this.instance.selection.setRangeEnd(new f(e[2],e[3]))}},n.prototype.showBorder=function(e){var t=this.instance.getSelectedRange().getTopLeftCorner(),o=this.instance.getSelectedRange().getBottomRightCorner();if("horizontal"!==this.instance.getSettings().fillHandle&&(o.row<e.row||t.row>e.row))e=new f(e.row,o.col);else{if("vertical"===this.instance.getSettings().fillHandle)return;e=new f(o.row,e.col)}this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to),this.instance.view.wt.selections.fill.add(e),this.instance.view.render()},n.prototype.checkIfNewRowNeeded=function(){var e,t=this.instance.countRows(),o=this;this.instance.view.wt.selections.fill.cellRange&&this.addingStarted===!1&&(e=this.instance.view.wt.selections.fill.getCorners(),e[2]===t-1&&(this.addingStarted=!0,this.instance._registerTimeout(setTimeout(function(){o.instance.alter("insert_row"),o.addingStarted=!1},200))))},o.hooks.add("afterInit",function(){var e=new n(this);"undefined"!=typeof this.getSettings().fillHandle&&(e.handle&&this.getSettings().fillHandle===!1?e.disable():e.handle||this.getSettings().fillHandle===!1||(this.autofill=e,this.autofill.init()))}),o.Autofill=n}(o),function(t){function o(){this.zeroClipboardInstance=null,this.instance=null}o.prototype.prepareZeroClipboard=function(){ZeroClipboard.config({swfPath:this.swfPath})},o.prototype.copy=function(){return this.instance.copyPaste.setCopyableText(),this.instance.copyPaste.copyPasteInstance.elTextarea.value},o.prototype.addToContextMenu=function(e){this.getSettings().contextMenuCopyPaste&&e.items.unshift({key:"copy",name:"Copy"},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()}},t.ContextMenu.SEPARATOR)},o.prototype.setupZeroClipboard=function(e){var o=this;if(this.cmInstance=e,t.Dom.hasClass(this.cmInstance.rootElement[0],"htContextMenu"))for(var i=e.getData(),r=0,s=i.length;s>r;r++)if("copy"===i[r].key){this.zeroClipboardInstance=new ZeroClipboard(e.getCell(r,0)),this.zeroClipboardInstance.off(),this.zeroClipboardInstance.on("copy",function(e){var t=e.clipboardData;t.setData("text/plain",o.copy()),o.instance.getSettings().outsideClickDeselects=o.outsideClickDeselectsCache}),n.bindEvents();break}},o.prototype.bindEvents=function(){var o=this;o.cmInstance&&(e(document).off("mouseenter."+o.cmInstance.guid).on("mouseenter."+o.cmInstance.guid,"#global-zeroclipboard-flash-bridge",function(e){var n=o.cmInstance.rootElement[0].querySelector("td.current");n&&t.Dom.removeClass(n,"current"),o.outsideClickDeselectsCache=o.instance.getSettings().outsideClickDeselects,o.instance.getSettings().outsideClickDeselects=!1}),e(document).off("mouseleave."+o.cmInstance.guid).on("mouseleave."+o.cmInstance.guid,"#global-zeroclipboard-flash-bridge",function(e){var n=o.cmInstance.rootElement[0].querySelector("td.zeroclipboard-is-hover");n&&t.Dom.removeClass(n,"zeroclipboard-is-hover"),o.instance.getSettings().outsideClickDeselects=o.outsideClickDeselectsCache}))},o.prototype.init=function(){if(this.getSettings().contextMenuCopyPaste){if("object"==typeof this.getSettings().contextMenuCopyPaste&&(n.swfPath=this.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof ZeroClipboard){throw new Error("To be able to use the Copy/Paste feature from the context menu, you need to manualy include ZeroClipboard.js file to your website.");return!1}n.instance=this,n.prepareZeroClipboard()}};var n=new o;t.hooks.add("afterRender",function(){n.setupZeroClipboard(this)}),t.hooks.add("afterInit",n.init),t.hooks.add("afterContextMenuDefaultOptions",n.addToContextMenu),t.ContextMenuCopyPaste=o}(o),h.prototype.init=function(){this.TABLE=this.instance.wtTable.TABLE,this.fixed=this.instance.wtTable.hider,this.fixedContainer=this.instance.wtTable.holder,this.scrollHandler=this.getScrollableElement(this.TABLE),this.$scrollHandler=e(this.scrollHandler)},h.prototype.makeClone=function(e){var t=document.createElement("DIV");t.className="ht_clone_"+e+" handsontable",t.style.position="absolute",t.style.overflow="hidden";var o=document.createElement("TABLE");return o.className=this.instance.wtTable.TABLE.className,t.appendChild(o),this.instance.wtTable.holder.parentNode.appendChild(t),new w({cloneSource:this.instance,cloneOverlay:this,table:o})},h.prototype.getScrollableElement=function(e){for(var o=e.parentNode;o&&o.style;){if("visible"!==o.style.overflow&&""!==o.style.overflow)return o;if(this instanceof k&&"visible"!==o.style.overflowX&&""!==o.style.overflowX)return o;o=o.parentNode}return t},h.prototype.onScroll=function(){this.windowScrollPosition=this.getScrollPosition(),this.readSettings(),this.resetFixedPosition()},h.prototype.availableSize=function(){var e;return e=this.windowScrollPosition>this.tableParentOffset?this.instance.wtTable.getLastVisibleRow()===this.total-1?o.Dom.outerHeight(this.TABLE):this.windowSize:this.windowSize-this.tableParentOffset},h.prototype.refresh=function(e){this.clone&&this.clone.draw(e)},h.prototype.destroy=function(){this.$scrollHandler.off("."+this.clone.guid),e(t).off("."+this.clone.guid),e(document).off("."+this.clone.guid),e(document.body).off("."+this.clone.guid)},u.prototype.getSize=function(e){return this.cellSizes[e]},u.prototype.getContainerSize=function(e){return"function"==typeof this.containerSizeFn?this.containerSizeFn(e):this.containerSizeFn},u.prototype.countVisible=function(){return this.cellCount},u.prototype.isLastIncomplete=function(){return this.remainingSize>0},d.prototype.appear=function(e){var t,n,i,r,s,l,a,c,h,u,d,p;if(!this.disabled){var m=this.instance,g,w,y,v,C,b,S;for(b=m.cloneOverlay instanceof D||m.cloneOverlay instanceof E?m.getSetting("fixedRowsTop"):m.wtTable.getRowStrategy().countVisible(),C=0;b>C;C++)if(S=m.wtTable.rowFilter.visibleToSource(C),S>=e[0]&&S<=e[2]){g=S;break}for(C=b-1;C>=0;C--)if(S=m.wtTable.rowFilter.visibleToSource(C),S>=e[0]&&S<=e[2]){y=S;break}for(b=m.cloneOverlay instanceof k||m.cloneOverlay instanceof E?m.getSetting("fixedColumnsLeft"):m.wtTable.getColumnStrategy().cellCount,C=0;b>C;C++)if(S=m.wtTable.columnFilter.visibleToSource(C),S>=e[1]&&S<=e[3]){w=S;break}for(C=b-1;C>=0;C--)if(S=m.wtTable.columnFilter.visibleToSource(C),S>=e[1]&&S<=e[3]){v=S;break}if(void 0===g||void 0===w)return void this.disappear();t=g!==y||w!==v,n=m.wtTable.getCell(new f(g,w)),i=t?m.wtTable.getCell(new f(y,v)):n,r=o.Dom.offset(n),s=t?o.Dom.offset(i):r,l=o.Dom.offset(m.wtTable.TABLE),c=r.top,d=s.top+o.Dom.outerHeight(i)-c,u=r.left,p=s.left+o.Dom.outerWidth(i)-u,a=c-l.top-1,h=u-l.left-1;var R=o.Dom.getComputedStyle(n);parseInt(R.borderTopWidth,10)>0&&(a+=1,d=d>0?d-1:0),parseInt(R.borderLeftWidth,10)>0&&(h+=1,p=p>0?p-1:0),this.topStyle.top=a+"px",this.topStyle.left=h+"px",this.topStyle.width=p+"px",this.topStyle.display="block",this.leftStyle.top=a+"px",this.leftStyle.left=h+"px",this.leftStyle.height=d+"px",this.leftStyle.display="block";var T=Math.floor(this.settings.border.width/2);this.bottomStyle.top=a+d-T+"px",this.bottomStyle.left=h+"px",this.bottomStyle.width=p+"px",this.bottomStyle.display="block",this.rightStyle.top=a+"px",this.rightStyle.left=h+p-T+"px",this.rightStyle.height=d+1+"px",this.rightStyle.display="block",this.hasSetting(this.settings.border.cornerVisible)?(this.cornerStyle.top=a+d-4+"px",this.cornerStyle.left=h+p-4+"px",this.cornerStyle.display="block"):this.cornerStyle.display="none"}},d.prototype.disappear=function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none"},d.prototype.hasSetting=function(e){return"function"==typeof e?e():!!e},f.prototype.isValid=function(e){return this.row<0||this.col<0?!1:this.row>=e.getSetting("totalRows")||this.col>=e.getSetting("totalColumns")?!1:!0},f.prototype.isEqual=function(e){return e===this?!0:this.row===e.row&&this.col===e.col},f.prototype.isSouthEastOf=function(e){return this.row>=e.row&&this.col>=e.col},f.prototype.isNorthWestOf=function(e){return this.row<=e.row&&this.col<=e.col},f.prototype.isSouthWestOf=function(e){return this.row>=e.row&&this.col<=e.col},f.prototype.isNorthEastOf=function(e){return this.row<=e.row&&this.col>=e.col},t.WalkontableCellCoords=f,p.prototype.isValid=function(e){return this.from.isValid(e)&&this.to.isValid(e)},p.prototype.isSingle=function(){return this.from.row===this.to.row&&this.from.col===this.to.col},p.prototype.includes=function(e){var t=this.getTopLeftCorner(),o=this.getBottomRightCorner();return t.row<=e.row&&o.row>=e.row&&t.col<=e.col&&o.col>=e.col},p.prototype.includesRange=function(e){return this.includes(e.getTopLeftCorner())&&this.includes(e.getBottomRightCorner())},p.prototype.isEqual=function(e){return Math.min(this.from.row,this.to.row)==Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(e.from.col,e.to.col)},p.prototype.overlaps=function(e){return e.isSouthEastOf(this.getTopLeftCorner())&&e.isNorthWestOf(this.getBottomRightCorner())},p.prototype.isSouthEastOf=function(e){return this.getTopLeftCorner().isSouthEastOf(e)||this.getBottomRightCorner().isSouthEastOf(e)},p.prototype.isNorthWestOf=function(e){return this.getTopLeftCorner().isNorthWestOf(e)||this.getBottomRightCorner().isNorthWestOf(e)},p.prototype.expand=function(e){var t=this.getTopLeftCorner(),o=this.getBottomRightCorner();return e.row<t.row||e.col<t.col||e.row>o.row||e.col>o.col?(this.from=new f(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=new f(Math.max(o.row,e.row),Math.max(o.col,e.col)),!0):!1},p.prototype.expandByRange=function(e){if(this.includesRange(e)||!this.overlaps(e))return!1;var t=this.getTopLeftCorner(),o=this.getBottomRightCorner(),n=this.getTopRightCorner(),i=this.getBottomLeftCorner(),r=e.getTopLeftCorner(),s=e.getBottomRightCorner(),l=Math.min(t.row,r.row),a=Math.min(t.col,r.col),c=Math.max(o.row,s.row),h=Math.max(o.col,s.col),u=new f(l,a),d=new f(c,h),m=new p(u,u,d).isCorner(this.from,e),g=e.isEqual(new p(u,u,d));return m&&!g&&(this.from.col>u.col&&(u.col=h,d.col=a),this.from.row>u.row&&(u.row=c,d.row=l)),this.from=u,this.to=d,!0},p.prototype.getDirection=function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},p.prototype.setDirection=function(e){switch(e){case"NW-SE":this.from=this.getTopLeftCorner(),this.to=this.getBottomRightCorner();break;case"NE-SW":this.from=this.getTopRightCorner(),this.to=this.getBottomLeftCorner();break;case"SE-NW":this.from=this.getBottomRightCorner(),this.to=this.getTopLeftCorner();break;case"SW-NE":this.from=this.getBottomLeftCorner(),this.to=this.getTopRightCorner()}},p.prototype.getTopLeftCorner=function(){return new f(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},p.prototype.getBottomRightCorner=function(){return new f(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},p.prototype.getTopRightCorner=function(){return new f(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},p.prototype.getBottomLeftCorner=function(){return new f(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},p.prototype.isCorner=function(e,t){return t&&t.includes(e)&&(this.getTopLeftCorner().isEqual(new f(t.from.row,t.from.col))||this.getTopRightCorner().isEqual(new f(t.from.row,t.to.col))||this.getBottomLeftCorner().isEqual(new f(t.to.row,t.from.col))||this.getBottomRightCorner().isEqual(new f(t.to.row,t.to.col)))?!0:e.isEqual(this.getTopLeftCorner())||e.isEqual(this.getTopRightCorner())||e.isEqual(this.getBottomLeftCorner())||e.isEqual(this.getBottomRightCorner())},p.prototype.getOppositeCorner=function(e,t){if(!(e instanceof f))return!1;if(t&&t.includes(e)){if(this.getTopLeftCorner().isEqual(new f(t.from.row,t.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new f(t.from.row,t.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new f(t.to.row,t.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new f(t.to.row,t.to.col)))return this.getTopLeftCorner()}return e.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():e.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():e.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():e.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},p.prototype.getBordersSharedWith=function(e){if(!this.includesRange(e))return[];var t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},o={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},n=[];return t.top==o.top&&n.push("top"),t.right==o.right&&n.push("right"),t.bottom==o.bottom&&n.push("bottom"),t.left==o.left&&n.push("left"),n},p.prototype.getInner=function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),o=[],n=e.row;n<=t.row;n++)for(var i=e.col;i<=t.col;i++)this.from.row===n&&this.from.col===i||this.to.row===n&&this.to.col===i||o.push(new f(n,i));return o},p.prototype.getAll=function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),o=[],n=e.row;n<=t.row;n++)for(var i=e.col;i<=t.col;i++)o.push(e.row===n&&e.col===i?e:t.row===n&&t.col===i?t:new f(n,i));return o},p.prototype.forAll=function(e){for(var t=this.getTopLeftCorner(),o=this.getBottomRightCorner(),n=t.row;n<=o.row;n++)for(var i=t.col;i<=o.col;i++){var r=e(n,i);if(r===!1)return}},t.WalkontableCellRange=p,m.prototype.visibleToSource=function(e){return e},m.prototype.sourceToVisible=function(e){return e},m.prototype.offsettedTH=function(e){return e-this.countTH},m.prototype.unOffsettedTH=function(e){return e+this.countTH},m.prototype.visibleRowHeadedColumnToSourceColumn=function(e){return this.visibleToSource(this.offsettedTH(e))},m.prototype.sourceColumnToVisibleRowHeadedColumn=function(e){return this.unOffsettedTH(this.sourceToVisible(e))},g.prototype=new u,g.prototype.getSize=function(e){return this.cellSizes[e]+(this.cellStretch[e]||0)},g.prototype.stretch=function(){var e,t=0;if(e=this.instance.wtTable.allRowsInViewport()?this.getContainerSize():this.getContainerSize(1/0),this.remainingSize=this.cellSizesSum-e,this.cellStretch.length=0,"all"===this.strategy){if(this.remainingSize<0){for(var o=e/this.cellSizesSum,n;t<this.cellCount-1;)n=Math.floor(o*this.cellSizes[t]),this.remainingSize+=n-this.cellSizes[t],this.cellStretch[t]=n-this.cellSizes[t],t++;this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0}}else"last"===this.strategy&&this.remainingSize<0&&1/0!==e&&(this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0)},g.prototype.countVisible=function(){return this.visibleCellCount},g.prototype.isLastIncomplete=function(){var e=this.instance.wtTable.getFirstVisibleRow(),t=this.instance.wtTable.getLastVisibleColumn(),n=this.instance.wtTable.getCell(new f(e,t)),i=o.Dom.offset(n),r=o.Dom.outerWidth(n),s=i.left+r,l=this.instance.wtScrollbars.vertical.getScrollPosition(),a=this.instance.wtViewport.getViewportWidth(),c=l+a;return c>=s},w.prototype.draw=function(e){if(this.drawInterrupted=!1,!e&&!o.Dom.isVisible(this.wtTable.TABLE))return void(this.drawInterrupted=!0);e=e&&this.getSetting("offsetRow")===this.lastOffsetRow,this.lastOffsetRow=this.getSetting("offsetRow");var t=this.getSetting("totalRows");return this.lastOffsetRow>t&&t>0&&(this.scrollVertical(-1/0),this.scrollViewport(new f(t-1,0))),this.wtTable.draw(e),this},w.prototype.update=function(e,t){return this.wtSettings.update(e,t)},w.prototype.scrollVertical=function(e){var t=this.wtScroll.scrollVertical(e);return this.getSetting("onScrollVertically"),t},w.prototype.scrollHorizontal=function(e){var t=this.wtScroll.scrollHorizontal(e);return this.getSetting("onScrollHorizontally"),t},w.prototype.scrollViewport=function(e){return this.wtScroll.scrollViewport(e),this},w.prototype.getViewport=function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},w.prototype.getSetting=function(e,t,o,n,i){return this.wtSettings.getSetting(e,t,o,n,i)},w.prototype.hasSetting=function(e){return this.wtSettings.has(e)},w.prototype.destroy=function(){e(t).off("."+this.guid),e(document.body).off("."+this.guid),this.wtScrollbars.destroy(),this.wtEvent&&this.wtEvent.destroy()},y.prototype=new h,y.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=this.instance.wtTable.holder.getBoundingClientRect();e.style.top=Math.ceil(t.top,10)+"px",e.style.left=Math.ceil(t.left,10)+"px"}},y.prototype.getScrollPosition=function(){},y.prototype.getLastCell=function(){},y.prototype.applyToDOM=function(){},y.prototype.scrollTo=function(){},y.prototype.readWindowSize=function(){},y.prototype.readSettings=function(){},y.prototype.destroy=function(){h.prototype.destroy.call(this),clearTimeout(this.lastTimeout)},v.prototype.parentCell=function(e){var t={},n=this.instance.wtTable.TABLE,i=o.Dom.closest(e,["TD","TH"],n);return i&&o.Dom.isChildOf(i,n)?(t.coords=this.instance.wtTable.getCoords(i),t.TD=i):o.Dom.hasClass(e,"wtBorder")&&o.Dom.hasClass(e,"current")?(t.coords=this.instance.selections[0].cellRange.highlight,t.TD=this.instance.wtTable.getCell(t.coords)):o.Dom.hasClass(e,"wtBorder")&&o.Dom.hasClass(e,"area")&&(t.coords=this.instance.selections[1].cellRange.to,t.TD=this.instance.wtTable.getCell(t.coords)),t},v.prototype.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1])},t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,o){return t.setTimeout(e,1e3/60)}}(),t.cancelRequestAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),t.getComputedStyle||!function(){var e,o={getPropertyValue:function n(t){return"float"==t&&(t="styleFloat"),e.currentStyle[t.toUpperCase()]||null}};t.getComputedStyle=function(t){return e=t,o}}(),!String.prototype.trim){var tt=/^\s+|\s+$/g;String.prototype.trim=function(){return this.replace(tt,"")}}S.prototype.offsetted=function(e){return e+this.offset},S.prototype.unOffsetted=function(e){return e-this.offset},S.prototype.visibleToSource=function(e){return this.offsetted(e)},S.prototype.sourceToVisible=function(e){return this.unOffsetted(e)},S.prototype.offsettedTH=function(e){return e-this.countTH},S.prototype.visibleColHeadedRowToSourceRow=function(e){return this.visibleToSource(this.offsettedTH(e))},S.prototype.sourceRowToVisibleColHeadedRow=function(e){return this.unOffsettedTH(this.sourceToVisible(e))},R.prototype=new u,R.prototype.add=function(e,t){if(!this.canRenderMoreRows())return!1;var o=this.sizeAtIndex(e,t);if(void 0===o)return!1;var n=this.getContainerSize(this.cellSizesSum+o);return this.cellSizes.push(o),this.cellSizesSum+=o,this.cellCount++,this.remainingSize=this.cellSizesSum-n,this.remainingSize<=o&&this.visiblCellCount++,!0},R.prototype.canRenderMoreRows=function(){return this.remainingSize<=0||this.cellCount-this.visiblCellCount<this.curOuts},R.prototype.remove=function(){var e=this.cellSizes.pop();this.cellSizesSum-=e,this.cellCount--,this.remainingSize-=e},R.prototype.removeOutstanding=function(){for(;this.cellCount-this.visiblCellCount>this.curOuts;)this.remove()},R.prototype.countRendered=function(){return this.cellCount},R.prototype.countVisible=function(){return this.visiblCellCount},R.prototype.isLastIncomplete=function(){var e=this.instance.wtTable.getLastVisibleRow(),t=this.instance.wtTable.getFirstVisibleColumn(),n=this.instance.wtTable.getCell(new f(e,t)),i=o.Dom.offset(n).top,r=o.Dom.outerHeight(n),s=i+r,l=this.instance.wtScrollbars.horizontal.scrollHandler.offsetTop+this.instance.wtScrollbars.vertical.getScrollPosition(),a=this.instance.wtViewport.getViewportHeight(),c=l+a;return s>c},T.prototype.scrollVertical=function(e){if(!this.instance.drawn)throw new Error("scrollVertical can only be called after table was drawn to DOM");var t=this.instance,o,n=t.getSetting("offsetRow"),i=t.getSetting("fixedRowsTop"),r=t.getSetting("totalRows"),s=t.wtViewport.getViewportHeight();
return o=r>0&&!this.instance.wtTable.isLastRowFullyVisible()?this.scrollLogicVertical(e,n,r,i,s,function(e){return i>e-n&&e-n>=0?t.getSetting("rowHeight",e-n):t.getSetting("rowHeight",e)}):0,o!==n&&this.instance.wtScrollbars.vertical.scrollTo(o),t},T.prototype.scrollHorizontal=function(e){return this.instance.wtScrollbars.horizontal.scrollTo(e),this.instance},T.prototype.scrollLogicVertical=function(e,t,o,n,i,r){var s=t+e;return s>=o-n&&(s=o-n-1),0>s&&(s=0),s},T.prototype.scrollViewport=function(e){if(this.instance.drawn){var t=this.instance.getSetting("offsetRow"),o=this.instance.getSetting("totalRows"),n=this.instance.getSetting("totalColumns");if(e.row<0||e.row>o-1)throw new Error("row "+e.row+" does not exist");if(e.col<0||e.col>n-1)throw new Error("column "+e.col+" does not exist");var i=this.instance.wtTable.getCell(e);"object"==typeof i?e.col>=this.instance.getSetting("fixedColumnsLeft")&&this.scrollToRenderedCell(i):e.row>=this.instance.wtTable.getLastVisibleRow()?(this.scrollVertical(e.row-this.instance.wtTable.getLastVisibleRow()),e.row==this.instance.wtTable.getLastVisibleRow()&&this.instance.wtTable.getRowStrategy().isLastIncomplete()&&this.scrollViewport(e)):e.row>=this.instance.getSetting("fixedRowsTop")&&this.scrollVertical(e.row-this.instance.wtTable.getFirstVisibleRow())}},T.prototype.scrollToRenderedCell=function(e){var n=o.Dom.offset(e),i=o.Dom.outerWidth(e),r=o.Dom.outerHeight(e),s=o.Dom.offset(this.instance.wtTable.TABLE),l={left:this.instance.wtScrollbars.horizontal.getScrollPosition(),top:this.instance.wtScrollbars.vertical.getScrollPosition()},a=this.instance.wtViewport.getWorkspaceWidth(),c=this.instance.wtViewport.getWorkspaceHeight(),h=o.Dom.outerWidth(this.instance.wtScrollbars.horizontal.clone.wtTable.TABLE),u=o.Dom.outerHeight(this.instance.wtScrollbars.vertical.clone.wtTable.TABLE);if(this.instance.wtScrollbars.horizontal.scrollHandler!==t&&(s.left=0,n.left-=o.Dom.offset(this.instance.wtScrollbars.horizontal.scrollHandler).left),this.instance.wtScrollbars.vertical.scrollHandler!==t&&(s.top=0,n.top=n.top-o.Dom.offset(this.instance.wtScrollbars.vertical.scrollHandler).top),a>i)if(n.left<l.left+h)this.instance.wtScrollbars.horizontal.setScrollPosition(n.left-h);else if(n.left+i>s.left+l.left+a){var d=n.left+i-(s.left+l.left+a);this.instance.wtScrollbars.horizontal.setScrollPosition(l.left+d)}c>r&&(n.top<l.top+u?(this.instance.wtScrollbars.vertical.setScrollPosition(n.top-u),this.instance.wtScrollbars.vertical.onScroll()):n.top+r>l.top+c&&(this.instance.wtScrollbars.vertical.setScrollPosition(n.top-c+r),this.instance.wtScrollbars.vertical.onScroll()))},E.prototype=new h,E.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){var n=this.instance.wtTable.holder.getBoundingClientRect(),i=Math.ceil(n.top),r=Math.ceil(n.left);e.style.left=0>r?-r+"px":"0",e.style.top=0>i?-i+"px":"0"}else e.style.top=this.instance.wtScrollbars.vertical.windowScrollPosition+"px",e.style.left=this.instance.wtScrollbars.horizontal.windowScrollPosition+"px";e.style.width=o.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px",e.style.height=o.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},E.prototype.refresh=function(e){h.prototype.refresh.call(this,e)},E.prototype.getScrollPosition=function(){},E.prototype.getLastCell=function(){},E.prototype.applyToDOM=function(){},E.prototype.scrollTo=function(){},E.prototype.readWindowSize=function(){},E.prototype.readSettings=function(){},k.prototype=new h,k.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){var n=this.instance.wtTable.holder.getBoundingClientRect(),i=Math.ceil(n.left);e.style.left=0>i?-i+"px":"0",e.style.top=this.instance.wtTable.hider.style.top}else e.style.top=this.instance.wtTable.hider.style.top,e.style.left=this.windowScrollPosition+"px";e.style.height=o.Dom.outerHeight(this.clone.wtTable.TABLE)+"px",e.style.width=o.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px"}},k.prototype.refresh=function(e){h.prototype.refresh.call(this,e)},k.prototype.getScrollPosition=function(){return o.Dom.getScrollLeft(this.scrollHandler)},k.prototype.setScrollPosition=function(e){this.scrollHandler===t?t.scrollTo(e,o.Dom.getWindowScrollTop()):this.scrollHandler.scrollLeft=e},k.prototype.onScroll=function(){h.prototype.onScroll.call(this),this.instance.getSetting("onScrollHorizontally")},k.prototype.getLastCell=function(){return this.instance.wtTable.getLastVisibleColumn()},k.prototype.applyToDOM=function(){this.readWindowSize()},k.prototype.scrollTo=function(e){this.setScrollPosition(this.tableParentOffset+e*this.cellSize)},k.prototype.readWindowSize=function(){this.scrollHandler===t?(this.windowSize=document.documentElement.clientWidth,this.tableParentOffset=this.instance.wtTable.holderOffset.left):(this.windowSize=this.scrollHandler.clientWidth,this.tableParentOffset=0),this.windowScrollPosition=this.getScrollPosition()},k.prototype.readSettings=function(){this.readWindowSize(),this.total=this.instance.getSetting("totalColumns")},D.prototype=new h,D.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){var n=this.instance.wtTable.holder.getBoundingClientRect(),i=Math.ceil(n.top);e.style.left="0",e.style.top=0>i?-i+"px":"0"}else e.style.top=this.windowScrollPosition+"px",e.style.left="0";e.style.width=this.instance.wtScrollbars.horizontal.scrollHandler===t?this.instance.wtViewport.getWorkspaceActualWidth()+"px":o.Dom.outerWidth(this.clone.wtTable.TABLE)+"px",e.style.height=o.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},D.prototype.getScrollPosition=function(){return o.Dom.getScrollTop(this.scrollHandler)},D.prototype.setScrollPosition=function(e){this.scrollHandler===t?t.scrollTo(o.Dom.getWindowScrollLeft(),e):this.scrollHandler.scrollTop=e},D.prototype.onScroll=function(){h.prototype.onScroll.call(this),this.instance.draw(!0),this.instance.getSetting("onScrollVertically")},D.prototype.getLastCell=function(){return this.instance.getSetting("offsetRow")+this.instance.wtTable.tbodyChildrenLength-1},D.prototype.sumCellSizes=function(e,t){for(var o=0;t>e;)o+=this.instance.wtSettings.settings.rowHeight(e)||this.instance.wtSettings.settings.defaultRowHeight,e++;return o},D.prototype.refresh=function(e){this.applyToDOM(),h.prototype.refresh.call(this,e)},D.prototype.applyToDOM=function(){var e=this.getLastCell();this.measureBefore=this.sumCellSizes(0,this.offset),this.measureAfter=-1===e?0:this.sumCellSizes(e,this.total-e);var t=this.instance.wtViewport.getColumnHeaderHeight();this.fixedContainer.style.height=t+this.sumCellSizes(0,this.total)+4+"px",this.fixed.style.top=this.measureBefore+"px",this.fixed.style.bottom=""},D.prototype.scrollTo=function(e){var t=this.tableParentOffset+e*this.cellSize;this.setScrollPosition(t),this.onScroll()},D.prototype.readWindowSize=function(){if(this.scrollHandler===t)this.windowSize=document.documentElement.clientHeight,this.tableParentOffset=this.instance.wtTable.holderOffset.top;else{var e=o.Dom.outerHeight(this.scrollHandler);this.windowSize=e>0&&this.scrollHandler.clientHeight>0?this.scrollHandler.clientHeight:1/0,this.tableParentOffset=0}this.windowScrollPosition=this.getScrollPosition()},D.prototype.readSettings=function(){this.readWindowSize(),this.offset=this.instance.getSetting("offsetRow"),this.total=this.instance.getSetting("totalRows");for(var e=this.windowScrollPosition-this.tableParentOffset,t=0,o,n=0;n<this.total&&(o=this.instance.getSetting("rowHeight",n)||this.instance.wtSettings.settings.defaultRowHeight,t+=o,!(t-1>e));n++);this.offset=Math.min(n,this.total),this.instance.update("offsetRow",this.offset)},A.prototype.registerListeners=function(){function o(){if(n.instance.drawn){if(!n.instance.wtTable.holder.parentNode)return void n.destroy();n.vertical.windowScrollPosition=n.vertical.getScrollPosition(),n.horizontal.windowScrollPosition=n.horizontal.getScrollPosition(),n.box=n.instance.wtTable.hider.getBoundingClientRect(),(n.vertical.windowScrollPosition!==i||n.horizontal.windowScrollPosition!==r||n.box.top!==s||n.box.left!==l)&&(n.vertical.onScroll(),n.horizontal.onScroll(),n.corner.onScroll(),i=n.vertical.windowScrollPosition,r=n.horizontal.windowScrollPosition,s=n.box.top,l=n.box.left)}}var n=this,i,r,s,l,a=e(t);this.vertical.$scrollHandler.on("scroll."+this.instance.guid,o),this.vertical.scrollHandler!==this.horizontal.scrollHandler&&this.horizontal.$scrollHandler.on("scroll."+this.instance.guid,o),this.vertical.scrollHandler!==t&&this.horizontal.scrollHandler!==t&&a.on("scroll."+this.instance.guid,o)},A.prototype.destroy=function(){this.vertical&&(this.vertical.destroy(),this.vertical.$scrollHandler.off("scroll."+this.instance.guid)),this.horizontal&&(this.horizontal.destroy(),this.vertical.$scrollHandler.off("scroll."+this.instance.guid)),e(t).off("scroll."+this.instance.guid),this.corner&&this.corner.destroy(),this.debug&&this.debug.destroy()},A.prototype.refresh=function(e){this.horizontal&&this.horizontal.readSettings(),this.vertical&&this.vertical.readSettings(),this.horizontal&&this.horizontal.refresh(e),this.vertical&&this.vertical.refresh(e),this.corner&&this.corner.refresh(e),this.debug&&this.debug.refresh(e)},A.prototype.applyToDOM=function(){this.horizontal&&this.horizontal.applyToDOM(),this.vertical&&this.vertical.applyToDOM(),this.corner&&this.corner.applyToDOM(),this.debug&&this.debug.applyToDOM()},x.prototype.getBorder=function(e){return this.instanceBorders[e.guid]?this.instanceBorders[e.guid]:void(this.instanceBorders[e.guid]=new d(e,this.settings))},x.prototype.isEmpty=function(){return null===this.cellRange},x.prototype.add=function(e){this.isEmpty()?this.cellRange=new p(e,e,e):this.cellRange.expand(e)},x.prototype.replace=function(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1},x.prototype.clear=function(){this.cellRange=null},x.prototype.getCorners=function(){var e=this.cellRange.getTopLeftCorner(),t=this.cellRange.getBottomRightCorner();return[e.row,e.col,t.row,t.col]},x.prototype.addClassAtCoords=function(e,t,n,i){var r=e.wtTable.getCell(new f(t,n));"object"==typeof r&&o.Dom.addClass(r,i)},x.prototype.draw=function(e){var t,n,i,r,s,l=e.wtTable.getRowStrategy().countVisible(),a=e.wtTable.getColumnStrategy().cellCount;if(this.isEmpty()){if(this.settings.border){var c=this.getBorder(e);c&&c.disappear()}}else{for(t=this.getCorners(),n=0;l>n;n++)for(r=e.wtTable.rowFilter.visibleToSource(n),i=0;a>i;i++)if(s=e.wtTable.columnFilter.visibleToSource(i),r>=t[0]&&r<=t[2]&&s>=t[1]&&s<=t[3]){if(this.settings.className&&this.addClassAtCoords(e,r,s,this.settings.className),s===t[1]){var h=e.wtTable.getRowHeader(r);h&&o.Dom.addClass(h,this.settings.highlightRowClassName)}if(r===t[0]||r>t[0]&&0==n){var h=e.wtTable.getColumnHeader(s);h&&o.Dom.addClass(h,this.settings.highlightColumnClassName)}}else r>=t[0]&&r<=t[2]?this.addClassAtCoords(e,r,s,this.settings.highlightRowClassName):s>=t[1]&&s<=t[3]&&this.addClassAtCoords(e,r,s,this.settings.highlightColumnClassName);if(e.getSetting("onBeforeDrawBorders",t,this.settings.className),this.settings.border){var c=this.getBorder(e);c&&c.appear(t)}}},O.prototype.update=function(e,t){if(void 0===t)for(var o in e)e.hasOwnProperty(o)&&(this.settings[o]=e[o]);else this.settings[e]=t;return this.instance},O.prototype.getSetting=function(e,t,o,n,i){return"function"==typeof this.settings[e]?this.settings[e](t,o,n,i):void 0!==t&&"[object Array]"===Object.prototype.toString.call(this.settings[e])?this.settings[e][t]:this.settings[e]},O.prototype.has=function(e){return!!this.settings[e]},H.prototype.getRowStrategy=function(){return this.isWorkingOnClone()?this.instance.cloneSource.wtTable.rowStrategy:this.rowStrategy},H.prototype.getColumnStrategy=function(){return this.isWorkingOnClone()?this.instance.cloneSource.wtTable.columnStrategy:this.columnStrategy},H.prototype.isWorkingOnClone=function(){return!!this.instance.cloneSource},H.prototype.refreshHiderDimensions=function(){var e=this.spreader.style;e.position="relative",e.width="auto",e.height="auto"},H.prototype.draw=function(e){if(e)this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!0);else{this.isWorkingOnClone()?this.tableOffset=this.instance.cloneSource.wtTable.tableOffset:(this.holderOffset=o.Dom.offset(this.holder),this.tableOffset=o.Dom.offset(this.TABLE),this.instance.wtScrollbars.vertical.readSettings(),this.instance.wtScrollbars.horizontal.readSettings(),this.instance.wtViewport.resetSettings());var t;t=this.instance.cloneOverlay instanceof y||this.instance.cloneOverlay instanceof D||this.instance.cloneOverlay instanceof E?0:this.instance.wtSettings.settings.offsetRow,this.rowFilter=new S(t,this.instance.getSetting("totalRows"),this.instance.getSetting("columnHeaders").length),this.columnFilter=new m(this.instance.getSetting("totalColumns"),this.instance.getSetting("rowHeaders").length),this._doDraw()}return this.refreshPositions(e),e||this.isWorkingOnClone()||(this.instance.wtScrollbars.vertical.resetFixedPosition(),this.instance.wtScrollbars.horizontal.resetFixedPosition(),this.instance.wtScrollbars.corner.resetFixedPosition(),this.instance.wtScrollbars.debug&&this.instance.wtScrollbars.debug.resetFixedPosition()),this.instance.drawn=!0,this},H.prototype._doDraw=function(){var e=new P(this);e.render()},H.prototype.refreshPositions=function(e){this.refreshHiderDimensions(),this.refreshSelections(e)},H.prototype.removeClassFromCells=function(e){for(var t=this.TABLE.querySelectorAll("."+e),n=0,i=t.length;i>n;n++)o.Dom.removeClass(t[n],e)},H.prototype.refreshSelections=function(e){if(this.instance.selections){if(e)for(var t=0,o=this.instance.selections.length;o>t;t++)this.instance.selections[t].settings.className&&this.removeClassFromCells(this.instance.selections[t].settings.className),this.instance.selections[t].settings.highlightRowClassName&&this.removeClassFromCells(this.instance.selections[t].settings.highlightRowClassName),this.instance.selections[t].settings.highlightColumnClassName&&this.removeClassFromCells(this.instance.selections[t].settings.highlightColumnClassName);for(var t=0,o=this.instance.selections.length;o>t;t++)this.instance.selections[t].draw(this.instance,e)}},H.prototype.getCell=function(e){if(this.isRowBeforeViewport(e.row))return-1;if(this.isRowAfterViewport(e.row))return-2;var t=this.TBODY.childNodes[this.rowFilter.sourceToVisible(e.row)];return t?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e.col)]:void 0},H.prototype.getColumnHeader=function(e){var t=this.THEAD.childNodes[0];return t?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]:void 0},H.prototype.getRowHeader=function(e){if(0==this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var t=this.TBODY.childNodes[this.rowFilter.sourceToVisible(e)];return t?t.childNodes[0]:void 0},H.prototype.getCoords=function(e){var t=e.parentNode,n=o.Dom.index(t);return n=t.parentNode===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(n):this.rowFilter.visibleToSource(n),new f(n,this.columnFilter.visibleRowHeadedColumnToSourceColumn(e.cellIndex))},H.prototype.getTrForRow=function(e){return this.TBODY.childNodes[this.rowFilter.sourceToVisible(e)]},H.prototype.getFirstVisibleRow=function(){return this.rowFilter.visibleToSource(0)},H.prototype.getFirstVisibleColumn=function(){if(this.isWorkingOnClone())return this.instance.cloneOverlay instanceof k||this.instance.cloneOverlay instanceof E?0:this.instance.cloneSource.wtTable.getFirstVisibleColumn();var e=this.instance.wtScrollbars.horizontal.getScrollPosition(),t=this.getColumnStrategy().cellCount,o=this.TBODY.firstChild;if(!o)return 0;for(var n=0;t>n;n++)if(e-=o.childNodes[n].offsetWidth,0>e)return n;return-1},H.prototype.getLastVisibleRow=function(){var e=this.rowFilter.visibleToSource(this.getRowStrategy().countVisible()-1),t=this.instance;if(t.cloneOverlay instanceof D||t.cloneOverlay instanceof E){var o=this.instance.getSetting("fixedRowsTop");return Math.min(o-1,e)}return e},H.prototype.getLastVisibleColumn=function(){var e=this.instance;if(this.isWorkingOnClone()){if(e.cloneOverlay instanceof k||e.cloneOverlay instanceof E){var t=this.getColumnStrategy().countVisible()-1,o=e.getSetting("fixedColumnsLeft");return Math.min(o-1,t)}return this.instance.cloneSource.wtTable.getLastVisibleColumn()}var n=this.instance.wtScrollbars.horizontal.getScrollPosition(),i=n+this.instance.wtViewport.getWorkspaceWidth(1/0),r=this.getColumnStrategy().cellCount,s=this.instance.getSetting("rowHeaders").length||0,l=this.TBODY.firstChild;if(!r)return-1;for(var a=0;r+s>a;a++)if(i-=l.childNodes[a].offsetWidth,0>=i)return a-s;return a-s-1},H.prototype.isRowBeforeViewport=function(e){return this.rowFilter.sourceToVisible(e)<0&&e>=0},H.prototype.isRowAfterViewport=function(e){return e>this.getLastVisibleRow()},H.prototype.isColumnBeforeViewport=function(e){return this.columnFilter.sourceToVisible(e)<0&&e>=0},H.prototype.isColumnAfterViewport=function(e){return e>this.getLastVisibleColumn()},H.prototype.isRowInViewport=function(e){return!this.isRowBeforeViewport(e)&&!this.isRowAfterViewport(e)},H.prototype.isColumnInViewport=function(e){return!this.isColumnBeforeViewport(e)&&!this.isColumnAfterViewport(e)},H.prototype.isLastRowFullyVisible=function(){return this.getLastVisibleRow()===this.instance.getSetting("totalRows")-1&&!this.getRowStrategy().isLastIncomplete()},H.prototype.isLastColumnFullyVisible=function(){return this.getLastVisibleColumn()===this.instance.getSetting("totalColumns")-1&&!this.getColumnStrategy().isLastIncomplete()},H.prototype.getVisibleRowsCount=function(){return this.getRowStrategy().countVisible()},H.prototype.allRowsInViewport=function(){return this.getRowStrategy().cellCount==this.getVisibleRowsCount()},P.prototype.render=function(){this.wtTable.isWorkingOnClone()||this.instance.getSetting("beforeDraw",!0),this.rowHeaders=this.instance.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.instance.getSetting("fixedRowsTop"),this.columnHeaders=this.instance.getSetting("columnHeaders");var e,t=this.instance.getSetting("totalRows"),o=this.instance.getSetting("totalColumns"),n,i=!1,r;if(o>0){var s;this.wtTable.isWorkingOnClone()&&(this.instance.cloneOverlay instanceof D||this.instance.cloneOverlay instanceof E?s=this.fixedRowsTop:this.instance.cloneOverlay instanceof k&&(s=this.wtTable.getRowStrategy().cellCount)),this.adjustAvailableNodes(),i=!0,this.renderColGroups(),this.renderColumnHeaders(),n=this.getColumnCount(),this.renderRows(t,s,n),this.wtTable.isWorkingOnClone()||(r=this.instance.wtViewport.getWorkspaceWidth(),this.instance.wtViewport.containerWidth=null,this.wtTable.getColumnStrategy().stretch()),this.adjustColumnWidths(n)}if(i||this.adjustAvailableNodes(),this.instance.cloneOverlay instanceof y||this.removeRedundantRows(),!this.wtTable.isWorkingOnClone()){if(this.markOversizedRows(),this.instance.wtScrollbars.applyToDOM(),r!==this.instance.wtViewport.getWorkspaceWidth()){this.instance.wtViewport.containerWidth=null,this.wtTable.getColumnStrategy().stretch();var l=this.instance.wtTable.columnWidthCache;for(e=0;e<this.wtTable.getColumnStrategy().cellCount;e++){var a=this.wtTable.getColumnStrategy().getSize(e);this.COLGROUP.childNodes[e+this.rowHeaderCount].style.width=a+"px",l[e]=a}}this.instance.wtScrollbars.refresh(!1),this.instance.getSetting("onDraw",!0)}},P.prototype.removeRedundantRows=function(){for(var e=this.wtTable.getRowStrategy().countRendered();this.wtTable.tbodyChildrenLength>e;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},P.prototype.renderRows=function(e,t,o){for(var n,i,r,s=this.instance.getSetting("offsetRow"),l=0,a=this.rowFilter.visibleToSource(l),c=this.wtTable.isWorkingOnClone();e>a&&a>=0;){if(l>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(void 0!==t&&l===t)break;if(i=this.getOrCreateTrForRow(l,i),this.renderRowHeaders(a,i),this.adjustColumns(i,o+this.rowHeaderCount),n=this.renderCells(a,i,o),s=this.instance.getSetting("offsetRow"),!c){if(r=this.wtTable.getRowStrategy().add(l,n),r===!1)break;0==l&&this.instance.wtScrollbars.vertical.readWindowSize(),this.resetOversizedRow(a)}if(i.firstChild){var h=this.instance.getSetting("rowHeight",a);i.firstChild.style.height=h?h+"px":""}l++,a=this.rowFilter.visibleToSource(l)}},P.prototype.resetOversizedRow=function(e){this.instance.wtTable.oversizedRows&&this.instance.wtTable.oversizedRows[e]&&(this.instance.wtTable.oversizedRows[e]=void 0)},P.prototype.markOversizedRows=function(){for(var e,t,n,i,r=this.instance.wtTable.TBODY.childNodes.length;r;)r--,n=this.instance.wtTable.rowFilter.visibleToSource(r),e=this.instance.wtSettings.settings.rowHeight(n),i=this.instance.wtTable.getTrForRow(n),t=o.Dom.innerHeight(i)-1,(!e&&this.instance.wtSettings.settings.defaultRowHeight<t||t>e)&&(this.instance.wtTable.oversizedRows||(this.instance.wtTable.oversizedRows={}),this.instance.wtTable.oversizedRows[n]=t)},P.prototype.renderCells=function(e,t,o){for(var n,i,r=0;o>r;r++)i=this.columnFilter.visibleToSource(r),n=0===r?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)]:n.nextSibling,"TH"==n.nodeName&&(n=this.utils.replaceThWithTd(n,t)),n.className="",n.removeAttribute("style"),this.instance.getSetting("cellRenderer",e,i,n);return n},P.prototype.adjustColumnWidths=function(e){for(var t=this.instance.wtTable.columnWidthCache,o=!1,n,i=0;e>i;i++)n=this.wtTable.isWorkingOnClone()?this.instance.cloneSource.wtTable.columnWidthCache[i]:this.wtTable.getColumnStrategy().getSize(i),n!==t[i]&&(this.COLGROUP.childNodes[i+this.rowHeaderCount].style.width=n+"px",t[i]=n,o=!0)},P.prototype.appendToTbody=function(e){this.TBODY.appendChild(e),this.wtTable.tbodyChildrenLength++},P.prototype.getOrCreateTrForRow=function(e,t){var o;return e>=this.wtTable.tbodyChildrenLength?(o=this.createRow(),this.appendToTbody(o)):o=0===e?this.TBODY.firstChild:t.nextSibling,o},P.prototype.createRow=function(){for(var e=document.createElement("TR"),t=0;t<this.rowHeaderCount;t++)e.appendChild(document.createElement("TH"));return e},P.prototype.renderRowHeader=function(e,t,o){o.className="",o.removeAttribute("style"),this.rowHeaders[t](e,o)},P.prototype.renderRowHeaders=function(e,t){for(var o=t.firstChild,n=0;n<this.rowHeaderCount;n++)o?"TD"==o.nodeName&&(o=this.utils.replaceTdWithTh(o,t)):(o=document.createElement("TH"),t.appendChild(o)),this.renderRowHeader(e,n,o),o=o.nextSibling},P.prototype.adjustAvailableNodes=function(){this.refreshStretching(),this.adjustColGroups(),this.adjustThead()},P.prototype.renderColumnHeaders=function(){if(this.columnHeaders.length)for(var e=this.getColumnCount(),t=this.getTrForColumnHeaders(),o=0;e>o;o++)this.columnHeaders.length&&this.renderColumnHeader(this.columnFilter.visibleToSource(o),t.childNodes[this.rowHeaderCount+o])},P.prototype.adjustColGroups=function(){for(var e=this.getColumnCount();this.wtTable.colgroupChildrenLength<e+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>e+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--,this.wtTable.columnWidthCache&&this.wtTable.columnWidthCache.splice(-1,1)},P.prototype.adjustThead=function(){var e=this.getColumnCount(),t=this.THEAD.firstChild;if(this.columnHeaders.length){for(t||(t=document.createElement("TR"),this.THEAD.appendChild(t)),this.theadChildrenLength=t.childNodes.length;this.theadChildrenLength<e+this.rowHeaderCount;)t.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>e+this.rowHeaderCount;)t.removeChild(t.lastChild),this.theadChildrenLength--}else t&&o.Dom.empty(t)},P.prototype.getTrForColumnHeaders=function(){var e=this.THEAD.firstChild;return this.rowHeaderCount&&this.renderRowHeaders(-1,e),e},P.prototype.renderColumnHeader=function(e,t){return t.className="",t.removeAttribute("style"),this.columnHeaders[0](e,t)},P.prototype.getColumnCount=function(){return this.wtTable.isWorkingOnClone()&&(this.instance.cloneOverlay instanceof k||this.instance.cloneOverlay instanceof E)?this.instance.getSetting("fixedColumnsLeft"):this.wtTable.getColumnStrategy().cellCount},P.prototype.renderColGroups=function(){for(var e=0;e<this.wtTable.colgroupChildrenLength;e++)e<this.rowHeaderCount?o.Dom.addClass(this.COLGROUP.childNodes[e],"rowHeader"):o.Dom.removeClass(this.COLGROUP.childNodes[e],"rowHeader")},P.prototype.adjustColumns=function(e,t){for(var o=e.childNodes.length;t>o;){var n=document.createElement("TD");e.appendChild(n),o++}for(;o>t;)e.removeChild(e.lastChild),o--},P.prototype.refreshStretching=function(){if(!this.wtTable.isWorkingOnClone()){var e=this.instance,t=e.getSetting("stretchH"),o=e.getSetting("totalRows"),n=e.getSetting("totalColumns"),i=function(e){var t=r.instance.wtViewport.getViewportWidth(e);return t},r=this,s=function(t){var o=r.columnFilter.visibleToSource(t);return n>o?e.getSetting("columnWidth",o):void 0},l=function(t){return r.instance.cloneOverlay instanceof y||e.wtSettings.settings.renderAllRows?1/0:r.instance.wtViewport.getViewportHeight(t)},a=function(t,o){return e.wtSettings.settings.defaultRowHeight};this.wtTable.columnStrategy=new g(e,i,s,t),this.wtTable.rowStrategy=new R(e,l,a)}},P.utils={},P.utils.replaceTdWithTh=function(e,t){var o;return o=document.createElement("TH"),t.insertBefore(o,e),t.removeChild(e),o},P.utils.replaceThWithTd=function(e,t){var o=document.createElement("TD");return t.insertBefore(o,e),t.removeChild(e),o},M.prototype.getWorkspaceHeight=function(e){return this.instance.wtScrollbars.vertical.windowSize},M.prototype.getWorkspaceWidth=function(){var e=Math.min(this.getContainerFillWidth(),document.documentElement.offsetWidth-this.getWorkspaceOffset().left,document.documentElement.offsetWidth),n=this.instance.wtScrollbars.horizontal.scrollHandler!=t?this.instance.wtScrollbars.horizontal.scrollHandler.style.overflow:null;return("scroll"==n||"hidden"==n||"auto"==n)&&(n="scroll"),e="scroll"==n?Math.max(e,this.instance.wtScrollbars.horizontal.windowSize):Math.max(e,o.Dom.outerWidth(this.instance.wtTable.TABLE))},M.prototype.getContainerFillWidth=function(){if(this.containerWidth)return this.containerWidth;for(var e=this.instance.wtTable.holder,t,o;e.parentNode!=document.body&&null!=e.parentNode&&-1===e.className.indexOf("handsontable");)e=e.parentNode;return o=document.createElement("DIV"),o.style.width="100%",o.style.height="1px",e.appendChild(o),t=o.offsetWidth,this.containerWidth=t,e.removeChild(o),t},M.prototype.getWorkspaceOffset=function(){return o.Dom.offset(this.instance.wtTable.TABLE)},M.prototype.getWorkspaceActualHeight=function(){return o.Dom.outerHeight(this.instance.wtTable.TABLE)},M.prototype.getWorkspaceActualWidth=function(){return o.Dom.outerWidth(this.instance.wtTable.TABLE)||o.Dom.outerWidth(this.instance.wtTable.TBODY)||o.Dom.outerWidth(this.instance.wtTable.THEAD)},M.prototype.getColumnHeaderHeight=function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=o.Dom.outerHeight(this.instance.wtTable.THEAD)),this.columnHeaderHeight},M.prototype.getViewportHeight=function(e){var t=this.getWorkspaceHeight(e);if(1/0===t)return t;var o=this.getColumnHeaderHeight();return o>0&&(t-=o),t},M.prototype.getRowHeaderWidth=function(){if(this.instance.cloneSource)return this.instance.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth)){var e=this.instance.getSetting("rowHeaders");if(e.length){var t=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var n=0,i=e.length;i>n;n++)t?(this.rowHeaderWidth+=o.Dom.outerWidth(t),t=t.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth},M.prototype.getViewportWidth=function(e){var t=this.getWorkspaceWidth(e);if(1/0===t)return t;var o=this.getRowHeaderWidth();return o>0?t-o:t},M.prototype.resetSettings=function(){this.rowHeaderWidth=0/0,this.columnHeaderHeight=0/0}}(o,window,e),function(){function e(e){this._value=e}function t(e,t,o,n){var i=Math.pow(10,t),r,s;return s=(o(e*i)/i).toFixed(t),n&&(r=new RegExp("0{1,"+n+"}$"),s=s.replace(r,"")),s}function o(e,t,o){var n;return n=t.indexOf("$")>-1?i(e,t,o):t.indexOf("%")>-1?r(e,t,o):t.indexOf(":")>-1?s(e,t):a(e._value,t,o)}function n(e,t){var o=t,n,i,r,s,a=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1,h;if(t.indexOf(":")>-1)e._value=l(t);else if(t===g)e._value=0;else{for("."!==p[m].delimiters.decimal&&(t=t.replace(/\./g,"").replace(p[m].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+p[m].abbreviations.thousand+"(?:\\)|(\\"+p[m].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+p[m].abbreviations.million+"(?:\\)|(\\"+p[m].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+p[m].abbreviations.billion+"(?:\\)|(\\"+p[m].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+p[m].abbreviations.trillion+"(?:\\)|(\\"+p[m].currency.symbol+")?(?:\\))?)?$"),h=0;h<=a.length&&!(c=t.indexOf(a[h])>-1?Math.pow(1024,h+1):!1);h++);e._value=(c?c:1)*(o.match(n)?Math.pow(10,3):1)*(o.match(i)?Math.pow(10,6):1)*(o.match(r)?Math.pow(10,9):1)*(o.match(s)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=c?Math.ceil(e._value):e._value}return e._value}function i(e,t,o){var n=t.indexOf("$"),i=t.indexOf("("),r=t.indexOf("-"),s="",l,c;return t.indexOf(" $")>-1?(s=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(s=" ",t=t.replace("$ ","")):t=t.replace("$",""),c=a(e._value,t,o),1>=n?c.indexOf("(")>-1||c.indexOf("-")>-1?(c=c.split(""),l=1,(i>n||r>n)&&(l=0),c.splice(l,0,p[m].currency.symbol+s),c=c.join("")):c=p[m].currency.symbol+s+c:c.indexOf(")")>-1?(c=c.split(""),c.splice(-1,0,s+p[m].currency.symbol),c=c.join("")):c=c+s+p[m].currency.symbol,c}function r(e,t,o){var n="",i,r=100*e._value;return t.indexOf(" %")>-1?(n=" ",t=t.replace(" %","")):t=t.replace("%",""),i=a(r,t,o),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,n+"%"),i=i.join("")):i=i+n+"%",i}function s(e){var t=Math.floor(e._value/60/60),o=Math.floor((e._value-60*t*60)/60),n=Math.round(e._value-60*t*60-60*o);return t+":"+(10>o?"0"+o:o)+":"+(10>n?"0"+n:n)}function l(e){var t=e.split(":"),o=0;return 3===t.length?(o+=60*Number(t[0])*60,o+=60*Number(t[1]),o+=Number(t[2])):2===t.length&&(o+=60*Number(t[0]),o+=Number(t[1])),Number(o)}function a(e,o,n){var i=!1,r=!1,s=!1,l="",a=!1,c=!1,h=!1,u=!1,d=!1,f="",w="",y=Math.abs(e),v=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],C,b,S,R,T,E,k="",D=!1;if(0===e&&null!==g)return g;if(o.indexOf("(")>-1?(i=!0,o=o.slice(1,-1)):o.indexOf("+")>-1&&(r=!0,o=o.replace(/\+/g,"")),o.indexOf("a")>-1&&(a=o.indexOf("aK")>=0,c=o.indexOf("aM")>=0,h=o.indexOf("aB")>=0,u=o.indexOf("aT")>=0,d=a||c||h||u,o.indexOf(" a")>-1?(l=" ",o=o.replace(" a","")):o=o.replace("a",""),y>=Math.pow(10,12)&&!d||u?(l+=p[m].abbreviations.trillion,e/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!d||h?(l+=p[m].abbreviations.billion,e/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!d||c?(l+=p[m].abbreviations.million,e/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!d||a)&&(l+=p[m].abbreviations.thousand,e/=Math.pow(10,3))),o.indexOf("b")>-1)for(o.indexOf(" b")>-1?(f=" ",o=o.replace(" b","")):o=o.replace("b",""),S=0;S<=v.length;S++)if(C=Math.pow(1024,S),b=Math.pow(1024,S+1),e>=C&&b>e){f+=v[S],C>0&&(e/=C);break}return o.indexOf("o")>-1&&(o.indexOf(" o")>-1?(w=" ",o=o.replace(" o","")):o=o.replace("o",""),w+=p[m].ordinal(e)),o.indexOf("[.]")>-1&&(s=!0,o=o.replace("[.]",".")),R=e.toString().split(".")[0],T=o.split(".")[1],E=o.indexOf(","),T?(T.indexOf("[")>-1?(T=T.replace("]",""),T=T.split("["),k=t(e,T[0].length+T[1].length,n,T[1].length)):k=t(e,T.length,n),R=k.split(".")[0],k=k.split(".")[1].length?p[m].delimiters.decimal+k.split(".")[1]:"",s&&0===Number(k.slice(1))&&(k="")):R=t(e,null,n),R.indexOf("-")>-1&&(R=R.slice(1),D=!0),E>-1&&(R=R.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[m].delimiters.thousands)),0===o.indexOf(".")&&(R=""),(i&&D?"(":"")+(!i&&D?"-":"")+(!D&&r?"+":"")+R+k+(w?w:"")+(l?l:"")+(f?f:"")+(i&&D?")":"")
}function c(e,t){p[e]=t}function h(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function u(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var o=h(e),n=h(t);return o>n?o:n},-1/0)}var d,f="1.5.3",p={},m="en",g=null,w="0,0",y="undefined"!=typeof module&&module.exports;d=function(t){return d.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=d.fn.unformat(t)),new e(Number(t))},d.version=f,d.isNumeral=function(t){return t instanceof e},d.language=function(e,t){if(!e)return m;if(e&&!t){if(!p[e])throw new Error("Unknown language : "+e);m=e}return(t||!p[e])&&c(e,t),d},d.languageData=function(e){if(!e)return p[m];if(!p[e])throw new Error("Unknown language : "+e);return p[e]},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(e){g="string"==typeof e?e:null},d.defaultFormat=function(e){w="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var o,n,i=this.length>>>0,r=!1;for(1<arguments.length&&(n=t,r=!0),o=0;i>o;++o)this.hasOwnProperty(o)&&(r?n=e(n,this[o],o,this):(n=this[o],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return n}),d.fn=e.prototype={clone:function(){return d(this)},format:function(e,t){return o(this,e?e:w,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:n(this,e?e:w)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t,n,i){return e+o*t}var o=u.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/o,this},subtract:function(e){function t(e,t,n,i){return e-o*t}var o=u.call(null,this._value,e);return this._value=[e].reduce(t,this._value*o)/o,this},multiply:function(e){function t(e,t,o,n){var i=u(e,t);return e*i*t*i/(i*i)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t,o,n){var i=u(e,t);return e*i/(t*i)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(d(this._value).subtract(e).value())}},y&&(module.exports=d),"undefined"==typeof ender&&(this.numeral=d),"function"==typeof define&&define.amd&&define([],function(){return d})}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["olragon:handsontable"]={Handsontable:n}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n;(function(){n={_isCssLoaded:function(){return 0===document.styleSheets.length?!0:t.find(document.styleSheets,function(e){return e.cssText&&!e.cssRules?!e.cssText.match(/meteor-css-not-found-error/):!t.find(e.cssRules,function(e){return".meteor-css-not-found-error"===e.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:n}}();

!function(){var t=Package.meteor.Meteor,n=Package.htmljs.HTML,e=Package.blaze.Blaze,a=Package.blaze.UI,r=Package.blaze.Handlebars,u=Package["observe-sequence"].ObserveSequence,i=Package.templating.Template,o;(function(){o={};var t=function(t,n){return t===n};o.include=function(n,a,r){if(!n)return null;if("function"!=typeof n){var u=n;if(!e.isTemplate(u))throw new Error("Expected template or null, found: "+u);return n.constructView(a,r)}var i=e.ReactiveVar(null,t),o=e.View("Spacebars.include",function(){var t=i.get();if(null===t)return null;if(!e.isTemplate(t))throw new Error("Expected template or null, found: "+t);return t.constructView(a,r)});return o.__templateVar=i,o.onViewCreated(function(){this.autorun(function(){i.set(n())})}),o},o.mustacheImpl=function(t){var n=arguments;if(n.length>1){var e=n[n.length-1];if(e instanceof o.kw){var a={};for(var r in e.hash){var u=e.hash[r];a[r]="function"==typeof u?u():u}n[n.length-1]=o.kw(a)}else e=o.kw(),n=Array.prototype.slice.call(arguments),n.push(e)}return o.call.apply(null,n)},o.mustache=function(t){var e=o.mustacheImpl.apply(null,arguments);return e instanceof o.SafeString?n.Raw(e.toString()):null==e||e===!1?null:String(e)},o.attrMustache=function(t){var e=o.mustacheImpl.apply(null,arguments);if(null==e||""===e)return null;if("object"==typeof e)return e;if("string"==typeof e&&n.isValidAttributeName(e)){var a={};return a[e]="",a}throw new Error("Expected valid attribute name, '', null, or object")},o.dataMustache=function(t){var n=o.mustacheImpl.apply(null,arguments);return n},o.makeRaw=function(t){return null==t?null:t instanceof n.Raw?t:n.Raw(t)},o.call=function(t){if("function"==typeof t){for(var n=[],e=1;e<arguments.length;e++){var a=arguments[e];n[e-1]="function"==typeof a?a():a}return t.apply(null,n)}if(arguments.length>1)throw new Error("Can't call non-function: "+t);return t},o.kw=function(t){return this instanceof o.kw?void(this.hash=t||{}):new o.kw(t)},o.SafeString=function(t){return this instanceof o.SafeString?new r.SafeString(t):new o.SafeString(t)},o.SafeString.prototype=r.SafeString.prototype,o.dot=function(t,n){if(arguments.length>2){var e=[];return e.push(o.dot(t,n)),e.push.apply(e,Array.prototype.slice.call(arguments,2)),o.dot.apply(null,e)}if("function"==typeof t&&(t=t()),!t)return t;var a=t[n];return"function"!=typeof a?a:function(){return a.apply(t,arguments)}},o.With=function(t,n,a){var r=new e.ReactiveVar,u=e.View("Spacebars_with",function(){return e.If(function(){return r.get()},function(){return e.With(function(){return r.get()},n)},a)});return u.onViewCreated(function(){this.autorun(function(){r.set(t()),Tracker.onInvalidate(function(){r.dep.changed()})})}),u},o.TemplateWith=e._TemplateWith}).call(this),function(){i.__checkName("__dynamic"),i.__dynamic=new i("Template.__dynamic",function(){var t=this;return[e.View(function(){return o.mustache(t.lookup("checkContext"))}),"\n  ",e.If(function(){return o.call(t.lookup("dataContextPresent"))},function(){return["\n    ",o.include(t.lookupTemplate("__dynamicWithDataContext")),"\n  "]},function(){return["\n    \n    ",e._TemplateWith(function(){return{template:o.call(t.lookup("template")),data:o.call(t.lookup(".."))}},function(){return o.include(t.lookupTemplate("__dynamicWithDataContext"))}),"\n  "]})]}),i.__checkName("__dynamicWithDataContext"),i.__dynamicWithDataContext=new i("Template.__dynamicWithDataContext",function(){var t=this;return o.With(function(){return o.dataMustache(t.lookup("chooseTemplate"),t.lookup("template"))},function(){return["\n    ",e._TemplateWith(function(){return o.call(o.dot(t.lookup(".."),"data"))},function(){return o.include(t.lookupTemplate(".."))}),"    \n  "]})})}.call(this),function(){i.__dynamicWithDataContext.helpers({chooseTemplate:function(t){return i[t]||null}}),i.__dynamic.helpers({dataContextPresent:function(){return _.has(this,"data")},checkContext:function(){if(!_.has(this,"template"))throw new Error("Must specify name in the 'template' argument to {{> Template.dynamic}}.");_.each(this,function(t,n){if("template"!==n&&"data"!==n)throw new Error("Invalid argument to {{> Template.dynamic}}: "+n)})}})}.call(this),"undefined"==typeof Package&&(Package={}),Package.spacebars={Spacebars:o}}();

!function(){var e=Package.meteor.Meteor,a;(function(){var n=0,r=!1;a={hold:function(){if(!e.isCordova)return{release:function(){}};if(r)throw new Error("Can't show launch screen once it's hidden");n++;var a=!1,t=function(){e.isCordova&&(a||(n--,0===n&&"undefined"!=typeof navigator&&navigator.splashscreen&&(r=!0,navigator.splashscreen.hide())))};return{release:t}}}}).call(this),function(){var n=a.hold(),r=Package.templating&&Package.templating.Template;e.startup(function(){if(r)if(Package["iron:router"])Package["iron:router"].Router.onAfterAction(function(){n.release()});else{var e=setInterval(function(){r.body.view&&r.body.view.isRendered&&(n.release(),clearInterval(e))},50);setTimeout(function(){n.release()},6e3)}else n.release()})}.call(this),"undefined"==typeof Package&&(Package={}),Package["launch-screen"]={LaunchScreen:a}}();

!function(){var e=Package.meteor.Meteor,t=Package["aldeed:simple-schema"].SimpleSchema,n=Package["aldeed:simple-schema"].MongoObject,a=Package["aldeed:autoform"].AutoForm,o=Package["cfs:graphicsmagick"].gm,l=Package["iron:router"].Router,c=Package["iron:router"].RouteController,i=Package["mrt:numeral"].numeral,s=Package["olragon:handsontable"].Handsontable,r=Package["telescope-lib"].deepExtend,u=Package["telescope-lib"].camelToDash,p=Package["telescope-lib"].dashToCamel,d=Package["telescope-lib"].camelCaseify,m=Package["telescope-lib"].getSetting,f=Package["telescope-lib"].getThemeSetting,g=Package["telescope-lib"].getSiteUrl,k=Package["telescope-lib"].trimWords,b=Package["telescope-lib"].can,h=Package.underscore._,P=Package["telescope-lib"].capitalise,w=Package["telescope-base"].adminNav,v=Package["telescope-base"].viewNav,T=Package["telescope-base"].addToPostSchema,_=Package["telescope-base"].addToCommentsSchema,y=Package["telescope-base"].addToSettingsSchema,S=Package["telescope-base"].preloadSubscriptions,F=Package["telescope-base"].primaryNav,C=Package["telescope-base"].secondaryNav,I=Package["telescope-base"].viewParameters,D=Package["telescope-base"].footerModules,H=Package["telescope-base"].heroModules,U=Package["telescope-base"].postModules,x=Package["telescope-base"].postHeading,M=Package["telescope-base"].postMeta,R=Package["telescope-base"].modulePositions,A=Package["telescope-base"].postSubmitRenderedCallbacks,N=Package["telescope-base"].postSubmitClientCallbacks,E=Package["telescope-base"].postSubmitMethodCallbacks,W=Package["telescope-base"].postAfterSubmitMethodCallbacks,V=Package["telescope-base"].postEditRenderedCallbacks,O=Package["telescope-base"].postEditClientCallbacks,B=Package["telescope-base"].postEditMethodCallbacks,j=Package["telescope-base"].postAfterEditMethodCallbacks,z=Package["telescope-base"].commentSubmitRenderedCallbacks,G=Package["telescope-base"].commentSubmitClientCallbacks,q=Package["telescope-base"].commentSubmitMethodCallbacks,Q=Package["telescope-base"].commentAfterSubmitMethodCallbacks,L=Package["telescope-base"].commentEditRenderedCallbacks,$=Package["telescope-base"].commentEditClientCallbacks,J=Package["telescope-base"].commentEditMethodCallbacks,K=Package["telescope-base"].commentAfterEditMethodCallbacks,X=Package["telescope-base"].getTemplate,Y=Package["telescope-base"].templates,Z=Package["telescope-base"].themeSettings,et=Package["tap:i18n"].TAPi18next,tt=Package["tap:i18n"].TAPi18n,nt=Package.jquery.$,at=Package.jquery.jQuery,ot=Package.templating.Template,lt=Package["cfs:base-package"].FS,ct=Package["iron:core"].Iron,it=Package.webapp.WebApp,st=Package.logging.Log,rt=Package.deps.Tracker,ut=Package.deps.Deps,pt=Package.session.Session,dt=Package.livedata.DDP,mt=Package.mongo.Mongo,ft=Package.ui.Blaze,gt=Package.ui.UI,kt=Package.ui.Handlebars,bt=Package.spacebars.Spacebars,ht=Package.check.check,Pt=Package.check.Match,wt=Package.random.Random,vt=Package.ejson.EJSON,Tt=Package["launch-screen"].LaunchScreen,_t=Package.htmljs.HTML,S,w,yt,T,F,U,St,a,lt,Ft,Ct;(function(){ot.registerHelper("log",function(){console.log(this,arguments)})}).call(this),function(){e.subscribe("images"),e.subscribe("files"),e.subscribe("docs"),e.subscribe("docs2")}.call(this),function(){ot.__checkName("autoformExample"),ot.autoformExample=new ot("Template.autoformExample",function(){var e=this;return[_t.Raw("<h2>autoForm</h2>\n  "),ft._TemplateWith(function(){return{id:bt.call("insertForm"),type:bt.call("insert"),collection:bt.call(bt.dot(e.lookup("Collections"),"Docs"))}},function(){return bt.include(e.lookupTemplate("autoForm"),function(){return["\n  ",ft._TemplateWith(function(){return{name:bt.call("name")}},function(){return bt.include(e.lookupTemplate("afQuickField"))}),"\n  ",ft._TemplateWith(function(){return{name:bt.call("fileId"),type:bt.call("cfs-file"),collection:bt.call("files")}},function(){return bt.include(e.lookupTemplate("afQuickField"))}),"\n  ",_t.BUTTON({type:"submit","class":"btn btn-primary"},"Submit"),"\n  "]})}),_t.Raw("\n  <h2>quickForm</h2>\n  "),ft._TemplateWith(function(){return{id:bt.call("insertForm2"),type:bt.call("insert"),collection:bt.call(bt.dot(e.lookup("Collections"),"Docs"))}},function(){return bt.include(e.lookupTemplate("quickForm"))}),_t.Raw("\n  <h2>quickForm Multiple</h2>\n  "),ft._TemplateWith(function(){return{id:bt.call("insertForm3"),type:bt.call("insert"),collection:bt.call(bt.dot(e.lookup("Collections"),"Docs2"))}},function(){return bt.include(e.lookupTemplate("quickForm"))})]})}.call(this),function(){}.call(this),function(){ot.__checkName("postedFiles"),ot.postedFiles=new ot("Template.postedFiles",function(){var e=this;return _t.DIV({"class":"files-module grid-block"},_t.Raw('\n   <label class="control-label">Files</label>\n\n   '),ft.Each(function(){return bt.call(e.lookup("medbookfiles"))},function(){return["\n      ",bt.include(e.lookupTemplate("uploadedFile")),"\n   "]}),"\n  ")}),ot.__checkName("files"),ot.files=new ot("Template.files",function(){var e=this;return[_t.Raw('<br>\n  <label class="control-label">Files</label>\n  <br>\n  '),bt.include(e.lookupTemplate("upDown")),_t.Raw('\n\n  <div class="well">\n    <input type="file" webkitdirectory="" multiple="" class="any">\n  </div>\n  '),_t.DIV({"class":"fileArea"},"\n  ",ft.Each(function(){return bt.call(e.lookup("uploadedFiles"))},function(){return["\n      ",bt.include(e.lookupTemplate("uploadedFile")),"\n      ",_t.HR(),"\n  "]}),"\n  ")]}),ot.__checkName("uploadedFile"),ot.uploadedFile=new ot("Template.uploadedFile",function(){var e=this;return[_t.H4(_t.A({href:function(){return bt.mustache(e.lookup("PostUrl"))},target:"_blank"},ft.View(function(){return bt.mustache(e.lookup("name"))})),"(",ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"size"))})," bytes)"),"\n  ",ft.If(function(){return bt.call(bt.dot(e.lookup("."),"isUploaded"))},function(){return["\n      ",_t.DIV({"data-_id":function(){return bt.mustache(e.lookup("getid"))},"class":"MedBookFile"}," \n          ",_t.A({href:function(){return bt.mustache(e.lookup("PostUrl"))},"class":"btn btn-danger btn-xs",role:"button",target:"_blank"},"Download"),"\n          ",ft._TemplateWith(function(){return{"class":bt.call("btn btn-danger btn-xs")}},function(){return bt.include(function(){return bt.call(bt.dot(e.lookup("FS"),"DeleteButton"))})}),"\n          ",bt.include(e.lookupTemplate("previewFile")),"\n      "),"\n  "]},function(){return["\n      ",_t.P(ft._TemplateWith(function(){return{semantic:bt.call(!0)}},function(){return bt.include(function(){return bt.call(bt.dot(e.lookup("FS"),"UploadProgressBar"))})})," Uploading..."),"\n  "]})]}),ot.__checkName("previewImage"),ot.previewImage=new ot("Template.previewImage",function(){var e=this;return _t.IMG({style:"max-width:300px;max-height:300px;",src:function(){return bt.mustache(e.lookup("PostUrl"))}})}),ot.__checkName("handsontablePreview"),ot.handsontablePreview=new ot("Template.handsontablePreview",function(){var e=this;return _t.Raw('<span class="HOTdivFence">\n        <a href="#" class="btn btn-danger btn-xs edit" role="button">Edit</a>\n        <div class="HOTdiv" style="overflow: scroll"></div>\n    </span>')}),ot.__checkName("noPreview"),ot.noPreview=new ot("Template.noPreview",function(){var e=this;return ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"type"))})})}.call(this),function(){e.startup(function(){ot.files.events({"change input.any":function(t,n){for(var a=t.target.files,o={},l=0;l<a.length;l++){var c=a[l].webkitRelativePath;if(null==c)break;o[a[l].name]=a[l].webkitRelativePath}return lt.EventHandlers.insertFiles(St.Files,{metadata:function(t){return{owner:e.userId(),dropped:!1}},after:function(e,t){var n=t.name();n in o&&t.name(o[n]),e||console.log("Inserted",t.name())}})(t,n)}}),ot.uploadedFile.helpers({getid:function(){return this._id},previewFile:function(e){var t=this.type();return t.match("image.*")?ot.previewImage:t.match("text.*separated-values")?ot.handsontablePreview:ot.noPreview}}),ot.files.helpers({uploadedFiles:function(){return St.Files.find({post:{$exists:!1},owner:e.userId()})}}),ot.postedFiles.helpers({medbookfiles:function(){return St.Files.find({post:this._id})}}),ot.handsontablePreview.events({"click .edit":function(e,t){var n=nt(t.find(".HOTdiv")).handsontable("getInstance"),a={readOnly:!1},o=n.countRows();o>8&&(a.height=15*o),n.updateSettings(a)}}),ot.handsontablePreview.rendered=function(){var e=this,t=e.find(".HOTdiv"),n=e.data.url();nt.get(n,function(a,o){var l=a.split("\n").map(function(e){return e.split("	")});nt(t).handsontable({readOnly:!0,rowHeaders:!0,colHeaders:!0,height:300,data:l,afterChange:function(t,a){if("loadData"!==a){var o=nt(e.find(".HOTdiv")).handsontable("getInstance"),l=o.getData().map(function(e){return e.join("	")}).join("\n")+"\n";console.log("change",l),nt.ajax({url:n,type:"PUT",data:l,success:function(e){console.log("PUT success",n,e)},error:function(e){console.log("PUT error",n,e)}})}}})})}})}.call(this),function(){ot.__checkName("home"),ot.home=new ot("Template.home",function(){var e=this;return bt.include(e.lookupTemplate("loginButtons"))}),ot.__checkName("upDown"),ot.upDown=new ot("Template.upDown",function(){var e=this;return[_t.Raw('<div>\n    <button type="button" class="btn btn-xs resumeUploads">Resume All Uploads</button>\n    <button type="button" class="btn btn-xs pauseUploads">Pause All Uploads</button>\n    <button type="button" class="btn btn-xs cancelUploads">Cancel All Uploads</button>\n  </div>\n  '),bt.include(function(){return bt.call(bt.dot(e.lookup("FS"),"UploadProgressBar"))})]})}.call(this),function(){ot.upDown.events({"click .pauseUploads":function(e,t){lt.HTTP.uploadQueue.pause()},"click .resumeUploads":function(e,t){lt.HTTP.uploadQueue.resume()},"click .cancelUploads":function(e,t){lt.HTTP.uploadQueue.cancel()}})}.call(this),function(){ot.__checkName("images"),ot.images=new ot("Template.images",function(){var e=this;return[bt.include(e.lookupTemplate("upDown")),_t.Raw('\n\n  <h2>Image Files</h2>\n  <div class="well imageDropArea">\n    <input type="file" multiple="" class="images">\n  </div>\n  '),_t.DIV({"class":"imageArea clearfix"},"\n    ",ft.Each(function(){return bt.call(e.lookup("uploadedImages"))},function(){return["\n    ",bt.include(e.lookupTemplate("uploadedImage")),"\n    "]}),"\n  ")]}),ot.__checkName("uploadedImage"),ot.uploadedImage=new ot("Template.uploadedImage",function(){var e=this;return _t.DIV({"class":"media well pull-left"},"\n    ",_t.A({href:function(){return bt.mustache(bt.dot(e.lookup("."),"url"))},target:"_blank","class":"pull-left"},_t.IMG({src:function(){return bt.mustache(bt.dot(e.lookup("."),"url"),bt.kw({store:"thumbs"}))},alt:"","class":"img-rounded"})),"\n    ",_t.DIV({"class":"media-body"},"\n      ",_t.H4({"class":"media-heading"},ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"name"))})),"\n      ",_t.P(_t.EM("Original size: ",ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"formattedSize"))}),_t.Raw("<br>"),"Thumbnail size: ",ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"formattedSize"),bt.kw({store:"thumbs"}))}),_t.Raw("<br>"),"Type: ",ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"type"),bt.kw({store:"images"}))}))),"\n      ",ft.If(function(){return bt.call(bt.dot(e.lookup("."),"isUploaded"))},function(){return["\n      ",ft.If(function(){return bt.dataMustache(bt.dot(e.lookup("."),"hasStored"),"images")},function(){return["\n      ",bt.With(function(){return bt.dataMustache(bt.dot(e.lookup("."),"url"),bt.kw({download:!0}))},function(){return["\n      ",_t.A({href:function(){return bt.mustache(e.lookup("."))},"class":"btn btn-default btn-xs",role:"button"},"Download"),"\n      "]}),"\n      "]},function(){return"\n      Storing...\n      "}),"\n      "]},function(){return["\n      Uploading: ",ft.View(function(){return bt.mustache(bt.dot(e.lookup("."),"uploadProgress"))}),"%\n      ",_t.P(bt.include(function(){return bt.call(bt.dot(e.lookup("FS"),"UploadProgressBar"))})),"\n      "]}),"\n      ",ft._TemplateWith(function(){return{"class":bt.call("btn btn-danger btn-xs")}},function(){return bt.include(function(){return bt.call(bt.dot(e.lookup("FS"),"DeleteButton"))})}),"\n    "),"\n  ")})}.call(this),function(){function t(t){return lt.EventHandlers.insertFiles(St.Images,{metadata:function(n){return{owner:e.userId(),foo:"bar",dropped:t}},after:function(e,t){e||console.log("Inserted",t.name())}})}e.startup(function(){ot.images.events({"dropped .imageArea":t(!0),"dropped .imageDropArea":t(!0),"change input.images":t(!1)})}),ot.images.uploadedImages=function(){return St.Images.find()}}.call(this),function(){ot.__checkName("post_page2"),ot.post_page2=new ot("Template.post_page2",function(){var e=this;return _t.DIV({"class":"single-post grid"},"\n    ",_t.DIV({"class":"posts"},"\n      ",ft._TemplateWith(function(){return{template:bt.call(e.lookup("post_item"))}},function(){return bt.include(function(){return bt.call(ot.__dynamic)})}),"\n    "),"\n    ",ft.If(function(){return bt.call(e.lookup("body"))},function(){return["\n      ",ft._TemplateWith(function(){return{template:bt.call(e.lookup("post_body"))}},function(){return bt.include(function(){return bt.call(ot.__dynamic)})}),"\n    "]}),"\n\n    ",bt.include(e.lookupTemplate("postedFiles")),"\n\n    ",ft._TemplateWith(function(){return{template:bt.call(e.lookup("comment_form"))}},function(){return bt.include(function(){return bt.call(ot.__dynamic)})}),"\n    ",ft._TemplateWith(function(){return{template:bt.call(e.lookup("comment_list"))}},function(){return bt.include(function(){return bt.call(ot.__dynamic)})}),"\n  ")})}.call(this),function(){e.startup(function(){ot[X("post_page2")].replaces(X("post_page")),ot[X("post_page2")].helpers({post_item:function(){return X("post_item")},post_body:function(){return X("post_body")},comment_form:function(){return X("comment_form")},comment_list:function(){return X("comment_list")}}),ot[X("post_page2")].rendered=function(){nt("body").scrollTop(0),this.data&&(document.title=nt(".post-title").text())}})}.call(this),function(){function e(e){e.medbookfiles=h.map(nt(".MedBookFile"),function(e){return nt(e).data("_id")})}N.push(function(t){return e(t),console.log("postSubmitClientCallbacks post.medbookfiles",t.medbookfiles),t}),E.push(function(t){return e(t),console.log("postSubmitMethodCallbacks post.medbookfiles",t.medbookfiles),t}),B.push(function(e){return e}),ot.registerHelper("PostUrl",function(){return Ct(this)})}.call(this),function(){if(Ft={},Ft.images=new lt.Store.GridFS("images"),Ft.thumbs=new lt.Store.GridFS("thumbs",{beforeWrite:function(e){return{extension:"png",type:"image/png"}},transformWrite:function(e,t,n){o(t).resize(60).stream("PNG").pipe(n)}}),e.isServer){var t=Npm.require("mime");Ft.any=new lt.Store.GridFS("any",{beforeWrite:function(e){if(""==e.original.type){var n=e.name(),a;a=n.match(/\.tab$/)?"text/tab-separated-values":t.lookup(n),e.type(a)}}})}else Ft.any=new lt.Store.GridFS("any")}.call(this),function(){St={},e.isClient&&ot.registerHelper("Collections",St),St.Images=new lt.Collection("images",{stores:[Ft.images,Ft.thumbs],filter:{maxSize:20971520,allow:{contentTypes:["image/*"]},onInvalid:function(t){e.isClient&&alert(t)}}}),St.Files=new lt.Collection("files",{stores:[Ft.any],chunkSize:4194304}),St.Docs=new mt.Collection("docs"),St.Docs.attachSchema(new t({name:{type:String},fileId:{type:String,autoform:{type:"cfs-file",collection:"files"}}})),St.Docs2=new mt.Collection("docs2"),St.Docs2.attachSchema(new t({name:{type:String},fileId:{type:[String],autoform:{type:"cfs-files",collection:"files"}}}))}.call(this),function(){lt.debug=!0,lt.HTTP.setHeadersForGet([["Cache-Control","public, max-age=31536000"]]),lt.HTTP.setHeadersForGet([["foo","bar"]],"any")}.call(this),function(){l.configure({notFoundTemplate:"not_found",loadingTemplate:"loading",layoutTemplate:"layout"}),l.onBeforeAction("loading"),l.map(function(){this.route("images"),this.route("files"),this.route("autoformExample",{path:"autoform"})}),e.isClient&&(l.onAfterAction(function(){e.setTimeout(function(){var e=nt(window.location.hash),t=e.length?e.offset().top:0;nt("html, body").animate({scrollTop:t},700,"easeInOutQuart")},0)}),ot.registerHelper("absoluteUrl",function(t){return e.absoluteUrl(t)}),ot.registerHelper("currentRouteIs",function(e){var t=l.current();return t&&t.route&&t.route.name===e||!1}),ot.registerHelper("activeRoute",function(e){var t=l.current();return t&&t.route&&t.route.name===e&&"active"||""}))}.call(this),function(){e.autorun(function(){T.push({propertyName:"medbookfiles",propertySchema:{type:[String],optional:!0}})})}.call(this),function(){Ct=function(e){return e.post?"/posts/"+e.post+"/file/"+e.name():"/posts/"+e.owner+"/file/"+e.name()}}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-post-files"]={preloadSubscriptions:S,adminNav:w,Categories:yt,addToPostSchema:T,primaryNav:F,postModules:U,Collections:St,AutoForm:a,FS:lt}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=Package.http.HTTP,r,a,o,s,i;(function(){r=function(e,t){var n=500,r=function(e,t){return e.length>t?e.slice(0,t)+"...":e},a="failed ["+e+"]";return t&&(a+=" "+r(t.replace(/\n/g," "),n)),new Error(a)},a=function(e){var n=[];return t.each(e,function(e,t){n.length&&n.push("&"),n.push(o(t),"=",o(e))}),n.join("").replace(/%20/g,"+")},o=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},s=function(e,t,n,r){var o=e,s=t?t.slice(1):null;if("string"==typeof n&&(s=String(n)),r){s=s||"";var i=a(r);s&&i&&(s+="&"),s+=i}var c=o;return null!==s&&(c+="?"+s),c},i=function(e){var n=(e.headers["content-type"]||";").split(";")[0];if(t.include(["application/json","text/javascript"],n))try{e.data=JSON.parse(e.content)}catch(r){e.data=null}else e.data=null}}).call(this),function(){n.call=function(n,o,c,u){if(u||"function"!=typeof c||(u=c,c=null),c=c||{},"function"!=typeof u)throw new Error("Can't make a blocking HTTP call from the client; callback required.");n=(n||"").toUpperCase();var f={},p=c.content;c.data&&(p=JSON.stringify(c.data),f["Content-Type"]="application/json");var l,d;p||"GET"===n||"HEAD"===n?l=c.params:d=c.params;var y=/^(.*?)(\?.*)?$/.exec(o);if(o=s(y[1],y[2],c.query,l),c.followRedirects===!1)throw new Error("Option followRedirects:false not supported on client.");var h,v;if(c.auth){var g=c.auth.indexOf(":");if(0>g)throw new Error('auth option should be of the form "username:password"');h=c.auth.substring(0,g),v=c.auth.substring(g+1)}d&&(p=a(d)),t.extend(f,c.headers||{}),u=function(e){return function(t,n){t&&n&&(t.response=n),e(t,n)}}(u),u=t.once(u);try{var w;if("undefined"!=typeof XMLHttpRequest)w=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw new Error("Can't create XMLHttpRequest");w=new ActiveXObject("Microsoft.XMLHttp")}w.open(n,o,!0,h,v);var T;"ejson-binary"===c.responseType?(w.responseType="arraybuffer",T=!0):w.responseType=c.responseType;for(var m in f)w.setRequestHeader(m,f[m]);var b=!1,H;c.timeout&&(H=e.setTimeout(function(){b=!0,w.abort()},c.timeout)),w.onreadystatechange=function(n){if(4===w.readyState)if(H&&e.clearTimeout(H),b)u(new Error("timeout"));else if(w.status){var a={};a.statusCode=w.status;var o=w.response||w.responseText;if("json"===c.responseType&&"string"==typeof o)try{o=JSON.parse(o)}catch(s){o=null}if(T&&"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&o instanceof ArrayBuffer){for(var f=new Uint8Array(o),p=o.byteLength,l=EJSON.newBinary(p),d=0;p>d;d++)l[d]=f[d];o=l}a.content=o,a.headers={};var y=w.getAllResponseHeaders();""===y&&w.getResponseHeader("content-type")&&(y="content-type: "+w.getResponseHeader("content-type"));var h=y.split(/\r?\n/);t.each(h,function(e){var t=/^(.*?):(?:\s+)(.*)$/.exec(e);t&&3===t.length&&(a.headers[t[1].toLowerCase()]=t[2])}),i(a);var v=null;a.statusCode>=400&&(v=r(a.statusCode,a.content)),u(v,a)}else u(new Error("network"))},w.send(p)}catch(k){u(k)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:http"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.templating.Template,a=Package.blaze.Blaze,n=Package.blaze.UI,r=Package.blaze.Handlebars,o=Package["aldeed:autoform"].AutoForm,c=Package.htmljs.HTML,s=Package["aldeed:simple-schema"].SimpleSchema,l=Package["aldeed:simple-schema"].MongoObject,i;(function(){e.__checkName("afSelect2"),e.afSelect2=new e("Template.afSelect2",function(){var t=this;return c.SELECT(c.Attrs(function(){return Spacebars.attrMustache(Spacebars.dot(t.lookup("."),"atts"))}),"\n    ",a.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n    ",c.OPTION(c.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),a.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n    "]}),"\n  ")})}).call(this),function(){o.addInputType("select2",{template:"afSelect2",valueOut:function(){return this.select2("val")},valueConverters:{number:o.Utility.stringToNumber,numberArray:function(t){return i(t)?_.map(t,function(t){return t=$.trim(t),o.Utility.stringToNumber(t)}):t},"boolean":o.Utility.stringToBool,booleanArray:function(t){return i(t)?_.map(t,function(t){return t=$.trim(t),o.Utility.stringToBool(t)}):t},date:o.Utility.stringToDate,dateArray:function(t){return i(t)?_.map(t,function(t){return t=$.trim(t),o.Utility.stringToDate(t)}):t}},contextAdjust:function(t){t.atts.autocomplete="off";var e=_.omit(t.atts,"firstOption"),a=t.atts.firstOption;return t.items=[],a!==!1&&t.items.push({name:t.name,label:"string"==typeof a?a:"(Select One)",value:"",_id:"",selected:!1,atts:e}),_.each(t.selectOptions,function(a){t.items.push({name:t.name,label:a.label,value:a.value,_id:a.value,selected:a.value===t.value,atts:e})}),t}}),e.afSelect2.helpers({optionAtts:function t(){var t=this,e={value:t.value};return t.selected&&(e.selected=""),e}}),e.afSelect2.rendered=function(){this.$("select").select2(this.data.atts.select2Options||{})},e.afSelect2.destroyed=function(){this.$("select").select2("destroy")},i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}.call(this),function(){e.__checkName("afSelect2_bootstrap3"),e.afSelect2_bootstrap3=new e("Template.afSelect2_bootstrap3",function(){var t=this;return c.SELECT(c.Attrs(function(){return Spacebars.attrMustache(t.lookup("atts"))}),"\n    ",a.Each(function(){return Spacebars.call(Spacebars.dot(t.lookup("."),"items"))},function(){return["\n    ",c.OPTION(c.Attrs(function(){return Spacebars.attrMustache(t.lookup("optionAtts"))}),a.View(function(){return Spacebars.mustache(Spacebars.dot(t.lookup("."),"label"))})),"\n    "]}),"\n  ")})}.call(this),function(){e.afSelect2_bootstrap3.helpers({optionAtts:function t(){var t=this,e={value:t.value};return t.selected&&(e.selected=""),e},atts:function a(){var t=_.clone(this.atts);return t=o.Utility.addClass(t,"form-control"),delete t.select2Options,t}}),e.afSelect2_bootstrap3.rendered=function(){this.$("select").select2(this.data.atts.select2Options||{})},e.afSelect2_bootstrap3.destroyed=function(){this.$("select").select2("destroy")}}.call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:autoform-select2"]={}}();

!function(){var e=Package.meteor.Meteor,t,n;(function(){n="object"==typeof n?n:{};var t=n;t.defaultChunkSize=2097152,t.defaultRoot="fs",t.insert_func=function(t,n){var i,r,o,s,a,l;null==t&&(t={});try{i=new e.Collection.ObjectID(""+t._id)}catch(u){i=new e.Collection.ObjectID}return r={},r._id=i,r.length=0,r.md5="d41d8cd98f00b204e9800998ecf8427e",r.uploadDate=new Date,r.chunkSize=n,r.filename=null!=(o=t.filename)?o:"",r.metadata=null!=(s=t.metadata)?s:{},r.aliases=null!=(a=t.aliases)?a:[],r.contentType=null!=(l=t.contentType)?l:"application/octet-stream",r}}).call(this),function(){!function(){"use strict";var e=function(t){function n(e,t){var n=this;n.opts={},n.getOpt=e.getOpt,n._prevProgress=0,n.resumableObj=e,n.file=t,n.fileName=t.fileName||t.name,n.size=t.size,n.relativePath=t.webkitRelativePath||n.fileName,n.uniqueIdentifier=o.generateUniqueIdentifier(t),n._pause=!1,n.container="";var r=!1,s=function(e,t){switch(e){case"progress":n.resumableObj.fire("fileProgress",n);break;case"error":n.abort(),r=!0,n.chunks=[],n.resumableObj.fire("fileError",n,t);break;case"success":if(r)return;n.resumableObj.fire("fileProgress",n),n.isComplete()&&n.resumableObj.fire("fileSuccess",n,t);break;case"retry":n.resumableObj.fire("fileRetry",n)}};return n.chunks=[],n.abort=function(){var e=0;o.each(n.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&n.resumableObj.fire("fileProgress",n)},n.cancel=function(){var e=n.chunks;n.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),n.resumableObj.uploadNextChunk())}),n.resumableObj.removeFile(n),n.resumableObj.fire("fileProgress",n)},n.retry=function(){n.bootstrap();var e=!1;n.resumableObj.on("chunkingComplete",function(){e||n.resumableObj.upload(),e=!0})},n.bootstrap=function(){n.abort(),r=!1,n.chunks=[],n._prevProgress=0;for(var e=n.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(n.file.size/n.getOpt("chunkSize")),1),o=0;t>o;o++)!function(e){window.setTimeout(function(){n.chunks.push(new i(n.resumableObj,n,e,s)),n.resumableObj.fire("chunkingProgress",n,e/t)},0)}(o);window.setTimeout(function(){n.resumableObj.fire("chunkingComplete",n)},0)},n.progress=function(){if(r)return 1;var e=0,t=!1;return o.each(n.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.999?1:e,e=Math.max(n._prevProgress,e),n._prevProgress=e,e},n.isUploading=function(){var e=!1;return o.each(n.chunks,function(t){return"uploading"==t.status()?(e=!0,!1):void 0}),e},n.isComplete=function(){var e=!1;return o.each(n.chunks,function(t){var n=t.status();return"pending"==n||"uploading"==n||1===t.preprocessState?(e=!0,!1):void 0}),!e},n.pause=function(e){n._pause="undefined"==typeof e?n._pause?!1:!0:e},n.isPaused=function(){return n._pause},n.resumableObj.fire("chunkingStart",n),n.bootstrap(),this}function i(e,t,n,i){var r=this;r.opts={},r.getOpt=e.getOpt,r.resumableObj=e,r.fileObj=t,r.fileObjSize=t.size,r.fileObjType=t.file.type,r.offset=n,r.callback=i,r.lastProgressCallback=new Date,r.tested=!1,r.retries=0,r.pendingRetry=!1,r.preprocessState=0;var s=r.getOpt("chunkSize");return r.loaded=0,r.startByte=r.offset*s,r.endByte=Math.min(r.fileObjSize,(r.offset+1)*s),r.fileObjSize-r.endByte<s&&!r.getOpt("forceChunkSize")&&(r.endByte=r.fileObjSize),r.xhr=null,r.test=function(){r.xhr=new XMLHttpRequest;var e=function(e){r.tested=!0;var t=r.status();"success"==t?(r.callback(t,r.message()),r.resumableObj.uploadNextChunk()):r.send()};r.xhr.addEventListener("load",e,!1),r.xhr.addEventListener("error",e,!1);var t=[],n=r.getOpt("query");"function"==typeof n&&(n=n(r.fileObj,r)),o.each(n,function(e,n){t.push([encodeURIComponent(e),encodeURIComponent(n)].join("="))}),t.push(["resumableChunkNumber",encodeURIComponent(r.offset+1)].join("=")),t.push(["resumableChunkSize",encodeURIComponent(r.getOpt("chunkSize"))].join("=")),t.push(["resumableCurrentChunkSize",encodeURIComponent(r.endByte-r.startByte)].join("=")),t.push(["resumableTotalSize",encodeURIComponent(r.fileObjSize)].join("=")),t.push(["resumableType",encodeURIComponent(r.fileObjType)].join("=")),t.push(["resumableIdentifier",encodeURIComponent(r.fileObj.uniqueIdentifier)].join("=")),t.push(["resumableFilename",encodeURIComponent(r.fileObj.fileName)].join("=")),t.push(["resumableRelativePath",encodeURIComponent(r.fileObj.relativePath)].join("=")),t.push(["resumableTotalChunks",encodeURIComponent(r.fileObj.chunks.length)].join("=")),r.xhr.open("GET",o.getTarget(t)),r.xhr.timeout=r.getOpt("xhrTimeout"),r.xhr.withCredentials=r.getOpt("withCredentials"),o.each(r.getOpt("headers"),function(e,t){r.xhr.setRequestHeader(e,t)}),r.xhr.send(null)},r.preprocessFinished=function(){r.preprocessState=2,r.send()},r.send=function(){var e=r.getOpt("preprocess");if("function"==typeof e)switch(r.preprocessState){case 0:return e(r),void(r.preprocessState=1);case 1:return;case 2:}if(r.getOpt("testChunks")&&!r.tested)return void r.test();r.xhr=new XMLHttpRequest,r.xhr.upload.addEventListener("progress",function(e){new Date-r.lastProgressCallback>1e3*r.getOpt("throttleProgressCallbacks")&&(r.callback("progress"),r.lastProgressCallback=new Date),r.loaded=e.loaded||0},!1),r.loaded=0,r.pendingRetry=!1,r.callback("progress");var t=function(e){var t=r.status();if("success"==t||"error"==t)r.callback(t,r.message()),r.resumableObj.uploadNextChunk();else{r.callback("retry",r.message()),r.abort(),r.retries++;var n=r.getOpt("chunkRetryInterval");void 0!==n?(r.pendingRetry=!0,setTimeout(r.send,n)):r.send()}};r.xhr.addEventListener("load",t,!1),r.xhr.addEventListener("error",t,!1);var n={resumableChunkNumber:r.offset+1,resumableChunkSize:r.getOpt("chunkSize"),resumableCurrentChunkSize:r.endByte-r.startByte,resumableTotalSize:r.fileObjSize,resumableType:r.fileObjType,resumableIdentifier:r.fileObj.uniqueIdentifier,resumableFilename:r.fileObj.fileName,resumableRelativePath:r.fileObj.relativePath,resumableTotalChunks:r.fileObj.chunks.length},i=r.getOpt("query");"function"==typeof i&&(i=i(r.fileObj,r)),o.each(i,function(e,t){n[e]=t});var s=r.fileObj.file.slice?"slice":r.fileObj.file.mozSlice?"mozSlice":r.fileObj.file.webkitSlice?"webkitSlice":"slice",a=r.fileObj.file[s](r.startByte,r.endByte),l=null,u=r.getOpt("target");if("octet"===r.getOpt("method")){l=a;var f=[];o.each(n,function(e,t){f.push([encodeURIComponent(e),encodeURIComponent(t)].join("="))}),u=o.getTarget(f)}else l=new FormData,o.each(n,function(e,t){l.append(e,t)}),l.append(r.getOpt("fileParameterName"),a);r.xhr.open("POST",u),r.xhr.timeout=r.getOpt("xhrTimeout"),r.xhr.withCredentials=r.getOpt("withCredentials"),o.each(r.getOpt("headers"),function(e,t){r.xhr.setRequestHeader(e,t)}),r.xhr.send(l)},r.abort=function(){r.xhr&&r.xhr.abort(),r.xhr=null},r.status=function(){return r.pendingRetry?"uploading":r.xhr?r.xhr.readyState<4?"uploading":200==r.xhr.status?"success":o.contains(r.getOpt("permanentErrors"),r.xhr.status)||r.retries>=r.getOpt("maxChunkRetries")?"error":(r.abort(),"pending"):"pending"},r.message=function(){return r.xhr?r.xhr.responseText:""},r.progress=function(e){"undefined"==typeof e&&(e=!1);var t=e?(r.endByte-r.startByte)/r.fileObjSize:1;if(r.pendingRetry)return 0;var n=r.status();switch(n){case"success":case"error":return 1*t;case"pending":return 0*t;default:return r.loaded/(r.endByte-r.startByte)*t}},this}if(!(this instanceof e))return new e(t);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var r=this;r.files=[],r.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=r.getOpt("maxFiles");alert("Please upload "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(r.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(r.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+r.getOpt("fileType")+".")}},r.opts=t||{},r.getOpt=function(t){var r=this;if(t instanceof Array){var s={};return o.each(t,function(e){s[e]=r.getOpt(e)}),s}if(r instanceof i){if("undefined"!=typeof r.opts[t])return r.opts[t];r=r.fileObj}if(r instanceof n){if("undefined"!=typeof r.opts[t])return r.opts[t];r=r.resumableObj}return r instanceof e?"undefined"!=typeof r.opts[t]?r.opts[t]:r.defaults[t]:void 0},r.events=[],r.on=function(e,t){r.events.push(e.toLowerCase(),t)},r.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=r.events.length;t+=2)r.events[t]==n&&r.events[t+1].apply(r,e.slice(1)),"catchall"==r.events[t]&&r.events[t+1].apply(null,e);"fileerror"==n&&r.fire("error",e[2],e[1]),"fileprogress"==n&&r.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if("undefined"!=typeof e.length){for(var n=0;n<e.length;n++)if(t(e[n])===!1)return}else for(n in e)if(t(n,e[n])===!1)return},generateUniqueIdentifier:function(e){var t=r.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name,i=e.size;return i+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e==t?(n=!0,!1):!0}),n},formatSize:function(e){return 1024>e?e+" bytes":1048576>e?(e/1024).toFixed(0)+" KB":1073741824>e?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=r.getOpt("target");return t+=t.indexOf("?")<0?"?":"&",t+e.join("&")}},s=function(e){o.stopEvent(e),l(e.dataTransfer.files,e)},a=function(e){e.preventDefault()},l=function(e,t){var i=0,s=r.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if("undefined"!=typeof s.maxFiles&&s.maxFiles<e.length+r.files.length){if(1!==s.maxFiles||1!==r.files.length||1!==e.length)return s.maxFilesErrorCallback(e,i++),!1;r.removeFile(r.files[0])}var a=[];o.each(e,function(e){var l=e.name.split("."),u=l[l.length-1].toLowerCase();return s.fileType.length>0&&!o.contains(s.fileType,u)?(s.fileTypeErrorCallback(e,i++),!1):"undefined"!=typeof s.minFileSize&&e.size<s.minFileSize?(s.minFileSizeErrorCallback(e,i++),!1):"undefined"!=typeof s.maxFileSize&&e.size>s.maxFileSize?(s.maxFileSizeErrorCallback(e,i++),!1):void(r.getFromUniqueIdentifier(o.generateUniqueIdentifier(e))||!function(){var i=new n(r,e);window.setTimeout(function(){r.files.push(i),a.push(i),i.container="undefined"!=typeof t?t.srcElement:null,r.fire("fileAdded",i,t)},0)}())}),window.setTimeout(function(){r.fire("filesAdded",a)},0)};return r.uploadNextChunk=function(){var e=!1;if(r.getOpt("prioritizeFirstAndLastChunk")&&(o.each(r.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(r.files,function(t){return t.isPaused()===!1&&o.each(t.chunks,function(t){return"pending"==t.status()&&0===t.preprocessState?(t.send(),e=!0,!1):void 0}),e?!1:void 0}),e)return!0;var t=!1;return o.each(r.files,function(e){return e.isComplete()?void 0:(t=!0,!1)}),t||r.fire("complete"),!1},r.assignBrowse=function(e,t){"undefined"==typeof e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var i=r.getOpt("maxFiles");"undefined"==typeof i||1!=i?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){l(e.target.files,e),e.target.value=""},!1)})},r.assignDrop=function(e){"undefined"==typeof e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",a,!1),e.addEventListener("drop",s,!1)})},r.unAssignDrop=function(e){"undefined"==typeof e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",a),e.removeEventListener("drop",s)})},r.isUploading=function(){var e=!1;return o.each(r.files,function(t){return t.isUploading()?(e=!0,!1):void 0}),e},r.upload=function(){if(!r.isUploading()){r.fire("uploadStart");for(var e=1;e<=r.getOpt("simultaneousUploads");e++)r.uploadNextChunk()}},r.pause=function(){o.each(r.files,function(e){e.abort()}),r.fire("pause")},r.cancel=function(){for(var e=r.files.length-1;e>=0;e--)r.files[e].cancel();r.fire("cancel")},r.progress=function(){var e=0,t=0;return o.each(r.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},r.addFile=function(e,t){l([e],t)},r.removeFile=function(e){for(var t=r.files.length-1;t>=0;t--)r.files[t]===e&&r.files.splice(t,1)},r.getFromUniqueIdentifier=function(e){var t=!1;return o.each(r.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},r.getSize=function(){var e=0;return o.each(r.files,function(t){e+=t.size}),e},this};"undefined"!=typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.Resumable=e}()}.call(this),function(){n="object"==typeof n?n:{};var t=n;e.isClient&&(t.setup_resumable=function(){var t;return t=new Resumable({target:""+this.baseURL+"/_resumable",generateUniqueIdentifier:function(t){return""+new e.Collection.ObjectID},fileParameterName:"file",chunkSize:this.chunkSize,testChunks:!0,simultaneousUploads:3,maxFiles:void 0,maxFilesErrorCallback:void 0,prioritizeFirstAndLastChunk:!1,query:void 0,headers:{}}),t.support?this.resumable=t:(console.error("resumable.js not supported by this Browser, uploads will be disabled"),this.resumable=null)})}.call(this),function(){n="object"==typeof n?n:{};var i=n,r={}.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e.isClient&&(t=function(e){function t(e,n){var r,o;return this.root=null!=e?e:i.defaultRoot,null==n&&(n={}),this instanceof t?("object"==typeof this.root&&(n=this.root,this.root=i.defaultRoot),this.base=this.root,this.baseURL=null!=(r=n.baseURL)?r:"/gridfs/"+this.root,this.chunkSize=null!=(o=n.chunkSize)?o:i.defaultChunkSize,t.__super__.constructor.call(this,this.root+".files",{idGeneration:"MONGO"}),void(n.resumable&&i.setup_resumable.bind(this)())):new t(e,n)}return o(t,e),t.prototype.upsert=function(){throw new Error("File Collections do not support 'upsert'")},t.prototype.update=function(){throw new Error("File Collections do not support 'update' on client, use method calls instead")},t.prototype.insert=function(e,n){return null==n&&(n=void 0),e=i.insert_func(e,this.chunkSize),t.__super__.insert.call(this,e,n)},t}(e.Collection))}.call(this),"undefined"==typeof Package&&(Package={}),Package["vsivsi:file-collection"]={FileCollection:t}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["pfafman:font-awesome-4"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["telescope-lib"].deepExtend,n=Package["telescope-lib"].camelToDash,s=Package["telescope-lib"].dashToCamel,o=Package["telescope-lib"].camelCaseify,i=Package["telescope-lib"].getSetting,a=Package["telescope-lib"].getThemeSetting,l=Package["telescope-lib"].getSiteUrl,r=Package["telescope-lib"].trimWords,c=Package["telescope-lib"].can,h=Package.underscore._,u=Package["telescope-lib"].capitalise,d=Package["telescope-post-files"].adminNav,p=Package["telescope-base"].viewNav,f=Package["telescope-post-files"].addToPostSchema,m=Package["telescope-base"].addToCommentsSchema,g=Package["telescope-base"].addToSettingsSchema,b=Package["telescope-post-files"].preloadSubscriptions,v=Package["telescope-post-files"].primaryNav,S=Package["telescope-base"].secondaryNav,w=Package["telescope-base"].viewParameters,C=Package["telescope-base"].footerModules,y=Package["telescope-base"].heroModules,k=Package["telescope-post-files"].postModules,P=Package["telescope-base"].postHeading,T=Package["telescope-base"].postMeta,x=Package["telescope-base"].modulePositions,E=Package["telescope-base"].postSubmitRenderedCallbacks,A=Package["telescope-base"].postSubmitClientCallbacks,R=Package["telescope-base"].postSubmitMethodCallbacks,I=Package["telescope-base"].postAfterSubmitMethodCallbacks,O=Package["telescope-base"].postEditRenderedCallbacks,L=Package["telescope-base"].postEditClientCallbacks,M=Package["telescope-base"].postEditMethodCallbacks,H=Package["telescope-base"].postAfterEditMethodCallbacks,N=Package["telescope-base"].commentSubmitRenderedCallbacks,D=Package["telescope-base"].commentSubmitClientCallbacks,z=Package["telescope-base"].commentSubmitMethodCallbacks,j=Package["telescope-base"].commentAfterSubmitMethodCallbacks,U=Package["telescope-base"].commentEditRenderedCallbacks,F=Package["telescope-base"].commentEditClientCallbacks,G=Package["telescope-base"].commentEditMethodCallbacks,V=Package["telescope-base"].commentAfterEditMethodCallbacks,W=Package["telescope-base"].getTemplate,Y=Package["telescope-base"].templates,B=Package["telescope-base"].themeSettings,K=Package["aldeed:simple-schema"].SimpleSchema,Q=Package["aldeed:simple-schema"].MongoObject,q=Package["telescope-post-files"].Categories,J=Package["telescope-post-files"].Collections,X=Package["telescope-post-files"].AutoForm,Z=Package["telescope-post-files"].FS,_=Package.jquery.$,$=Package.jquery.jQuery,et=Package["cfs:http-methods"].HTTP,tt=Package["iron:router"].Router,nt=Package["iron:router"].RouteController,st=Package.templating.Template,ot=Package["vsivsi:file-collection"].FileCollection,it=Package["telescope-i18n"].i18n,at=Package["telescope-i18n"].setLanguage,lt=Package["iron:core"].Iron,rt=Package.blaze.Blaze,ct=Package.blaze.UI,ht=Package.blaze.Handlebars,ut=Package.htmljs.HTML,dt,pt,ft,mt,gt,bt,vt,St,wt,Ct,yt;(function(){bt=new K({_id:{type:String,optional:!0},slug:{type:String},name:{type:String},description:{type:String},collaborators:{type:[String],autoform:{type:"select2",afFieldInput:{multiple:!0}}}}),pt=new e.Collection("collaboration",{}),pt.attachSchema(bt),vt={collaboration:bt},w.collaboration=function(e){return{find:{collaboration:e.collaboration},options:{sort:{sticky:-1,score:-1}}}},P.push({template:"collaborationTagList",order:3}),v.push("collaborationMenu"),f.push({propertyName:"collaboration",propertySchema:{optional:!0,type:[String]}});var t=function(e){return e.collaboration=[],_("input[name=collaboration]:checked").each(function(){var t=_(this).val();e.collaboration.push(pt.findOne(t))}),e};A.push(t),L.push(t),e.startup(function(){pt.allow({insert:isAdminById,update:isAdminById,remove:isAdminById})}),St=function(e){return l()+"collaboration/"+e}}).call(this),function(){b.push("collaboration"),d.push({route:"collaboration",label:"Collaboration"}),e.startup(function(){wt=PostsListController.extend({view:"collaboration"}),tt.map(function(){this.route("posts_collaboration",{path:"/collaboration/:slug/:limit?",controller:wt,onAfterAction:function(){Session.set("collaborationSlug",this.params.slug)}}),this.route("collaboration",{template:"collaborationGrid",onAfterAction:function(){Session.set("collaborationSlug","")}})})})}.call(this),function(){st.__checkName("collaborationGrid"),st.collaborationGrid=new st("Template.collaborationGrid",function(){var e=this;return[ut.Raw('<h3 class="collaborationGridTitle">Browse Collaborations</h3>\n  '),Spacebars.include(e.lookupTemplate("AddCollaboration")),"\n  ",ut.DIV({"class":"collaboration posts list"},"\n    ",rt.Each(function(){return Spacebars.call(e.lookup("collaboration"))},function(){return["\n      ",Spacebars.include(e.lookupTemplate("collaborationGridElement")),"\n    "]}),"\n  ")]}),st.__checkName("collaborationGridElement"),st.collaborationGridElement=new st("Template.collaborationGridElement",function(){var e=this;return ut.A({"class":"collaboration",href:function(){return["/collaboration/",Spacebars.mustache(e.lookup("slug"))]}},"\n    ",ut.DIV({"class":"collaborationMarquee collaboration post"},"\n        ",ut.H2(ut.A({href:function(){return["/collaboration/",Spacebars.mustache(e.lookup("slug"))]}},rt.View(function(){return Spacebars.mustache(e.lookup("name"))}))),"\n        ",ut.P("\n        ",rt.View(function(){return Spacebars.mustache(e.lookup("description"))}),"\n        "),"\n        ",ut.Raw('<h3 class="collaboration-h3">Collaborators</h3>')," ",ut.DIV({"class":"collaboration-token"},rt.View(function(){return Spacebars.mustache(e.lookup("collaborators"))})),"\n\n        ",rt.If(function(){return Spacebars.call(e.lookup("isAdministrator"))},function(){return["\n",ut.Comment('\n            {{#if isPrivate}}\n                <button data-collaborationName="{{name}}" id="makePublic" type="button" class="btn btn-default btn-lg">Make Public</button>\n            {{else}}\n                <button data-collaborationName="{{name}}" id="makePrivate" type="button" class="btn btn-default btn-lg">Make Private</button>\n            {{/if}}\n'),"\n            ",ut.B("Administrators")," ",ut.DIV({"class":"collaboration-token"},rt.View(function(){return Spacebars.mustache(e.lookup("administrators"))})),ut.BR(),"\n            ",ut.B("Invitations")," ",ut.DIV({"class":"collaboration-token"},rt.View(function(){return Spacebars.mustache(e.lookup("invitations"))})),"\n\n\n\n            ",ut.B(rt.View(function(){return Spacebars.mustache(e.lookup("invitations"))})),"\n            ",ut.BR(),"\n            ",ut.B("Applications")," ",ut.DIV({"class":"collaboration-token"},rt.View(function(){return Spacebars.mustache(e.lookup("applications"))})),ut.BR(),"\n\n        "]}),"\n\n\n\n\n        ",ut.Raw('<h3 class="collaboration-h3">Membership</h3>'),"\n        ",rt.If(function(){return Spacebars.call(e.lookup("isMember"))},function(){return["\n            ",ut.BUTTON({"data-collaborationname":function(){return Spacebars.mustache(e.lookup("name"))},id:"leave",name:"leave",type:"button","class":"btn btn-default btn-lg"},"Leave this collaboration"),"\n        "]},function(){return["\n            ",rt.If(function(){return Spacebars.call(e.lookup("requiresApproval"))},function(){return["\n            ",ut.BUTTON({"data-collaborationname":function(){return Spacebars.mustache(e.lookup("name"))},id:"apply",name:"apply",type:"button","class":"btn btn-default btn-lg"},"Apply for membership"),"\n        "]},function(){return["\n            ",ut.BUTTON({"data-collaborationname":function(){return Spacebars.mustache(e.lookup("name"))},id:"join",name:"join",type:"button","class":"btn btn-default btn-lg"},"Join this collaboration"),"\n            "]}),"\n        "]}),"\n\n    "),"\n  ")})}.call(this),function(){function t(t){var n=pt.findOne({_id:t});if(null==n)return!1;var s=n.collaborators;if(null==s)return!1;for(var o=e.user().emails,i=0;i<o.length;i++)if(s.indexOf(o[i].address)>=0)return!0;return!1}function n(t){var n=pt.findOne({_id:t});if(null==n)return!1;var s=n.administrators;if(null==s)return!0;for(var o=e.user().emails,i=0;i<o.length;i++)if(s.indexOf(o[i].address)>=0)return!0;return!1}function s(t){var n=pt.findOne({_id:t});if(null==n)return!1;var s=n.administrators;if(null==s)return!0;for(var o=e.user().emails,i=0;i<o.length;i++)if(s.indexOf(o[i].collaborators)>=0)return!0;return!1}e.startup(function(){st[W("collaborationGrid")].helpers({collaboration:function(){return pt.find({},{sort:{order:1,name:1}})}}),st[W("collaborationGrid")].events({'click button[name="join"]':function(t){t.preventDefault(),e.call("joinCollaborationMethod",this._id,function(e){e?(console.log("joinCollaborationMethod error",e),alert("joinCollaborationMethod failed")):alert("You are now part of the collaboration")})},'click button[name="leave"]':function(t){t.preventDefault(),e.call("leaveCollaborationMethod",this._id,function(e){e?(console.log("leaveCollaborationMethod error",e),alert("leaveCollaborationMethod failed")):alert("You have left the collaboration")})},"click input[type=submit]":function(t){t.preventDefault();var n=_("#name").val(),s=slugify(n);e.call("createCollaborationMethod",{name:n,slug:s},function(e,t){e?(console.log(e),throwError(e.reason),clearSeenErrors()):_("#name").val("")})}}),st[W("collaborationGridElement")].helpers({isAdministrator:function(){return n(this._id)},requiresApproval:function(){console.log("requiresApproval",this,pt.findOne({_id:this._id}));var e=pt.findOne({_id:this._id});return 1==e.requiresApproval},isPrivate:function(){var e=pt.findOne({_id:this._id});return 1==e.isPrivate},isMember:function(){return t(this._id)}}),st[W("collaborationGridElement")].events({'keyup input[id="addCollaborators"]':dt})})}.call(this),function(){st.__checkName("AddCollaboration"),st.AddCollaboration=new st("Template.AddCollaboration",function(){var e=this;return ut.DIV({onclick:'$(".collapsed").toggle()',"class":"collaboration-item",style:"cursor:pointer;"},ut.Raw('\n\n\n\n        <h3 class="short" style="color:white;text-align:center; margin:10px; padding:0; font-size:26px;">Add Collaboration</h3>\n        '),ut.DIV({"class":"collapsed",style:"display:none;"},"\n\n        ",ut.FORM("\n            ",ut.DIV({style:"width:auto;","class":"control-group inline"},"\n                ",ut.TABLE("\n                    ",ut.TBODY("\n                    ",ut.TR("\n                        ",ut.TD({style:"width:600px;padding-right:0px;"},"\n                            ",ut.DIV({style:"float:left; margin:0;","class":"controls"},"\n                                ",ut.LABEL({"class":"collaboration-label"},"Collaboration Name"),"\n                                    ",ut.INPUT({"class":"collaboration-name",id:"name",type:"text",value:function(){return Spacebars.mustache(e.lookup("name"))},placeholder:"A collaboration needs a simple name"}),"\n                                ",ut.LABEL({"class":"collaboration-label"},"Description"),"\n                                    ",ut.INPUT({"class":"collaboration-description",id:"description",type:"text",value:function(){return Spacebars.mustache(e.lookup("description"))},placeholder:"Fill in description"}),"\n                                ",ut.LABEL({"class":"collaboration-label"},"Collaborators"),"\n                                    ",ut.INPUT({"class":"collaboration-collaborators",name:"collaborators",id:"collaborators",type:"hidden",value:"1,1,2"}),"\n                                ",ut.LABEL({"class":"collaboration-label"},"Administrators"),"\n                                    ",ut.INPUT({"class":"collaboration-administrators",name:"adminstrators",id:"adminstrators",type:"text",placeholder:"Add adminstrators"}),"\n                                ",ut.LABEL({"class":"collaboration-label"},"Invite"),"\n                                    ",ut.INPUT({"class":"collaboration-invitations",name:"invitations",id:"invitations",type:"text",placeholder:"invite collaborators"}),"\n                            "),"\n                        "),"\n                        ",ut.TD({width:"25px"},"\n                            ",ut.DIV({style:"float:right; align:center;"},"\n                                ",ut.A({style:" width:100px;","class":"button submit edit-link",href:"#"},ut.CENTER("Save")),"\n\n                                ",ut.A({style:"margin-top:100px; width:100px;","class":"button cancel edit-link",href:"#",onclick:"hideAddCollaboration()"},"Cancel"),"\n                            "),"\n                        "),"\n                    "),"\n                    "),"\n                "),"\n            "),"\n        "),"\n        ",ut.Raw("<!--\n          {{#autoForm collection=\"Collaboration\" schema=\"collaborationSchema\" id=\"insertcollaborationForm\" type=\"insert\"}}\n          <fieldset>\n            {{> afQuickField name='name'}}\n            {{> afQuickField name='description' rows=6}}\n            {{> afQuickField name='collaborators'  type=\"select2\" multiple=true select2Options=potential}}\n            {{> afQuickField name='administrators'}}\n            {{> afQuickField name='invitations'}}\n          </fieldset>\n          {{/autoForm}}\n          -->"),"\n       "),"\n    ")})}.call(this),function(){e.startup(function(){st[W("AddCollaboration")].helpers({potential:function(){return["Aa","Bb","Cc"]}}),st[W("AddCollaboration")].events({"click .edit-link":function(e,t){e.preventDefault();var n={name:t.find(".collaboration-name").value,description:t.find(".collaboration-description").value,collaborators:t.find(".collaboration-collaborators").value,administrators:t.find(".collaboration-administrators").value,invitations:t.find(".collaboration-invitations").value,applications:[]};gt(n),t.find("form").reset()}}),st[W("AddCollaboration")].rendered=function(){var e=[{id:1,text:"Aa"},{id:2,text:"Bb"},{id:3,text:"Cc"}];_("#collaborators").select2({width:"100%",multiple:!0,data:e})}})}.call(this),function(){st.__checkName("collaborationMenu"),st.collaborationMenu=new st("Template.collaborationMenu",function(){var e=this;return rt.If(function(){return Spacebars.call(e.lookup("hasCollaboration"))},function(){return["\n    ",ut.DIV({"class":"dropdown collaboration-menu header-submodule"},"\n      ",ut.A({"class":"collaboration dropdown-top-level",href:"/"},rt.View(function(){return Spacebars.mustache(e.lookup("_"),"Collaborations")})),"\n      ",ut.DIV({"class":"dropdown-menu"},"\n        ",ut.UL({role:"menu","aria-labelledby":"dLabel"},"\n            ",ut.LI(ut.A({"class":"dropdown-sub-level",href:"/collaboration/"},"All Collaborations")),"\n\n          ",rt.Each(function(){return Spacebars.call(e.lookup("collaboration"))},function(){return["\n            ",ut.LI(ut.A({"class":"dropdown-sub-level",href:function(){return Spacebars.mustache(e.lookup("collaborationLink"))}},rt.View(function(){return Spacebars.mustache(e.lookup("name"))}))),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  "]})})}.call(this),function(){e.startup(function(){st[W("collaborationMenu")].helpers({hasCollaboration:function(){return"undefined"!=typeof pt&&pt.find().count()},collaboration:function(){return pt.find({},{sort:{name:1}})},collaborationLink:function(){return St(this.slug)}})})}.call(this),function(){st.__checkName("collaborationTagList"),st.collaborationTagList=new st("Template.collaborationTagList",function(){var e=this;return ut.SPAN({"class":"collborationTagList"},"\n      ",rt.Each(function(){return Spacebars.call(e.lookup("collaboration"))},function(){return["\n          ",ut.A({href:function(){return Spacebars.mustache(e.lookup("collaborationLink"))},"class":"post-collaboration"},rt.View(function(){return Spacebars.mustache(e.lookup("collaborationName"))})),"\n      "]}),ut.Raw('\n      <a class="addCollaborators"> <i class="fa fa-plus-square" title="add collaboration"></i> </a>\n  '))}),st.__checkName("addCollaboratorsPoppup"),st.addCollaboratorsPoppup=new st("Template.addCollaboratorsPoppup",function(){var e=this;return[ut.DIV({"class":"popupControl",style:"background:white;position:absolute;display:block;z-index:1001",id:"addCollaboratorsPoppup"},ut.Raw("<h4>Type in names of users or other collaborations:</h4>"),"\n         ",Spacebars.include(e.lookupTemplate("selectCollaborators")),"\n          ",ut.BUTTON({id:"addCollaboratorsDone","data-_id":function(){return Spacebars.mustache(e.lookup("_id"))}},"Done"),"\n      "),ut.Raw('\n  <div id="scrim" style="position:fixed;left:0,top:0;width:100%;height100%;opacity=0.9;background-color:gray; z-index:500"></div>')]}),st.__checkName("selectCollaborators"),st.selectCollaborators=new st("Template.selectCollaborators",function(){var e=this;return ut.Raw('<input class="selectCollaborators" name="selectCollaborators" type="text" placeholder="select collaborators(s)">')})}.call(this),function(){gt=function(t){var n=slugify(t.name);t.slug=n;var s=["collaborators","administrators","invitations","applications"];for(var o in s){var i=s[o];"string"==typeof t[i]&&(t[i]=t[i].split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0}))}var a=e.user().emails[0].address;t.administrators.indexOf(a)<=0&&t.administrators.push(a),t.collaborators.indexOf(a)<=0&&t.collaborators.push(a),e.call("createCollaborationMethod",t,function(e,t){e&&(console.log(e),throwError(e.reason),clearSeenErrors())})},e.startup(function(){function t(){var t=e.users.find({},{fields:{username:1}}).fetch(),n=pt.find({},{fields:{name:1}}).fetch(),s=t.map(function(e){return e.username}).concat(n.map(function(e){return e.name}));s=s.filter(function(e){return e&&e.length>0});var o=s.map(function(e){return{id:e,text:e}});return o}st[W("collaborationTagList")].helpers({collaboration:function(e){if("collaboration"in this)return this.collaboration;var t=Session.get("collaborationSlug");return t&&t.length>0?[t]:[]},collaborationLink:function(){var e=pt.findOne({name:String(this)});return null==e?"":"/collaboration/"+e.slug},collaborationName:function(){return this}}),window.collabNames=t,E.push(function(e){var n=_(e.find(".selectCollaborators"));console.log("postSubmitRenderedCallbacks",n),n.select2({tags:t(),width:"600px"})}),A.push(function(e){var t=_(".selectCollaborators").select2("data"),n=t.map(function(e){return e.id});return e.collaboration=n,e}),st.addCollaboratorsPoppup.helpers({something:function(e){console.log("something",this)}}),window.doneAddCollaborators=function(){_("#addCollaboratorsPoppup").remove(),setTimeout(function(){_(".cover").remove()},100)},st[W("collaborationTagList")].events({"click .addCollaborators":function(e,n){var s=this._id,o=this.collaboration.map(function(e){return{id:e,text:e}}),i=rt.toHTMLWithData(st.addCollaboratorsPoppup,this);_(event.target).append(i),_(document).ready(function(){var e=_(event.target).find(".selectCollaborators");console.log("click addCol data",o,s,e),e.select2({tags:t(),width:"600px"}),e.select2("data",o),_("body").append('<div onclick="doneAddCollaborators()" class="cover"></div>')})},"submit #addCollaboratorsForm":function(e,t){e.preventDefault()},"click  #addCollaboratorsDone":function(e,t){e.preventDefault();var n=_(e.target).parent().find('input[class="selectCollaborators"]'),s=n.select2("data").map(function(e){return e.id}),o=_(e.target).data("_id");console.log("YYY",s,o),Posts.update({_id:o},{$set:{collaboration:s}}),doneAddCollaborators()}})})}.call(this),function(){!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),s=-1,o=this.length;++s<o&&(n.context=n[0]=this[s])&&t.call(n[0],s,n)!==!1;);return this}})}($),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function s(e){function t(e){return F[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function o(e,t){for(var n=0,s=t.length;s>n;n+=1)if(a(e,t[n]))return n;return-1}function i(){var t=e(U);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function a(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function l(e,t,n){var s,o,i;if(null===e||e.length<1)return[];for(s=e.split(t),o=0,i=s.length;i>o;o+=1)s[o]=n(s[o]);return s}function r(e){return e.outerWidth(!1)-e.width()}function c(n){var s="keyup-change-value";n.on("keydown",function(){e.data(n,s)===t&&e.data(n,s,n.val())}),n.on("keyup",function(){var o=e.data(n,s);o!==t&&n.val()!==o&&(e.removeData(n,s),n.trigger("keyup-change"))})}function h(n){n.on("mousemove",function(n){var s=N;(s===t||s.x!==n.pageX||s.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function u(e,n,s){s=s||t;var o;return function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(s,t)},e)}}function d(e,t){var n=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){o(e.target,t.get())>=0&&n(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t=e[0],n=e.val().length,s;e.focus();var o=t.offsetWidth>0||t.offsetHeight>0;o&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(n,n):t.createTextRange&&(s=t.createTextRange(),s.collapse(!1),s.select()))},0)}function f(t){t=e(t)[0];var n=0,s=0;if("selectionStart"in t)n=t.selectionStart,s=t.selectionEnd-n;else if("selection"in document){t.focus();var o=document.selection.createRange();s=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),n=o.text.length-s}return{offset:n,length:s}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function b(t){if(!H){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);H=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),H.attr("class","select2-sizer"),e(document.body).append(H)}return H.text(t.val()),H.width()}function v(t,n,s){var o,i=[],a;o=e.trim(t.attr("class")),o&&(o=""+o,e(o.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&i.push(this)})),o=e.trim(n.attr("class")),o&&(o=""+o,e(o.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(a=s(this),a&&i.push(a))})),t.attr("class",i.join(" "))}function S(e,t,n,o){var i=s(e.toUpperCase()).indexOf(s(t.toUpperCase())),a=t.length;return 0>i?void n.push(o(e)):(n.push(o(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(o(e.substring(i,i+a))),n.push("</span>"),void n.push(o(e.substring(i+a,e.length))))}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function C(n){var s,o=null,i=n.quietMillis||100,a=n.url,l=this;return function(r){window.clearTimeout(s),s=window.setTimeout(function(){var s=n.data,i=a,c=n.transport||e.fn.select2.ajaxDefaults.transport,h={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,h);s=s?s.call(l,r.term,r.page,r.context):null,i="function"==typeof i?i.call(l,r.term,r.page,r.context):i,o&&"function"==typeof o.abort&&o.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(l)):e.extend(u,n.params)),e.extend(u,{url:i,dataType:n.dataType,data:s,success:function(e){var t=n.results(e,r.page,r);r.callback(t)},error:function(e,t,n){var s={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};r.callback(s)}}),o=c.call(l,u)},i)}}function y(t){var n=t,s,o,i=function(e){return""+e.text};e.isArray(n)&&(o=n,n={results:o}),e.isFunction(n)===!1&&(o=n,n=function(){return o});var a=n();return a.text&&(i=a.text,e.isFunction(i)||(s=a.text,i=function(e){return e[s]})),function(t){var s=t.term,o={results:[]},a;return""===s?void t.callback(n()):(a=function(n,o){var l,r;if(n=n[0],n.children){l={};for(r in n)n.hasOwnProperty(r)&&(l[r]=n[r]);l.children=[],e(n.children).each2(function(e,t){a(t,l.children)}),(l.children.length||t.matcher(s,i(l),n))&&o.push(l)}else t.matcher(s,i(n),n)&&o.push(n)},e(n().results).each2(function(e,t){a(t,o.results)}),void t.callback(o))}}function k(n){var s=e.isFunction(n);return function(o){var i=o.term,a={results:[]},l=s?n(o):n;e.isArray(l)&&(e(l).each(function(){var e=this.text!==t,n=e?this.text:this;(""===i||o.matcher(i,n))&&a.results.push(e?this:{id:this,text:this})}),o.callback(a))}}function P(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function T(t,n){if(e.isFunction(t)){var s=Array.prototype.slice.call(arguments,2);return t.apply(n,s)}return t}function x(t){var n=0;return e.each(t,function(e,t){t.children?n+=x(t.children):n++}),n}function E(e,n,s,o){var i=e,l=!1,r,c,h,u,d;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(c=-1,h=0,u=o.tokenSeparators.length;u>h&&(d=o.tokenSeparators[h],c=e.indexOf(d),!(c>=0));h++);if(0>c)break;if(r=e.substring(0,c),e=e.substring(c+d.length),r.length>0&&(r=o.createSearchChoice.call(this,r,n),r!==t&&null!==r&&o.id(r)!==t&&null!==o.id(r))){for(l=!1,h=0,u=n.length;u>h;h++)if(a(o.id(r),o.id(n[h]))){l=!0;break}l||s(r)}}return i!==e?e:void 0}function A(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function R(t,n){var s=function(){};return s.prototype=new t,s.prototype.constructor=s,s.prototype.parent=t.prototype,s.prototype=e.extend(s.prototype,n),s}if(window.Select2===t){var I,O,L,M,H,N={x:0,y:0},D,z,j={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case j.LEFT:case j.RIGHT:case j.UP:case j.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case j.SHIFT:case j.CTRL:case j.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},U="<div class='select2-measure-scrollbar'></div>",F={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R","Ꞧ":"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r","ꞧ":"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s","ꞩ":"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"};D=e(document),M=function(){var e=1;return function(){return e++}}(),I=R(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var s,o,a=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+M()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(T(n.containerCss,this.opts.element)),this.container.addClass(T(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=s=this.container.find(a),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),h(this.results),this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",a,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)
})),this.dropdown.on("touchmove",a,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&s.mousewheel(function(e,t,n,o){var i=s.scrollTop();o>0&&0>=i-o?(s.scrollTop(0),m(e)):0>o&&s.get(0).scrollHeight-s.scrollTop()+o<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),m(e))}),c(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",a,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var l=n.element.prop("disabled");l===t&&(l=!1),this.enable(!l);var r=n.element.prop("readonly");r===t&&(r=!1),this.readonly(r),z=z||i(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),s=this;this.close(),e.length&&e[0].detachEvent&&s._sync&&e.each(function(){s._sync&&this.detachEvent("onpropertychange",s._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),A.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:a(e.attr("locked"),"locked")||a(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var s,o,i,r,c=this;if(s=n.element,"select"===s.get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(s,o,i){var a,l=this.opts.id,r=this.liveRegion;(a=function(s,o,h){var u,d,p,f,m,g,b,v,S,w;s=n.sortResults(s,o,i);var C=[];for(u=0,d=s.length;d>u;u+=1)p=s[u],m=p.disabled===!0,f=!m&&l(p)!==t,g=p.children&&p.children.length>0,b=e("<li></li>"),b.addClass("select2-results-dept-"+h),b.addClass("select2-result"),b.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&b.addClass("select2-disabled"),g&&b.addClass("select2-result-with-children"),b.addClass(c.opts.formatResultCssClass(p)),b.attr("role","presentation"),v=e(document.createElement("div")),v.addClass("select2-result-label"),v.attr("id","select2-result-label-"+M()),v.attr("role","option"),w=n.formatResult(p,v,i,c.opts.escapeMarkup),w!==t&&(v.html(w),b.append(v)),g&&(S=e("<ul></ul>"),S.addClass("select2-result-sub"),a(p.children,S,h+1),b.append(S)),b.data("select2-data",p),C.push(b[0]);o.append(C),r.text(n.formatMatches(s.length))})(o,s,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(i=n.id,n.id=function(e){return e[i]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind(function(e){var n={results:[],more:!1},o=e.term,i,a,l;l=function(t,n){var s;t.is("option")?e.matcher(o,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(s=c.optionToData(t),t.children().each2(function(e,t){l(t,s.children)}),s.children.length>0&&n.push(s))},i=s.children(),this.getPlaceholder()!==t&&i.length>0&&(a=this.getPlaceholderOption(),a&&(i=i.not(a))),i.each2(function(e,t){l(t,n.results)}),e.callback(n)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(r=n.element.data("ajax-url"),r&&r.length>0&&(n.ajax.url=r),n.query=C.call(n.element,n.ajax)):"data"in n?n.query=y(n.data):"tags"in n&&(n.query=k(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,s){var o=[];e(l(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},s=n.tags;e.isFunction(s)&&(s=s()),e(s).each(function(){return a(this.id,t.id)?(t=this,!1):void 0}),o.push(t)}),s(o)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n=this.opts.element,s,o=this;n.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var s=n.prop("readonly");s===t&&(s=!1),this.readonly(s),this.container&&(v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element)))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",o._sync)}),s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new s(function(t){e.each(t,o._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t=this.dropdown,n=this.container,s=n.offset(),o=n.outerHeight(!1),i=n.outerWidth(!1),a=t.outerHeight(!1),l=e(window),r=l.width(),c=l.height(),h=l.scrollLeft()+r,u=l.scrollTop()+c,d=s.top+o,p=s.left,f=u>=d+a,m=s.top-a>=l.scrollTop(),g=t.outerWidth(!1),b=function(){return h>=p+g},v=function(){return s.left+h+n.outerWidth(!1)>g},S=t.hasClass("select2-drop-above"),w,C,y,k,P;S?(C=!0,!m&&f&&(y=!0,C=!1)):(C=!1,!f&&m&&(y=!0,C=!0)),y&&(t.hide(),s=this.container.offset(),o=this.container.outerHeight(!1),i=this.container.outerWidth(!1),a=t.outerHeight(!1),h=l.scrollLeft()+r,u=l.scrollTop()+c,d=s.top+o,p=s.left,g=t.outerWidth(!1),t.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(P=e(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),g=t.outerWidth(!1)+(P.scrollHeight===P.clientHeight?0:z.width),g>i?i=g:g=i,a=t.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(w=this.body.offset(),d-=w.top,p-=w.left),!b()&&v()&&(p=s.left+this.container.outerWidth(!1)-g),k={left:p,width:i},C?(k.top=s.top-a,k.bottom="auto",this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above")):(k.top=d,k.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above")),k=e.extend(k,T(this.opts.dropdownCss,this.opts.element)),t.css(k)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),D.on("mousemove.select2Event",function(e){N.x=e.pageX,N.y=e.pageY}),!0):!1},opening:function(){var t=this.containerEventName,s="scroll."+t,o="resize."+t,i="orientationchange."+t,a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),a=e("#select2-drop-mask"),0===a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body),a.on("mousedown touchstart click",function(t){n(a);var s=e("#select2-drop"),o;s.length>0&&(o=s.data("select2"),o.opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),a.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var l=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+s+" "+i,function(e){l.opened()&&l.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,s="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(s).off(o)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),D.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,n,s,o,i,a,l,r,c;if(s=this.highlight(),!(0>s)){if(0==s)return void t.scrollTop(0);n=this.findHighlightableChoices().find(".select2-result-label"),o=e(n[s]),c=(o.offset()||{}).top||0,i=c+o.outerHeight(!0),s===n.length-1&&(r=t.find("li.select2-more-results"),r.length>0&&(i=r.offset().top+r.outerHeight(!0))),a=t.offset().top+t.outerHeight(!1),i>a&&t.scrollTop(t.scrollTop()+(i-a)),l=c-t.offset().top,0>l&&"none"!=o.css("display")&&t.scrollTop(t.scrollTop()+l)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<n.length;){s+=t;var o=e(n[s]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(t){var n=this.findHighlightableChoices(),s,i;return 0===arguments.length?o(n.filter(".select2-highlighted")[0],n.get()):(t>=n.length&&(t=n.length-1),0>t&&(t=0),this.removeHighlight(),s=e(n[t]),s.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",s.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(s.text()),i=s.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,s=this.resultsPage+1,o=this,i=this.search.val(),a=this.context;0!==t.length&&(n=t.offset().top-e.offset().top-e.height(),n<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:s,context:a,matcher:this.opts.matcher,callback:this.bind(function(n){o.opened()&&(o.opts.populateResults.call(this,e,n.results,{term:i,page:s,context:a}),o.postprocessResults(n,!1,!1),n.more===!0?(t.detach().appendTo(e).html(o.opts.escapeMarkup(T(o.opts.formatLoadMore,o.opts.element,s+1))),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):t.remove(),o.positionDropdown(),o.resultsPage=s,o.context=n.context,this.opts.element.trigger({type:"select2-loaded",items:n}))})})))},tokenize:function(){},updateResults:function(n){function s(){i.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(l.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.text():h.opts.formatMatches(l.find('.select2-result-selectable:not(".select2-selected")').length))}function o(e){l.html(e),s()}var i=this.search,l=this.results,r=this.opts,c,h=this,u,d=i.val(),p=e.data(this.container,"select2-last-term"),f;if((n===!0||!p||!a(d,p))&&(e.data(this.container,"select2-last-term",d),n===!0||this.showSearchInput!==!1&&this.opened())){f=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(c=this.data(),e.isArray(c)&&c.length>=m&&P(r.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+T(r.formatSelectionTooBig,r.element,m)+"</li>");if(i.val().length<r.minimumInputLength)return o(P(r.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(r.formatInputTooShort,r.element,i.val(),r.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(r.maximumInputLength&&i.val().length>r.maximumInputLength)return void o(P(r.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(r.formatInputTooLong,r.element,i.val(),r.maximumInputLength)+"</li>":"");r.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+T(r.formatSearching,r.element)+"</li>"),i.addClass("select2-active"),this.removeHighlight(),u=this.tokenize(),u!=t&&null!=u&&i.val(u),this.resultsPage=1,r.query({element:r.element,term:i.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(c){var u;if(f==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(c.hasError!==t&&P(r.formatAjaxError,"formatAjaxError"))return void o("<li class='select2-ajax-error'>"+T(r.formatAjaxError,r.element,c.jqXHR,c.textStatus,c.errorThrown)+"</li>");if(this.context=c.context===t?null:c.context,this.opts.createSearchChoice&&""!==i.val()&&(u=this.opts.createSearchChoice.call(h,i.val(),c.results),u!==t&&null!==u&&h.id(u)!==t&&null!==h.id(u)&&0===e(c.results).filter(function(){return a(h.id(this),h.id(u))}).length&&this.opts.createSearchChoicePosition(c.results,u)),0===c.results.length&&P(r.formatNoMatches,"formatNoMatches"))return void o("<li class='select2-no-results'>"+T(r.formatNoMatches,r.element,i.val())+"</li>");l.empty(),h.opts.populateResults.call(this,l,c.results,{term:i.val(),page:this.resultsPage,context:null}),c.more===!0&&P(r.formatLoadMore,"formatLoadMore")&&(l.append("<li class='select2-more-results'>"+r.escapeMarkup(T(r.formatLoadMore,r.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(c,n),s(),this.opts.element.trigger({type:"select2-loaded",items:c})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),s=n.closest(".select2-result").data("select2-data");s?(this.highlight(t),this.onSelect(s,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,s,o,i,a,l;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(s=n.split(";"),i=0,a=s.length;a>i;i+=1)if(l=s[i].replace(/\s/g,""),o=l.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var s=n.call(this);null!==s&&this.container.css("width",s)}}),O=R(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,s,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(s=n.createTextRange(),s.collapse(!1),s.select()):n.setSelectionRange&&(o=this.search.val().length,n.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"selection","focusser")},initContainer:function(){var t,s=this.container,o=this.dropdown,i=M(),a;this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+i),this.focusser.attr("aria-labelledby","select2-chosen-"+i),this.results.attr("id","select2-results-"+i),this.search.attr("aria-owns","select2-results-"+i),this.focusser.attr("id","s2id_autogen"+i),a=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(a.text()).attr("for",this.focusser.attr("id"));var l=this.opts.element.attr("title");this.opts.element.attr("title",l||a.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===j.PAGE_UP||e.which===j.PAGE_DOWN)return void m(e);switch(e.which){case j.UP:case j.DOWN:return this.moveHighlight(e.which===j.UP?-1:1),void m(e);case j.ENTER:return this.selectHighlighted(),void m(e);case j.TAB:return void this.selectHighlighted({noFocus:!0});case j.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==j.TAB&&!j.isControl(e)&&!j.isFunctionKey(e)&&e.which!==j.ESC){if(this.opts.openOnEnter===!1&&e.which===j.ENTER)return void m(e);if(e.which==j.DOWN||e.which==j.UP||e.which==j.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==j.DELETE||e.which==j.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(s){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(s)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var s=e.Event("select2-clearing");if(this.opts.element.trigger(s),s.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&null!==e&&(n.updateSelection(e),n.close(),n.setPlaceholder(),n.nextSearchTerm=n.opts.nextSearchTerm(e,n.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(s))}:"data"in t&&(t.initSelection=t.initSelection||function(n,s){var o=n.val(),i=null;t.query({matcher:function(e,n,s){var l=a(o,t.id(s));return l&&(i=s),l},callback:e.isFunction(s)?function(){s(i)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var s=0,o=this,i=!0;if(this.findHighlightableChoices().each2(function(e,t){return a(o.id(t.data("select2-data")),o.opts.element.val())?(s=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&s>=0?s:0),t===!0){var l=this.opts.minimumResultsForSearch;l>=0&&this.showSearch(x(e.results)>=l)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),a(n,this.id(e))||this.triggerChange({added:e,removed:s})}},updateSelection:function(e){var n=this.selection.find(".select2-chosen"),s,o;this.selection.data("select2-data",e),n.empty(),null!==e&&(s=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),s!==t&&n.append(s),o=this.opts.formatSelectionCssClass(e,n),o!==t&&n.addClass(o),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,s=null,o=this,i=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return s=o.optionToData(t),!1}),this.updateSelection(s),this.setPlaceholder(),n&&this.triggerChange({added:s,removed:i});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),n&&o.triggerChange({added:e,removed:i})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,s=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(s=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),s&&this.triggerChange({added:e,removed:n})):this.clear(s)))}}),L=R(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){s.push(n.optionToData(t))}),t(s)}:"data"in t&&(t.initSelection=t.initSelection||function(n,s){var o=l(n.val(),t.separator,t.transformVal),i=[];t.query({matcher:function(n,s,l){var r=e.grep(o,function(e){return a(e,t.id(l))}).length;return r&&i.push(l),r},callback:e.isFunction(s)?function(){for(var e=[],n=0;n<o.length;n++)for(var l=o[n],r=0;r<i.length;r++){var c=i[r];if(a(l,t.id(c))){e.push(c),i.splice(r,1);break}}s(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",n;this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(t);var s=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){s.search[0].focus(),s.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+M()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())
})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t=n.find(".select2-search-choice-focus"),s=t.prev(".select2-search-choice:not(.select2-locked)"),o=t.next(".select2-search-choice:not(.select2-locked)"),i=f(this.search);if(t.length&&(e.which==j.LEFT||e.which==j.RIGHT||e.which==j.BACKSPACE||e.which==j.DELETE||e.which==j.ENTER)){var a=t;return e.which==j.LEFT&&s.length?a=s:e.which==j.RIGHT?a=o.length?o:null:e.which===j.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),a=s.length?s:o):e.which==j.DELETE?this.unselect(t.first())&&(this.search.width(10),a=o.length?o:null):e.which==j.ENTER&&(a=null),this.selectChoice(a),m(e),void(a&&a.length||this.open())}if((e.which===j.BACKSPACE&&1==this.keydowns||e.which==j.LEFT)&&0==i.offset&&!i.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case j.UP:case j.DOWN:return this.moveHighlight(e.which===j.UP?-1:1),void m(e);case j.ENTER:return this.selectHighlighted(),void m(e);case j.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case j.ESC:return this.cancel(e),void m(e)}if(e.which!==j.TAB&&!j.isControl(e)&&!j.isFunctionKey(e)&&e.which!==j.BACKSPACE&&e.which!==j.ESC){if(e.which===j.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===j.PAGE_UP||e.which===j.PAGE_DOWN)&&m(e),e.which===j.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var e;if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&null!==e&&(n.updateSelection(e),n.close(),n.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],s=[],i=this;e(t).each(function(){o(i.id(this),n)<0&&(n.push(i.id(this)),s.push(this))}),t=s,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var s=!n.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),i=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=s?o:i,l=this.id(n),r=this.getVal(),c,h;c=this.opts.formatSelection(n,a.find("div"),this.opts.escapeMarkup),c!=t&&a.find("div").replaceWith(e("<div></div>").html(c)),h=this.opts.formatSelectionCssClass(n,a.find("div")),h!=t&&a.addClass(h),s&&a.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",n),a.insertBefore(this.searchContainer),r.push(l),this.setVal(r)},unselect:function(t){var n=this.getVal(),s,i;if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(s=t.data("select2-data")){var a=e.Event("select2-removing");if(a.val=this.id(s),a.choice=s,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(i=o(this.id(s),n))>=0;)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}),!0}},postprocessResults:function(e,t,n){var s=this.getVal(),i=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),l=this;i.each2(function(e,t){var n=l.id(t.data("select2-data"));o(n,s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&this.opts.closeOnSelect===!0&&l.highlight(0),!this.opts.createSearchChoice&&!i.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&P(l.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(l.opts.formatNoMatches,l.opts.element,l.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var e,t,n,s,o,i=r(this.search);e=b(this.search)+10,t=this.search.offset().left,n=this.selection.width(),s=this.selection.offset().left,o=n-(t-s)-i,e>o&&(o=n-i),40>o&&(o=n-i),0>=o&&(o=e),this.search.width(Math.floor(o))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),l(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){o(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var s=0;s<e.length;s++)a(this.opts.id(t[n]),this.opts.id(e[s]))&&(t.splice(n,1),n>0&&n--,e.splice(s,1),s--);return{added:t,removed:e}},val:function(n,s){var o,i=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(s&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,i.id);i.setVal(n),i.updateSelection(t),i.clearSearch(),s&&i.triggerChange(i.buildChangeDetails(o,i.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var s=this,o,i;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i=this.data(),t||(t=[]),o=e.map(t,function(e){return s.opts.id(e)}),this.setVal(o),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(i,this.data())),void 0)}}),e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),s,i,a,l,r,c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===n.length||"object"==typeof n[0])s=0===n.length?{}:e.extend({},n[0]),s.element=e(this),"select"===s.element.get(0).tagName.toLowerCase()?r=s.element.prop("multiple"):(r=s.multiple||!1,"tags"in s&&(s.multiple=r=!0)),i=r?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(s);else{if("string"!=typeof n[0])throw"Invalid arguments to select2 plugin: "+n;if(o(n[0],c)<0)throw"Unknown method: "+n[0];if(l=t,i=e(this).data("select2"),i===t)return;if(a=n[0],"container"===a?l=i.container:"dropdown"===a?l=i.dropdown:(d[a]&&(a=d[a]),l=i[a].apply(i,n.slice(1))),o(n[0],h)>=0||o(n[0],u)>=0&&1==n.length)return!1}}),l===t?this:l},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,s){var o=[];return S(this.text(e),n.term,o,s),o.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,s){return e?s(this.text(e)):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return s(""+t).toUpperCase().indexOf(s(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:E,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:y,tags:k},util:{debounce:u,markMatch:S,escapeMarkup:w,stripDiacritics:s},"class":{"abstract":I,single:O,multi:L}}}}($)}.call(this),function(){function t(){var t=e.user();if(null==t)return!1;var n=pt.findOne({slug:Session.get("collaborationSlug")});return null==n||null==n.collaboration?canPost(e.user()):t.indexOf(n.collaborators)>=0?!0:h.intersect(n.collaborators,t.collaboration).length>0}ct.registerHelper("canPost",function(){return t()}),ct.registerHelper("canComment",function(){return t()}),ct.registerHelper("canUpvote",function(e){return t()}),ct.registerHelper("canDownvote",function(t){return canDownvote(e.user(),t)}),ct.registerHelper("isAdmin",function(t){return isAdmin(e.user())?!0:("string"==typeof t&&"true"===t&&throwError(it.t("Sorry, you do not have access to this page")),!1)}),ct.registerHelper("canEdit",function(e,n,s){return t()})}.call(this),function(){e.startup(function(){st[W("nav-medbook")].helpers({primaryNav:function(){return v},hasPrimaryNav:function(){return!!v.length},secondaryNav:function(){return S},hasSecondaryNav:function(){return!!S.length},dropdownClass:function(){return a("useDropdowns",!0)?"has-dropdown":"no-dropdown"},getTemplate:function(){return W(this)},userMenu:function(){return W("userMenu")},site_title:function(){return i("title")},logo_url:function(){return i("logoUrl")},logo_top:function(){return Math.floor((70-i("logoHeight"))/2)},logo_offset:function(){return-Math.floor(i("logoWidth")/2)},intercom:function(){return!!i("intercomId")},canPost:function(){return canPost(e.user())},requirePostsApproval:function(){return i("requirePostsApproval")}}),st[W("nav")].rendered=function(){e.loggingIn()||e.user()||_(".login-link-text").text("Sign Up/Sign In")},st[W("nav")].events({"click #logout":function(t){t.preventDefault(),e.logout()},"mouseenter #MedBookImage":function(e){_.ajax({url:"/menu",success:function(e){_(e).appendTo("body")},dataType:"html"}),console.log("loaded")},"click .mobile-menu-button":function(e){e.preventDefault(),_("body").toggleClass("mobile-nav-open")},"click .login-header":function(e){e.preventDefault(),tt.go("/account")},"click #login-name-link":function(){if(e.user()&&!_("account-link").exists()){var t=_("#login-buttons-logout");t.before('<a href="/users/'+e.user().slug+'" class="account-link button">View Profile</a>'),t.before('<a href="/account" class="account-link button">Edit Account</a>')}}}),Ct=function(){_("#showCollaboration").show().css({position:"absolute",top:100,left:350}),_(".overlay").css({"background-color":"rgba(0,0,0,0.5)"}).show().click(yt),_(".overlay").append("#showCollaboration"),_("#showCollaboration input").focus()},yt=function(){_("#showCollaboration").hide(),_(".overlay").css({"background-color":""}).hide().off(yt)},st[W("nav-medbook")].replaces("nav")})}.call(this),function(){st.__checkName("nav-medbook"),st["nav-medbook"]=new st("Template.nav-medbook",function(){var e=this;return ut.HEADER({"class":"header"},"\n    ",ut.A({href:"#menu","class":"mobile-only mobile-menu-button button"},"\n      ",ut.SVG({height:"24px",id:"Layer_1",style:"enable-background:new 0 0 32 32;",version:"1.1",viewBox:"0 0 32 32",width:"32px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ut.PATH({"class":"hamburger",d:"M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"})),"\n    "),ut.Raw('\n\n    <div style="position:absolute;top:10px;left:50%;transform:translate(-50%,0)">\n      <a href="#" id="MedBookImage">\n        <img align="bottom" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAtCAYAAADr0SSvAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAnppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuMS4yIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CohVDBoAACJPSURBVHgB7ZwJnF1Flf/v9l53Z997TzohAYGwjTAwKn+Cfx1kGRQVUAQREMe/uCEIDighwDjgiKCM8BfRcQNnDIuAAy4MBpRNA/koBGQJWbtfd/a9t3frzvdX996X193vve6ERP1//q/gvntv1TmnTp06W9WtjhtFkVMtVQlUJVBaAl7p6mptVQJVCUgCVQOp6kFVAhUkUDWQCsKpNlUl8IYMxHVdj8svutwRiXSB6zkLXV/XwjO4Q2BEeFWgqgT+zBJwd3eRji5LmX2uENwhK3wZi8ZAU6j7rgLeAvCudkI17qqPnxYtcIN5S53I+ckuvKQv9aeuIr3rPhi3+l6VwL6SwG4ZiJQf/SwofnNz83TPmIbIGD8Kgp4gCFasXLlyk5gF1kYn4I2NFqfvwtu4oKXFD0196HuZyIk2b3OyK9rmL++xg1RkOcMxpYxoXwmhSrcqgXISGLGBFBtHS2Pjubjx8/H3h1M/TsTl2HH1Oeofizz31o6Ojt+oXinU6UQF3d/xppYLIsd82HXcucST8T4mlA+dXhBXA/orbO+bk67JLRWeCrRrRzvOhB2Osw36O3gPuOfj1upvVQL7XgIjMpBUMYkYB7jG/JDgcBQmgVHEhgGbSnsAQ/W5ZCxOZL715gnh5+//07ptG66afpTnmjvG17qH5o3j9OQjJ+QuEp7nuBmSsrrAdTZ1G5nZVZOvWXOdhn5QU92Ml3I9H5QdAd5N1XZof58+PO6iUC2JBJCJXcchF83F/5dlX8hg2EU6nSqtyrdMazkcrf69jMMYkzcmKl6DpOsEmkxeylubCf7xgZeDq5xH9hvvOOYxGceWHpPf0WvCEMzEvrA3J+rNR2Zzd9Tvs+SfPNq7duP85ts1w6Oaejom1QRLsIR1vP79SGddPI8UthIcdLQJYRWvEtxfQ5sMQ6UULwwhKHNpg2VYHShF86+xLpZAaRnsKb9BJUQJj07DqVOnjq3xg7s9zxvLey84NSXwpEiEEL6tRE4/4QHBuxOcV/qmZn2nbku3Ye2iHSv+S0rywE2hx/GIH2bTztBMGuVfuGVB82uLF0dfOf9vxj736+Xb+7f1Oo9Edc42ocJDxeghnuH9DS3ok7Hbft4orXS8++ouXmfPnp2pqamJXnjhhb7B/SCPimmpxgeOnevBuP8vvR/pupkts2d7r732mpx0Ya38RsZQ0UAkNC6TDYIvMgf70WkfVynj2MVD7MMS3Y/6nZqwP2/Io2wksqnYLtghT/JmkYMxsUXmLtj6pdb7vvvctlcTsM1DwEtUHOkemck15Q6Bz+dKNI+oSgoDvmlsbGwjInbz3JXUlfTQIyK6D4BimUZh07SmY3Zu234f1/PTpk17z9q1a7en/HIPaD/F9cx4xrHLeCK/2wmc9bSvoH4N7MmpDNiE2Qcs73WS6ThFuLOh4c5o2/YTmurrP8brf+6N8ZQNrxCXR8nXU+jsPJ7luYczKPFZVIgi/dqdLaoa9pGpNE7/xDq3Nu9F/0fg2gIWP1xlKaldsO0N7RNIBe+e3tAwV+/U73G65UXut3zff6voUPaYToy+T35TeYyBz2m8HEj+ms6pbZsyZUodsfl2z/W+53n+Xb4f2MvznftcE/0myodLWxoaH21tbJzH/MpIUvx9wvC+JMqHgDnspI5j0icn/aTy2eNuKwnDtmU871jyn6kIT+lGJfg9ZmIoYuT1KimInJNeXDA3O29+RMiUfVbML60wslE01vPcmaHjfWYo3eFrZFDqB4X5W+j8PYukScNj/WUhXFerOhvcdpIGD4hyjCdyCcra/mA7fhkrwGdCY5bw/gqAGxnjOM/3jmdz5NfNDQ0fhI55I07lLyuJSNEeRXErppS7w+PwCh+5+yMw0ayY9+9Op8PBMnFeX6h5jlqa8+ubLfyCXWuXMviWSVzgDKsrbnR267TWOQjMpg5lcMpWm8j9DCFLIWh6WaAyDchLRRGvYtQrgz6k2lKrQA9J2bFzLxvloIFU3QVrOnPHTJw86Riej+gP8wfT2ftDE71s2x33W+xUtiYyG143QB6OtyGDGUHFntLUCEUeF2HlMYKuhgUZSco0algqexlAK3bSLEl/dOT4Eyz5pSMbNJM7S5ONZtYaP/9ZcC8SJUtjmB/wbA5ud+y86Ax5XaLYnAStooPQpAInBYUFu0CUhdsiujyovXjnL26s8JviQS+OpwlsWs/rgHHxUuizFFmXMwyqX7p0qfjQemQn1z2tDQ2v4BB+S/QZR4T5EHXXc0nZyo455aEEb6kcEF/lzRToFwr01J/tM8ErjIU26SnVI1t4MxMF3EIHyUNRP4IRzbJjFIq1uAS35I34vNfCVckOSlbiAhAzqUE/XwbtF/aFJeGGVjLqNoSAgdmBf6Rlasv+CCGfCGYoQomayDOXaVLAU2ubfioJEliblqkfLkUsl8XyGF0JrhRSbVqQlfXyglURPsUaq/BUh2cfNXny5HGD6i2DwxmG8FUi7SFS3sy82x5Qyrlz52ZXd3Y+j8h+RR2t3qGCoZRUnARvAG+tra114k20NEaKxjriVC0ZkwwqxcuInsYsRpJ6mwmof9XtSRnUj+ZEPFakN5IIsjJhpiKhPWG4LA4eIMPGV49x1vb313UI7sWDy3uFhE6iLO7s5N2wMB1lfHMp79rVqMh/IryQnauj8BofjGmA4jrNKMCk1atXb5QwEartJ+lDymyVRe/NDc3vdl3z3qaGxrkANmDmEacOOjCLP2KyP13T2fkz0O1E657SKL5DL/0IKl4O8iP3Q5B5C6Nvq8tka5rrG9a3NDT8AbgfQ+Mh4RrPC4a1uqJOno09p8Yhg00NYbtAGGGmCHTAYzFv1vEERJvIeRtSEm91mzZs2Nzc0PgaKvdwTW/vXfC3RTgQ4XGg3FLCtFv56VNC1s+eCTvvaqpveBM0J0Wh6WlubFwN7NMI5UeQeF54RXykZIa9gyOHl29qanqzZ5yzGfxY+ngdxH/l6qd9yNyKaCUDsYJDgk9DWMdBahCGhArdfV5MTeB6fHF/ZuL1y7Y4C1xv/vzKoRAeE4XTmsHq8EPUvYvnj+KJvsbzn5BBQZlLjMAioWiXsWh1TGieiVzSq8hpZqt3KvAbuTR2Cyf8VOh2rePnv02KcpxHgFBqlgoKI21mJXIUKcwFGMsitug+Ci/LUlzRSQt1qXE4KMYN5NKfgxc7R8oEpGLANOL+D6GPs1HGR3v6+06rC4Ktjl9pKpMeIn2bchy+megDYXTwwQdLHn3y1ETrt9mhRW66rS7Y1HgGKGVLQ9M/ozmX+J5vt/yhIQtQWGpk0X8gvP1DT03tFSz6L6P+x/RlC88F2YkPKu18YPCn8CnhFs912gryi+kJZiag/4vduUuQyc0dnZ2XQ0ZOpiAr0SpX1DFt6ifPxstJjPM//SAYA71NTPLJ1Ms4ytKyAitFHESFH48zVS/B68NMtJhV3iqhVb7YVolpxt5J6wnFTyaAp2GuRNF1FAVd+3dL56DKRglf1mgbGhpG421Z1GsN4txElz9n20/51qdjfkr/gi4BGq09YPL9pGfw686H1xUoveeEYWuCafvRc4Ijj3Sg8fK/YQv1OGj0haG5nSGe7EbmUNeEhzGO9+RN+H12kPqBmRe63hMo5JuAVdpXcPw8FyapuaHpPt/zLqPrIDThc2GY/4zJu8ca1zkK2sfTxxcx2uWM7e21mZrHjOsfIpPEoMvOpxinT33kdV599dVensPCR0VjbnA9bz9oEo2cewVDQRRxgTd5V805UbLpXozgCqpq4G0pF0Zg3p7wdjK83hSZaDPG0gL/d+EULgFXtAbwBr48eojSn+e43oO+6+mb0zZk9U0+KZ/GculvOWAxD0d1Mbtuz0GLgxbeJU31jQ/PmTOnRvxAYwDNmFuNM9YXHIBtBzavfpjW/2I7fEw+n3+0prdn5pqurqdEQ7RS3MH34dyOVQj86VXGuP8QeF5NQWqDKRW9A1ODi1JNjRPUuKOyIRwTPCNlwQUdK8KIH9WSZxRjaj1n0w7z4MQFa34mTWTEJdORIgJCFWv6ZjONAeuQ1+vcb0Pop1L3kdZp0xRFCP/lo0jkh58O+ECQD8MHO7pyv0CoUgRZwwADSYQaKvdGc+5B6PVM4iscIThndWfud/RXXP7Iy/0YxTdQ7O/6vofRmHtJKY6Gn20JrcIE0ee/YRzvkZHy3zV4zGuAGzz+ReTot9S6zs0oznko5A2JOrMrjaoOLThOCcir32/SpPF9QTA1crOjHS/cn/oLmJsThEIqeH1HrmNxOr4iMlK0kMhBf+5pzKOU8BvZutrLly9PTmHvAn5oRkPDv/Gh9zvo3jyqv4oTWc4Y7oWuTXPSO5HjfyPb7/LOpyvztON757W3t/9pFyn79Bjt32iub7wOJfonrOSd3du3f5uWD3NpWEOKNEaVbEb006/S3C8xxmuI5Pg6c2dHV+dHqJaDynDvH0KgqKKigYCc5svPH9DQ/PGtxlxHz9ulMtxLTURC2s33hkpLopzT22d29Hkd8NwLQ5AsOYEJMRtxspt3mlzoeR+3xK62TSUFUTQOy4sf+Y10UUcna5mcHQj753wEexoFPoaI8Engtas1gG94smG+tb7+UDzZuUyUos/XRBvAldY++ACld0rKhxTGRP3hF6F9IF5uM4nV+1Z1dr6ghSoTI7gU1sWTufDy3PSpU08K3eBpUpMDs4HzJWAu44KFmIfm+uZ3MokXWQV0osvacznlxwLQPKX0VCWvt5X7+Xh0liDuBbwLohhGcLZQie3KrUbX9dbUzgeWyBWORmn8VBgY2ZfbOzuuTFDSavVt5YOSHc8L35ZsP/8C7BWCpV1rloKB8yzeXqf+HayXfkVkOp5oevPMiTMfpX5zQi8/c+bMWtL3bxA5EKT5vZcJ3s46rzuhp3GkYxE9KfEVGOhOEs1rgTkHo/sp9TI69T9AyY0bf9BG7hn4vh1dOBcYgm9UzLfGNQBPMINLRQMRMERw/673chTd4TY333ViT0/Ax8OU+cH0Cu/9/cZd6UzqdTLjTcbvOqTX6etz60gCKpQp3W602RkdTJi/PD5Wor8NmT/Ee5aiYOmiHzPxMKSWUWcmk+GUPBPouV9lDHczko8ka5FVCFVCL55ULXQ/i+KyRAjvXZ3LLRIug1wW36NZulO0qBVuvqWlZTL9nc8zldE/r8p1vkCbhL7rOEeMY39pk/fsYMK+yP37ED93ZhzVOoUXA5lPk0ngTcOfyzio17jkVQbvJMpxWW88auzoi3Zu33EsKc3+TNbgSFPEgVXmMTFFyCYzqC6gD1z0AYzNc3z3Wt53Up/KyEISXT5N9BNvj7d35lLjKKVkYbKb1UfKewFMPktq1Npf03sendzU1tYmhQ77e3o+QP1BOINeUuALZRxJ6mTTwCLG7XpDDFKuY911NDI6xTPhp6hTOjhYNhiCu0X4mzds+AWw8+BZzu4TfAO6TfXJ2CrKSnAqwxrIIiZiHhO0sqbtfavz/nw+TezAfcrVa/JKFtfwJXOsMznv9H3POeGl7499qe7+sYLElYi9kkhUorNmvLu1zjw8+Tlv+8YLHftHVoK3M1gOrVCPbczAK2ruVyn0Iwgp1z1M/JN4+rcgKH0TuZzLRgCaNcFhfCzFPYf0BOF6N6YE6Xi57dl19ktoKe+1HjPqj47FnvhjMbxi6D9AfUDaVIsRDjC8lBZtHofpeqOmpl+jZTlSo8Y+xzua9vvFA3it0HgrzxrurQmejKCkl6M+L0XUeoK07Dvo8w3CTPsrvjMO8S1Pfa3LMRymYCqAo6ibyIwcwPPJ8HMYRvYFFq/HkYadCH3tQFn5tE2d2ugEgeUNWt8UbR0MLMeb1jZq74yi5TgEzkR5HzeuURp304oVK9LxnER/pNTmp+1dXdqVU1+DjcMOg/pU7v3kzrcwT6fA89HT6+v3o20ZuJpnhUjmlZsXHYYhXRQE/t/l8yG7c9FZ7CA+qD4gKNCSc2Q7G/RT0UAWQvB0JmJV3YxZHLX93jgWOL0wIO2qVPLA1Pu+s8IJD3D6MnXuKJfFJRiVAwgAsS0Af5hxJq+jn8udhXR3On+mW7nYAePLZwkMua/Rnd2aLDdSu0gL9rfQciGh+VaeVyKswjA4liLvGJCf3tfe1f7kkUcemVm8eDGTEa0BVvlkExFjIrQ2Kl0Sbc43HWbtzHVGRYF5iq1dW40WxvdBvxl2mXKCsWsLZ6KUw3HDIwC7X6AsHmbzO5H+NvlhyE6sLRXHrQ9+Fsp4T+g8CT2zTCwZ3a3k6fH51V1dWhMNLleSvlzMEv0ryOHverK1MoKzuSSjsC+TmQ3VqSjmDhbPvxcyDFbkjXYrCMbzGNfHedtf6x+et+hAKatFGaYi/CLRo8RyjZ9L/dr+jGeWwEsX46xnT25/AJcluHItZAD8Rs7FpJ1BPm/+wB/vXdDRkXuW+Zau79aHWjFRUBK9DC6nJ4NEFNePc7wxmyPT242X3xmZsNKFG+jdao3U7XYyvYiVyQPBcOQ96ql8md4obzYySJf8/JFpR9goolSrTGHgEqxkrdKmB67X9TL+tdes4azJ5e6md3J/byKu5lNqQ9HlneW5D4DCh2308Jyb1dbT02MnC6VdDUwv9JrwrNoAcHp7e9OJHKt3jKib353Q7RnxBX9Esw3gFTwZO7D6CCh6GyFoj/WL/EhK5Ecb4VMyKzufkgvFfnhTKkNf7KPEfyeihjWdHTcRfReIDEychSM5EprW26N142MxO2tH9/VtFMQIStyl7+Os7OOobUFQJzxOW4/HYidYnqNIchhJsUTYnFD61KVJID0blyCmc5LmJ8ytjM/5AbuwzyrSArfbxiHasqrSRR6WUNRRO+sAxnfqNn7ggo6sQpbGSWqV1Xp2rtg0pLBRSo3WvqiQprFCsY0ue9NjvYzZaj4Gqj3RWwEF2lGkr9YZL2hVR1yrBf8sT1ICmvP0eiP3hQzjY4Tm21Z1dcnzyHNr7aEty4fwNI8DLxZsXuvV1a3P9/Wvw1u1kMa2Uv8SW4Qx/5HLti27Iq7zy/ZcxxkY2qhsNltQeNEuVYSPAep0cjR93TptXNg0JvKUXiA5tk9HjRpVfl5KEPWNCaJdAbEERFKVfBTk7yWkLNYjqyXlgT/tvNX05z9JFKnHjb2NpsVqZ03fp0Fz1fbU1SnFHEmJ5RSGtQ7rKkYWkubaPhl/Hx8W+8QyHn+3xrpp06YAhmtlLczLkPWHZSz+E250wbmR9DNgPfcVxqiSrqtGwr+FKcvcIvqfJ/6NOXas49ZsZ+mLiMp6cmcvFQ0cyXpOnzWl4/kHH7JEERa+sXst0Y0mgn8zIpiMS2lUhMUMVyZwIleIIuxoPcMkHW1C91PUf5ZF5FykfYF2rjDpmxIcjdFOpP4BCtYvK0kDWviT4bak3d6Y3BUizjVLFexS6VzTbhcmzco0MGYNS0kZcgtG1AahTVyxkpWnatsZ4Eybshmib+lt3vIU4hYro/o1a7blGhra6bY+cnedYiataWfR2c8UKI+czrWea0S84RcPZowsgpzO5s5Ou/myYcOGrShuDhKzoXlAzMKwv+ovcvvcliiIpmPgMBA7QtULmyyTz0yyuuga+G8lY7iKzYUb6GsK8NoxlMO0DknwIylQq1wIY63JER7LRGXovdWKRPENSKTRqZvYkFAtNyG23gvDJgY/hmSum9yhK8FBLogozj+Rm3sLr0gzOl9nfXDj5/FVlcWm86v2zvZHEhwbisGJ+3OjDj1JCdWOIVo5sIv+O+2OQOzN9nAjbQrlwqOgrwMu1VlnNHPixAlN9U0fSs9pgWaVc1pX18uMeCnRDPM0Z6ov0sCKDokzVQmP7nsTbi0t4e5msXRWTplSC96UBNemeRpHZ2fny6jji3hslk3haWqvxJsGC4j17p4bWXjen1xMyqb0Tvio6hPJneM58c6g7rauxI9SYlvtm5PZqaxlHlfwkWOp6nhOx53oaOgQNeYTBb+sdnbLPo+juyOBDemnbGAQTHEpy1AKhJUW9srTun19Z5R0a3sJnJogFmj5TmMl8TjSoXmJnM5uY9Ym4InA4ogwaeqkhYT0PzDRY2sz2R9iGGcla48bBQ++vEuKY2XDX1O8Zmm50X66k57Yczvta9uX0Nd/E5HYWAm/oLbky7Ro4Ffii2rRk6LbSeyvrf1SJvB+RDqoPXyFfBlwRsqDC7yTV0CdT3AO62DRS9YL8RjVQhGe6oXDx7Zj8JyMQ4Zf/ri7RRx41ERrELsOoc2ONeNnPkAaPF0yQeuWCEd/ygtPefr4Qcyb90k+us4Wb6lDsLSTH/GGMgtHH+jOhdvj5Ejo4IcCGT9+vJUD3yp+xMlhpamHN9Y3KqLrEGXKU2G80HPVj/ojjZ0OY5+XevDfXRiu/qWbISkfUcQaAOuqK5mGT+jcqu+7F7CzdX+y+6aPhCMykmENBM9h/zJDA/hzFavm9gcv1JsnNx++oJFzGDSAbk5/clqMocmSQCRk9E/fRVAy51QMpQHF+iULuV/QTma2Ky8XIUvDc1YlJjNT78BoghNv5l0tZWKSz2QX6LqkXcJXsVEEeBV7SpWzSSiC+zl70NiN9KFL25cyHuttJ06e/HXGsQSjG+tHzn+wUJ6RHAsR/6InBRKfRvUcUz8E3b4bhYiVRHpTpiQNO9ScHjWBjqKleMvD27vxSjdCHkOLftPe2fmIYOUQdK8bN/qbbHT80fPdCcYPfsKuXkssTytbsWW7EG+q17kn5HaL1mmUW/m29DtAfO0O6p7L6Z93cr+qVkC+0trU9D4ZfMKTxmsL7/bv7EmHp7FF/RO21hvZMFmRqauxH1FBtwanTtJCOmjr5ETYoLkNJecIjNmBXE/trG94XNvWkLVf0lOccvdhrYjpWIEEhZ/IuBypvVlPhxyh4kRXh9O9qTOhbJko0UvMnOs2JwwuFwzSHbwgs+uK3NrcnWzJfg7qR1hFdaJU0AVFLe6PswTLIt8ov23ia/CE5ZvsR0yFaUWK3+Ilr2Lz6Bq+H1+Jh5rNcYmrqddxiZSvAEXnXJb5LCydYxf2YfRtPral3zoUbaQQotdH5Dib5d7jLJTnkmo9Cf0re/P5e2gr7GxJWUgPz2Gb5suoJUfMzcOM+ERpNkY/QE56xx3YGaThaBR3vYk8dqXsvz4zBt6baH4r+O8Fli9VZgvrBbsxkvCUjlUGeTaK9gSKdgT3pzCqq71M5j54K+xsccxkVt7xLmT8lwLH1nn4FEc7dIJBJeXNKjAe/grGdzgf804EbiHR8GYnDP5v+/r2V6FpYbU13JPNnsRa8Tr4m8WphX5kfM7y5cv1VV76a+c1IW7pphXajABG0ewhaL+DPh6Ap2PwRo9j3zqo+Eo6RuGXKmUNZF6aEnjmiR2hy76ndg7EdOwpShHbG3WJkhsng8L0msddLdC1zVv0LzOm/TC4gtdHgQ/iFfaijqRd0bHgXSRw2u2OFsfSv+oH7p3sk7P2yD1CvYzJevGUdnr33JDvXZBy3aawpruFei00xWY8ybncteS3fHRzvoDwz2QS3s+i8ElSs5UIy8cY38QhtCNQAqTHP0ZhzG30+QnRT/q1dOjf5sbcXySVeCdw90Kvjfd/56Tr1fSxhNFqixPj8I7RljWWBRfRP3Ku/yXqTiRlqSGiJSJUDzTzHnjuaLHMf5fS6aWxU9fhU8uDhaMfSJk/8d3g7FxHx1J4k8FaXdM9kd3zLfX1J4TG/Qn9tyDRO6L+/LVsfrwEJ2xSuJMgegRtOu7Duafwv93AP5NnGzWK6KUOIczU1r63r7v3xyj/e+jjYj4oXsQRlSU4m3UwVufU1B5A6GyhTfRYW0ZnsyHy24Q/G63tAOyPWyc45FTQa/Wt7y5ros6ncT7Hs4Z6wPP92WE+fJb3U2h/DJzBzrRAskCoUJM+MJvJh8JXVmen3zsu8s/a7HCm1HGG5HwpSok7ctu9AgL/uxl3p/aF3e+MBJsBBpzyZPMnT4h20w9hpfq2E97R1bEQ+Ivwl/a7B30MMKakz9i4Mpn2KJ9/Fq7msE85IeUHwdo0QHfOJf0T56geRf0vZnaOJw86FuaPFSzNKF7Uw+Q+wdvXSV0eVH2pSQFWEy4jXoKHOxIc7byciRxmkEbNEJ4KSt+bD81PydhvpO/fEqGOBZb0yV2BURWcgmDjCOKsJDLghJ1uaA8wIMa1net19Ooh8q0fdOZyyusLxiEaKkW8PYVi/Q1R7lLwzgC2jT60u2WL1htc+jB3B5HjW+AVjCGF0Z3qNDL18Hoa0eh8VPtjTNpRRM+jGYsFl1NhNdeOc747E+ZvWLFuXa4UfxbYidagA/yLNvFRE3Wj+sWRTesUSZbifI7nONEPoH44LuJ2ZHcW9eK3pJHIA8e0S/2CxEjM627z9EwQ/KGGf+eqx8EbDGck/CXg+LFuZtPm6NszXtlyvbMsWEYv6ikedYm+1CBOyID7+GcEsmabudk7YcPF5aJHMQkG53KUY/TYfN5/fdOmHYypZDQQjmBpLzlpxTSLn0lpRvOBLJi4adZOCbu4TfREFpJWMVGeNiQ9m+qJtt54HGTMLyt8d5FMrX6UFzy4BQVlXGOzXvZQ/q0XKaHHUZjNuI8X11B4t4am+kmT+NfEMI5169Zp/IVJFX+SDQaEHg9MvxRdxo0b10e6IiW1pbjvtK74Xtyunbis583lHFsTKaQc504Gt4Jj5C+kPABfUvFSmoPbUdgDQZgF/hj4zbNI68ruzL6QpLYab0E2KY30XpinWcyTTkIMKsW4kmttba119vpjuEGghdfKBgLYIjzaPBRudWb6CVj4zzESByPhK0WkVYJVDlFLlFs3HKYbtozxs6u3mK/N2L7+X52nanMyDZZgOsjHPumQ7TzwCOdqGO/50VbzkPuuDSeLrlRA+hQ/751fBGWNZO9Qi6lI+DzZ9UQ5usUTVA4mrQdWhiQ+bdRL69M77ZK9lK9kewo3kntCS/zbLe7hcIbjTfjAKDsZKT2NRYpfybGJP0BiR8TzHhXxPpiGxi/CpQhqEioWGQej9Vv7V/0CF/kOjCM3wfGyfB6NJ5AAKOXG8/PZnKOMfDZlBZhd05N/ILt//784o7d3hr3RR02f083X8SyHG4RHnNfEyijAA9Eb5QXeaM83W6Mf3b1t46kxU4ItzfhgpjVIinZ6JOyKRcIYCVxKRLCUirQhaRU1gWMNPeCf+0x3n0aszNCTsSkNUb/CL6apSVYp0EvgSo6dNhXRKXVZ5YCWdrNKKkkqh/QOWCXe0rHuDj11bdcT8Dh4rHq3jkD9pjyUugOnMtw8aedQJZVFWeNQH2os1dfQOnlIJiTnNk8Jg+ASNPwDbEW21REaNCuaqR1Kjxznd7iNW9vyq35sicCIjMD52bQ5Jggvp/3dbtadol0qi8iQzU7Th1o/w47p1/2TNtxj8coszG1b9acqgT+TBEZuIGIoMRI9vuhOGzM6GHUoSfF0dj6y7NRsYRH7clvvcm1xKsSysYQJYByLFpGmzUvC5y8bpuXD/sMxqwa+QHoY1tYw77yYPWW9xROmswC8+ZW9hfqolqoE9rUEds9AxI0iQqz4hfA+mMlFpAPzFFQGhCeLB2gFxa9GjcGirL7/hSWw+waSMLwAQ5kvQ4kvZxEPbFxHp5MxDTSMBCG9LcBQjouPNqRVIEb8zYfWMiPM9wqY1YeqBPapBPbYQPYpV1XiVQn8lUhA6VK1VCVQlUAZCVQNpIxgqtVVCUgCVQOp6kFVAhUk8D9zCxFs/belYQAAAABJRU5ErkJggg==">\n      </a>\n    </div>\n\n    <!--\n    {{#if logo_url}}\n      <h1 class="logo logo-image header-module">\n        <a href="/">\n          <img src="{{logo_url}}" alt="{{site_title}}"/>\n        </a>\n      </h1>\n    {{else}}\n      <h1 class="logo header-module"><a href="/">{{site_title}}</a></h1>\n    {{/if}}\n    -->\n\n    '),rt.If(function(){return Spacebars.call(e.lookup("hasPrimaryNav"))},function(){return["\n      ",ut.UL({"class":function(){return["nav primary-nav desktop-nav ",Spacebars.mustache(e.lookup("dropdownClass"))," header-module desktop-only"]}},"\n        ",rt.Each(function(){return Spacebars.call(e.lookup("primaryNav"))
},function(){return["\n          ",ut.LI("\n            ",rt._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(st.__dynamic)})}),"\n          "),"\n        "]}),"\n      "),"\n    "]}),"\n\n\n\n    ",rt.If(function(){return Spacebars.call(e.lookup("hasSecondaryNav"))},function(){return["\n      ",ut.UL({"class":function(){return["nav secondary-nav desktop-nav ",Spacebars.mustache(e.lookup("dropdownClass"))," header-module desktop-only"]}},"\n        ",rt.Each(function(){return Spacebars.call(e.lookup("secondaryNav"))},function(){return["\n          ",ut.LI("\n            ",rt._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(st.__dynamic)})}),"\n          "),"\n        "]}),"\n      "),"\n    "]}),"\n\n      ",ut.DIV({id:"showCollaboration",hidden:"","class":"grid-small grid-module dialog admin"},"\n        ",Spacebars.include(e.lookupTemplate("AddCollaboration")),"\n      "),"\n\n  ")})}.call(this),function(){e.startup(function(){st[W("posts_list-medbook")].helpers({post_item:function(){return W("post_item-medbook")},posts:function(){if(this.postsList){this.postsList.rewind();var e=this.postsList.map(function(e,t,n){return e.rank=t,e});return e}},collaborationName:function(){var e=Session.get("collaborationSlug");if(e&&e.length>0){var t=pt.findOne({slug:e});if(t)return t.name}return null},postsLoadMore:function(){return W("postsLoadMore")},postsListIncoming:function(){return W("postsListIncoming")}}),st[W("posts_list-medbook")].created=function(){Session.set("listPopulatedAt",new Date)},st[W("posts_list-medbook")].replaces("posts_list")})}.call(this),function(){st.__checkName("posts_list-medbook"),st["posts_list-medbook"]=new st("Template.posts_list-medbook",function(){var e=this;return[rt._TemplateWith(function(){return{template:Spacebars.call(e.lookup("postsListIncoming")),data:Spacebars.call(e.lookup("incoming"))}},function(){return Spacebars.include(function(){return Spacebars.call(st.__dynamic)})}),"\n\n  ",rt.If(function(){return Spacebars.call(e.lookup("collaborationName"))},function(){return["\n    ",ut.H3({"class":"collaborationGridTitle"},"Browse ",rt.View(function(){return Spacebars.mustache(e.lookup("collaborationName"))})," Collaboration"),"\n  "]},function(){return["\n    ",ut.H3({"class":"collaborationGridTitle"},"Browse Recent Posts"),"\n  "]}),"\n  ",rt.If(function(){return Spacebars.call(e.lookup("posts"))},function(){return["\n      ",ut.DIV({"class":"posts-wrapper grid grid-module"},"\n        ",rt.Each(function(){return Spacebars.call(e.lookup("posts"))},function(){return["\n          ",rt._TemplateWith(function(){return{template:Spacebars.call(e.lookup("post_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(st.__dynamic)})}),"\n        "]}),"\n      "),"\n  "]},function(){return["\n      ",ut.H3({"class":"collaborationGridTitle"},"No Posts Yet"),"\n\n  "]}),"\n  ",rt._TemplateWith(function(){return{template:Spacebars.call(e.lookup("postsLoadMore"))}},function(){return Spacebars.include(function(){return Spacebars.call(st.__dynamic)})})]})}.call(this),function(){st.__checkName("post_submit-medbook"),st["post_submit-medbook"]=new st("Template.post_submit-medbook",function(){var e=this;return ut.DIV({"class":"grid submit"},"\n    ",ut.FORM({"class":"grid-block form-horizontal"},"\n\n        ",ut.DIV({"class":"control-group"},"\n            ",ut.LABEL({"class":"control-label"},rt.View(function(){return Spacebars.mustache(e.lookup("_"),"Collaboration")})),"\n            ",ut.DIV({"class":"controls"},"\n                ",Spacebars.include(e.lookupTemplate("selectCollaborators")),"\n\n            "),"\n        "),"\n\n\n      ",ut.DIV({"class":"control-group"},"\n        ",ut.LABEL({"class":"control-label"},rt.View(function(){return Spacebars.mustache(e.lookup("_"),"Title")})),"\n        ",ut.DIV({"class":"controls"},ut.Raw('<input id="title" type="text" value="">'),ut.A({href:"#","class":"get-title-link inline-link"},rt.View(function(){return Spacebars.mustache(e.lookup("_"),"Suggest title")}))),"\n      "),"\n      ",ut.DIV({"class":"control-group"},"\n        ",ut.LABEL({"class":"control-label"},rt.View(function(){return Spacebars.mustache(e.lookup("_"),"Body")})),"\n        ",ut.DIV({"class":"controls",id:"editor"},ut.TEXTAREA({id:"body",value:"","class":"input-xlarge"})),"\n      "),"\n\n        ",ut.DIV({"class":"control-group"},"\n            ",ut.LABEL({"class":"control-label"},rt.View(function(){return Spacebars.mustache(e.lookup("_"),"URL")})),"\n            ",ut.Raw('<div class="controls"><input id="url" type="text" value=""></div>'),"\n        "),"\n\n\n",ut.Raw('<!--\n      {{#if categoriesEnabled}}\n      <div class="control-group">\n        <label class="control-label">{{_ "Category"}}</label>\n        <div class="controls">\n          {{#each categories}}\n          <label class="radio inline">\n            <input id="category_{{_id}}" type="checkbox" value="{{_id}}" name="category" /> {{name}}\n          </label>\n          {{/each}}\n          <input id="new_category" type="text" placeHolder="New Category"/>\n        </div>\n      </div>\n      {{/if}}\n      -->'),"\n      ",ut.Raw('<!--\n      {{#if isAdmin}}\n        <div class="control-group">\n          <label class="control-label">{{_ "Sticky?"}}</label>\n          <div class="controls">\n            <input type="checkbox" name="sticky" id="sticky" />\n          </div>\n        </div>\n        <div class="control-group">\n          <label class="control-label">{{_ "User"}}</label>\n          <div class="controls">\n            <select id="postUser">\n              {{#each users}}\n                <option {{isSelected this}} value="{{_id}}">{{userName}}</option>\n              {{/each}}\n            </select>\n          </div>\n        </div>\n        <div class="control-group">\n          <label class="control-label">{{_ "Status"}}</label>\n          <div class="controls">\n            <label class="radio inline">\n              <input id="status_pending" type="radio" value="1" name="status"/> {{_ "Pending"}}\n            </label>\n            <label class="radio inline">\n              <input id="status_approved" type="radio" value="2" name="status" checked /> {{_ "Approved"}}\n            </label>\n            <label class="radio inline">  \n              <input id="status_rejected" type="radio" value="3" name="status"/> {{_ "Rejected"}}\n            </label>\n          </div>\n        </div>\n        <div id="postedAt" class={{showPostedAt}}>\n          <div class="control-group">\n            <label class="control-label post-form-date">{{_ "Posted Date"}}</label>\n            <div class="controls"><input id="postedAtDate" type="text" value="{{postedAtDate}}" /></div>\n          </div>\n          <div class="control-group">\n            <label class="control-label post-form-time">{{_ "Posted Time"}}</label>\n            <div class="controls"><input id="postedAtTime" type="text" value="{{postedAtTime}}" /></div>\n          </div>\n          <p class="help-block">Leave blank to post at current time.</p>\n        </div>\n      {{/if}}\n      -->'),"\n      ",Spacebars.include(e.lookupTemplate("files")),"\n      ",ut.DIV({"class":"form-actions"},"\n        ",ut.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(e.lookup("_"),"Submit")}}),"\n      "),"\n      ",ut.Raw("<!-- {{> folder}} MedBook -->"),"\n    "),"\n  ")})}.call(this),function(){e.startup(function(){st[W("post_submit-medbook")].inheritsHelpersFrom("post_submit"),st[W("post_submit-medbook")].inheritsEventsFrom("post_submit"),st[W("post_submit-medbook")].events({"keyup #new_category":function(t,n){if(27===event.which||13===event.which){t.preventDefault(),t.target.blur();var s=t.currentTarget.value,o=slugify(s);e.call("category",{name:s,order:1,slug:o},function(e,n){e?(console.log(e),throwError(e.reason),clearSeenErrors()):t.currentTarget.value=""})}}}),st[W("post_submit-medbook")].replaces(W("post_submit"))})}.call(this),"undefined"==typeof Package&&(Package={}),Package["telescope-collaboration"]={addCollaborator:dt,Collaboration:pt,show:ft,hide:mt,createCollaboration:gt,collaborationSchema:bt,Schemas:vt}}();

Accounts=Package["accounts-base"].Accounts,Spiderable=Package.spiderable.Spiderable,ServiceConfiguration=Package["service-configuration"].ServiceConfiguration,Router=Package["iron:router"].Router,RouteController=Package["iron:router"].RouteController,FastRender=Package["meteorhacks:fast-render"].FastRender,__init_fast_render=Package["meteorhacks:fast-render"].__init_fast_render,SubsManager=Package["meteorhacks:subs-manager"].SubsManager,AutoForm=Package["telescope-post-files"].AutoForm,SimpleSchema=Package["aldeed:simple-schema"].SimpleSchema,MongoObject=Package["aldeed:simple-schema"].MongoObject,Cookie=Package["mrt:cookies"].Cookie,moment=Package["mrt:moment"].moment,MailChimp=Package["mrt:mailchimp"].MailChimp,juice=Package["sacha:juice"].juice,CollectionHooks=Package["matb33:collection-hooks"].CollectionHooks,Avatar=Package["bengott:avatar"].Avatar,Gravatar=Package["jparker:gravatar"].Gravatar,TAPi18next=Package["tap:i18n"].TAPi18next,TAPi18n=Package["tap:i18n"].TAPi18n,adminNav=Package["telescope-post-files"].adminNav,viewNav=Package["telescope-base"].viewNav,addToPostSchema=Package["telescope-post-files"].addToPostSchema,addToCommentsSchema=Package["telescope-base"].addToCommentsSchema,addToSettingsSchema=Package["telescope-base"].addToSettingsSchema,preloadSubscriptions=Package["telescope-post-files"].preloadSubscriptions,primaryNav=Package["telescope-post-files"].primaryNav,secondaryNav=Package["telescope-base"].secondaryNav,viewParameters=Package["telescope-search"].viewParameters,footerModules=Package["telescope-base"].footerModules,heroModules=Package["telescope-base"].heroModules,postModules=Package["telescope-post-files"].postModules,postHeading=Package["telescope-base"].postHeading,postMeta=Package["telescope-base"].postMeta,modulePositions=Package["telescope-base"].modulePositions,postSubmitRenderedCallbacks=Package["telescope-base"].postSubmitRenderedCallbacks,postSubmitClientCallbacks=Package["telescope-base"].postSubmitClientCallbacks,postSubmitMethodCallbacks=Package["telescope-base"].postSubmitMethodCallbacks,postAfterSubmitMethodCallbacks=Package["telescope-base"].postAfterSubmitMethodCallbacks,postEditRenderedCallbacks=Package["telescope-base"].postEditRenderedCallbacks,postEditClientCallbacks=Package["telescope-base"].postEditClientCallbacks,postEditMethodCallbacks=Package["telescope-base"].postEditMethodCallbacks,postAfterEditMethodCallbacks=Package["telescope-base"].postAfterEditMethodCallbacks,commentSubmitRenderedCallbacks=Package["telescope-base"].commentSubmitRenderedCallbacks,commentSubmitClientCallbacks=Package["telescope-base"].commentSubmitClientCallbacks,commentSubmitMethodCallbacks=Package["telescope-base"].commentSubmitMethodCallbacks,commentAfterSubmitMethodCallbacks=Package["telescope-base"].commentAfterSubmitMethodCallbacks,commentEditRenderedCallbacks=Package["telescope-base"].commentEditRenderedCallbacks,commentEditClientCallbacks=Package["telescope-base"].commentEditClientCallbacks,commentEditMethodCallbacks=Package["telescope-base"].commentEditMethodCallbacks,commentAfterEditMethodCallbacks=Package["telescope-base"].commentAfterEditMethodCallbacks,getTemplate=Package["telescope-base"].getTemplate,templates=Package["telescope-base"].templates,themeSettings=Package["telescope-base"].themeSettings,deepExtend=Package["telescope-lib"].deepExtend,camelToDash=Package["telescope-lib"].camelToDash,dashToCamel=Package["telescope-lib"].dashToCamel,camelCaseify=Package["telescope-lib"].camelCaseify,getSetting=Package["telescope-lib"].getSetting,getThemeSetting=Package["telescope-lib"].getThemeSetting,getSiteUrl=Package["telescope-lib"].getSiteUrl,trimWords=Package["telescope-lib"].trimWords,can=Package["telescope-lib"].can,_=Package.underscore._,capitalise=Package["telescope-lib"].capitalise,i18n=Package["telescope-i18n"].i18n,setLanguage=Package["telescope-i18n"].setLanguage,serveAPI=Package["telescope-api"].serveAPI,serveRSS=Package["telescope-rss"].serveRSS,Categories=Package["telescope-post-files"].Categories,buildEmailTemplate=Package["telescope-email"].buildEmailTemplate,sendEmail=Package["telescope-email"].sendEmail,buildAndSendEmail=Package["telescope-email"].buildAndSendEmail,getEmailTemplate=Package["telescope-email"].getEmailTemplate,PostsDailyController=Package["telescope-daily"].PostsDailyController,Herald=Package["telescope-notifications"].Herald,buildEmailNotification=Package["telescope-notifications"].buildEmailNotification,getUnsubscribeLink=Package["telescope-notifications"].getUnsubscribeLink,addCollaborator=Package["telescope-collaboration"].addCollaborator,Collaboration=Package["telescope-collaboration"].Collaboration,show=Package["telescope-collaboration"].show,hide=Package["telescope-collaboration"].hide,createCollaboration=Package["telescope-collaboration"].createCollaboration,collaborationSchema=Package["telescope-collaboration"].collaborationSchema,Schemas=Package["telescope-collaboration"].Schemas,HTTP=Package.http.HTTP,FileCollection=Package["vsivsi:file-collection"].FileCollection,Collections=Package["telescope-post-files"].Collections,FS=Package["telescope-post-files"].FS,Iron=Package["iron:core"].Iron,AccountsTemplates=Package["useraccounts:core"].AccountsTemplates,Meteor=Package.meteor.Meteor,WebApp=Package.webapp.WebApp,Log=Package.logging.Log,Tracker=Package.deps.Tracker,Deps=Package.deps.Deps,Session=Package.session.Session,DDP=Package.livedata.DDP,Mongo=Package.mongo.Mongo,Blaze=Package.ui.Blaze,UI=Package.ui.UI,Handlebars=Package.ui.Handlebars,Spacebars=Package.spacebars.Spacebars,Template=Package.templating.Template,check=Package.check.check,Match=Package.check.Match,$=Package.jquery.$,jQuery=Package.jquery.jQuery,Random=Package.random.Random,EJSON=Package.ejson.EJSON,LaunchScreen=Package["launch-screen"].LaunchScreen,T9n=Package["softwarerero:accounts-t9n"].T9n,HTML=Package.htmljs.HTML;

!function(){Template.__checkName("postActions"),Template.postActions=new Template("Template.postActions",function(){var n=this;return HTML.Raw('<a class="toggle-actions-link mobile-only" href="#">\n    <span class="action">…</span>\n  </a>')})}();

!function(){Template.__checkName("postAdmin"),Template.postAdmin=new Template("Template.postAdmin",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("isAdmin"))},function(){return["\n    ",HTML.DIV({"class":"post-meta-item"},"\n      ",Blaze.If(function(){return Spacebars.call(e.lookup("postsMustBeApproved"))},function(){return["\n        |\n        ",Blaze.If(function(){return Spacebars.call(e.lookup("isApproved"))},function(){return["\n          ",HTML.A({href:"#","class":"unapprove-link goto-edit"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"unapprove")})),"\n        "]},function(){return["\n          ",HTML.A({href:"#","class":"approve-link goto-edit"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"approve")})),"\n        "]}),"\n      "]}),"\n      | ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"score")}),": ",Blaze.View(function(){return Spacebars.mustache(e.lookup("shortScore"))}),", ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"clicks")}),": ",Blaze.View(function(){return Spacebars.mustache(e.lookup("clickCount"))}),", ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"views")}),": ",Blaze.View(function(){return Spacebars.mustache(e.lookup("viewCount"))}),"\n    "),"\n  "]})})}();

!function(){Template.__checkName("postCommentsLink"),Template.postCommentsLink=new Template("Template.postCommentsLink",function(){var e=this;return HTML.DIV({"class":"post-meta-item"},"\n    ",HTML.A({"class":"comments-link",href:function(){return["/posts/",Spacebars.mustache(e.lookup("_id"))]}},"\n      ",HTML.SPAN({"class":"count"},Blaze.View(function(){return Spacebars.mustache(e.lookup("commentCount"))})),"\n      ",HTML.SPAN({"class":"action"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"comments_")})),"\n    "),"\n  ")})}();

!function(){Template.__checkName("postContent"),Template.postContent=new Template("Template.postContent",function(){var e=this;return HTML.DIV({"class":"post-info"},"\n    ",HTML.H3({"class":"post-heading"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("postHeading"))},function(){return["\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate")),data:Spacebars.call(e.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "]}),"\n    "),"\n    ",HTML.DIV({"class":"post-meta"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("postMeta"))},function(){return["\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate")),data:Spacebars.call(e.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "]}),"\n    "),"\n  ")})}();

!function(){Template.__checkName("postDiscuss"),Template.postDiscuss=new Template("Template.postDiscuss",function(){var s=this;return HTML.A({"class":"discuss-link go-to-comments",href:function(){return["/posts/",Spacebars.mustache(s.lookup("_id"))]}},HTML.Raw('\n    <i class="icon-comment"></i>\n    '),HTML.SPAN({"class":"count"},Blaze.View(function(){return Spacebars.mustache(s.lookup("commentCount"))})),"\n    ",HTML.SPAN({"class":"action"},Blaze.View(function(){return Spacebars.mustache(s.lookup("_"),"discuss")})),"\n  ")})}();

!function(){Template.__checkName("postDomain"),Template.postDomain=new Template("Template.postDomain",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("url"))},function(){return HTML.SPAN({"class":"post-domain"},Blaze.View(function(){return Spacebars.mustache(e.lookup("domain"))}))})})}();

!function(){Template.__checkName("postInfo"),Template.postInfo=new Template("Template.postInfo",function(){var e=this;return HTML.DIV({"class":"post-meta-item"},"\n    ",HTML.SPAN({"class":"points"},Blaze.View(function(){return Spacebars.mustache(e.lookup("baseScore"))})," ",HTML.SPAN({"class":"unit"},Blaze.View(function(){return Spacebars.mustache(e.lookup("pointsUnitDisplayText"))})," ")),"by ",HTML.A({"class":"post-author",href:function(){return Spacebars.mustache(e.lookup("profileUrl"))}},Blaze.View(function(){return Spacebars.mustache(e.lookup("authorName"))}))," ",HTML.SPAN({"class":"post-time"},Blaze.View(function(){return Spacebars.mustache(e.lookup("timeAgo"),e.lookup("ago"))})),"\n    ",Blaze.If(function(){return Spacebars.call(e.lookup("can_edit"))},function(){return["\n      | ",HTML.A({href:function(){return["/posts/",Spacebars.mustache(e.lookup("_id")),"/edit"]},"class":"edit-link goto-edit"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"edit")})),"\n    "]}),"\n  ")})}();

!function(){Template.__checkName("postTitle"),Template.postTitle=new Template("Template.postTitle",function(){var t=this;return HTML.A({href:function(){return Spacebars.mustache(t.lookup("postLink"))},"class":"post-title",target:function(){return Spacebars.mustache(t.lookup("postTarget"))}},Blaze.View(function(){return Spacebars.mustache(t.lookup("title"))}))})}();

!function(){Template.__checkName("postUpvote"),Template.postUpvote=new Template("Template.postUpvote",function(){var e=this;return[HTML.DIV({"class":"post-rank"},HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(e.lookup("oneBasedRank"))}))),"\n  ",Blaze.If(function(){return Spacebars.call(e.lookup("upvoted"))},function(){return["\n    ",HTML.SPAN({"class":"upvote-link voted"},HTML.I({"class":"icon-check"}),HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"upvoted")}))),"\n  "]},function(){return["\n    ",HTML.A({"class":"upvote-link not-voted",href:"#"},HTML.I({"class":"icon-up"}),HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"upvote_")}))),"\n  "]})]})}();

!function(){Template.__checkName("settings"),Template.settings=new Template("Template.settings",function(){var a=this;return HTML.DIV({"class":"grid-small grid-module dialog settings"},"\n    ",Blaze.If(function(){return Spacebars.call(Spacebars.dot(a.lookup("."),"hasSettings"))},function(){return["\n      ",Blaze._TemplateWith(function(){return{collection:Spacebars.call("Settings"),id:Spacebars.call("updateSettingsForm"),type:Spacebars.call("update"),doc:Spacebars.call(Spacebars.dot(a.lookup("."),"settings")),"label-class":Spacebars.call("control-label"),"input-col-class":Spacebars.call("controls"),template:Spacebars.call("settings")}},function(){return Spacebars.include(a.lookupTemplate("quickForm"))}),"\n    "]},function(){return["\n      ",Blaze._TemplateWith(function(){return{collection:Spacebars.call("Settings"),id:Spacebars.call("updateSettingsForm"),type:Spacebars.call("insert"),template:Spacebars.call("settings"),"label-class":Spacebars.call("control-label"),"input-col-class":Spacebars.call("controls")}},function(){return Spacebars.include(a.lookupTemplate("quickForm"))}),"\n    "]}),"\n  ")})}();

!function(){Template.__checkName("toolbox"),Template.toolbox=new Template("Template.toolbox",function(){var o=this;return HTML.Raw('<div class="grid-small grid-module dialog admin toolbox">\n      <h2>Toolbox</h2>\n      <ul>\n        <li><a href="#" class="give-invites">Give 1 Invite to Everybody</a></li>\n      </ul>\n    </div>')})}();

!function(){Template.__checkName("comment_deleted"),Template.comment_deleted=new Template("Template.comment_deleted",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block"},"\n  	",HTML.P(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"your_comment_has_been_deleted")})),"\n  ")})}();

!function(){Template.__checkName("comment_edit"),Template.comment_edit=new Template("Template.comment_edit",function(){var e=this;return HTML.DIV({"class":"grid submit"},"\n    ",Spacebars.With(function(){return Spacebars.call(e.lookup("comment"))},function(){return["\n    ",HTML.FORM({"class":"grid-block form-horizontal"},"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"comment_")})),"\n        ",HTML.DIV({"class":"controls comment-field",id:"editor"},HTML.TEXTAREA({id:"body",value:function(){return Spacebars.mustache(e.lookup("body"))},"class":"input-xlarge"})),"\n      "),"\n      ",HTML.DIV({"class":"form-actions"},"\n        ",HTML.A({"class":"delete-link",href:"/comments/deleted"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"delete_comment")})),"\n        ",HTML.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(e.lookup("_"),"submit")},title:"(⌘+enter)"}),"\n      "),"\n    "),"\n    "]}),"\n  ")})}();

!function(){Template.__checkName("comment_form"),Template.comment_form=new Template("Template.comment_form",function(){var n=this;return Blaze.If(function(){return Spacebars.call(n.lookup("canComment"))},function(){return["\n    ",HTML.DIV({"class":"comment-new module"},"\n      ",HTML.FORM("\n        ",HTML.DIV({"class":"comment-field",id:"editor"},"\n          ",HTML.TEXTAREA({id:"comment",rows:"3",autofocus:"autofocus"}),"\n        "),"\n        ",HTML.DIV({"class":"comment-submit"},"\n          ",HTML.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(n.lookup("_"),"add_comment")},title:"(⌘+enter)"}),"\n        "),"\n      "),"\n    "),"\n  "]})})}();

!function(){Template.__checkName("comment_item"),Template.comment_item=new Template("Template.comment_item",function(){var n=this;return HTML.LI({"class":"comment module comment-displayed",id:function(){return Spacebars.mustache(n.lookup("_id"))}},"\n   ",HTML.DIV({"class":"comment-body"},"\n      ",Blaze.If(function(){return Spacebars.call(n.lookup("isDeleted"))},function(){return["\n        ",HTML.DIV({"class":"comment-deleted"},"This comment has been deleted."),"\n      "]},function(){return["\n      ",HTML.DIV({"class":"comment-content"},"\n        ",HTML.DIV({"class":function(){return["comment-actions ",Blaze.If(function(){return Spacebars.call(n.lookup("upvoted"))},function(){return"upvoted"},function(){return"not-upvoted"})," ",Blaze.If(function(){return Spacebars.call(n.lookup("downvoted"))},function(){return"downvoted"},function(){return"not-downvoted"})]}},"\n          ",HTML.A({"class":"upvote",href:"#"},"\n            ",HTML.I({"class":"icon-up"}),"\n            ",HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"upvote")})),"\n          "),"\n          ",HTML.A({"class":"downvote",href:"#"},"\n            ",HTML.I({"class":"icon-down"}),"\n            ",HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"downvote")})),"\n          "),"\n        "),"\n        ",HTML.DIV({"class":"user-avatar"},Blaze._TemplateWith(function(){return{userId:Spacebars.call(n.lookup("userId")),shape:Spacebars.call("circle")}},function(){return Spacebars.include(n.lookupTemplate("avatar"))})),"\n        ",HTML.DIV({"class":"comment-main"},"\n          ",HTML.DIV({"class":"comment-meta"},"\n            ",HTML.A({"class":"comment-username",href:function(){return Spacebars.mustache(n.lookup("profileUrl"))}},Blaze.View(function(){return Spacebars.mustache(n.lookup("authorName"))})),"\n            ",HTML.SPAN({"class":"comment-time"},Blaze.View(function(){return Spacebars.mustache(n.lookup("timeAgo"),n.lookup("ago"))}),","),"\n            ",HTML.SPAN({"class":"points"},Blaze.View(function(){return Spacebars.mustache(n.lookup("upvotes"))}))," ",HTML.SPAN({"class":"unit"},"points "),"\n            ",HTML.A({href:function(){return["/comments/",Spacebars.mustache(n.lookup("_id"))]},"class":"comment-permalink icon-link goto-comment"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"link")})),"\n            ",Blaze.If(function(){return Spacebars.call(n.lookup("can_edit"))},function(){return["\n              | ",HTML.A({"class":"edit-link",href:function(){return["/comments/",Spacebars.mustache(n.lookup("_id")),"/edit"]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"edit")})),"\n            "]}),"\n            ",Blaze.If(function(){return Spacebars.call(n.lookup("isAdmin"))},function(){return["\n              | ",HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("full_date"))})),"\n            "]}),"\n          "),"\n          ",HTML.DIV({"class":"comment-text markdown"},Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(n.lookup("htmlBody")))})),"\n          ",Blaze.If(function(){return Spacebars.dataMustache(n.lookup("getSetting"),"nestedComments",!0)},function(){return["\n            ",HTML.A({href:function(){return["/comments/",Spacebars.mustache(n.lookup("_id"))]},"class":"comment-reply goto-comment"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"reply")})),"\n          "]}),"\n        "),"\n      "),"\n      "]}),"\n      ",Blaze.If(function(){return Spacebars.call(n.lookup("showChildComments"))},function(){return["\n        ",HTML.UL({"class":"comment-children comment-list"},"\n        ",Blaze.Each(function(){return Spacebars.call(n.lookup("child_comments"))},function(){return["\n          ",Spacebars.With(function(){return Spacebars.call(n.lookup("."))},function(){return["\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("comment_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "]}),"\n        "]}),"\n        "),"\n      "]}),"\n    "),"\n  ")})}();

!function(){Template.__checkName("comment_list"),Template.comment_list=new Template("Template.comment_list",function(){var e=this;return HTML.UL({"class":"comments comment-list"},"\n    ",Blaze.Each(function(){return Spacebars.call(e.lookup("child_comments"))},function(){return["\n      ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("comment_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n    "]}),"\n  ")})}();

!function(){Template.__checkName("comment_reply"),Template.comment_reply=new Template("Template.comment_reply",function(){var n=this;return HTML.DIV({"class":"grid comment-page single-post"},"\n    \n    ",Spacebars.With(function(){return Spacebars.call(n.lookup("post"))},function(){return["\n      ",HTML.DIV({"class":"posts"},"\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("post_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "),"\n    "]}),"\n\n    ",Spacebars.With(function(){return Spacebars.call(n.lookup("comment"))},function(){return["\n      ",HTML.UL({"class":"selected-comment"},"\n       ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("comment_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "),"\n    "]}),"\n\n    ",Blaze.If(function(){return Spacebars.call(n.lookup("canComment"))},function(){return["\n      ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("comment_form"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n    "]}),"\n\n  ")})}();

!function(){Template.__checkName("css"),Template.css=new Template("Template.css",function(){var t=this;return HTML.STYLE("\n      body{\n        background: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"backgroundCSS")}),';\n      }\n      input[type="submit"], button, .button, .auth-buttons #login-buttons #login-buttons-password, .btn, .error, .mobile-menu-button, .login-link-text{\n        background-color: ',Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"buttonColor")})," !important;\n        color: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"buttonTextColor")})," !important;\n      }\n      a:hover, .post-content .post-heading .post-title:hover, .post-content .post-upvote .upvote-link i, .comment-actions a i, .comment-actions.upvoted .upvote i, .comment-actions.downvoted .downvote i, .toggle-actions-link{\n        color: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"buttonColor")}),";\n      }\n      .toggle-actions-link{\n        border-color: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"buttonColor")}),";\n      }\n      .post-content .post-upvote .upvote-link.voted i.icon-check{\n        /*color: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"secondaryColor")}),";*/\n      }\n      .header{\n        background-color: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"headerColor")}),";\n        color: ",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"headerTextColor")}),";\n      }\n    .logo-image a{\n      height:",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"logoHeight")}),"px; \n      width:",Blaze.View(function(){return Spacebars.mustache(t.lookup("getSetting"),"logoWidth")}),"px; \n    }\n  ")})}();

!function(){Template.__checkName("error"),Template.error=new Template("Template.error",function(){var e=this;return Blaze.Each(function(){return Spacebars.call(e.lookup("errors"))},function(){return["\n		",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("error_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n	"]})})}();

!function(){Template.__checkName("error_item"),Template.error_item=new Template("Template.error_item",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("show"))},function(){return["\n    ",HTML.DIV({"class":"grid"},"\n      ",HTML.DIV({"class":function(){return["error ",Spacebars.mustache(e.lookup("type")),"-message module"]}},"\n        ",Blaze.View(function(){return Spacebars.mustache(e.lookup("message"))}),"\n      "),"\n    "),"\n  "]})})}();

!function(){Template.__checkName("footer"),Template.footer=new Template("Template.footer",function(){var e=this;return[Blaze.If(function(){return Spacebars.call(e.lookup("footerCode"))},function(){return["\n    ",HTML.DIV({"class":function(){return["footer grid ",Spacebars.mustache(e.lookup("footerClass"))]}},"\n      ",Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("footerCode")))}),"\n    "),"\n  "]}),"\n  ",Blaze.Each(function(){return Spacebars.call(e.lookup("footerModules"))},function(){return["\n    ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n  "]})]})}();

!function(){Template.__checkName("layout"),Template.layout=new Template("Template.layout",function(){var e=this;return[Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("css"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n  ",HTML.DIV({"class":function(){return["outer-wrapper ",Spacebars.mustache(e.lookup("currentPage"))]}},"\n    ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("mobile_nav"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n    ",HTML.DIV({"class":function(){return["inner-wrapper template-",Spacebars.mustache(e.lookup("pageName"))]}},"\n      ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("nav"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      ",HTML.DIV({"class":"content-wrapper"},"\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("error"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n        ",Blaze.Each(function(){return Spacebars.call(e.lookup("heroModules"))},function(){return["\n          ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n        "]}),"\n        ",Spacebars.include(e.lookupTemplate("yield")),"\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("footer"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "),"\n      ",HTML.Raw('<div class="overlay hidden"></div>'),"\n    "),"\n    ",Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("extraCode")))}),"\n  ")]})}();

!function(){Template.__checkName("already_logged_in"),Template.already_logged_in=new Template("Template.already_logged_in",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block dialog"},"\n		",HTML.P(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"you_are_already_logged_in")})),"\n	")})}();

!function(){Template.__checkName("loading"),Template.loading=new Template("Template.loading",function(){var e=this;return HTML.DIV({"class":"grid loading-page"},"\n    ",Spacebars.include(e.lookupTemplate("spinner")),"\n  ")})}();

!function(){Template.__checkName("no_account"),Template.no_account=new Template("Template.no_account",function(){var t=this;return HTML.DIV({"class":"grid-small grid-block dialog"},"\n		",HTML.P(Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"sorry_this_is_a_private_site_please_sign_up_first")})),"\n		",Blaze.View(function(){return Spacebars.mustache(t.lookup("landingPageText"))}),"\n		",HTML.DIV({"class":"twitter-signup twitter-auth"},"\n      		",HTML.A({"class":"twitter-button button",href:"#"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"sign_in_sign_up_with_twitter")})),"\n    	"),"\n	")})}();

!function(){Template.__checkName("no_invite"),Template.no_invite=new Template("Template.no_invite",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block dialog"},"\n		",HTML.H2(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"thanks_for_signing_up")})),"\n		",Blaze.View(function(){return Spacebars.mustache(e.lookup("afterSignupText"))}),"\n		",HTML.P(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"the_site_is_currently_invite_only_but_we_will_let_you_know_as_soon_as_a_spot_opens_up")})),"\n	")})}();

!function(){Template.__checkName("no_rights"),Template.no_rights=new Template("Template.no_rights",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block dialog"},"\n    ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sorry_you_dont_have_the_rights_to_view_this_page")}),"\n  ")})}();

!function(){Template.__checkName("notFound"),Template.notFound=new Template("Template.notFound",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block dialog"},"\n		",HTML.H2(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"not_found")})),"\n    ",HTML.P(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"were_sorry_whatever_you_were_looking_for_isnt_here")})),"\n	")})}();

!function(){Template.__checkName("adminMenu"),Template.adminMenu=new Template("Template.adminMenu",function(){var n=this;return Blaze.If(function(){return Spacebars.call(n.lookup("isAdmin"))},function(){return["\n    ",HTML.DIV({"class":"dropdown header-submodule admin-menu"},"\n      ",HTML.A({"class":"admin dropdown-top-level",href:"/"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"admin")})),"\n      ",HTML.DIV({"class":"dropdown-menu"},"\n        ",HTML.UL({role:"menu","aria-labelledby":"dLabel"},"\n          ",Blaze.Each(function(){return Spacebars.call(n.lookup("menu"))},function(){return["\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("menuItem")),data:Spacebars.call(n.lookup("."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  "]})})}();

!function(){Template.__checkName("menuItem"),Template.menuItem=new Template("Template.menuItem",function(){var e=this;return HTML.LI(HTML.A({"class":"dropdown-sub-level",href:function(){return Spacebars.mustache(e.lookup("pathFor"),e.lookup("route"))}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),e.lookup("label"))})))})}();

!function(){Template.__checkName("mobile_nav"),Template.mobile_nav=new Template("Template.mobile_nav",function(){var n=this;return HTML.DIV({"class":"mobile-nav"},"\n    ",HTML.DIV({"class":"mobile-nav-inner"},"\n\n      ",HTML.UL({"class":"mobile-menu"},"\n        ",Blaze.Each(function(){return Spacebars.call(n.lookup("primaryNav"))},function(){return["\n          ",HTML.LI("\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "),"\n        "]}),"\n        ",Blaze.Each(function(){return Spacebars.call(n.lookup("secondaryNav"))},function(){return["\n          ",HTML.LI("\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "),"\n        "]}),"\n      "),"\n    "),"\n  ")})}();

!function(){Template.__checkName("nav"),Template.nav=new Template("Template.nav",function(){var n=this;return HTML.HEADER({"class":"header"},"\n\n    ",HTML.A({href:"#menu","class":"mobile-only mobile-menu-button button"},"\n      ",HTML.SVG({height:"24px",id:"Layer_1",style:"enable-background:new 0 0 32 32;",version:"1.1",viewBox:"0 0 32 32",width:"32px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},HTML.PATH({"class":"hamburger",d:"M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"})),"\n    "),"\n\n    ",Blaze.If(function(){return Spacebars.call(n.lookup("logo_url"))},function(){return["\n      ",HTML.H1({"class":"logo logo-image header-module"},"\n        ",HTML.A({href:"/"},"\n          ",HTML.IMG({src:function(){return Spacebars.mustache(n.lookup("logo_url"))},alt:function(){return Spacebars.mustache(n.lookup("site_title"))}}),"\n        "),"\n      "),"\n    "]},function(){return["\n      ",HTML.H1({"class":"logo header-module"},HTML.A({href:"/"},Blaze.View(function(){return Spacebars.mustache(n.lookup("site_title"))}))),"\n    "]}),"\n\n    ",Blaze.If(function(){return Spacebars.call(n.lookup("hasPrimaryNav"))},function(){return["\n      ",HTML.UL({"class":function(){return["nav primary-nav desktop-nav ",Spacebars.mustache(n.lookup("dropdownClass"))," header-module desktop-only"]}},"\n        ",Blaze.Each(function(){return Spacebars.call(n.lookup("primaryNav"))},function(){return["\n          ",HTML.LI("\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "),"\n        "]}),"\n      "),"\n    "]}),"\n\n    ",Blaze.If(function(){return Spacebars.call(n.lookup("hasSecondaryNav"))},function(){return["\n      ",HTML.UL({"class":function(){return["nav secondary-nav desktop-nav ",Spacebars.mustache(n.lookup("dropdownClass"))," header-module desktop-only"]}},"\n        ",Blaze.Each(function(){return Spacebars.call(n.lookup("secondaryNav"))},function(){return["\n          ",HTML.LI("\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(n.lookup("getTemplate"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "),"\n        "]}),"\n      "),"\n    "]}),"\n\n  ")})}();

!function(){Template.__checkName("submitButton"),Template.submitButton=new Template("Template.submitButton",function(){var t=this;return Blaze.If(function(){return Spacebars.call(t.lookup("canPost"))},function(){return["\n    ",HTML.A({id:"submit","class":"submit button header-submodule",href:"/submit"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"post")})),"\n  "]})})}();

!function(){Template.__checkName("userMenu"),Template.userMenu=new Template("Template.userMenu",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("isLoggedIn"))},function(){return["\n    ",HTML.DIV({"class":"user-menu dropdown header-submodule"},"\n      ",HTML.A({"class":"view dropdown-top-level",href:"/"},Blaze.View(function(){return Spacebars.mustache(e.lookup("name"))})),"\n      ",HTML.DIV({"class":"dropdown-menu"},"\n        ",HTML.UL({role:"menu","aria-labelledby":"dLabel"},"\n          ",HTML.LI(HTML.A({href:function(){return Spacebars.mustache(e.lookup("profileUrl"))}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"profile")}))),"\n          ",HTML.LI(HTML.A({href:"/account"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"edit_account")})))," \n          ",HTML.LI(HTML.A({href:"/sign-out"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sign_out")}))),"\n        "),"\n      "),"\n    "),"\n  "]},function(){return["\n    ",HTML.A({"class":"account-link sign-in",href:"/sign-in"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sign_in")})),"\n    ",HTML.A({"class":"account-link sign-up",href:"/sign-up"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sign_up")})),"\n  "]})})}();

!function(){Template.__checkName("viewsMenu"),Template.viewsMenu=new Template("Template.viewsMenu",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("canView"))},function(){return["\n    ",HTML.DIV({"class":"dropdown header-submodule views-menu"},"\n      ",HTML.A({"class":"view dropdown-top-level",href:"/"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"view")})),"\n      ",HTML.DIV({"class":"dropdown-menu"},"\n        ",HTML.UL({role:"menu","aria-labelledby":"dLabel"},"\n          ",Blaze.Each(function(){return Spacebars.call(e.lookup("views"))},function(){return["\n            ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("menuItem")),data:Spacebars.call(e.lookup("."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  "]})})}();

!function(){Template.__checkName("post_body"),Template.post_body=new Template("Template.post_body",function(){var e=this;return HTML.DIV({"class":"post-body markdown"},Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("htmlBody")))}))})}();

!function(){Template.__checkName("post_deleted"),Template.post_deleted=new Template("Template.post_deleted",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block"},"\n  	",HTML.P(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"your_post_has_been_deleted")})),"\n  ")})}();

!function(){Template.__checkName("post_edit"),Template.post_edit=new Template("Template.post_edit",function(){var t=this;return HTML.DIV({"class":"grid submit"},"\n    ",Spacebars.With(function(){return Spacebars.call(t.lookup("post"))},function(){return["\n      ",HTML.FORM({"class":"grid-block form-horizontal"},"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label post-form-headline"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"created")})),"\n          ",HTML.DIV({"class":"controls"},HTML.P(Blaze.View(function(){return Spacebars.mustache(t.lookup("created"))}))),"\n        "),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label post-form-headline"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"title")})),"\n          ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"title",type:"text",value:function(){return Spacebars.mustache(t.lookup("title"))}})),"\n        "),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label post-form-url"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"url")})),"\n          ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"url",type:"text",value:function(){return Spacebars.mustache(t.lookup("url"))}})),"\n        "),"\n        ",Blaze.If(function(){return Spacebars.call(t.lookup("shorten"))},function(){return["\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label post-form-url"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"short_url")})),"\n          ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"short-url",type:"text",value:function(){return Spacebars.mustache(t.lookup("shortUrl"))}})),"\n        "),"\n        "]}),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label post-form-body"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"body")})),"\n          ",HTML.DIV({"class":"controls",id:"editor"},HTML.TEXTAREA({id:"body",value:function(){return Spacebars.mustache(t.lookup("body"))},"class":"input-xlarge"})),"\n        "),"\n        ",Blaze.If(function(){return Spacebars.call(t.lookup("categoriesEnabled"))},function(){return["\n        ",HTML.DIV({"class":"control-group post-form-category"},"\n          ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"categories")})),"\n          ",HTML.DIV({"class":"controls"},"\n            ",Blaze.Each(function(){return Spacebars.call(t.lookup("categories"))},function(){return["\n            ",HTML.LABEL({"class":"radio inline"},"\n              ",HTML.INPUT(HTML.Attrs({id:function(){return["category_",Spacebars.mustache(t.lookup("_id"))]},type:"checkbox",value:function(){return Spacebars.mustache(t.lookup("_id"))},name:"category"},function(){return Spacebars.attrMustache(t.lookup("checked"))}))," ",Blaze.View(function(){return Spacebars.mustache(t.lookup("name"))}),"\n            "),"\n            "]}),"\n          "),"\n        "),"\n        "]}),"\n        ",Blaze.If(function(){return Spacebars.call(t.lookup("isAdmin"))},function(){return["\n          ",HTML.DIV({"class":"control-group post-form-sticky"},"\n            ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"inactive_")})),"\n            ",HTML.DIV({"class":"controls"},"\n              ",Blaze.View(function(){return Spacebars.mustache(t.lookup("inactive"))}),"\n            "),"\n          "),"\n          ",HTML.DIV({"class":"control-group post-form-sticky"},"\n            ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"sticky_")})),"\n            ",HTML.DIV({"class":"controls"},"\n              ",HTML.INPUT(HTML.Attrs({type:"checkbox",name:"sticky",id:"sticky"},function(){return Spacebars.attrMustache(t.lookup("isSticky"))})),"\n            "),"\n          "),"\n          ",HTML.DIV({"class":"control-group post-form-user"},"\n            ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"user")})),"\n            ",HTML.DIV({"class":"controls"},"\n              ",HTML.SELECT({id:"postUser"},"\n                ",Blaze.Each(function(){return Spacebars.call(t.lookup("users"))},function(){return["\n                  ",HTML.OPTION(HTML.Attrs({value:function(){return Spacebars.mustache(t.lookup("_id"))}},function(){return Spacebars.attrMustache(t.lookup("isSelected"),t.lookup(".."))}),Blaze.View(function(){return Spacebars.mustache(t.lookup("userName"))})),"\n                "]}),"\n              "),"\n            "),"\n          "),"\n          ",HTML.DIV({"class":"control-group post-form-status"},"\n            ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"status_")})),"\n            ",HTML.DIV({"class":"controls"},"\n              ",HTML.LABEL({"class":"radio inline"},"\n                ",HTML.INPUT(HTML.Attrs({id:"status_pending",type:"radio",value:"1",name:"status"},function(){return Spacebars.attrMustache(t.lookup("hasStatusPending"))}))," ",Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"pending")}),"\n              "),"\n              ",HTML.LABEL({"class":"radio inline"},"\n                ",HTML.INPUT(HTML.Attrs({id:"status_approved",type:"radio",value:"2",name:"status"},function(){return Spacebars.attrMustache(t.lookup("hasStatusApproved"))}))," ",Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"approved")}),"\n              "),"\n              ",HTML.LABEL({"class":"radio inline"},"  \n                ",HTML.INPUT(HTML.Attrs({id:"status_rejected",type:"radio",value:"3",name:"status"},function(){return Spacebars.attrMustache(t.lookup("hasStatusRejected"))}))," ",Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"rejected")}),"\n              "),"\n            "),"\n          "),"\n          ",HTML.DIV({id:"postedAt","class":function(){return Spacebars.mustache(t.lookup("showPostedAt"))}},"\n            ",HTML.DIV({"class":"control-group"},"\n              ",HTML.LABEL({"class":"control-label post-form-date"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"posted_date")})),"\n              ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"postedAtDate",type:"text",value:function(){return Spacebars.mustache(t.lookup("postedAtDate"))}})),"\n            "),"\n            ",HTML.DIV({"class":"control-group"},"\n              ",HTML.LABEL({"class":"control-label post-form-time"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"posted_time")})),"\n              ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"postedAtTime",type:"text",value:function(){return Spacebars.mustache(t.lookup("postedAtTime"))}})),"\n            "),"\n          "),"\n        "]}),"\n        ",HTML.DIV({"class":"form-actions"},"\n          ",HTML.A({"class":"delete-link",href:"/posts/deleted"},Blaze.View(function(){return Spacebars.mustache(t.lookup("_"),"delete_post")})),"\n          ",HTML.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(t.lookup("_"),"submit")}}),"\n        "),"\n      "),"\n    "]}),"\n  ")})}();

!function(){Template.__checkName("post_item"),Template.post_item=new Template("Template.post_item",function(){var e=this;return HTML.DIV({"class":function(){return["post ",Spacebars.mustache(e.lookup("rankClass"))," ",Blaze.If(function(){return Spacebars.call(e.lookup("sticky"))},function(){return"sticky"})," ",Spacebars.mustache(e.lookup("inactiveClass"))]},id:function(){return Spacebars.mustache(e.lookup("_id"))}},"\n    ",HTML.DIV({"class":"modules-group left-modules"},"\n      ",HTML.DIV({"class":"inner"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("leftPostModules"))},function(){return["\n        ",HTML.DIV({"class":function(){return Spacebars.mustache(e.lookup("moduleClass"))}},"\n          ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate")),data:Spacebars.call(e.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n        "),"\n      "]}),"\n      "),"\n    "),"\n    ",HTML.DIV({"class":"modules-group center-modules"},"\n      ",HTML.DIV({"class":"inner"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("centerPostModules"))},function(){return["\n        ",HTML.DIV({"class":function(){return Spacebars.mustache(e.lookup("moduleClass"))}},"\n          ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate")),data:Spacebars.call(e.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n        "),"\n      "]}),"\n      "),"\n    "),"\n    ",HTML.DIV({"class":"modules-group right-modules"},"\n      ",HTML.DIV({"class":"inner"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("rightPostModules"))},function(){return["\n        ",HTML.DIV({"class":function(){return Spacebars.mustache(e.lookup("moduleClass"))}},"\n          ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("getTemplate")),data:Spacebars.call(e.lookup(".."))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n        "),"\n      "]}),"\n      "),"\n    "),"\n  ")})}();

!function(){Template.__checkName("post_page"),Template.post_page=new Template("Template.post_page",function(){var e=this;return HTML.DIV({"class":"single-post grid"},"\n    ",HTML.DIV({"class":"posts"},"\n      ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("post_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n    "),"\n    ",Blaze.If(function(){return Spacebars.call(e.lookup("body"))},function(){return["\n      ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("post_body"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n    "]}),"\n    ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("comment_form"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n    ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("comment_list"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n  ")})}();

!function(){Template.__checkName("post_submit"),Template.post_submit=new Template("Template.post_submit",function(){var e=this;return HTML.DIV({"class":"grid submit"},"\n    ",HTML.FORM({"class":"grid-block form-horizontal"},"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"url")})),"\n        ",HTML.Raw('<div class="controls"><input id="url" type="text" value=""></div>'),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"title")})),"\n        ",HTML.DIV({"class":"controls"},HTML.Raw('<input id="title" type="text" value="">'),HTML.A({href:"#","class":"get-title-link inline-link"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"suggest_title")}))),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"body")})),"\n        ",HTML.DIV({"class":"controls",id:"editor"},HTML.TEXTAREA({id:"body",value:"","class":"input-xlarge"})),"\n      "),"\n      ",Blaze.If(function(){return Spacebars.call(e.lookup("categoriesEnabled"))},function(){return["\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"category")})),"\n        ",HTML.DIV({"class":"controls"},"\n          ",Blaze.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n          ",HTML.LABEL({"class":"radio inline"},"\n            ",HTML.INPUT({id:function(){return["category_",Spacebars.mustache(e.lookup("_id"))]},type:"checkbox",value:function(){return Spacebars.mustache(e.lookup("_id"))},name:"category"})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("name"))}),"\n          "),"\n          "]}),"\n        "),"\n      "),"\n      "]}),"\n      ",Blaze.If(function(){return Spacebars.call(e.lookup("isAdmin"))},function(){return["\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sticky_")})),"\n          ",HTML.DIV({"class":"controls"},"\n            ",HTML.INPUT({type:"checkbox",name:"sticky",id:"sticky"}),"\n          "),"\n        "),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"user")})),"\n          ",HTML.DIV({"class":"controls"},"\n            ",HTML.SELECT({id:"postUser"},"\n              ",Blaze.Each(function(){return Spacebars.call(e.lookup("users"))},function(){return["\n                ",HTML.OPTION(HTML.Attrs({value:function(){return Spacebars.mustache(e.lookup("_id"))}},function(){return Spacebars.attrMustache(e.lookup("isSelected"),e.lookup("."))}),Blaze.View(function(){return Spacebars.mustache(e.lookup("userName"))})),"\n              "]}),"\n            "),"\n          "),"\n        "),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"status_")})),"\n          ",HTML.DIV({"class":"controls"},"\n            ",HTML.LABEL({"class":"radio inline"},"\n              ",HTML.INPUT({id:"status_pending",type:"radio",value:"1",name:"status"})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"pending")}),"\n            "),"\n            ",HTML.LABEL({"class":"radio inline"},"\n              ",HTML.INPUT({id:"status_approved",type:"radio",value:"2",name:"status",checked:""})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"approved")}),"\n            "),"\n            ",HTML.LABEL({"class":"radio inline"},"  \n              ",HTML.INPUT({id:"status_rejected",type:"radio",value:"3",name:"status"})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"rejected")}),"\n            "),"\n          "),"\n        "),"\n        ",HTML.DIV({id:"postedAt","class":function(){return Spacebars.mustache(e.lookup("showPostedAt"))}},"\n          ",HTML.DIV({"class":"control-group"},"\n            ",HTML.LABEL({"class":"control-label post-form-date"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"posted_date")})),"\n            ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"postedAtDate",type:"text",value:function(){return Spacebars.mustache(e.lookup("postedAtDate"))}})),"\n          "),"\n          ",HTML.DIV({"class":"control-group"},"\n            ",HTML.LABEL({"class":"control-label post-form-time"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"posted_time")})),"\n            ",HTML.DIV({"class":"controls"},HTML.INPUT({id:"postedAtTime",type:"text",value:function(){return Spacebars.mustache(e.lookup("postedAtTime"))}})),"\n          "),"\n          ",HTML.P({"class":"help-block"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"leave_blank_to_post_at_current_time")})),"\n        "),"\n      "]}),"\n      ",HTML.DIV({"class":"form-actions"},"\n        ",HTML.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(e.lookup("_"),"submit")}}),"\n      "),"\n    "),"\n  ")})}();

!function(){Template.__checkName("posts_digest"),Template.posts_digest=new Template("Template.posts_digest",function(){var e=this;return[HTML.DIV({"class":"grid"},"\n    ",HTML.DIV({"class":"grid-block"},"\n      ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"the_top_5_posts_of_each_day")})," |\n    ",Blaze.If(function(){return Spacebars.call(e.lookup("showPreviousDate"))},function(){return["\n    ",HTML.A({href:function(){return Spacebars.mustache(e.lookup("previousDateURL"))},"class":"prev-link"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"previous_day")}))," |\n    "]}),"\n    ",Blaze.View(function(){return Spacebars.mustache(e.lookup("currentDate"))})," |\n    ",Blaze.If(function(){return Spacebars.call(e.lookup("showNextDate"))},function(){return["\n    ",HTML.A({href:function(){return Spacebars.mustache(e.lookup("nextDateURL"))},"class":"next-link"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"next_day")})),"\n    "]}),"\n    "),"\n  "),"\n  \n  ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("postsListIncoming")),data:Spacebars.call(e.lookup("incoming"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n\n  ",Blaze.If(function(){return Spacebars.call(e.lookup("hasPosts"))},function(){return["\n    ",HTML.DIV({"class":"posts grid list"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("posts"))},function(){return["\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("post_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "]}),"\n    "),"\n  "]},function(){return["\n    ",HTML.DIV({"class":"grid-small grid-block dialog"},"\n      ",HTML.P(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sorry_no_posts_for")})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("currentDate"))}),"."),"\n    "),"\n  "]})]})}();

!function(){Template.__checkName("posts_list"),Template.posts_list=new Template("Template.posts_list",function(){var e=this;return[Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("postsListIncoming")),data:Spacebars.call(e.lookup("incoming"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n  ",HTML.DIV({"class":"posts-wrapper grid grid-module"},"\n    ",HTML.DIV({"class":"posts list"},"\n      ",Blaze.Each(function(){return Spacebars.call(e.lookup("posts"))},function(){return["\n        ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("post_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n      "]}),"\n    "),"\n  "),"\n  ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("postsLoadMore"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})})]})}();

!function(){Template.__checkName("postsListIncoming"),Template.postsListIncoming=new Template("Template.postsListIncoming",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("count"))},function(){return["\n    ",HTML.A({"class":"more-button show-new grid-module",href:""},"\n      ",HTML.SPAN("\n        ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"view")})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("count"))})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"new")})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("pluralize"),e.lookup("count"),"post")}),"\n      "),"\n    "),"\n  "]})})}();

!function(){Template.__checkName("postsLoadMore"),Template.postsLoadMore=new Template("Template.postsLoadMore",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.lookup("hasMorePosts"))},function(){return["\n    ",HTML.A({"class":"more-button grid-module",href:function(){return Spacebars.mustache(e.lookup("loadMoreUrl"))}},HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"load_more")}))),"\n  "]},function(){return["\n    ",Blaze.Unless(function(){return Spacebars.call(e.lookup("ready"))},function(){return["\n      ",HTML.DIV({"class":"grid loading-module"},"\n        ",Spacebars.include(e.lookupTemplate("spinner")),"\n      "),"\n    "]}),"\n  "]})})}();

!function(){Template.__checkName("quickForm_settings"),Template.quickForm_settings=new Template("Template.quickForm_settings",function(){var a=this;return Blaze._TemplateWith(function(){return Spacebars.call(a.lookup("qfAutoFormContext"))},function(){return Spacebars.include(a.lookupTemplate("autoForm"),function(){return["\n\n    ",Blaze.Each(function(){return Spacebars.call(a.lookup("afFieldsets"))},function(){return["\n      ",HTML.FIELDSET("\n        ",HTML.H3({"class":"fieldset-heading"},Blaze.View(function(){return Spacebars.mustache(a.lookup("."))})),"\n        ",Blaze._TemplateWith(function(){return{fields:Spacebars.call(a.lookup("fieldsForFieldset")),omitFields:Spacebars.call(Spacebars.dot(a.lookup(".."),"atts","omitFields")),template:Spacebars.call("settings"),"input-col-class":Spacebars.call(a.lookup("inputClass")),"label-class":Spacebars.call(a.lookup("labelClass"))}},function(){return Spacebars.include(a.lookupTemplate("afQuickFields"))}),"\n      "),"\n    "]}),"\n    \n    ",Blaze.If(function(){return Spacebars.call(a.lookup("qfShouldRenderButton"))},function(){return["\n      ",HTML.DIV({"class":"form-group"},"\n        ",HTML.DIV({"class":function(){return Spacebars.mustache(a.lookup("labelClass"))}}),"\n        ",HTML.DIV({"class":function(){return Spacebars.mustache(a.lookup("inputClass"))}},"\n          ",HTML.BUTTON(HTML.Attrs(function(){return Spacebars.attrMustache(a.lookup("submitButtonAtts"))}),"\n          ",Spacebars.With(function(){return Spacebars.call(Spacebars.dot(a.lookup(".."),"atts","buttonContent"))},function(){return["\n            ",Blaze.View(function(){return Spacebars.mustache(a.lookup("."))}),"\n          "]},function(){return"\n            Submit\n          "}),"\n          "),"\n        "),"\n      "),"\n    "]}),"\n\n  "]})})}),Template.__checkName("afFormGroup_settings"),Template.afFormGroup_settings=new Template("Template.afFormGroup_settings",function(){var a=this;return Blaze.If(function(){return Spacebars.call(a.lookup("showField"))},function(){return["\n    ",HTML.DIV({"class":function(){return["form-group ",Blaze.If(function(){return Spacebars.dataMustache(a.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n      ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(a.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))})),"\n      ",HTML.DIV({"class":function(){return Spacebars.mustache(a.lookup("rightColumnClass"))}},"\n        ",Blaze._TemplateWith(function(){return Spacebars.call(a.lookup("afFieldInputAtts"))},function(){return Spacebars.include(a.lookupTemplate("afFieldInput"))}),"\n        ",Blaze.If(function(){return Spacebars.call(a.lookup("afFieldInstructions"))},function(){return["\n          ",HTML.SPAN({"class":"instructions-block"},Blaze.View(function(){return Spacebars.mustache(a.lookup("afFieldInstructions"))})),"\n        "]}),"\n        ",HTML.SPAN({"class":"help-block"},Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(a.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")})))})),"\n      "),"\n    "),"\n  "]})}),Template.__checkName("afObjectField_settings"),Template.afObjectField_settings=new Template("Template.afObjectField_settings",function(){var a=this;return HTML.DIV({"class":function(){return["form-group ",Blaze.If(function(){return Spacebars.dataMustache(a.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(a.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))})),"\n    ",HTML.DIV({"class":function(){return Spacebars.mustache(a.lookup("rightColumnClass"))}},"\n      ",HTML.DIV({"class":"panel panel-default autoform-padding-fix"},"\n        ",HTML.DIV({"class":"panel-body"},"\n        ",Blaze._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(a.lookup("."),"atts","name")),fields:Spacebars.call(Spacebars.dot(a.lookup("."),"atts","fields")),omitFields:Spacebars.call(Spacebars.dot(a.lookup("."),"atts","omitFields")),template:Spacebars.call("bootstrap3")}},function(){return Spacebars.include(a.lookupTemplate("afQuickFields"))}),"\n        "),"\n      "),"\n    "),"\n  ")}),Template.__checkName("afArrayField_settings"),Template.afArrayField_settings=new Template("Template.afArrayField_settings",function(){var a=this;return HTML.DIV({"class":function(){return["form-group ",Blaze.If(function(){return Spacebars.dataMustache(a.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))},function(){return"has-error"})]}},"\n    ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(a.lookup("afFieldLabelText"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))})),"\n    ",HTML.DIV({"class":function(){return Spacebars.mustache(a.lookup("rightColumnClass"))}},"\n      ",HTML.DIV({"class":"panel panel-default autoform-padding-fix"},"\n        ",Blaze.If(function(){return Spacebars.dataMustache(a.lookup("afFieldIsInvalid"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")}))},function(){return["\n        ",HTML.DIV({"class":"panel-body has-error"},"\n          ",HTML.SPAN({"class":"help-block"},Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(a.lookup("afFieldMessage"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name")})))})),"\n        "),"\n        "]}),"\n        ",HTML.UL({"class":"list-group"},"\n          ",Blaze._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(a.lookup("."),"atts","name")),minCount:Spacebars.call(Spacebars.dot(a.lookup("."),"atts","minCount")),maxCount:Spacebars.call(Spacebars.dot(a.lookup("."),"atts","maxCount"))}},function(){return Spacebars.include(a.lookupTemplate("afEachArrayItem"),function(){return["\n          ",HTML.LI({"class":"list-group-item autoform-array-item"},"\n            ",HTML.DIV({"class":"media"},"\n              ",Blaze.If(function(){return Spacebars.dataMustache(a.lookup("afArrayFieldHasMoreThanMinimum"),Spacebars.kw({name:Spacebars.dot(a.lookup(".."),"atts","name"),minCount:Spacebars.dot(a.lookup(".."),"atts","minCount"),maxCount:Spacebars.dot(a.lookup(".."),"atts","maxCount")}))},function(){return["\n              ",HTML.BUTTON({"class":"btn btn-primary autoform-remove-item pull-left"},HTML.SPAN({"class":"glyphicon glyphicon-minus"})),"\n              "]}),"\n              ",HTML.DIV({"class":"media-body"},"\n                ",Blaze._TemplateWith(function(){return{name:Spacebars.call(Spacebars.dot(a.lookup("."),"name")),label:Spacebars.call(!1)}},function(){return Spacebars.include(a.lookupTemplate("afQuickField"))}),"\n              "),"\n            "),"\n          "),"\n          "]})}),"\n          ",Blaze.If(function(){return Spacebars.dataMustache(a.lookup("afArrayFieldHasLessThanMaximum"),Spacebars.kw({name:Spacebars.dot(a.lookup("."),"atts","name"),minCount:Spacebars.dot(a.lookup("."),"atts","minCount"),maxCount:Spacebars.dot(a.lookup("."),"atts","maxCount")}))},function(){return["\n          ",HTML.LI({"class":"list-group-item"},"\n            ",HTML.BUTTON({"class":"btn btn-primary autoform-add-item","data-autoform-field":function(){return Spacebars.mustache(Spacebars.dot(a.lookup("."),"atts","name"))},"data-autoform-mincount":function(){return Spacebars.mustache(Spacebars.dot(a.lookup("."),"atts","minCount"))},"data-autoform-maxcount":function(){return Spacebars.mustache(Spacebars.dot(a.lookup("."),"atts","maxCount"))}},HTML.SPAN({"class":"glyphicon glyphicon-plus"})),"\n          "),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  ")}),Template.__checkName("afCheckbox_settings"),Template.afCheckbox_settings=new Template("Template.afCheckbox_settings",function(){var a=this;return HTML.DIV({"class":"checkbox"},"\n    ",HTML.LABEL("\n      ",HTML.INPUT(HTML.Attrs({type:"checkbox",value:function(){return Spacebars.mustache(Spacebars.dot(a.lookup("."),"value"))}},function(){return Spacebars.attrMustache(a.lookup("atts"))})),"aaaa\n    "),"\n  ")})}();

!function(){Template.__checkName("invites"),Template.invites=new Template("Template.invites",function(){var n=this;return HTML.DIV({"class":"grid-small grid-block dialog admin"},HTML.Raw("\n    <h2>Invites</h2>\n    \n    "),Blaze.If(function(){return Spacebars.call(n.lookup("canCurrentUserInvite"))},function(){return["\n      ",Blaze._TemplateWith(function(){return{schema:Spacebars.call(n.lookup("invitesSchema")),id:Spacebars.call("inviteForm"),"class":Spacebars.call("form-block"),type:Spacebars.call("method"),meteormethod:Spacebars.call("inviteUser")}},function(){return Spacebars.include(n.lookupTemplate("autoForm"),function(){return["\n        ",HTML.H3("Invite someone"),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL("Email"),"\n          ",HTML.DIV({"class":"controls"},"\n            ",Blaze._TemplateWith(function(){return{name:Spacebars.call("invitedUserEmail")}},function(){return Spacebars.include(n.lookupTemplate("afFieldInput"))}),"\n          "),"\n        "),"\n        ",HTML.DIV({"class":"form-actions"},"\n          ",Blaze.If(function(){return Spacebars.dataMustache(n.lookup("afFieldIsInvalid"),Spacebars.kw({name:"invitedUserEmail"}))},function(){return"\n            This is not a valid email\n          "}),"\n          ",HTML.INPUT({type:"submit","class":"button",value:"Invite"}),"\n        "),"\n      "]})}),"\n    "]}),"\n\n    ",HTML.TABLE("\n      ",HTML.THEAD("\n        ",HTML.TR("\n          ",HTML.TD("Email"),"\n          ",HTML.TD("Accepted"),"\n        "),"\n      "),"\n      ",HTML.TBODY("\n          ",Blaze.Each(function(){return Spacebars.call(n.lookup("invites"))},function(){return["\n          ",HTML.TR("\n            ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("invitedUserEmail"))})),"\n            ",HTML.TD(Blaze.If(function(){return Spacebars.call(n.lookup("accepted"))},function(){return HTML.I({"class":"icon-check"})})),"\n          "),"\n          "]}),"\n      "),"\n    "),"\n\n  ")})}();

!function(){Template.__checkName("user_edit"),Template.user_edit=new Template("Template.user_edit",function(){var n=this;return[HTML.DIV({"class":"grid-small grid-module dialog user-edit"},"\n  	",Spacebars.With(function(){return Spacebars.call(n.lookup("user"))},function(){return["\n    ",Blaze.If(function(){return Spacebars.call(n.lookup("profileIncomplete"))},function(){return["\n    ",HTML.DIV("\n      ",Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"please_complete_your_profile_below_before_continuing")}),"\n    "),"\n    "]}),"\n    ",HTML.FORM({id:"account-form"},"\n      ",HTML.H2(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"account")})),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"username")})),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({id:"username",name:"username",disabled:"disabled",type:"text",value:function(){return Spacebars.mustache(n.lookup("userName"))}}),"\n        "),"\n        ",HTML.P({"class":"note"},"Profile URL: ",Blaze.View(function(){return Spacebars.mustache(n.lookup("profileUrl"))})),"\n      "),"\n",HTML.Comment('       <div class="control-group">\n        <label>Email</label>\n        <div class="controls">\n          <input id="email" name="email" disabled="disabled" type="text" value="{{email}}" />\n        </div>\n      </div> '),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"display_name")})),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"name",type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"name"))}}),"\n        "),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"email")})),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"email",type:"text",value:function(){return Spacebars.mustache(n.lookup("userEmail"))}}),"\n        "),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"bio")})),"\n        ",HTML.DIV({"class":"controls"},HTML.TEXTAREA({name:"bio",type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"bio"))}})),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n      ",HTML.LABEL("Twitter Username"),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"twitter",type:"text",value:function(){return Spacebars.mustache(n.lookup("getTwitter"))}}),"\n        "),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL("GitHub Username"),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"github",type:"text",value:function(){return Spacebars.mustache(n.lookup("getGitHub"))}}),"\n        "),"\n      "),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL("Site"),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"site",type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"site"))}}),"\n        "),"\n      "),"\n      ",Blaze.If(function(){return Spacebars.call(n.lookup("hasPassword"))},function(){return["\n        ",HTML.H3(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"change_password")})),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"old_password")})),"\n          ",HTML.DIV({"class":"controls"},HTML.INPUT({name:"old_password",type:"password",value:""})),"\n        "),"\n        ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"new_password")})),"\n          ",HTML.DIV({"class":"controls"},HTML.INPUT({name:"new_password",type:"password",value:""})),"\n        "),"\n      "]}),"\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.LABEL({"class":"control-label"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"email_notifications")})),"\n        ",HTML.DIV({"class":"controls"},"\n          ",Blaze.If(function(){return Spacebars.call(n.lookup("isAdmin"))},function(){return["\n            ",HTML.LABEL({"class":"checkbox"},"\n              ",HTML.INPUT(HTML.Attrs({id:"notifications_users",type:"checkbox",name:"notifications_users"},function(){return Spacebars.attrMustache(n.lookup("hasNotificationsUsers"))}))," New Users\n            "),"\n          "]}),"\n          ",HTML.LABEL({"class":"checkbox"},"\n            ",HTML.INPUT(HTML.Attrs({id:"notifications_posts",type:"checkbox",name:"notifications_posts"},function(){return Spacebars.attrMustache(n.lookup("hasNotificationsPosts"))}))," ",Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"new_posts")}),"\n          "),"\n          ",HTML.LABEL({"class":"checkbox"},"\n            ",HTML.INPUT(HTML.Attrs({id:"notifications_comments",type:"checkbox",name:"notifications_comments"},function(){return Spacebars.attrMustache(n.lookup("hasNotificationsComments"))}))," ",Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"comments_on_my_posts")}),"\n          "),"\n          ",HTML.LABEL({"class":"checkbox"},"\n            ",HTML.INPUT(HTML.Attrs({id:"notifications_replies",type:"checkbox",name:"notifications_replies"},function(){return Spacebars.attrMustache(n.lookup("hasNotificationsReplies"))}))," ",Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"replies_to_my_comments")}),"\n          "),"\n        "),"\n      "),"\n      ",Blaze.If(function(){return Spacebars.call(n.lookup("isAdmin"))},function(){return["\n      ",HTML.DIV({"class":"control-group"},"\n        ",HTML.H3("Invites"),"\n        ",HTML.LABEL("Invites"),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"inviteCount",type:"text",value:function(){return Spacebars.mustache(n.lookup("inviteCount"))}}),"\n        "),"\n      "),"\n      "]}),"\n      ",HTML.DIV({"class":"form-actions"},"\n        ",HTML.A({href:"/forgot-password"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"forgot_password")})),"\n        ",HTML.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(n.lookup("_"),"submit")}}),"\n      "),"\n    "),"\n    "]}),"\n  "),"\n\n  ",Spacebars.include(n.lookupTemplate("invites"))]})}();

!function(){Template.__checkName("user_email"),Template.user_email=new Template("Template.user_email",function(){var e=this;return HTML.DIV({"class":"grid-small grid-block dialog user-edit"},"\n  	",Spacebars.With(function(){return Spacebars.call(e.lookup("user"))},function(){return["\n    ",HTML.DIV("\n      ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"please_fill_in_your_email_below_to_finish_signing_up")}),"\n    "),"\n    ",HTML.FORM("\n      ",HTML.DIV({"class":"control-group"},"\n          ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"username")})),"\n          ",HTML.DIV({"class":"controls"},"\n              ",HTML.INPUT({name:"username",type:"text",value:function(){return Spacebars.mustache(e.lookup("username"))}}),"\n          "),"\n        ",HTML.BR(),"\n        ",HTML.LABEL(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"email")})),"\n        ",HTML.DIV({"class":"controls"},"\n          ",HTML.INPUT({name:"email",type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("profile"),"email"))}}),"\n        "),"\n      "),"\n      ",HTML.DIV({"class":"form-actions"},"\n        ",HTML.INPUT({type:"submit","class":"button",value:function(){return Spacebars.mustache(e.lookup("_"),"submit")}}),"\n      "),"\n    "),"\n    "]}),"\n  ")})}();

!function(){Template.__checkName("user_item"),Template.user_item=new Template("Template.user_item",function(){var e=this;return HTML.TR({"class":"user"},"\n	",HTML.TD(Blaze._TemplateWith(function(){return{user:Spacebars.call(e.lookup(".")),shape:Spacebars.call("circle")}},function(){return Spacebars.include(e.lookupTemplate("avatar"))})),"\n	",HTML.TD("\n		",HTML.A({href:function(){return Spacebars.mustache(e.lookup("getProfileUrl"))}},Blaze.View(function(){return Spacebars.mustache(e.lookup("displayName"))})),"\n		",HTML.Raw("<br>"),"\n		",HTML.A({href:function(){return["mailto:",Spacebars.mustache(e.lookup("getEmail"))]}},Blaze.View(function(){return Spacebars.mustache(e.lookup("getEmail"))})),"\n	"),"\n	",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("createdAtFormatted"))})),"\n	",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("postCount"))})),"\n	",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("commentCount"))})),"\n	",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("getKarma"))})),"\n	",HTML.TD("\n		",Blaze.If(function(){return Spacebars.call(e.lookup("invites"))},function(){return["\n		",HTML.H4(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invited")})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("invitedCount"))})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"users")}),":"),"\n		",HTML.UL("\n			",Blaze.Each(function(){return Spacebars.call(e.lookup("invites"))},function(){return["\n				",HTML.LI(HTML.A({href:function(){return Spacebars.mustache(e.lookup("getInvitedUserProfileUrl"))}},Blaze.View(function(){return Spacebars.mustache(e.lookup("invitedName"))}))),"\n			"]}),"\n		"),"\n		"]}),"\n		",HTML.P("(",Blaze.View(function(){return Spacebars.mustache(e.lookup("inviteCount"))})," ",Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invites_left")}),")"),"\n	"),"\n	",HTML.TD(Blaze.If(function(){return Spacebars.call(e.lookup("isInvited"))},function(){return HTML.I({"class":"icon-check"})})),"\n	",HTML.TD(Blaze.If(function(){return Spacebars.call(e.lookup("userIsAdmin"))},function(){return HTML.I({"class":"icon-check"})})),"\n	",HTML.TD("\n		",HTML.UL("\n			",HTML.LI(Blaze.If(function(){return Spacebars.call(e.lookup("isInvited"))},function(){return HTML.A({"class":"uninvite-link",href:"#"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"uninvite")}))},function(){return HTML.A({href:"#","class":"invite-link"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invite")}))})),"\n			",HTML.LI(Blaze.If(function(){return Spacebars.call(e.lookup("userIsAdmin"))},function(){return HTML.A({"class":"unadmin-link",href:"#"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"unadmin")}))},function(){return HTML.A({href:"#","class":"admin-link"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"make_admin")}))})),"\n			",HTML.LI(HTML.A({"class":"delete-link",href:"#"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"delete_user")}))),"\n		"),"\n	"),"\n")})}();

!function(){Template.__checkName("user_profile"),Template.user_profile=new Template("Template.user_profile",function(){var n=this;return Spacebars.With(function(){return Spacebars.call(n.lookup("user"))},function(){return["\n		",HTML.DIV({"class":"user-profile grid grid-module"},"\n			",HTML.TABLE("\n				",HTML.TR("\n					",HTML.TD({colspan:"2"},Blaze._TemplateWith(function(){return{user:Spacebars.call(n.lookup(".")),size:Spacebars.call("large"),shape:Spacebars.call("circle")}},function(){return Spacebars.include(n.lookupTemplate("avatar"))})),"\n				"),"\n				",Blaze.If(function(){return Spacebars.call(n.lookup("isAdmin"))},function(){return["\n					",HTML.TR("\n						",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"id")}),": "),"\n						",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_id"))})),"\n					"),"\n				"]}),"\n				",HTML.TR("\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"name")})),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"name"))})),"\n				"),"\n				",HTML.TR("\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"member_since")}),":"),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("createdAtFormatted"))})),"\n				"),"\n				",HTML.TR("\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"bio")})),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"bio"))})),"\n				"),"\n				",Blaze.If(function(){return Spacebars.call(n.lookup("getTwitterName"))},function(){return["\n					",HTML.TR("\n						",HTML.TD("Twitter: "),"\n						",HTML.TD(HTML.A({href:function(){return["http://twitter.com/",Spacebars.mustache(n.lookup("getTwitterName"))]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("getTwitterName"))}))),"\n					"),"\n				"]}),"\n				",Blaze.If(function(){return Spacebars.call(n.lookup("getGitHubName"))},function(){return["\n					",HTML.TR("\n						",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"github")}),":"),"\n						",HTML.TD(HTML.A({href:function(){return["http://github.com/",Spacebars.mustache(n.lookup("getGitHubName"))]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("getGitHubName"))}))),"\n					"),"\n				"]}),"\n				",Blaze.If(function(){return Spacebars.call(Spacebars.dot(n.lookup("profile"),"site"))},function(){return["\n					",HTML.TR("\n						",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"site")}),":"),"\n						",HTML.TD(HTML.A({href:function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"site"))}},Blaze.View(function(){return Spacebars.mustache(Spacebars.dot(n.lookup("profile"),"site"))}))),"\n					"),"\n				"]}),"\n			"),"\n			",Blaze.If(function(){return Spacebars.call(n.lookup("canEditProfile"))},function(){return["\n				",HTML.A({"class":"button inline",href:function(){return["/users/",Spacebars.mustache(n.lookup("slug")),"/edit"]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"edit_profile")})),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(n.lookup("canInvite"))},function(){return["\n				",Blaze.If(function(){return Spacebars.call(n.lookup("inviteCount"))},function(){return["\n					",HTML.A({"class":"button inline invite-link",href:"#"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"invite")})," (",Blaze.View(function(){return Spacebars.mustache(n.lookup("inviteCount"))})," ",Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"left")}),")"),"\n				"]},function(){return["\n					",HTML.A({"class":"button inline disabled",href:"#"},Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"invite_none_left")})),"\n				"]}),"\n			"]}),"\n		"),"\n\n		",HTML.DIV({"class":"user-profile-posts grid grid-module"},"\n			",HTML.H3(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"posts")})),"\n			",HTML.TABLE("\n			",HTML.THEAD("\n				",HTML.TR("\n					",HTML.TD("Post"),"\n					",HTML.TD("Created At"),"\n				"),"\n			"),"\n			",Blaze.Each(function(){return Spacebars.call(n.lookup("posts"))},function(){return["\n				",HTML.TR("\n					",HTML.TD(HTML.A({href:function(){return["/posts/",Spacebars.mustache(n.lookup("_id")),"/"]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("title"))}))),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("formatDate"),n.lookup("createdAt"),"MM/DD/YYYY, HH:mm")})),"\n				"),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(n.lookup("hasMorePosts"))},function(){return["\n				",HTML.TR("\n					",HTML.TD({colspan:"2"},"\n    				",HTML.A({"class":"posts-more more-button grid-module",href:"#"},HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"load_more")}))),"\n					"),"\n				"),"\n			"]}),"\n			"),"\n		"),"\n\n		",HTML.DIV({"class":"user-profile-votes grid grid-module"},"\n			",HTML.H3(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"upvoted_posts")})),"\n			",HTML.TABLE("\n			",HTML.THEAD("\n				",HTML.TR("\n					",HTML.TD("Post"),"\n					",HTML.TD("Upvoted At"),"\n				"),"\n			"),"\n			",Blaze.Each(function(){return Spacebars.call(n.lookup("upvotedPosts"))},function(){return["\n				",HTML.TR("\n					",HTML.TD(HTML.A({href:function(){return["/posts/",Spacebars.mustache(n.lookup("_id")),"/"]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("title"))}))),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("formatDate"),n.lookup("votedAt"),"MM/DD/YYYY, HH:mm")})),"\n				"),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(n.lookup("hasMoreUpvotedPosts"))},function(){return["\n				",HTML.TR("\n					",HTML.TD({colspan:"2"},"\n    				",HTML.A({"class":"upvotedposts-more more-button grid-module",href:"#"},HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"load_more")}))),"\n					"),"\n				"),"\n			"]}),"\n			"),"\n		"),"\n\n		",HTML.DIV({"class":"user-profile-votes grid grid-module"},"\n			",HTML.H3(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"downvoted_posts")})),"\n			",HTML.TABLE("\n			",HTML.THEAD("\n				",HTML.TR("\n					",HTML.TD("Post"),"\n					",HTML.TD("Downvoted At"),"\n				"),"\n			"),"\n			",Blaze.Each(function(){return Spacebars.call(n.lookup("downvoted"))},function(){return["\n				",HTML.TR("\n					",HTML.TD(HTML.A({href:function(){return["/posts/",Spacebars.mustache(n.lookup("_id")),"/"]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("title"))}))),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("formatDate"),n.lookup("votedAt"),"MM/DD/YYYY, HH:mm")})),"\n				"),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(n.lookup("hasMoreDownvotedPosts"))},function(){return["\n				",HTML.TR("\n					",HTML.TD({colspan:"2"},"\n    				",HTML.A({"class":"downvoted-more more-button grid-module",href:"#"},HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"load_more")}))),"\n					"),"\n				"),"\n			"]}),"\n			"),"\n		"),"\n\n		",HTML.DIV({"class":"user-profile-comments grid grid-module"},"\n			",HTML.H3(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"comments_")})),"\n			",HTML.TABLE("\n			",HTML.THEAD("\n				",HTML.TR("\n					",HTML.TD("Post"),"\n					",HTML.TD("Comment"),"\n					",HTML.TD("Commented At"),"\n				"),"\n			"),"\n			",Blaze.Each(function(){return Spacebars.call(n.lookup("comments"))},function(){return["\n				",HTML.TR("\n					",HTML.TD(HTML.A({href:function(){return["/posts/",Spacebars.mustache(n.lookup("postId")),"/"]}},Blaze.View(function(){return Spacebars.mustache(n.lookup("postTitle"))}))),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.makeRaw(Spacebars.mustache(n.lookup("htmlBody")))})),"\n					",HTML.TD(Blaze.View(function(){return Spacebars.mustache(n.lookup("formatDate"),n.lookup("createdAt"),"MM/DD/YYYY, HH:mm")})),"\n				"),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(n.lookup("hasMoreComments"))},function(){return["\n				",HTML.TR("\n					",HTML.TD({colspan:"2"},"\n    				",HTML.A({"class":"comments-more more-button grid-module",href:"#"},HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(n.lookup("_"),"load_more")}))),"\n					"),"\n				"),"\n			"]}),"\n			"),"\n		"),"\n\n	"]})})}();

!function(){Template.__checkName("users"),Template.users=new Template("Template.users",function(){var e=this;return HTML.DIV({"class":"grid grid-module"},"\n      ",HTML.DIV({"class":"user-table grid-block"},"\n        ",HTML.H2(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"users")})),"\n        ",HTML.DIV({"class":"filter-sort"},"\n          ",HTML.P({"class":"filter"},"\n            ",HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"filter_by")}),": "),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"all")},href:function(){return Spacebars.mustache(e.lookup("filterBy"),"all")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"all")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"invited")},href:function(){return Spacebars.mustache(e.lookup("filterBy"),"invited")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invited")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"uninvited")},href:function(){return Spacebars.mustache(e.lookup("filterBy"),"uninvited")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"uninvited")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"admin")},href:function(){return Spacebars.mustache(e.lookup("filterBy"),"admin")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"admin")})),"\n          "),"\n          ",HTML.P({"class":"sort"},"\n            ",HTML.SPAN(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"sort_by")}),": "),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"createdAt")},href:function(){return Spacebars.mustache(e.lookup("sortBy"),"createdAt")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"created")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"karma")},href:function(){return Spacebars.mustache(e.lookup("sortBy"),"karma")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"karma")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"username")},href:function(){return Spacebars.mustache(e.lookup("sortBy"),"username")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"username")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"postCount")},href:function(){return Spacebars.mustache(e.lookup("sortBy"),"postCount")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"posts")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"commentCount")},href:function(){return Spacebars.mustache(e.lookup("sortBy"),"commentCount")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"comments_")})),"\n            ",HTML.A({"class":function(){return Spacebars.mustache(e.lookup("activeClass"),"invitedCount")},href:function(){return Spacebars.mustache(e.lookup("sortBy"),"invitedCount")}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invitedcount")})),"\n          "),"\n        "),"\n        ",HTML.TABLE("\n          ",HTML.THEAD("\n            ",HTML.TR("\n              ",HTML.TD({colspan:"2"},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"name")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"member_since")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"posts")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"comments_")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"karma")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invites")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"invited")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"admin")})),"\n              ",HTML.TD(Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"actions")})),"\n            "),"\n          "),"\n          ",HTML.TBODY("\n              ",Blaze.Each(function(){return Spacebars.call(e.lookup("users"))},function(){return["\n                ",Blaze._TemplateWith(function(){return{template:Spacebars.call(e.lookup("user_item"))}},function(){return Spacebars.include(function(){return Spacebars.call(Template.__dynamic)})}),"\n              "]}),"\n          "),"\n        "),"\n        ",HTML.DIV({"class":function(){return["grid more-button ",Blaze.If(function(){return Spacebars.call(e.lookup("allPostsLoaded"))},function(){return" hidden "})]}},"\n          ",HTML.A({"class":"more-link",href:function(){return Spacebars.mustache(e.lookup("loadMoreUrl"))}},Blaze.View(function(){return Spacebars.mustache(e.lookup("_"),"load_more")})),"\n        "),"\n      "),"\n    ")})}();

!function(){AccountsTemplates.addField({_id:"username",type:"text",displayName:"username",required:!0,minLength:3,errStr:"error.minChar"}),AccountsTemplates.removeField("email"),AccountsTemplates.addField({_id:"email",type:"email",required:!0,re:/.+@(.+){2,}\.(.+){2,}/,errStr:"error.accounts.Invalid email",trim:!0,lowercase:!0}),AccountsTemplates.removeField("password"),AccountsTemplates.addField({_id:"password",type:"password",required:!0,minLength:8,errStr:"error.minChar"}),AccountsTemplates.configureRoute("signIn"),AccountsTemplates.configureRoute("signUp"),AccountsTemplates.configureRoute("forgotPwd"),AccountsTemplates.configureRoute("resetPwd"),AccountsTemplates.configure({enablePasswordChange:!1,showForgotPasswordLink:!0,confirmPassword:!1,overrideLoginErrors:!0,negativeFeedback:!1,positiveFeedback:!1,negativeValidation:!0,positiveValidation:!0})}();

!function(){Avatar.options={emailHashProperty:"email_hash"}}();

!function(){CommentPageController=FastRender.RouteController.extend({waitOn:function(){return[coreSubscriptions.subscribe("singleComment",this.params._id),coreSubscriptions.subscribe("commentUser",this.params._id),coreSubscriptions.subscribe("commentPost",this.params._id)]},data:function(){return{comment:Comments.findOne(this.params._id)}},onAfterAction:function(){window.queueComments=!1}}),Meteor.startup(function(){Router.route("/comments/:_id",{name:"comment_reply",template:getTemplate("comment_reply"),controller:CommentPageController,onAfterAction:function(){window.queueComments=!1}}),Router.route("/comments/:_id/edit",{name:"comment_edit",template:getTemplate("comment_edit"),controller:CommentPageController,onAfterAction:function(){window.queueComments=!1}})})}();

!function(){var e={RouteController:RouteController,onAllRoutes:function(){}};Router.setTemplateNameConverter(function(e){return e}),preloadSubscriptions.push("settings"),preloadSubscriptions.push("currentUser"),Router.configure({layoutTemplate:getTemplate("layout"),loadingTemplate:getTemplate("loading"),notFoundTemplate:getTemplate("notFound"),waitOn:function(){return _.map(preloadSubscriptions,function(e){"object"==typeof e?Meteor.subscribe(e.subName,e.subArguments):Meteor.subscribe(e)})}}),Meteor.isServer&&e.onAllRoutes(function(){var e=this;_.each(preloadSubscriptions,function(t){e.subscribe(t)})})}();

!function(){Router._filters={isReady:function(){this.ready()?this.next():this.render(getTemplate("loading"))},clearSeenErrors:function(){clearSeenErrors(),this.next()},resetScroll:function(){var e=window.currentScroll||0,t=$("body");t.scrollTop(e),t.css("min-height",0)},isLoggedIn:AccountsTemplates.ensureSignedIn,isLoggedOut:function(){Meteor.user()?this.render("already_logged_in"):this.next()},isAdmin:function(){this.ready()&&(isAdmin()?this.next():this.render(getTemplate("no_rights")))},canView:function(){!this.ready()||Meteor.loggingIn()?this.render(getTemplate("loading")):canView()?this.next():this.render(getTemplate("no_rights"))},canPost:function(){!this.ready()||Meteor.loggingIn()?this.render(getTemplate("loading")):canPost()?this.next():(throwError(i18n.t("sorry_you_dont_have_permissions_to_add_new_items")),this.render(getTemplate("no_rights")))},canEditPost:function(){if(this.ready()){var e=Posts.findOne(this.params._id);currentUserCanEdit(e)?this.next():(throwError(i18n.t("sorry_you_cannot_edit_this_post")),this.render(getTemplate("no_rights")))}},canEditComment:function(){if(this.ready()){var e=Comments.findOne(this.params._id);currentUserCanEdit(e)?this.next():(throwError(i18n.t("sorry_you_cannot_edit_this_comment")),this.render(getTemplate("no_rights")))}},hasCompletedProfile:function(){if(this.ready()){var e=Meteor.user();e&&!userProfileComplete(e)?this.render(getTemplate("user_email")):this.next()}},setTitle:function(){var e=getSetting("title"),t=getSetting("tagline");document.title=(t?e+": "+t:e)||""}},filters=Router._filters,coreSubscriptions=new SubsManager({cacheLimit:50,expireIn:30}),Meteor.startup(function(){Meteor.isClient&&(Router.onRun(function(){Session.set("categorySlug",null),-1==getCurrentRoute().indexOf("search")&&(Session.set("searchQuery",""),$(".search-field").val("").blur()),this.next()}),Router.onBeforeAction(filters.isReady),Router.onBeforeAction(filters.clearSeenErrors),Router.onBeforeAction(filters.canView,{except:["atSignIn","atSignUp","atForgotPwd","atResetPwd","signOut"]}),Router.onBeforeAction(filters.hasCompletedProfile),Router.onBeforeAction(filters.isLoggedIn,{only:["post_submit"]}),Router.onBeforeAction(filters.isLoggedOut,{only:[]}),Router.onBeforeAction(filters.canPost,{only:["posts_pending","post_submit"]}),Router.onBeforeAction(filters.canEditPost,{only:["post_edit"]}),Router.onBeforeAction(filters.canEditComment,{only:["comment_edit"]}),Router.onBeforeAction(filters.isAdmin,{only:["posts_pending","all-users","settings","toolbox","logs"]}),Router.onAfterAction(analyticsInit),Router.onAfterAction(analyticsRequest),Router.onAfterAction(filters.setTitle))})}();

!function(){Meteor.startup(function(){Router.route("/settings",{name:"settings",template:getTemplate("settings"),data:function(){return{hasSettings:!!Settings.find().count(),settings:Settings.findOne()}}}),Router.route("/loading",{name:"loading",template:getTemplate("loading")}),Router.route("/toolbox",{name:"toolbox",template:getTemplate("toolbox")})})}();

!function(){var getDefaultViewController=function(){var defaultView=getSetting("defaultView","top");return defaultView=defaultView.charAt(0).toUpperCase()+defaultView.slice(1),eval("Posts"+defaultView+"Controller")};PostsListController=FastRender.RouteController.extend({template:getTemplate("posts_list"),subscriptions:function(){this._terms={view:this.view,limit:this.params.limit||getSetting("postsPerPage",10),category:this.params.slug},Meteor.isClient&&(this._terms.query=Session.get("searchQuery")),this.postsListSub=coreSubscriptions.subscribe("postsList",this._terms),this.postsListUsersSub=coreSubscriptions.subscribe("postsListUsers",this._terms)},data:function(){this._terms={view:this.view,limit:this.params.limit||getSetting("postsPerPage",10),category:this.params.slug},Meteor.isClient&&(this._terms.query=Session.get("searchQuery"));var t=getPostsParameters(this._terms),e=Posts.find(t.find,t.options).count();t.find.createdAt={$lte:Session.get("listPopulatedAt")};var s=Posts.find(t.find,t.options);t.find.createdAt={$gt:Session.get("listPopulatedAt")};var o=Posts.find(t.find,t.options);return Session.set("postsLimit",this._terms.limit),{incoming:o,postsList:s,postCount:e,ready:this.postsListSub.ready}},onAfterAction:function(){Session.set("view",this.view)}}),PostsTopController=PostsListController.extend({view:"top"}),PostsNewController=PostsListController.extend({view:"new"}),PostsBestController=PostsListController.extend({view:"best"}),PostsPendingController=PostsListController.extend({view:"pending"}),PostsDigestController=FastRender.RouteController.extend({template:getTemplate("posts_digest"),waitOn:function(){var t=this.params.day?new Date(this.params.year,this.params.month-1,this.params.day):new Date,e={view:"digest",after:moment(t).startOf("day").toDate(),before:moment(t).endOf("day").toDate()};return[coreSubscriptions.subscribe("postsList",e),coreSubscriptions.subscribe("postsListUsers",e)]},data:function(){var t=this.params.day?new Date(this.params.year,this.params.month-1,this.params.day):Session.get("today"),e={view:"digest",after:moment(t).startOf("day").toDate(),before:moment(t).endOf("day").toDate()},s=getPostsParameters(e);Session.set("currentDate",t),s.find.createdAt={$lte:Session.get("listPopulatedAt")};var o=Posts.find(s.find,s.options);s.find.createdAt={$gt:Session.get("listPopulatedAt")};var i=Posts.find(s.find,s.options);return{incoming:i,posts:o}}}),PostPageController=FastRender.RouteController.extend({template:getTemplate("post_page"),waitOn:function(){this.postSubscription=coreSubscriptions.subscribe("singlePost",this.params._id),this.postUsersSubscription=coreSubscriptions.subscribe("postUsers",this.params._id),this.commentSubscription=coreSubscriptions.subscribe("postComments",this.params._id)},post:function(){return Posts.findOne(this.params._id)},onBeforeAction:function(){this.post()?this.next():this.render(this.postSubscription.ready()?getTemplate("not_found"):getTemplate("loading"))},onRun:function(){var t=Meteor.default_connection&&Meteor.default_connection._lastSessionId?Meteor.default_connection._lastSessionId:null;Meteor.call("increasePostViews",this.params._id,t)},data:function(){return this.post()}}),Meteor.startup(function(){Router.route("/",{name:"posts_default",controller:getDefaultViewController()}),Router.route("/top/:limit?",{name:"posts_top",controller:PostsTopController}),Router.route("/new/:limit?",{name:"posts_new",controller:PostsNewController}),Router.route("/best/:limit?",{name:"posts_best",controller:PostsBestController}),Router.route("/pending/:limit?",{name:"posts_pending",controller:PostsPendingController}),Router.route("/digest/:year/:month/:day",{name:"posts_digest",controller:PostsDigestController}),Router.route("/digest",{name:"posts_digest_default",controller:PostsDigestController}),Router.route("/posts/:_id",{name:"post_page",controller:PostPageController,waitOn:function(){return coreSubscriptions.subscribe("postedFiles",this.params._id)}}),Router.route("/posts/:_id/comment/:commentId",{name:"post_page_comment",controller:PostPageController,onAfterAction:function(){}}),Router.route("/posts/:_id/edit",{name:"post_edit",template:getTemplate("post_edit"),waitOn:function(){return[coreSubscriptions.subscribe("postedFiles",this.params._id),coreSubscriptions.subscribe("singlePost",this.params._id),coreSubscriptions.subscribe("allUsersAdmin")]},data:function(){return{postId:this.params._id,post:Posts.findOne(this.params._id)}},fastRender:!0}),Router.route("/submit",{name:"post_submit",template:getTemplate("post_submit"),waitOn:function(){return[coreSubscriptions.subscribe("uploadedFiles"),coreSubscriptions.subscribe("allUsersAdmin")]}})})}();

!function(){Meteor.startup(function(){Router.route("/out",{name:"out",where:"server",action:function(){var e=this.request.query;if(e.url){var t=decodeURIComponent(e.url),r=Posts.findOne({url:t});if(r){var o=Meteor.default_connection&&Meteor.default_connection._lastSessionId?Meteor.default_connection._lastSessionId:null;Meteor.call("increasePostClicks",r._id,o)}this.response.writeHead(302,{Location:e.url}),this.response.end()}}}),Router.route("/email/account-approved/:id?",{name:"accountApproved",where:"server",action:function(){var e=Meteor.users.findOne(this.params.id),t={profileUrl:getProfileUrl(e),username:getUserName(e),siteTitle:getSetting("title"),siteUrl:getSiteUrl()};html=Handlebars.templates[getTemplate("emailAccountApproved")](t),this.response.write(buildEmailTemplate(html)),this.response.end()}})})}();

!function(){UserPageController=FastRender.RouteController.extend({waitOn:function(){return[coreSubscriptions.subscribe("userProfile",this.params._idOrSlug)]},data:function(){var e=Meteor.users.findOne(this.params._idOrSlug),r=Meteor.users.findOne({slug:this.params._idOrSlug});return"undefined"==typeof e?{user:"undefined"==typeof e?r:e}:void Router.go(getProfileUrl(e),{replaceState:!0})}}),AccountController=FastRender.RouteController.extend({waitOn:function(){return coreSubscriptions.subscribe("invites")},data:function(){return{user:Meteor.user(),invites:Invites.find({invitingUserId:Meteor.userId()})}}}),Meteor.startup(function(){Router.route("/sign-out",{name:"signOut",onBeforeAction:function(){Meteor.logout(function(){return Router.go("/")})}}),Router.route("/users/:_idOrSlug",{name:"user_profile",template:getTemplate("user_profile"),controller:UserPageController}),Router.route("/users/:_idOrSlug/edit",{name:"user_edit",template:getTemplate("user_edit"),controller:UserPageController}),Router.route("/account",{name:"account",template:getTemplate("user_edit"),controller:AccountController}),Router.route("/all-users/:limit?",{name:"all-users",template:getTemplate("users"),waitOn:function(){var e=parseInt(this.params.limit)||20;return coreSubscriptions.subscribe("allUsers",this.params.filterBy,this.params.sortBy,e)},data:function(){var e=parseInt(this.params.limit)||20,r=getUsersParameters(this.params.query.filterBy,this.params.query.sortBy,e),t="string"==typeof this.params.query.filterBy?this.params.query.filterBy:"all",s="string"==typeof this.params.query.sortBy?this.params.query.sortBy:"createdAt";return Session.set("usersLimit",e),{users:Meteor.users.find(r.find,r.options),filterBy:t,sortBy:s}},fastRender:!0}),Router.route("/unsubscribe/:hash",{name:"unsubscribe",template:getTemplate("unsubscribe"),data:function(){return{hash:this.params.hash}}})})}();

!function(){analyticsInit=_.once(function(){if((mixpanelId=getSetting("mixpanelId"))&&(!function(e,t){window.mixpanel=t;var n,a,i,o;n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src=("https:"===e.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.1.min.js",a=e.getElementsByTagName("script")[0],a.parentNode.insertBefore(n,a),t._i=[],t.init=function(e,n,a){function c(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var r=t;for("undefined"!=typeof a?r=t[a]=[]:a="mixpanel",r.people=r.people||[],i="disable track track_pageview track_links track_forms register register_once unregister identify name_tag set_config people.identify people.set people.increment".split(" "),o=0;o<i.length;o++)c(r,i[o]);t._i.push([e,n,a])},t.__SV=1.1}(document,window.mixpanel||[]),mixpanel.init(mixpanelId)),goSquaredId=getSetting("goSquaredId")){window.GoSquared={},GoSquared.acct=goSquaredId,window._gstc_lt=+new Date;var e=document,t=e.createElement("script");t.type="text/javascript",t.src="//d1l6p2sc9645hc.cloudfront.net/tracker.js";var n=e.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}(clickyId=getSetting("clickyId"))&&(clicky_site_ids=[],clicky_site_ids.push(clickyId),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//static.getclicky.com/js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()),(googleAnalyticsId=getSetting("googleAnalyticsId"))&&(!function(e,t,n,a,i,o,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),c=t.getElementsByTagName(n)[0],o.async=1,o.src=a,c.parentNode.insertBefore(o,c)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create",googleAnalyticsId))}),analyticsRequest=function(){if("undefined"!=typeof window.ga&&ga("send","pageview",{page:window.location.pathname}),"undefined"!=typeof mixpanel&&"undefined"!=typeof mixpanel.people&&Meteor.user()){var e=getCurrentUserEmail();mixpanel.people.identify(e),mixpanel.people.set({username:getDisplayName(Meteor.user()),$last_login:new Date,$created:moment(Meteor.user().createdAt)._d,$email:e}),mixpanel.register({username:getDisplayName(Meteor.user()),createdAt:moment(Meteor.user().createdAt)._d,email:e}),mixpanel.name_tag(e)}"undefined"!=typeof GoSquared&&"undefined"!=typeof GoSquared.DefaultTracker&&GoSquared.DefaultTracker.TrackView(window.location.pathname,getCurrentTemplate()),"undefined"!=typeof clicky&&clicky.log(encodeURIComponent(window.location.pathname),getCurrentTemplate(),"pageview")}}();

!function(){Meteor.isClient&&(throwError=function(e,r){r="undefined"==typeof r?"error":r,Errors.insert({message:e,type:r,seen:!1,show:!0})},clearSeenErrors=function(){Errors.update({seen:!0},{$set:{show:!1}},{multi:!0})})}();

!function(){trackEvent=function(e,n){var n="undefined"==typeof n?{}:n;Meteor.isClient&&("undefined"!=typeof mixpanel&&"undefined"!=typeof mixpanel.track&&mixpanel.track(e,n),"undefined"!=typeof GoSquared&&"undefined"!=typeof GoSquared.DefaultTracker&&GoSquared.DefaultTracker.TrackEvent(e,JSON.stringify(n)))}}();

!function(){cl=function(t){console.log(l)},getCurrentTemplate=function(){return Router.current().lookupTemplate()},getCurrentRoute=function(){return Router.current().url},t=function(t){var e=new Date;console.log("### "+t+" rendered at "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())},nl2br=function(t){var e="<br />";return(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+e+"$2")},getAuthorName=function(t){var e=Meteor.users.findOne(t.userId);return"undefined"==typeof e?"":getDisplayName(e)},scrollPageTo=function(t){$("body").scrollTop($(t).offset().top)},getDigestURL=function(t){return"/digest/"+t.year()+"/"+(t.month()+1)+"/"+t.date()},getDateRange=function(t){var e=moment(new Date),r=e.subtract(t-1,"days"),n={};return n.start=r.startOf("day").valueOf(),n.end=r.endOf("day").valueOf(),n},goTo=function(t){Router.go(t)},getSignupUrl=function(){return Meteor.absoluteUrl()+"sign-up"},getSigninUrl=function(){return Meteor.absoluteUrl()+"sign-in"},getPostUrl=function(t){return Meteor.absoluteUrl()+"posts/"+t},getPostEditUrl=function(t){return Meteor.absoluteUrl()+"posts/"+t+"/edit"},getCommentUrl=function(t){return Meteor.absoluteUrl()+"comments/"+t},getPostCommentUrl=function(t,e){return Meteor.absoluteUrl()+"posts/"+t+"/comment/"+e},slugify=function(t){return t&&(t=t.replace(/[^-_a-zA-Z0-9,&\s]+/gi,""),t=t.replace(/\s/gi,"+"),t=t.toLowerCase()),t},getShortUrl=function(t){return t.shortUrl?t.shortUrl:t.url},getDomain=function(t){return urlObject=Npm.require("url"),urlObject.parse(t).hostname.replace("www.","")},invitesEnabled=function(){return getSetting("requireViewInvite")||getSetting("requirePostInvite")},getOutgoingUrl=function(t){return getSiteUrl()+"out?url="+encodeURIComponent(t)},cleanUp=function(t){return stripHTML(t)},sanitize=function(t){if(Meteor.isServer)var t=sanitizeHtml(t,{allowedTags:["h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","img"]});return t},stripHTML=function(t){return t.replace(/<(?:.|\n)*?>/gm,"")},stripMarkdown=function(t){var e=marked(t);return stripHTML(e)},checkNested=function(t){for(var e=Array.prototype.slice.call(arguments),t=e.shift(),r=0;r<e.length;r++){if(!t.hasOwnProperty(e[r]))return!1;t=t[e[r]]}return!0}}();

!function(){getPostsParameters=function(e){var t={find:{status:STATUS_APPROVED,postedAt:{$lte:new Date}},options:{limit:10}},n=t,i=e.view?dashToCamel(e.view):"top";return"undefined"!=typeof viewParameters[i]&&(n=deepExtend(!0,t,viewParameters[i](e))),deepExtend(!0,n,{options:{sort:{_id:-1}}}),"undefined"!=typeof e.limit&&e.limit&&_.extend(n.options,{limit:parseInt(e.limit)}),n},getUsersParameters=function(e,t,n){var i={},a={createdAt:-1};switch(e){case"invited":i={$or:[{isInvited:!0},adminMongoQuery]};break;case"uninvited":i={$and:[{isInvited:!1},notAdminMongoQuery]};break;case"admin":i=adminMongoQuery}switch(t){case"username":a={username:1};break;case"karma":a={karma:-1};break;case"postCount":a={postCount:-1};break;case"commentCount":a={commentCount:-1};case"invitedCount":a={invitedCount:-1}}return{find:i,options:{sort:a,limit:n}}}}();

!function(){canView=function(n){if(getSetting("requireViewInvite",!1)){if(Meteor.isClient)var n="undefined"==typeof n?Meteor.user():n;return n&&(isAdmin(n)||isInvited(n))?!0:!1}return!0},canViewById=function(n,e){return getSetting("requireViewInvite",!1)?n?canView(Meteor.users.findOne(n),e):!1:!0},canPost=function(n,e){var n="undefined"==typeof n?Meteor.user():n;return n?isAdmin(n)?!0:getSetting("requirePostInvite")?n.isInvited?!0:e?"no_invite":!1:!0:e?"no_account":!1},canPostById=function(n,e){var t=Meteor.users.findOne(n);return canPost(t,e)},canComment=function(n,e){return canPost(n,e)},canCommentById=function(n,e){var t=Meteor.users.findOne(n);return canComment(t,e)},canUpvote=function(n,e,t){return canPost(n,t)},canUpvoteById=function(n,e){var t=Meteor.users.findOne(n);return canUpvote(t,e)},canDownvote=function(n,e,t){return canPost(n,t)},canDownvoteById=function(n,e){var t=Meteor.users.findOne(n);return canDownvote(t,e)},canEdit=function(n,e,t){var n="undefined"==typeof n?Meteor.user():n;return n&&e?isAdmin(n)?!0:n._id!==e.userId?t?"no_rights":!1:!0:t?"no_rights":!1},canEditById=function(n,e){var t=Meteor.users.findOne(n);return canEdit(t,e)},currentUserCanEdit=function(n){return canEdit(Meteor.user(),n)},canInvite=function(n){return isInvited(n)||isAdmin(n)}}();

!function(){privacyOptions={_id:!0,commentCount:!0,createdAt:!0,email_hash:!0,isInvited:!0,karma:!0,postCount:!0,slug:!0,username:!0,"profile.name":!0,"profile.notifications":!0,"profile.bio":!0,"profile.github":!0,"profile.site":!0,"profile.twitter":!0,"services.twitter.profile_image_url":!0,"services.facebook.id":!0,"services.twitter.screenName":!0,"services.github.screenName":!0,"votes.downvotedComments":!0,"votes.downvotedPosts":!0,"votes.upvotedComments":!0,"votes.upvotedPosts":!0}}();

!function(){updateScore=function(t){var e=t.collection,a=t.item,r=t.forceUpdate;if(a.status&&2!=a.status)return 0;if(!a.postedAt)return 0;var i=a.postedAt.valueOf(),o=(new Date).getTime(),n=o-i,s=n/36e5;if(i>o)return 0;var u=30,c=1/Math.pow(24*u+2,1.3),d=1.3,p=a.baseScore,f=p/Math.pow(s+2,d),v=Math.abs(a.score-f);return r||v>c?(e.update(a._id,{$set:{score:f,inactive:!1}}),1):(s>24*u&&e.update(a._id,{$set:{inactive:!0}}),0)}}();

!function(){isAdminById=function(e){var t=Meteor.users.findOne(e);return!(!t||!isAdmin(t))},isAdmin=function(e){return e="undefined"==typeof e?Meteor.user():e,!!e&&!!e.isAdmin},setAdmin=function(e,t){e="undefined"==typeof e?Meteor.user():e,e.isAdmin=!!t},updateAdmin=function(e,t){Meteor.users.update(e,{$set:{isAdmin:t}})},isInvited=function(e){return e&&"undefined"!=typeof e?isAdmin(e)||!!e.isInvited:!1},adminUsers=function(){return Meteor.users.find({isAdmin:!0}).fetch()},adminMongoQuery={isAdmin:!0},notAdminMongoQuery={isAdmin:!1},getUserName=function(e){try{if(e.username)return e.username;if(e&&e.services&&e.services.twitter&&e.services.twitter.screenName)return e.services.twitter.screenName}catch(t){return console.log(t),null}},getDisplayName=function(e){return e.profile&&e.profile.name?e.profile.name:getUserName(e)},getDisplayNameById=function(e){return getDisplayName(Meteor.users.findOne(e))},getProfileUrl=function(e){return Meteor.absoluteUrl()+"users/"+slugify(getUserName(e))},getProfileUrlById=function(e){return Meteor.absoluteUrl()+"users/"+e},getProfileUrlBySlug=function(e){return Meteor.absoluteUrl()+"users/"+e},hasPassword=function(e){return!!e.services.password},getTwitterName=function(e){return checkNested(e,"profile","twitter")?e.profile.twitter:checkNested(e,"services","twitter","screenName")?e.services.twitter.screenName:null},getGitHubName=function(e){return checkNested(e,"profile","github")?e.profile.github:checkNested(e,"services","github","screenName")?e.services.github.screenName:null},getTwitterNameById=function(e){return getTwitterName(Meteor.users.findOne(e))},getEmail=function(e){return e.profile&&e.profile.email?e.profile.email:null},getEmailHash=function(e){return Gravatar.hash(getEmail(e))},getAvatarUrl=function(e){return console.warn("FUNCTION getAvatarUrl() IS DEPRECATED -- package bengott:avatar is used instead."),Avatar.getUrl(e)},getCurrentUserEmail=function(){return Meteor.user()?getEmail(Meteor.user()):""},userProfileComplete=function(e){return!!getEmail(e)},findLast=function(e,t){return t.findOne({userId:e._id},{sort:{createdAt:-1}})},timeSinceLast=function(e,t){var r=(new Date).getTime(),n=findLast(e,t);return n?Math.abs(Math.floor((r-n.createdAt)/1e3)):999},numberOfItemsInPast24Hours=function(e,t){var r=moment(new Date),n=t.find({userId:e._id,createdAt:{$gte:r.subtract(24,"hours").valueOf()}});return n.count()},getUserSetting=function(e,t,r){var r="undefined"==typeof r?Meteor.user():r,t="undefined"==typeof t?null:t,n=getProperty(r.profile,e);return null==n?t:n},setUserSetting=function(e,t,r){var n;if(Meteor.isClient?n=Meteor.user():Meteor.isServer&&(n=r),!n)throw new Meteor.Error(500,"User not defined");console.log('Setting user setting "'+e+'" to "'+t+'" for '+getUserName(n));var i={_id:n._id},s={};s["profile."+e]=t;var u={$set:s},o=Meteor.users.update(i,u,{validate:!1})},getProperty=function(e,t){var r=t.split(".");if(r.length>1){var n=r.shift();return"undefined"==typeof e[n]?null:getProperty(e[n],r.join("."))}return e[r[0]]}}();

!function(){telescopeVersion="0.9.10"}();

!function(){var e=function(e){return 1},t=function(e,t){Meteor.users.update({_id:e},{$inc:{karma:t}})},o=function(e,t){return e.upvoters&&-1!=e.upvoters.indexOf(t._id)},n=function(e,t){return e.downvoters&&-1!=e.downvoters.indexOf(t._id)},r=function(e,t,o,n){var r="votes."+n+"voted"+o,i={};i[r]=t;var s=Meteor.users.update({_id:e},{$addToSet:i})},i=function(e,t,o,n){var r="votes."+n+"voted"+o,i={};i[r]={itemId:t},Meteor.users.update({_id:e},{$pull:i})},s=function(n,i){var s=Meteor.user(),d=e(s),c=n._name.slice(0,1).toUpperCase()+n._name.slice(1);if(!s||!canUpvote(s,n,!0)||o(i,s))return!1;u(n,i,s);var a=n.update({_id:i&&i._id,upvoters:{$not:{$in:[s._id]}}},{$addToSet:{upvoters:s._id},$inc:{upvotes:1,baseScore:d},$set:{inactive:!1}});if(a>0){var v={itemId:i._id,votedAt:new Date,power:d};r(s._id,v,c,"up"),i=_.extend(i,{baseScore:i.baseScore+d}),updateScore({collection:n,item:i,forceUpdate:!0}),i.userId!=s._id&&(t(i.userId,d),getSetting("redistributeKarma",!1)&&_.each(i.upvoters,function(e){var o=Math.min(.1,d/i.upvoters.length);t(e,.1)}))}return!0},d=function(o,i){var s=Meteor.user(),d=e(s),u=o._name.slice(0,1).toUpperCase()+o._name.slice(1);if(!s||!canDownvote(s,o,!0)||n(i,s))return!1;c(o,i,s);var a=o.update({_id:i&&i._id,downvoters:{$not:{$in:[s._id]}}},{$addToSet:{downvoters:s._id},$inc:{downvotes:1,baseScore:-d},$set:{inactive:!1}});if(a>0){var v={itemId:i._id,votedAt:new Date,power:d};r(s._id,v,u,"down"),i=_.extend(i,{baseScore:i.baseScore+d}),updateScore({collection:o,item:i,forceUpdate:!0}),i.userId!=s._id&&t(i.userId,d)}return!0},c=function(n,r){var s=Meteor.user();if(votePower=e(s),collectionName=n._name.slice(0,1).toUpperCase()+n._name.slice(1),!o(r,s))return!1;var d=n.update({_id:r&&r._id,upvoters:{$in:[s._id]}},{$pull:{upvoters:s._id},$inc:{upvotes:-1,baseScore:-votePower},$set:{inactive:!1}});return d>0&&(i(s._id,r._id,collectionName,"up"),r=_.extend(r,{baseScore:r.baseScore+votePower}),updateScore({collection:n,item:r,forceUpdate:!0}),r.userId!=s._id&&t(r.userId,votePower)),!0},u=function(o,r){var s=Meteor.user(),d=e(s),c=o._name.slice(0,1).toUpperCase()+o._name.slice(1);if(!n(r,s))return!1;var u=o.update({_id:r&&r._id,downvoters:{$in:[s._id]}},{$pull:{downvoters:s._id},$inc:{downvotes:1,baseScore:d},$set:{inactive:!1}});return u>0&&(i(s._id,r._id,c,"down"),r=_.extend(r,{baseScore:r.baseScore+d}),updateScore({collection:o,item:r,forceUpdate:!0}),r.userId!=s._id&&t(r.userId,d)),!0},a=function(e){return isAdmin(Meteor.user())&&"undefined"!=typeof e?e:Meteor.user()};Meteor.methods({upvotePost:function(e,t){return s.call(this,Posts,e)},downvotePost:function(e,t){return d.call(this,Posts,e)},cancelUpvotePost:function(e,t){return c.call(this,Posts,e)},cancelDownvotePost:function(e,t){return u.call(this,Posts,e)},upvoteComment:function(e,t){return s.call(this,Comments,e)},downvoteComment:function(e,t){return d.call(this,Comments,e)},cancelUpvoteComment:function(e,t){return c.call(this,Comments,e)},cancelDownvoteComment:function(e,t){return u.call(this,Comments,e)}})}();

!function(){Template[getTemplate("postActions")].helpers({}),Template[getTemplate("postActions")].events({"click .toggle-actions-link":function(e,t){e.preventDefault();var l=$(e.target).parents(".post").find(".right-modules");l.toggleClass("visible")}})}();

!function(){Template[getTemplate("postAdmin")].helpers({postsMustBeApproved:function(){return!!getSetting("requirePostsApproval")},isApproved:function(){return this.status==STATUS_APPROVED},shortScore:function(){return Math.floor(1e3*this.score)/1e3}})}();

!function(){Template[getTemplate("postContent")].helpers({postHeading:function(){return postHeading},postMeta:function(){return postMeta},getTemplate:function(){return getTemplate(this.template)},sourceLink:function(){return this.url?this.url:"/posts/"+this._id},current_domain:function(){return"http://"+document.domain},timestamp:function(){return time=this.status==STATUS_APPROVED?this.postedAt:this.createdAt,moment(time).format("MMMM Do, h:mm:ss a")},userAvatar:function(){var t=Meteor.users.findOne(this.userId,{reactive:!1});return t?getAvatarUrl(t):void 0},inactiveClass:function(){return isAdmin(Meteor.user())&&this.inactive?i18n.t("inactive"):""},commentsDisplayText:function(){return i18n.t(1==this.comments?"comment":"comments")}}),Template[getTemplate("postContent")].events({"click .approve-link":function(t,e){Meteor.call("approvePost",this),t.preventDefault()},"click .unapprove-link":function(t,e){Meteor.call("unapprovePost",this),t.preventDefault()}})}();

!function(){Template[getTemplate("postDomain")].helpers({domain:function(){var e=document.createElement("a");return e.href=this.url,e.hostname}})}();

!function(){Template[getTemplate("postInfo")].helpers({pointsUnitDisplayText:function(){return i18n.t(1==this.upvotes?"point":"points")},can_edit:function(){return canEdit(Meteor.user(),this)},authorName:function(){return getAuthorName(this)},ago:function(){return time=this.status==STATUS_APPROVED?this.postedAt:this.createdAt},profileUrl:function(){var t=Meteor.users.findOne(this.userId,{reactive:!1});return t?getProfileUrl(t):void 0}})}();

!function(){Template[getTemplate("postTitle")].helpers({postLink:function(){return this.url?getOutgoingUrl(this.url):"/posts/"+this._id},postTarget:function(){return this.url?"_blank":""}})}();

!function(){Template[getTemplate("postUpvote")].helpers({upvoted:function(){var e=Meteor.user();return e?_.include(this.upvoters,e._id):!1},oneBasedRank:function(){return"undefined"!=typeof this.rank?this.rank+1:void 0}}),Template[getTemplate("postUpvote")].events({"click .upvote-link":function(e,t){var n=this;e.preventDefault(),Meteor.user()||(Router.go(getSigninUrl()),throwError(i18n.t("please_log_in_first"))),Meteor.call("upvotePost",n,function(e,t){trackEvent("post upvoted",{_id:n._id})})}})}();

!function(){Template[getTemplate("toolbox")].events({"click .update-categories":function(){},"click .give-invites":function(){Meteor.call("giveInvites")},"click .update-user-profiles":function(){Meteor.call("updateUserProfiles")},"click .update-posts-slugs":function(){Meteor.call("updatePostsSlugs")}})}();

!function(){Template[getTemplate("comment_edit")].rendered=function(){if(this.data){var t=this.data.comment;t&&Meteor.user()&&!this.editor&&(this.editor=new EpicEditor(EpicEditorOptions).load(),this.editor.importFile("editor",t.body),$(this.editor.editor).bind("keydown","meta+return",function(){$(window.editor).closest("form").find('input[type="submit"]').click()}))}},Template[getTemplate("comment_edit")].events({"click input[type=submit]":function(t,e){var o=this,i=cleanUp(e.editor.exportFile());if(t.preventDefault(),!Meteor.user())throw i18n.t("you_must_be_logged_in");Comments.update(o._id,{$set:{body:i}}),trackEvent("edit comment",{postId:o.postId,commentId:o._id}),Router.go("/posts/"+o.postId+"/comment/"+o._id)},"click .delete-link":function(t){var e=this;t.preventDefault(),confirm(i18n.t("are_you_sure"))&&(Meteor.call("removeComment",e._id),Router.go("/posts/"+e.postId),throwError("Your comment has been deleted."))}})}();

!function(){Template[getTemplate("comment_form")].helpers({canComment:function(){return canComment(Meteor.user())}}),Template[getTemplate("comment_form")].rendered=function(){Meteor.user()&&!this.editor&&(this.editor=new EpicEditor(EpicEditorOptions).load(),$(this.editor.editor).bind("keydown","meta+return",function(){$(window.editor).closest("form").find('input[type="submit"]').click()}))},Template[getTemplate("comment_form")].events({"submit form":function(e,t){e.preventDefault(),$(e.target).addClass("disabled"),clearSeenErrors();var o=t.editor.exportFile();if("comment_reply"==getCurrentTemplate()){var r=this.comment;Meteor.call("comment",r.postId,r._id,o,function(e,t){e?(console.log(e),throwError(e.reason)):(trackEvent("newComment",t),Router.go("/posts/"+r.postId+"/comment/"+t._id))})}else{var n=postObject;Meteor.call("comment",n._id,null,o,function(e,o){e?(console.log(e),throwError(e.reason)):(trackEvent("newComment",o),Session.set("scrollToCommentId",o._id),t.editor.importFile("editor",""))})}}})}();

!function(){findQueueContainer=function(e){return $up=e.prevAll(".queue-container, .comment-displayed").first(),$down=e.nextAll(".queue-container, .comment-displayed").first(),$prev=e.prev(),$next=e.next(),$queuedAncestors=e.parents(".comment-queued"),$queuedAncestors.exists()?$container=$queuedAncestors.last().data("queue"):$prev.hasClass("queue-container")?$container=$prev.data("queue"):$prev.find(".comment").last().hasClass("comment-queued")?$container=$prev.find(".comment").last().data("queue"):$down.hasClass("queue-container")?$container=$next.data("queue"):($up.hasClass("comment-displayed")||!$up.exists())&&($container=$('<div class="queue-container"><ul></ul></div>').insertBefore(e),$container.click(function(e){e.preventDefault();var t=$(this).find("a");t.each(function(){var e=$(this).attr("href");$(e).removeClass("comment-queued").addClass("comment-displayed"),window.openedComments.push(e.substr(1))}),$(this).hide("slow").remove()})),$container},Template[getTemplate("comment_item")].created=function(){this.isQueued=window.queueComments,window.openedComments=[]},Template[getTemplate("comment_item")].helpers({comment_item:function(){return getTemplate("comment_item")},full_date:function(){return this.createdAt.toString()},child_comments:function(){return Comments.find({parentCommentId:this._id})},author:function(){return Meteor.users.findOne(this.userId)},authorName:function(){return getAuthorName(this)},can_edit:function(){return this.userId&&Meteor.userId()?isAdmin(Meteor.user())||Meteor.userId()===this.userId:!1},showChildComments:function(){return!0},ago:function(){return this.createdAt},upvoted:function(){return Meteor.user()&&_.include(this.upvoters,Meteor.user()._id)},downvoted:function(){return Meteor.user()&&_.include(this.downvoters,Meteor.user()._id)},profileUrl:function(){var e=Meteor.users.findOne(this.userId);return e?getProfileUrl(e):void 0}}),Template[getTemplate("comment_item")].rendered=function(){},Template[getTemplate("comment_item")].events({"click .queue-comment":function(e){e.preventDefault();var t=$(event.target).closest(".comment").attr("id"),n=new Date,o=Comments.update(t,{$set:{postedAt:(new Date).getTime()}})},"click .not-upvoted .upvote":function(e,t){e.preventDefault(),Meteor.user()||(Router.go(getSigninUrl()),throwError(i18n.t("please_log_in_first"))),Meteor.call("upvoteComment",this,function(e,n){trackEvent("post upvoted",{commentId:t.data._id,postId:t.data.post,authorId:t.data.userId})})},"click .upvoted .upvote":function(e,t){e.preventDefault(),Meteor.user()||(Router.go(getSigninUrl()),throwError(i18n.t("please_log_in_first"))),Meteor.call("cancelUpvoteComment",this,function(e,n){trackEvent("post upvote cancelled",{commentId:t.data._id,postId:t.data.post,authorId:t.data.userId})})},"click .not-downvoted .downvote":function(e,t){e.preventDefault(),Meteor.user()||(Router.go(getSigninUrl()),throwError(i18n.t("please_log_in_first"))),Meteor.call("downvoteComment",this,function(e,n){trackEvent("post downvoted",{commentId:t.data._id,postId:t.data.post,authorId:t.data.userId})})},"click .downvoted .downvote":function(e,t){e.preventDefault(),Meteor.user()||(Router.go(getSigninUrl()),throwError(i18n.t("please_log_in_first"))),Meteor.call("cancelDownvoteComment",this,function(e,n){trackEvent("post downvote cancelled",{commentId:t.data._id,postId:t.data.post,authorId:t.data.userId})})}})}();

!function(){Template[getTemplate("comment_list")].created=function(){postObject=this.data},Template[getTemplate("comment_list")].helpers({comment_item:function(){return getTemplate("comment_item")},child_comments:function(){var e=this,t=Comments.find({postId:e._id,parentCommentId:null},{sort:{score:-1,postedAt:-1}});return t}}),Template[getTemplate("comment_list")].rendered=function(){window.queueComments=!0}}();

!function(){Template[getTemplate("comment_reply")].helpers({post_item:function(){return getTemplate("post_item")},comment_item:function(){return getTemplate("comment_item")},comment_form:function(){return getTemplate("comment_form")},post:function(){if(this.comment){var t=Posts.findOne(this.comment.postId);return t}}})}();

!function(){Template[getTemplate("css")].helpers({})}();

!function(){Template[getTemplate("error")].helpers({error_item:function(){return getTemplate("error_item")},errors:function(){return Errors.find({show:!0})}})}();

!function(){Template[getTemplate("error_item")].helpers({}),Template[getTemplate("error_item")].created=function(){var e=this.data._id;Meteor.setTimeout(function(){Errors.update(e,{$set:{seen:!0}})},100)}}();

!function(){Template[getTemplate("footer")].helpers({footerCode:function(){return getSetting("footerCode")},footerClass:function(){return Session.get("isPostsList")?"absolute":"static"},footerModules:function(){return footerModules},getTemplate:function(){return getTemplate(this.template)}})}();

!function(){Template[getTemplate("layout")].helpers({mobile_nav:function(){return getTemplate("mobile_nav")},nav:function(){return getTemplate("nav")},error:function(){return getTemplate("error")},notifications:function(){return getTemplate("notifications")},footer:function(){return getTemplate("footer")},pageName:function(){return getCurrentTemplate()},css:function(){return getTemplate("css")},heroModules:function(){return heroModules},getTemplate:function(){return getTemplate(this.template)}}),Template[getTemplate("layout")].created=function(){Session.set("currentScroll",null)},Template[getTemplate("layout")].rendered=function(){(currentScroll=Session.get("currentScroll"))&&($("body").scrollTop(currentScroll),Session.set("currentScroll",null))}}();

!function(){Template[getTemplate("loading")].helpers({log:function(){console.log("loading…")}})}();

!function(){Template[getTemplate("no_account")].helpers({landingPageText:function(){return getSetting("landingPageText")}}),Template[getTemplate("no_account")].events({"click .twitter-button":function(){Meteor.loginWithTwitter(function(){Router.go("/")})}})}();

!function(){Template[getTemplate("no_invite")].helpers({afterSignupText:function(){return getSetting("afterSignupText")}})}();

!function(){Template[getTemplate("adminMenu")].helpers({menuItem:function(){return getTemplate("menuItem")},menu:function(){return adminNav}})}();

!function(){Template[getTemplate("mobile_nav")].helpers({primaryNav:function(){return primaryNav},secondaryNav:function(){return secondaryNav},getTemplate:function(){return getTemplate(this)},canPost:function(){return canPost(Meteor.user())},requirePostsApproval:function(){return getSetting("requirePostsApproval")},userMenu:function(){return getTemplate("userMenu")}}),Template[getTemplate("mobile_nav")].events({"click .dropdown-sub-level":function(){$("body").toggleClass("mobile-nav-open")}}),Template[getTemplate("mobile_nav")].rendered=function(){$(".mobile-nav .dropdown-menu").hide()},Template[getTemplate("mobile_nav")].events({"click .dropdown-top-level":function(e){e.preventDefault(),$(e.currentTarget).next().slideToggle("fast")},"click .mobile-nav a":function(e){-1==e.target.className.indexOf("dropdown-top-level")&&$("body").removeClass("mobile-nav-open")}})}();

!function(){Template[getTemplate("nav")].helpers({primaryNav:function(){return primaryNav},hasPrimaryNav:function(){return!!primaryNav.length},secondaryNav:function(){return secondaryNav},hasSecondaryNav:function(){return!!secondaryNav.length},dropdownClass:function(){return getThemeSetting("useDropdowns",!0)?"has-dropdown":"no-dropdown"},getTemplate:function(){return getTemplate(this)},userMenu:function(){return getTemplate("userMenu")},site_title:function(){return getSetting("title")},logo_url:function(){return getSetting("logoUrl")},logo_top:function(){return Math.floor((70-getSetting("logoHeight"))/2)},logo_offset:function(){return-Math.floor(getSetting("logoWidth")/2)},intercom:function(){return!!getSetting("intercomId")},canPost:function(){return canPost(Meteor.user())},requirePostsApproval:function(){return getSetting("requirePostsApproval")}}),Template[getTemplate("nav")].rendered=function(){Meteor.loggingIn()||Meteor.user()||$(".login-link-text").text("Sign Up/Sign In")},Template[getTemplate("nav")].events({"click #logout":function(e){e.preventDefault(),Meteor.logout()},"click .mobile-menu-button":function(e){e.preventDefault(),$("body").toggleClass("mobile-nav-open")},"click .login-header":function(e){e.preventDefault(),Router.go("/account")},"click #login-name-link":function(){if(Meteor.user()&&!$("account-link").exists()){var e=$("#login-buttons-logout");e.before('<a href="/users/'+Meteor.user().slug+'" class="account-link button">View Profile</a>'),e.before('<a href="/account" class="account-link button">Edit Account</a>')}}})}();

!function(){Template[getTemplate("userMenu")].helpers({isLoggedIn:function(){return!!Meteor.user()},name:function(){return getDisplayName(Meteor.user())},profileUrl:function(){return getProfileUrl(Meteor.user())}})}();

!function(){Template[getTemplate("viewsMenu")].helpers({menuItem:function(){return getTemplate("menuItem")},views:function(){return viewNav}})}();

!function(){Template[getTemplate("post_edit")].helpers({created:function(){return moment(this.createdAt).format("MMMM Do, h:mm:ss a")},categories:function(){var t=this;return Categories.find({},{sort:{order:1,name:1}}).map(function(e){return e.checked=_.contains(_.pluck(t.categories,"_id"),e._id)?"checked":"",e})},categoriesEnabled:function(){return Categories.find().count()},showPostedAt:function(){return(Session.get("currentPostStatus")||this.status)==STATUS_APPROVED?"visible":"hidden"},isSticky:function(){return this.sticky?"checked":""},isSelected:function(t){return t&&this._id==t.userId?"selected":""},postedAtDate:function(){return this.postedAt?moment(this.postedAt).format("MM/DD/YYYY"):null},postedAtTime:function(){return this.postedAt?moment(this.postedAt).format("HH:mm"):null},users:function(){return Meteor.users.find({},{sort:{"profile.name":1}})},userName:function(){return getDisplayName(this)},hasStatusPending:function(){return this.status==STATUS_PENDING?"checked":""},hasStatusApproved:function(){return this.status==STATUS_APPROVED?"checked":""},hasStatusRejected:function(){return this.status==STATUS_REJECTED?"checked":""},shorten:function(){return!!getSetting("bitlyToken")}}),Template[getTemplate("post_edit")].rendered=function(){var t=this;postEditRenderedCallbacks.forEach(function(e){e(t)}),Session.set("currentPostStatus",this.status);var e=this.data.post;e&&!this.editor&&(this.editor=new EpicEditor(EpicEditorOptions).load(),this.editor.importFile("editor",e.body),$("#postedAtDate").datepicker())},Template[getTemplate("post_edit")].events({"change input[name=status]":function(t,e){Session.set("currentPostStatus",t.currentTarget.value)},"click input[type=submit]":function(t,e){var s=this,r={};if(t.preventDefault(),$(t.target).addClass("disabled"),!Meteor.user())return throwError("You must be logged in."),!1;var i=e.editor.exportFile(),o={title:$("#title").val(),body:i,categories:[]},n=$("#url").val();n?o.url="http://"==n.substring(0,7)||"https://"==n.substring(0,8)?n:"http://"+n:r.$unset={url:""};var a=$("#short-url").val();if(a&&(o.shortUrl=a),isAdmin(Meteor.user())&&(adminProperties={sticky:$("#sticky").is(":checked"),userId:$("#postUser").val()},adminProperties.status=parseInt($("input[name=status]:checked").val()),o=_.extend(o,adminProperties),adminProperties.status==STATUS_APPROVED)){var u=$("#postedAtDate"),d=$("#postedAtTime"),c=!1,l=new Date,p=u.datepicker("getDate"),h=d.val();if(u.exists()&&"Invalid Date"!=p&&(l=p,c=!0),d.exists()&&2==h.split(":").length){var m=h.split(":")[0],f=h.split(":")[1];l=moment(l).hour(m).minute(f).toDate(),c=!0}c?Meteor.call("setPostedAt",s,l):Meteor.call("setPostedAt",s)}o=postEditClientCallbacks.reduce(function(t,e){return e(t)},o),o?(r.$set=o,Posts.update(s._id,r,function(e){e?(console.log(e),throwError(e.message),clearSeenErrors(),$(t.target).removeClass("disabled")):(trackEvent("edit post",{postId:s._id}),Router.go("/posts/"+s._id))})):$(t.target).removeClass("disabled")},"click .delete-link":function(t){var e=this;t.preventDefault(),confirm("Are you sure?")&&(Router.go("/"),Meteor.call("deletePostById",e._id,function(t){t?(console.log(t),throwError(t.reason)):throwError("Your post has been deleted.")}))}})}();

!function(){var t=function(t){return _.filter(postModules,function(e){return 0==e.position.indexOf(t)})},e={};Template[getTemplate("post_item")].created=function(){e=this.data},Template[getTemplate("post_item")].helpers({leftPostModules:function(){return t("left")},centerPostModules:function(){return t("center")},rightPostModules:function(){return t("right")},getTemplate:function(){return getTemplate(this.template)},moduleContext:function(){var t=this;return t.templateClass=camelToDash(this.template)+" "+this.position+" cell",t.post=e,t},moduleClass:function(){return camelToDash(this.template)+" "+this.position+" cell"}})}();

!function(){Template[getTemplate("post_page")].helpers({post_item:function(){return getTemplate("post_item")},post_body:function(){return getTemplate("post_body")},comment_form:function(){return getTemplate("comment_form")},comment_list:function(){return getTemplate("comment_list")}}),Template[getTemplate("post_page")].rendered=function(){$("body").scrollTop(0),this.data&&(document.title=$(".post-title").text())}}();

!function(){Template[getTemplate("post_submit")].helpers({categoriesEnabled:function(){return Categories.find().count()},categories:function(){return Categories.find()},users:function(){return Meteor.users.find({},{sort:{"profile.name":1}})},userName:function(){return getDisplayName(this)},isSelected:function(t){return t._id==Meteor.userId()?"selected":""},showPostedAt:function(){return Session.get("currentPostStatus")==STATUS_APPROVED?"visible":"hidden"}}),Template[getTemplate("post_submit")].rendered=function(){var t=this;postSubmitRenderedCallbacks.forEach(function(e){e(t)}),Session.set("currentPostStatus",STATUS_APPROVED),Session.set("selectedPostId",null),!this.editor&&$("#editor").exists()&&(this.editor=new EpicEditor(EpicEditorOptions).load()),$("#postedAtDate").datepicker()},Template[getTemplate("post_submit")].events({"change input[name=status]":function(t,e){Session.set("currentPostStatus",t.currentTarget.value)},"click input[type=submit]":function(t,e){if(t.preventDefault(),$(t.target).addClass("disabled"),!Meteor.user())return throwError(i18n.t("you_must_be_logged_in")),!1;var s={title:$("#title").val(),body:e.editor.exportFile(),sticky:$("#sticky").is(":checked"),userId:$("#postUser").val(),status:parseInt($("input[name=status]:checked").val())},r=$("#postedAtDate"),i=$("#postedAtTime"),n=!1,o=new Date,a=r.datepicker("getDate"),l=i.val();if(r.exists()&&"Invalid Date"!=a&&(o=a,n=!0),i.exists()&&2==l.split(":").length){var u=l.split(":")[0],d=l.split(":")[1];o=moment(o).hour(u).minute(d).toDate(),n=!0}n&&(s.postedAt=o);var c=$("#url").val();if(c){var p="http://"==c.substring(0,7)||"https://"==c.substring(0,8)?c:"http://"+c;s.url=p}s=postSubmitClientCallbacks.reduce(function(t,e){return e(t)},s),s?Meteor.call("post",s,function(e,s){e?(throwError(e.reason),clearSeenErrors(),$(t.target).removeClass("disabled"),603==e.error&&Router.go("/posts/"+e.details)):(trackEvent("new post",{postId:s._id}),s.status===STATUS_PENDING&&throwError("Thanks, your post is awaiting approval."),Router.go("/posts/"+s._id))}):$(t.target).removeClass("disabled")},"click .get-title-link":function(t){t.preventDefault();var e=$("#url").val(),s=$(".get-title-link");s.addClass("loading"),e?$.get(e,function(t){null!=(suggestedTitle=/<title>(.*?)<\/title>/m.exec(t.responseText))?$("#title").val(suggestedTitle[1]):alert("Sorry, couldn't find a title..."),s.removeClass("loading")}):(alert("Please fill in an URL first!"),s.removeClass("loading"))}})}();

!function(){Template[getTemplate("posts_digest")].created=function(){$(document).unbind("keyup");var t=moment(Session.get("currentDate")).startOf("day"),e=moment(new Date).startOf("daysy");$(document).bind("keyup","left",function(){Router.go($(".prev-link").attr("href"))}),$(document).bind("keyup","right",function(){(isAdmin(Meteor.user())||e.diff(t,"days")>0)&&Router.go($(".next-link").attr("href"))})},Template[getTemplate("posts_digest")].helpers({post_item:function(){return getTemplate("post_item")},postsListIncoming:function(){return getTemplate("postsListIncoming")},hasPosts:function(){return this.posts?!!this.posts.count():void 0},currentDate:function(){var t=moment(Session.get("currentDate")),e=moment(new Date),n=e.diff(t,"days");return 0===n?i18n.t("today"):1===n?i18n.t("yesterday"):t.format("dddd, MMMM Do YYYY")},previousDateURL:function(){var t=moment(Session.get("currentDate")),e=t.subtract(1,"days");return getDigestURL(e)},showPreviousDate:function(){return!0},nextDateURL:function(){var t=moment(Session.get("currentDate")),e=t.add("days",1);return getDigestURL(e)},showNextDate:function(){var t=moment(Session.get("currentDate")).startOf("day"),e=moment(new Date).startOf("day");return isAdmin(Meteor.user())||e.diff(t,"days")>0}}),Template[getTemplate("posts_digest")].rendered=function(){var t=0;$(".post").each(function(){t+=$(this).height()}),t+=55,Session.set("distanceFromTop",t),$("body").css("min-height",t+160),$(".more-button").css("top",t+"px")},Template[getTemplate("posts_digest")].created=function(){Session.set("listPopulatedAt",new Date)}}();

!function(){Template[getTemplate("posts_list")].helpers({post_item:function(){return getTemplate("post_item")},posts:function(){if(this.postsList){this.postsList.rewind();var t=this.postsList.map(function(t,e,s){return t.rank=e,t});return t}},postsLoadMore:function(){return getTemplate("postsLoadMore")},postsListIncoming:function(){return getTemplate("postsListIncoming")}}),Template[getTemplate("posts_list")].created=function(){Session.set("listPopulatedAt",new Date)}}();

!function(){Template[getTemplate("postsListIncoming")].events({"click .show-new":function(e,t){Session.set("listPopulatedAt",new Date)}})}();

!function(){Template[getTemplate("postsLoadMore")].helpers({hasMorePosts:function(){return parseInt(Session.get("postsLimit"))==this.postCount},loadMoreUrl:function(){var e=parseInt(Session.get("postsLimit"))+parseInt(getSetting("postsPerPage",10)),t=Session.get("categorySlug")?Session.get("categorySlug")+"/":"";return"/"+Session.get("view")+"/"+t+e}})}();

!function(){function t(){var t,s=0;do t=UI._parentData(s++);while(t&&!t.atts);return t&&t.atts}Template[getTemplate("quickForm_settings")].helpers({afFieldsets:function(){var t=this._af.ss._schema,s=_.compact(_.uniq(_.pluckDeep(t,"autoform.group")));return s=s.map(function(t){return capitalise(t)})},fieldsForFieldset:function(){var t=this.toLowerCase(),s=AutoForm.find().ss._schema;s=_.map(s,function(t,s){return t.name=s,t});var e=_.pluck(_.filter(s,function(s,e){return s.autoform&&s.autoform.group==t}),"name");return e},inputClass:function s(){var s=t();return s?s["input-col-class"]:void 0},labelClass:function e(){var s=t();return s?s["label-class"]:void 0},submitButtonAtts:function a(){var t=this.atts,s={type:"submit"};return s["class"]="string"==typeof t.buttonClasses?t.buttonClasses:"btn btn-primary",s},qfAutoFormContext:function(){var t=_.clone(this.qfAutoFormContext||{});return"string"==typeof t["class"]?t["class"]+=" form-horizontal":t["class"]="form-horizontal",t["input-col-class"]&&delete t["input-col-class"],t["label-class"]&&delete t["label-class"],t}}),Template.afFormGroup_settings.helpers({afFieldInputAtts:function(){var t=_.clone(this.afFieldInputAtts||{});return"input-col-class"in t&&delete t["input-col-class"],t.template="bootstrap3",t},afFieldLabelAtts:function(){var t=_.clone(this.afFieldLabelAtts||{});return t.template="bootstrap3",t},afEmptyFieldLabelAtts:function(){var t=_.clone(this.afFieldLabelAtts||{}),s=_.omit(t,"name","autoform","template");return"string"==typeof s["class"]?s["class"]+=" control-label":s["class"]="control-label",s},rightColumnClass:function(){var t=this.afFieldInputAtts||{};return t["input-col-class"]||""},showField:function(){return"showField"in this.afFieldInputAtts?this.afFieldInputAtts.showField:!0},afFieldInstructions:function(){return this.afFieldInputAtts.instructions}}),Template.afObjectField_settings.helpers({rightColumnClass:function(){var t=this.atts||{};return t["input-col-class"]||""},afFieldLabelAtts:function(){var t=this.atts;return{template:"bootstrap3","class":t["label-class"],name:t.name}}}),Template.afArrayField_settings.helpers({rightColumnClass:function(){var t=this.atts||{};return t["input-col-class"]||""},afFieldLabelAtts:function(){var t=this.atts||{};return{template:"bootstrap3","class":t["label-class"],name:t.name}}})}();

!function(){Template[getTemplate("invites")].helpers({canCurrentUserInvite:function(){var e=Meteor.user();return e&&e.inviteCount>0&&canInvite(e)},invitesLeft:function(){var e=Meteor.user();return e?e.inviteCount:0},invitesSchema:function(){return InviteSchema}});var e=function(){Deps.afterFlush(function(){var e=$(".grid > .error");$("html, body").animate({scrollTop:e.offset().top})})};AutoForm.hooks({inviteForm:{onSuccess:function(r,n,t){clearSeenErrors(),throwError(n&&n.newUser?"An invite has been sent out. Thank you!":"Thank you!"),e()},onError:function(r,n,t){clearSeenErrors(),n&&n.reason&&(throwError(n.reason),e())}}})}();

!function(){Template[getTemplate("user_edit")].helpers({profileIncomplete:function(){return this&&!this.loading&&!userProfileComplete(this)},userName:function(){return getUserName(this)},userEmail:function(){return getEmail(this)},getTwitter:function(){return getTwitterName(this)||""},getGitHub:function(){return getGitHubName(this)||""},profileUrl:function(){return Meteor.absoluteUrl()+"users/"+this.slug},hasNotificationsUsers:function(){return getUserSetting("notifications.users","",this)?"checked":""},hasNotificationsPosts:function(){return getUserSetting("notifications.posts","",this)?"checked":""},hasNotificationsComments:function(){return getUserSetting("notifications.comments","",this)?"checked":""},hasNotificationsReplies:function(){return getUserSetting("notifications.replies","",this)?"checked":""},hasPassword:function(){return hasPassword(Meteor.user())}}),Template[getTemplate("user_edit")].events({"submit #account-form":function(e){e.preventDefault(),clearSeenErrors(),Meteor.user()||throwError(i18n.t("you_must_be_logged_in"));var t=$(e.target),i=t.find("[name=name]").val(),n=t.find("[name=email]").val(),o=this,r={"profile.name":i,"profile.slug":slugify(i),"profile.bio":t.find("[name=bio]").val(),"profile.email":n,"profile.twitter":t.find("[name=twitter]").val(),"profile.github":t.find("[name=github]").val(),"profile.site":t.find("[name=site]").val(),"profile.notifications.users":$("input[name=notifications_users]:checked").length,"profile.notifications.posts":$("input[name=notifications_posts]:checked").length,"profile.notifications.comments":$("input[name=notifications_comments]:checked").length,"profile.notifications.replies":$("input[name=notifications_replies]:checked").length},s=t.find("[name=old_password]").val(),a=t.find("[name=new_password]").val();s&&a&&Accounts.changePassword(s,a,function(e){e&&throwError(e.reason)}),Meteor.users.update(o._id,{$set:r},function(e){throwError(e?e.reason:i18n.t("profile_updated")),Deps.afterFlush(function(){var e=$(".grid > .error");$("html, body").animate({scrollTop:e.offset().top})})}),Meteor.call("changeEmail",n)}})}();

!function(){Template[getTemplate("user_email")].helpers({user:function(){return Meteor.user()},username:function(){return getUserName(Meteor.user())}}),Template[getTemplate("user_email")].events({"submit form":function(e){e.preventDefault(),Meteor.user()||throwError(i18n.t("you_must_be_logged_in"));var r=$(e.target),t=Session.get("selectedUserId")?Meteor.users.findOne(Session.get("selectedUserId")):Meteor.user(),n={"profile.email":r.find("[name=email]").val(),username:r.find("[name=username]").val(),slug:slugify(r.find("[name=username]").val())},s=r.find("[name=email]").val();Meteor.users.update(t._id,{$set:n},function(e){e?throwError(e.reason):(throwError(i18n.t("thanks_for_signing_up")),trackEvent("new sign-up",{userId:t._id,auth:"twitter"}),Router.go("/"))})}})}();

!function(){Template[getTemplate("user_item")].helpers({createdAtFormatted:function(){return this.createdAt?moment(this.createdAt).fromNow():"–"},displayName:function(){return getDisplayName(this)},getEmail:function(){return getEmail(this)},posts:function(){return Posts.find({userId:this._id})},comments:function(){return Comments.find({userId:this._id})},userIsAdmin:function(){return isAdmin(this)},getProfileUrl:function(){return getProfileUrl(this)},getKarma:function(){return Math.round(100*this.karma)/100},getInvitedUserProfileUrl:function(){var e=Meteor.users.findOne(this.invitedId);return getProfileUrl(e)}}),Template[getTemplate("user_item")].events({"click .invite-link":function(e,t){e.preventDefault(),Meteor.call("inviteUser",{userId:t.data._id})},"click .uninvite-link":function(e,t){e.preventDefault(),Meteor.users.update(t.data._id,{$set:{isInvited:!1}})},"click .admin-link":function(e,t){e.preventDefault(),updateAdmin(t.data._id,!0)},"click .unadmin-link":function(e,t){e.preventDefault(),updateAdmin(t.data._id,!1)},"click .delete-link":function(e,t){e.preventDefault(),confirm(i18n.t("are_you_sure_you_want_to_delete")+getDisplayName(t.data)+"?")&&Meteor.users.remove(t.data._id)}})}();

!function(){Template[getTemplate("user_profile")].created=function(){Session.set("postsShown",5),Session.set("upvotedPostsShown",5),Session.set("downvotedPostsShown",5),Session.set("commentsShown",5)},Template[getTemplate("user_profile")].helpers({canEditProfile:function(){var t=Meteor.user();return t&&(this._id==t._id||isAdmin(t))},createdAtFormatted:function(){return this.createdAt},canInvite:function(){return Meteor.user()&&Meteor.user()._id!=this._id&&!isInvited(this)&&invitesEnabled()&&canInvite(Meteor.user())},inviteCount:function(){return Meteor.user().inviteCount},getTwitterName:function(){return getTwitterName(this)},getGitHubName:function(){return getGitHubName(this)},posts:function(){return Posts.find({userId:this._id},{limit:Session.get("postsShown")})},hasMorePosts:function(){return Posts.find({userId:this._id}).count()>Session.get("postsShown")},upvotedPosts:function(){if(this.votes.upvotedPosts){var t=this.votes.upvotedPosts.map(function(t){var e=Posts.findOne(t.itemId);return _.extend(t,e)});return _.first(t,Session.get("upvotedPostsShown"))}},hasMoreUpvotedPosts:function(){return!!this.votes.upvotedPosts&&this.votes.upvotedPosts.length>Session.get("upvotedPostsShown")},downvotedPosts:function(){if(this.votes.downvotedPosts){var t=this.votes.downvotedPosts.map(function(t){var e=Posts.findOne(t.itemId);return _.extend(t,e)});return _.first(t,Session.get("downvotedPostsShown"))}},hasMoreDownvotedPosts:function(){return!!this.votes.downvotedPosts&&this.votes.downvotedPosts.length>Session.get("downvotedPostsShown")},comments:function(){var t=Comments.find({userId:this._id},{limit:Session.get("commentsShown")});if(t){var e=t.map(function(t){var e=Posts.findOne(t.postId);return e&&(t.postTitle=e.title),t});return e}},hasMoreComments:function(){return Comments.find({userId:this._id}).count()>Session.get("commentsShown")}}),Template[getTemplate("user_profile")].events({"click .invite-link":function(t,e){Meteor.call("inviteUser",e.data.user._id),throwError("Thanks, user has been invited.")},"click .posts-more":function(t){t.preventDefault();var e=Session.get("postsShown");Session.set("postsShown",e+10)},"click .upvotedposts-more":function(t){t.preventDefault();var e=Session.get("upvotedPostsShown");Session.set("upvotedPostsShown",e+10)},"click .downvotedposts-more":function(t){t.preventDefault();var e=Session.get("downvotedPostsShown");Session.set("downvotedPostsShown",e+10)},"click .comments-more":function(t){t.preventDefault();var e=Session.get("commentsShown");Session.set("commentsShown",e+10)}})}();

!function(){Template[getTemplate("users")].helpers({user_item:function(){return getTemplate("user_item")},loadMoreUrl:function(){var t=parseInt(Session.get("usersLimit"))+20;return"/all-users/"+t+"?filterBy="+this.filterBy+"&sortBy="+this.sortBy},allPostsLoaded:function(){return!1},activeClass:function(t){return t==this.filterBy||t==this.sortBy?"active":void 0},sortBy:function(t){return"?filterBy="+this.filterBy+"&sortBy="+t},filterBy:function(t){return"?filterBy="+t+"&sortBy="+this.sortBy}})}();

!function(){Accounts.ui.config({passwordSignupFields:"USERNAME_AND_EMAIL"}),EpicEditorOptions={container:"editor",basePath:"/editor",clientSideStorage:!1,autogrow:{minHeight:100},theme:{base:"/themes/base/epiceditor.css",preview:"/themes/preview/github.css",editor:"/themes/editor/epic-light3.css"}},SharrreOptions={share:{googlePlus:!0,twitter:!0},buttons:{googlePlus:{size:"tall",annotation:"bubble"},twitter:{count:"vertical",via:"TelescopeApp"}},enableHover:!1,enableCounter:!1,enableTracking:!0},Statuses={pending:1,approved:2,rejected:3}}();

!function(){UI.registerHelper("eachWithRank",function(e,r){e.rewind();var t="";return e.forEach(function(e,n){var o="Branch-"+n;t+=Spark.labelBranch(o,function(){return r.fn(_.extend(e,{rank:n}))})}),t}),UI.registerHelper("getSetting",function(e,r){var r="undefined"!=typeof r?r:"",e=getSetting(e,r);return e}),UI.registerHelper("isLoggedIn",function(){return!!Meteor.user()}),UI.registerHelper("canView",function(){return canView(Meteor.user())}),UI.registerHelper("canPost",function(){return canPost(Meteor.user())}),UI.registerHelper("canComment",function(){return canComment(Meteor.user())}),UI.registerHelper("canUpvote",function(e){return canUpvote(Meteor.user(),e)}),UI.registerHelper("canDownvote",function(e){return canDownvote(Meteor.user(),e)}),UI.registerHelper("isAdmin",function(e){return isAdmin(Meteor.user())?!0:("string"==typeof e&&"true"===e&&throwError(i18n.t("sorry_you_do_not_have_access_to_this_page")),!1)}),UI.registerHelper("canEdit",function(collectionName,item,action){var action="string"!=typeof action?null:action,collection="string"!=typeof collectionName?Posts:eval(collectionName);return item&&canEdit(Meteor.user(),item,action)}),UI.registerHelper("log",function(e){console.log(e)}),UI.registerHelper("formatDate",function(e,r){return Session.get("momentLocale"),moment(e).format(r)}),UI.registerHelper("timeAgo",function(e){return Session.get("momentLocale"),moment(e).fromNow()}),UI.registerHelper("sanitize",function(e){return console.log("cleaning up…"),console.log(e),cleanUp(e)}),UI.registerHelper("pluralize",function(e,r){return r=1===e?r:r+"s",i18n.t(r)})}();

!function(){!function(e,t){function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function r(t,n){var i=t,r=null;return e.getComputedStyle?r=document.defaultView.getComputedStyle(i,null).getPropertyValue(n):i.currentStyle&&(r=i.currentStyle[n]),r}function s(e,t,n){var s={},o;if("save"===t){for(o in n)n.hasOwnProperty(o)&&(s[o]=r(e,o));i(e,n)}else"apply"===t&&i(e,n);return s}function o(e){var t=parseInt(r(e,"border-left-width"),10)+parseInt(r(e,"border-right-width"),10),n=parseInt(r(e,"padding-left"),10)+parseInt(r(e,"padding-right"),10),i=e.offsetWidth,s;return isNaN(t)&&(t=0),s=t+n+i}function a(e){var t=parseInt(r(e,"border-top-width"),10)+parseInt(r(e,"border-bottom-width"),10),n=parseInt(r(e,"padding-top"),10)+parseInt(r(e,"padding-bottom"),10),i=parseInt(r(e,"height"),10),s;return isNaN(t)&&(t=0),s=t+n+i}function l(e,t,i){i=i||"";var r=t.getElementsByTagName("head")[0],s=t.createElement("link");n(s,{type:"text/css",id:i,rel:"stylesheet",href:e,name:e,media:"screen"}),r.appendChild(s)}function u(e,t,n){e.className=e.className.replace(t,n)}function c(e){return e.contentDocument||e.contentWindow.document}function p(e){var t;return"string"==typeof document.body.innerText?t=e.innerText:(t=e.innerHTML.replace(/<br>/gi,"\n"),t=t.replace(/<(?:.|\n)*?>/gm,""),t=t.replace(/&lt;/gi,"<"),t=t.replace(/&gt;/gi,">")),t}function h(e,t){return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/\n/g,"<br>"),t=t.replace(/<br>\s/g,"<br>&nbsp;"),t=t.replace(/\s\s\s/g,"&nbsp; &nbsp;"),t=t.replace(/\s\s/g,"&nbsp; "),t=t.replace(/^ /,"&nbsp;"),e.innerHTML=t,!0}function d(e){return e.replace(/\u00a0/g," ").replace(/&nbsp;/g," ")}function g(){var e=-1,t=navigator.userAgent,n;return"Microsoft Internet Explorer"==navigator.appName&&(n=/MSIE ([0-9]{1,}[\.0-9]{0,})/,null!=n.exec(t)&&(e=parseFloat(RegExp.$1,10))),e}function f(){var t=e.navigator;return t.userAgent.indexOf("Safari")>-1&&-1==t.userAgent.indexOf("Chrome")}function m(){var t=e.navigator;return t.userAgent.indexOf("Firefox")>-1&&-1==t.userAgent.indexOf("Seamonkey")}function v(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function b(){var e=arguments[0]||{},n=1,i=arguments.length,r=!1,s,o,a,l;for("boolean"==typeof e&&(r=e,e=arguments[1]||{},n=2),"object"==typeof e||v(e)||(e={}),i===n&&(e=this,--n);i>n;n++)if(null!=(s=arguments[n]))for(o in s)if(s.hasOwnProperty(o)){if(a=e[o],l=s[o],e===l)continue;r&&l&&"object"==typeof l&&!l.nodeType?e[o]=b(r,a||(null!=l.length?[]:{}),l):l!==t&&(e[o]=l)}return e}function y(e){var n=this,i=e||{},r,s,o={container:"epiceditor",basePath:"epiceditor",textarea:t,clientSideStorage:!0,localStorageName:"epiceditor",useNativeFullscreen:!0,file:{name:null,defaultContent:"",autoSave:100},theme:{base:"/themes/base/epiceditor.css",preview:"/themes/preview/github.css",editor:"/themes/editor/epic-dark.css"},focusOnLoad:!1,shortcut:{modifier:18,fullscreen:70,preview:80},string:{togglePreview:"Toggle Preview Mode",toggleEdit:"Toggle Edit Mode",toggleFullscreen:"Enter Fullscreen"},parser:"function"==typeof marked?marked:null,autogrow:!1,button:{fullscreen:!0,preview:!0,bar:"auto"}},a,l={minHeight:80,maxHeight:!1,scroll:!0};n.settings=b(!0,o,i);var u=n.settings.button;return n._fullscreenEnabled="object"==typeof u?"undefined"==typeof u.fullscreen||u.fullscreen:u===!0,n._editEnabled="object"==typeof u?"undefined"==typeof u.edit||u.edit:u===!0,n._previewEnabled="object"==typeof u?"undefined"==typeof u.preview||u.preview:u===!0,("function"!=typeof n.settings.parser||"string"!=typeof n.settings.parser("TEST"))&&(n.settings.parser=function(e){return e}),n.settings.autogrow&&(n.settings.autogrow=n.settings.autogrow===!0?l:b(!0,l,n.settings.autogrow),n._oldHeight=-1),n.settings.theme.preview.match(/^https?:\/\//)||(n.settings.theme.preview=n.settings.basePath+n.settings.theme.preview),n.settings.theme.editor.match(/^https?:\/\//)||(n.settings.theme.editor=n.settings.basePath+n.settings.theme.editor),n.settings.theme.base.match(/^https?:\/\//)||(n.settings.theme.base=n.settings.basePath+n.settings.theme.base),"string"==typeof n.settings.container?n.element=document.getElementById(n.settings.container):"object"==typeof n.settings.container&&(n.element=n.settings.container),n.settings.file.name||("string"==typeof n.settings.container?n.settings.file.name=n.settings.container:"object"==typeof n.settings.container&&(n.element.id?n.settings.file.name=n.element.id:(y._data.unnamedEditors||(y._data.unnamedEditors=[]),y._data.unnamedEditors.push(n),n.settings.file.name="__epiceditor-untitled-"+y._data.unnamedEditors.length))),"show"===n.settings.button.bar&&(n.settings.button.bar=!0),"hide"===n.settings.button.bar&&(n.settings.button.bar=!1),n._instanceId="epiceditor-"+Math.round(1e5*Math.random()),n._storage={},n._canSave=!0,n._defaultFileSchema=function(){return{content:n.settings.file.defaultContent,created:new Date,modified:new Date}},localStorage&&n.settings.clientSideStorage&&(this._storage=localStorage,this._storage[n.settings.localStorageName]&&n.getFiles(n.settings.file.name)===t&&(s=n._defaultFileSchema(),s.content=n.settings.file.defaultContent)),this._storage[n.settings.localStorageName]||(a={},a[n.settings.file.name]=n._defaultFileSchema(),a=JSON.stringify(a),this._storage[n.settings.localStorageName]=a),n._previewDraftLocation="__draft-",n._storage[n._previewDraftLocation+n.settings.localStorageName]=n._storage[n.settings.localStorageName],n._eeState={fullscreen:!1,preview:!1,edit:!1,loaded:!1,unloaded:!1},n.events||(n.events={}),this}y.prototype.load=function(t){function n(t){"auto"===p.settings.button.bar&&((Math.abs(_.y-t.pageY)>=5||Math.abs(_.x-t.pageX)>=5)&&(b.style.display="block",y&&clearTimeout(y),y=e.setTimeout(function(){b.style.display="none"},1e3)),_={y:t.pageY,x:t.pageX})}function o(e){e.keyCode==p.settings.shortcut.modifier&&(L=!0),17==e.keyCode&&(T=!0),L!==!0||e.keyCode!=p.settings.shortcut.preview||p.is("fullscreen")||(e.preventDefault(),p.is("edit")&&p._previewEnabled?p.preview():p._editEnabled&&p.edit()),L===!0&&e.keyCode==p.settings.shortcut.fullscreen&&p._fullscreenEnabled&&(e.preventDefault(),p._goFullscreen(D)),L===!0&&e.keyCode!==p.settings.shortcut.modifier&&(L=!1),27==e.keyCode&&p.is("fullscreen")&&p._exitFullscreen(D),T===!0&&83==e.keyCode&&(p.save(),e.preventDefault(),T=!1),e.metaKey&&83==e.keyCode&&(p.save(),e.preventDefault())}function a(e){e.keyCode==p.settings.shortcut.modifier&&(L=!1),17==e.keyCode&&(T=!1)}function u(t){var n;t.clipboardData?(t.preventDefault(),n=t.clipboardData.getData("text/plain"),p.editorIframeDocument.execCommand("insertText",!1,n)):e.clipboardData&&(t.preventDefault(),n=e.clipboardData.getData("Text"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),n=n.replace(/\n/g,"<br>"),n=n.replace(/\r/g,""),n=n.replace(/<br>\s/g,"<br>&nbsp;"),n=n.replace(/\s\s\s/g,"&nbsp; &nbsp;"),n=n.replace(/\s\s/g,"&nbsp; "),p.editorIframeDocument.selection.createRange().pasteHTML(n))}if(this.is("loaded"))return this;var p=this,h,d,m,v,b,y,w,_={y:-1,x:-1},x,k,S=!1,I=!1,E=!1,F=!1,D,L=!1,T=!1,N,O,C;for(p._eeState.startup=!0,p.settings.useNativeFullscreen&&(I=document.body.webkitRequestFullScreen?!0:!1,E=document.body.mozRequestFullScreen?!0:!1,F=document.body.requestFullscreen?!0:!1,S=I||E||F),f()&&(S=!1,I=!1),p.is("edit")||p.is("preview")||(p._eeState.edit=!0),t=t||function(){},h={chrome:'<div id="epiceditor-wrapper" class="epiceditor-edit-mode"><iframe frameborder="0" id="epiceditor-editor-frame"></iframe><iframe frameborder="0" id="epiceditor-previewer-frame"></iframe><div id="epiceditor-utilbar">'+(p._previewEnabled?'<button title="'+this.settings.string.togglePreview+'" class="epiceditor-toggle-btn epiceditor-toggle-preview-btn"></button> ':"")+(p._editEnabled?'<button title="'+this.settings.string.toggleEdit+'" class="epiceditor-toggle-btn epiceditor-toggle-edit-btn"></button> ':"")+(p._fullscreenEnabled?'<button title="'+this.settings.string.toggleFullscreen+'" class="epiceditor-fullscreen-btn"></button>':"")+"</div></div>",previewer:'<div id="epiceditor-preview"></div>',editor:"<!doctype HTML>"},p.element.innerHTML='<iframe scrolling="no" frameborder="0" id= "'+p._instanceId+'"></iframe>',p.element.style.height=p.element.offsetHeight+"px",d=document.getElementById(p._instanceId),p.iframeElement=d,p.iframe=c(d),p.iframe.open(),p.iframe.write(h.chrome),p.editorIframe=p.iframe.getElementById("epiceditor-editor-frame"),p.previewerIframe=p.iframe.getElementById("epiceditor-previewer-frame"),p.editorIframeDocument=c(p.editorIframe),p.editorIframeDocument.open(),p.editorIframeDocument.write(h.editor),p.editorIframeDocument.close(),p.previewerIframeDocument=c(p.previewerIframe),p.previewerIframeDocument.open(),p.previewerIframeDocument.write(h.previewer),m=p.previewerIframeDocument.createElement("base"),m.target="_blank",p.previewerIframeDocument.getElementsByTagName("head")[0].appendChild(m),p.previewerIframeDocument.close(),p.reflow(),l(p.settings.theme.base,p.iframe,"theme"),l(p.settings.theme.editor,p.editorIframeDocument,"theme"),l(p.settings.theme.preview,p.previewerIframeDocument,"theme"),p.iframe.getElementById("epiceditor-wrapper").style.position="relative",p.editorIframe.style.position="absolute",p.previewerIframe.style.position="absolute",p.editor=p.editorIframeDocument.body,p.previewer=p.previewerIframeDocument.getElementById("epiceditor-preview"),p.editor.contentEditable=!0,p.iframe.body.style.height=this.element.offsetHeight+"px",p.previewerIframe.style.left="-999999px",this.editorIframeDocument.body.style.wordWrap="break-word",g()>-1&&(this.previewer.style.height=parseInt(r(this.previewer,"height"),10)+2),this.open(p.settings.file.name),p.settings.focusOnLoad&&p.iframe.addEventListener("readystatechange",function(){"complete"==p.iframe.readyState&&p.focus()}),p.previewerIframeDocument.addEventListener("click",function(t){var n=t.target,i=p.previewerIframeDocument.body;"A"==n.nodeName&&n.hash&&n.hostname==e.location.hostname&&(t.preventDefault(),n.target="_self",i.querySelector(n.hash)&&(i.scrollTop=i.querySelector(n.hash).offsetTop))}),v=p.iframe.getElementById("epiceditor-utilbar"),x={},p._goFullscreen=function(t){if(this._fixScrollbars("auto"),p.is("fullscreen"))return void p._exitFullscreen(t);S&&(I?t.webkitRequestFullScreen():E?t.mozRequestFullScreen():F&&t.requestFullscreen()),k=p.is("edit"),p._eeState.fullscreen=!0,p._eeState.edit=!0,p._eeState.preview=!0;var n=e.innerWidth,i=e.innerHeight,o=e.outerWidth,a=e.outerHeight;S||(a=e.innerHeight),x.editorIframe=s(p.editorIframe,"save",{width:o/2+"px",height:a+"px","float":"left",cssFloat:"left",styleFloat:"left",display:"block",position:"static",left:""}),x.previewerIframe=s(p.previewerIframe,"save",{width:o/2+"px",height:a+"px","float":"right",cssFloat:"right",styleFloat:"right",display:"block",position:"static",left:""}),x.element=s(p.element,"save",{position:"fixed",top:"0",left:"0",width:"100%","z-index":"9999",zIndex:"9999",border:"none",margin:"0",background:r(p.editor,"background-color"),height:i+"px"}),x.iframeElement=s(p.iframeElement,"save",{width:o+"px",height:i+"px"}),v.style.visibility="hidden",S||(document.body.style.overflow="hidden"),p.preview(),p.focus(),p.emit("fullscreenenter")},p._exitFullscreen=function(e){this._fixScrollbars(),s(p.element,"apply",x.element),s(p.iframeElement,"apply",x.iframeElement),s(p.editorIframe,"apply",x.editorIframe),s(p.previewerIframe,"apply",x.previewerIframe),p.element.style.width=p._eeState.reflowWidth?p._eeState.reflowWidth:"",p.element.style.height=p._eeState.reflowHeight?p._eeState.reflowHeight:"",v.style.visibility="visible",p._eeState.fullscreen=!1,S?I?document.webkitCancelFullScreen():E?document.mozCancelFullScreen():F&&document.exitFullscreen():document.body.style.overflow="auto",k?p.edit():p.preview(),p.reflow(),p.emit("fullscreenexit")},p.editor.addEventListener("keyup",function(){w&&e.clearTimeout(w),w=e.setTimeout(function(){p.is("fullscreen")&&p.preview()},250)}),D=p.iframeElement,v.addEventListener("click",function(e){var t=e.target.className;t.indexOf("epiceditor-toggle-preview-btn")>-1?p.preview():t.indexOf("epiceditor-toggle-edit-btn")>-1?p.edit():t.indexOf("epiceditor-fullscreen-btn")>-1&&p._goFullscreen(D)}),I?document.addEventListener("webkitfullscreenchange",function(){!document.webkitIsFullScreen&&p._eeState.fullscreen&&p._exitFullscreen(D)},!1):E?document.addEventListener("mozfullscreenchange",function(){!document.mozFullScreen&&p._eeState.fullscreen&&p._exitFullscreen(D)},!1):F&&document.addEventListener("fullscreenchange",function(){null==document.fullscreenElement&&p._eeState.fullscreen&&p._exitFullscreen(D)},!1),b=p.iframe.getElementById("epiceditor-utilbar"),p.settings.button.bar!==!0&&(b.style.display="none"),b.addEventListener("mouseover",function(){y&&clearTimeout(y)}),N=[p.previewerIframeDocument,p.editorIframeDocument],O=0;O<N.length;O++)N[O].addEventListener("mousemove",function(e){n(e)}),N[O].addEventListener("scroll",function(e){n(e)}),N[O].addEventListener("keyup",function(e){a(e)}),N[O].addEventListener("keydown",function(e){o(e)}),N[O].addEventListener("paste",function(e){u(e)});return p.settings.file.autoSave&&(p._saveIntervalTimer=e.setInterval(function(){p._canSave&&p.save(!1,!0)},p.settings.file.autoSave)),p.settings.textarea&&p._setupTextareaSync(),e.addEventListener("resize",function(){p.is("fullscreen")?(i(p.iframeElement,{width:e.outerWidth+"px",height:e.innerHeight+"px"}),i(p.element,{height:e.innerHeight+"px"}),i(p.previewerIframe,{width:e.outerWidth/2+"px",height:e.innerHeight+"px"}),i(p.editorIframe,{width:e.outerWidth/2+"px",height:e.innerHeight+"px"})):p.is("fullscreen")||p.reflow()}),p._eeState.loaded=!0,p._eeState.unloaded=!1,p.is("preview")?p.preview():p.edit(),p.iframe.close(),p._eeState.startup=!1,p.settings.autogrow&&(p._fixScrollbars(),C=function(){setTimeout(function(){p._autogrow()},1)},["keydown","keyup","paste","cut"].forEach(function(e){p.getElement("editor").addEventListener(e,C)}),p.on("__update",C),p.on("edit",function(){setTimeout(C,50)}),p.on("preview",function(){setTimeout(C,50)}),setTimeout(C,50),C()),t.call(this),this.emit("load"),this},y.prototype._setupTextareaSync=function(){var t=this,n=t.settings.file.name,i;t._textareaSaveTimer=e.setInterval(function(){t._canSave&&t.save(!0)},100),i=function(){t._textareaElement.value=t.exportFile(n,"text",!0)||t.settings.file.defaultContent},"string"==typeof t.settings.textarea?t._textareaElement=document.getElementById(t.settings.textarea):"object"==typeof t.settings.textarea&&(t._textareaElement=t.settings.textarea),""!==t._textareaElement.value&&(t.importFile(n,t._textareaElement.value),t.save(!0)),i(),t.on("__update",i)},y.prototype._focusExceptOnLoad=function(){var e=this;(e._eeState.startup&&e.settings.focusOnLoad||!e._eeState.startup)&&e.focus()},y.prototype.unload=function(t){if(this.is("unloaded"))throw new Error("Editor isn't loaded");var n=this,i=e.parent.document.getElementById(n._instanceId);return i.parentNode.removeChild(i),n._eeState.loaded=!1,n._eeState.unloaded=!0,t=t||function(){},n.settings.textarea&&(n._textareaElement.value="",n.removeListener("__update")),n._saveIntervalTimer&&e.clearInterval(n._saveIntervalTimer),n._textareaSaveTimer&&e.clearInterval(n._textareaSaveTimer),t.call(this),n.emit("unload"),n},y.prototype.reflow=function(e,t){var n=this,i=o(n.element)-n.element.offsetWidth,r=a(n.element)-n.element.offsetHeight,s=[n.iframeElement,n.editorIframe,n.previewerIframe],l={},u,c;"function"==typeof e&&(t=e,e=null),t||(t=function(){});for(var p=0;p<s.length;p++)e&&"width"!=e||(u=n.element.offsetWidth-i+"px",s[p].style.width=u,n._eeState.reflowWidth=u,l.width=u),e&&"height"!=e||(c=n.element.offsetHeight-r+"px",s[p].style.height=c,n._eeState.reflowHeight=c,l.height=c);return n.emit("reflow",l),t.call(this,l),n},y.prototype.preview=function(){var e=this,t,n=e.settings.theme.preview,i;return u(e.getElement("wrapper"),"epiceditor-edit-mode","epiceditor-preview-mode"),e.previewerIframeDocument.getElementById("theme")?e.previewerIframeDocument.getElementById("theme").name!==n&&(e.previewerIframeDocument.getElementById("theme").href=n):l(n,e.previewerIframeDocument,"theme"),e.save(!0),e.previewer.innerHTML=e.exportFile(null,"html",!0),e.is("fullscreen")||(e.editorIframe.style.left="-999999px",e.previewerIframe.style.left="",e._eeState.preview=!0,e._eeState.edit=!1,e._focusExceptOnLoad()),e.emit("preview"),e},y.prototype.focus=function(e){var t=this,n=t.is("preview"),i=n?t.previewerIframeDocument.body:t.editorIframeDocument.body;return m()&&n&&(i=t.previewerIframe),i.focus(),this},y.prototype.enterFullscreen=function(){return this.is("fullscreen")?this:(this._goFullscreen(this.iframeElement),this)},y.prototype.exitFullscreen=function(){return this.is("fullscreen")?(this._exitFullscreen(this.iframeElement),this):this},y.prototype.edit=function(){var e=this;return u(e.getElement("wrapper"),"epiceditor-preview-mode","epiceditor-edit-mode"),e._eeState.preview=!1,e._eeState.edit=!0,e.editorIframe.style.left="",e.previewerIframe.style.left="-999999px",e._focusExceptOnLoad(),e.emit("edit"),this},y.prototype.getElement=function(e){var t={container:this.element,wrapper:this.iframe.getElementById("epiceditor-wrapper"),wrapperIframe:this.iframeElement,editor:this.editorIframeDocument,editorIframe:this.editorIframe,previewer:this.previewerIframeDocument,previewerIframe:this.previewerIframe};return!t[e]||this.is("unloaded")?null:t[e]},y.prototype.is=function(e){var t=this;switch(e){case"loaded":return t._eeState.loaded;case"unloaded":return t._eeState.unloaded;case"preview":return t._eeState.preview;case"edit":return t._eeState.edit;case"fullscreen":return t._eeState.fullscreen;default:return!1}},y.prototype.open=function(e){var n=this,i=n.settings.file.defaultContent,r;return e=e||n.settings.file.name,n.settings.file.name=e,this._storage[n.settings.localStorageName]&&(r=n.exportFile(e),r!==t?(h(n.editor,r),n.emit("read")):(h(n.editor,i),n.save(),n.emit("create")),n.previewer.innerHTML=n.exportFile(null,"html"),n.emit("open")),this},y.prototype.save=function(e,n){var i=this,r,s=!1,o=i.settings.file.name,a="",l=this._storage[a+i.settings.localStorageName],u=p(this.editor);if(e&&(a=i._previewDraftLocation),this._canSave=!0,l){if(r=JSON.parse(this._storage[a+i.settings.localStorageName]),r[o]===t)r[o]=i._defaultFileSchema();else if(u!==r[o].content)r[o].modified=new Date,s=!0;else if(n)return;r[o].content=u,this._storage[a+i.settings.localStorageName]=JSON.stringify(r),s&&(i.emit("update"),i.emit("__update")),n?this.emit("autosave"):e||this.emit("save")}return this},y.prototype.remove=function(e){var t=this,n;return e=e||t.settings.file.name,e==t.settings.file.name&&(t._canSave=!1),n=JSON.parse(this._storage[t.settings.localStorageName]),delete n[e],this._storage[t.settings.localStorageName]=JSON.stringify(n),this.emit("remove"),this},y.prototype.rename=function(e,t){var n=this,i=JSON.parse(this._storage[n.settings.localStorageName]);return i[t]=i[e],delete i[e],this._storage[n.settings.localStorageName]=JSON.stringify(i),n.open(t),this},y.prototype.importFile=function(e,n,i,r){var s=this,o=!1;return e=e||s.settings.file.name,n=n||"",i=i||"md",r=r||{},JSON.parse(this._storage[s.settings.localStorageName])[e]===t&&(o=!0),s.settings.file.name=e,h(s.editor,n),o&&s.emit("create"),s.save(),s.is("fullscreen")&&s.preview(),s.settings.autogrow&&setTimeout(function(){s._autogrow()},50),this},y.prototype._getFileStore=function(e,t){var n="",i;return t&&(n=this._previewDraftLocation),i=JSON.parse(this._storage[n+this.settings.localStorageName]),e?i[e]:i},y.prototype.exportFile=function(e,n,i){var r=this,s,o;if(e=e||r.settings.file.name,n=n||"text",s=r._getFileStore(e,i),s!==t)switch(o=s.content,n){case"html":return o=d(o),r.settings.parser(o);case"text":return d(o);case"json":return s.content=d(s.content),JSON.stringify(s);case"raw":return o;default:return o}},y.prototype.getFiles=function(e,n){var i,r=this._getFileStore(e);if(e)return r!==t&&(n?delete r.content:r.content=d(r.content)),r;for(i in r)r.hasOwnProperty(i)&&(n?delete r[i].content:r[i].content=d(r[i].content));return r},y.prototype.on=function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),n},y.prototype.emit=function(e,t){function n(e){e.call(i,t)}var i=this,r;if(t=t||i.getFiles(i.settings.file.name),this.events[e]){for(r=0;r<i.events[e].length;r++)n(i.events[e][r]);return i}},y.prototype.removeListener=function(e,t){var n=this;return t?this.events[e]?(this.events[e].splice(this.events[e].indexOf(t),1),n):n:(this.events[e]=[],n)},y.prototype._autogrow=function(){var t,n,i,r,s,o,l=!1;this.is("fullscreen")||(s=this.is("edit")?this.getElement("editor").documentElement:this.getElement("previewer").documentElement,t=a(s),n=t,i=this.settings.autogrow.minHeight,"function"==typeof i&&(i=i(this)),i&&i>n&&(n=i),r=this.settings.autogrow.maxHeight,"function"==typeof r&&(r=r(this)),r&&n>r&&(n=r,l=!0),this._fixScrollbars(l?"auto":"hidden"),n!=this.oldHeight&&(this.getElement("container").style.height=n+"px",this.reflow(),this.settings.autogrow.scroll&&e.scrollBy(0,n-this.oldHeight),this.oldHeight=n))},y.prototype._fixScrollbars=function(e){var t;t=this.settings.autogrow?"hidden":"auto",t=e||t,this.getElement("editor").documentElement.style.overflow=t,this.getElement("previewer").documentElement.style.overflow=t},y.version="0.2.2",y._data={},e.EpicEditor=y}(window),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||a.defaults,this.rules=l.normal,this.options.gfm&&(this.rules=this.options.tables?l.tables:l.gfm)}function t(e,t){if(this.options=t||a.defaults,this.links=e,this.rules=u.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?u.breaks:u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function n(e){this.tokens=[],this.token=null,this.options=e||a.defaults}function i(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function r(e,t){return e=e.source,t=t||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,r),n):new RegExp(e,t)}}function s(){}function o(e){for(var t=1,n,i;t<arguments.length;t++){n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}function a(t,i){try{return n.parse(e.lex(t,i),i)}catch(r){if(r.message+="\nPlease report this to https://github.com/chjj/marked.",(i||a.defaults).silent)return"An error occured:\n"+r.message;throw r}}var l={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^([^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+\n*/,text:/^[^\n]+/};l.bullet=/(?:[*+-]|\d+\.)/,l.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,l.item=r(l.item,"gm")(/bull/g,l.bullet)(),l.list=r(l.list)(/bull/g,l.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),l._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",l.html=r(l.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l._tag)(),l.paragraph=r(l.paragraph)("hr",l.hr)("heading",l.heading)("lheading",l.lheading)("blockquote",l.blockquote)("tag","<"+l._tag)("def",l.def)(),l.normal=o({},l),l.gfm=o({},l.normal,{fences:/^ *(`{3,}|~{3,}) *(\w+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),l.gfm.paragraph=r(l.paragraph)("(?!","(?!"+l.gfm.fences.source.replace("\\1","\\2")+"|")(),l.tables=o({},l.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=l,e.lex=function(t,n){var i=new e(n);return i.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t){for(var e=e.replace(/^ +$/gm,""),n,i,r,s,o,a,l;e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(t&&(r=this.rules.nptable.exec(e))){for(e=e.substring(r[0].length),s={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},a=0;a<s.align.length;a++)s.align[a]=/^ *-+: *$/.test(s.align[a])?"right":/^ *:-+: *$/.test(s.align[a])?"center":/^ *:-+ *$/.test(s.align[a])?"left":null;for(a=0;a<s.cells.length;a++)s.cells[a]=s.cells[a].split(/ *\| */);this.tokens.push(s)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),this.tokens.push({type:"list_start",ordered:isFinite(r[2])}),r=r[0].match(this.rules.item),n=!1,l=r.length,a=0;l>a;a++)s=r[a],o=s.length,s=s.replace(/^ *([*+-]|\d+\.) +/,""),~s.indexOf("\n ")&&(o-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+o+"}","gm"),"")),i=n||/\n\n(?!\s*$)/.test(s),a!==l-1&&(n="\n"===s[s.length-1],i||(i=n)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(s,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===r[1],text:r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(t&&(r=this.rules.table.exec(e))){for(e=e.substring(r[0].length),s={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},a=0;a<s.align.length;a++)s.align[a]=/^ *-+: *$/.test(s.align[a])?"right":/^ *:-+: *$/.test(s.align[a])?"center":/^ *:-+ *$/.test(s.align[a])?"left":null;for(a=0;a<s.cells.length;a++)s.cells[a]=s.cells[a].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:r[0]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>|])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=r(u.link)("inside",u._inside)("href",u._href)(),u.reflink=r(u.reflink)("inside",u._inside)(),u.normal=o({},u),u.pedantic=o({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=o({},u.normal,{escape:r(u.escape)("])","~])")(),url:/^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,del:/^~{2,}([\s\S]+?)~{2,}/,text:r(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=o({},u.gfm,{br:r(u.br)("{2,}","*")(),text:r(u.gfm.text)("{2,}","*")()}),t.rules=u,t.output=function(e,n,i){var r=new t(n,i);return r.output(e)},t.prototype.output=function(e){for(var t="",n,r,s,o;e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),t+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(r=this.mangle(":"===o[1][6]?o[1].substring(7):o[1]),s=this.mangle("mailto:")+r):(r=i(o[1]),s=r),t+='<a href="'+s+'">'+r+"</a>";else if(o=this.rules.url.exec(e))e=e.substring(o[0].length),r=i(o[1]),s=r,t+='<a href="'+s+'">'+r+"</a>";else if(o=this.rules.tag.exec(e))e=e.substring(o[0].length),t+=this.options.sanitize?i(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),t+=this.outputLink(o,{href:o[2],title:o[3]});else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){t+=o[0][0],e=o[0].substring(1)+e;continue}t+=this.outputLink(o,n)}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),t+="<strong>"+this.output(o[2]||o[1])+"</strong>";else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),t+="<em>"+this.output(o[2]||o[1])+"</em>";else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),t+="<code>"+i(o[2],!0)+"</code>";else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),t+="<br>";else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),t+="<del>"+this.output(o[1])+"</del>";else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),t+=i(o[0]);else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return t},t.prototype.outputLink=function(e,t){return"!"!==e[0][0]?'<a href="'+i(t.href)+'"'+(t.title?' title="'+i(t.title)+'"':"")+">"+this.output(e[1])+"</a>":'<img src="'+i(t.href)+'" alt="'+i(e[1])+'"'+(t.title?' title="'+i(t.title)+'"':"")+">"},t.prototype.mangle=function(e){for(var t="",n=e.length,i=0,r;n>i;i++)r=e.charCodeAt(i),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t},n.parse=function(e,t){var i=new n(t);return i.parse(e)},n.prototype.parse=function(e){this.inline=new t(e.links,this.options),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},n.prototype.next=function(){return this.token=this.tokens.pop()},n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},n.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},n.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var e=this.options.highlight(this.token.text,this.token.lang);null!=e&&e!==this.token.text&&(this.token.escaped=!0,this.token.text=e)}return this.token.escaped||(this.token.text=i(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="lang-'+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var t="",n,r,s,o,a;for(t+="<thead>\n<tr>\n",r=0;r<this.token.header.length;r++)n=this.inline.output(this.token.header[r]),t+=this.token.align[r]?'<th align="'+this.token.align[r]+'">'+n+"</th>\n":"<th>"+n+"</th>\n";for(t+="</tr>\n</thead>\n",t+="<tbody>\n",r=0;r<this.token.cells.length;r++){for(s=this.token.cells[r],t+="<tr>\n",a=0;a<s.length;a++)o=this.inline.output(s[a]),t+=this.token.align[a]?'<td align="'+this.token.align[a]+'">'+o+"</td>\n":"<td>"+o+"</td>\n";
t+="</tr>\n"}return t+="</tbody>\n","<table>\n"+t+"</table>\n";case"blockquote_start":for(var t="";"blockquote_end"!==this.next().type;)t+=this.tok();return"<blockquote>\n"+t+"</blockquote>\n";case"list_start":for(var l=this.token.ordered?"ol":"ul",t="";"list_end"!==this.next().type;)t+=this.tok();return"<"+l+">\n"+t+"</"+l+">\n";case"list_item_start":for(var t="";"list_item_end"!==this.next().type;)t+="text"===this.token.type?this.parseText():this.tok();return"<li>"+t+"</li>\n";case"loose_item_start":for(var t="";"list_item_end"!==this.next().type;)t+=this.tok();return"<li>"+t+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},s.exec=s,a.options=a.setOptions=function(e){return a.defaults=e,a},a.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,silent:!1,highlight:null},a.Parser=n,a.parser=n.parse,a.Lexer=e,a.lexer=e.lex,a.InlineLexer=t,a.inlineLexer=t.output,a.parse=a,"undefined"!=typeof module?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):this.marked=a}.call(function(){return this||("undefined"!=typeof window?window:global)}())}();

!function(){jQuery.ajax=function(t){function e(t){return!c.test(t)&&/:\/\//.test(t)}var s=location.protocol,a=location.hostname,c=RegExp(s+"//"+a),r="http"+(/^https/.test(s)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",o='select * from html where url="{URL}" and xpath="*"';return function(s){var a=s.url;return/get/i.test(s.type)&&!/json/i.test(s.dataType)&&e(a)&&(s.url=r,s.dataType="json",s.data={q:o.replace("{URL}",a+(s.data?(/\?/.test(a)?"&":"?")+jQuery.param(s.data):"")),format:"xml"},!s.success&&s.complete&&(s.success=s.complete,delete s.complete),s.success=function(t){return function(e){t&&t.call(this,{responseText:(e.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(s.success)),t.apply(this,arguments)}}(jQuery.ajax)}();

!function(){CommentSchema=new SimpleSchema({_id:{type:String,optional:!0},parentCommentId:{type:String,optional:!0},createdAt:{type:Date,optional:!0},postedAt:{type:Date,optional:!0},body:{type:String},htmlBody:{type:String,optional:!0},baseScore:{type:Number,decimal:!0,optional:!0},score:{type:Number,decimal:!0,optional:!0},upvotes:{type:Number,optional:!0},upvoters:{type:[String],optional:!0},downvotes:{type:Number,optional:!0},downvoters:{type:[String],optional:!0},author:{type:String,optional:!0},inactive:{type:Boolean,optional:!0},postId:{type:String,optional:!0},userId:{type:String,optional:!0},isDeleted:{type:Boolean,optional:!0}}),Comments=new Meteor.Collection("comments"),Comments.attachSchema(CommentSchema),Comments.deny({update:function(e,t,o){return isAdminById(e)?!1:_.without(o,"body").length>0}}),Comments.allow({update:canEditById,remove:canEditById}),Comments.before.insert(function(e,t){Meteor.isServer&&(t.htmlBody=sanitize(marked(t.body)))}),Comments.before.update(function(e,t,o,n,r){Meteor.isServer&&n.$set&&n.$set.body&&(n.$set=n.$set||{},n.$set.htmlBody=sanitize(marked(n.$set.body)))}),Meteor.methods({comment:function(e,t,o){var n=Meteor.user(),r=Posts.findOne(e),i=Meteor.users.findOne(r.userId),m=timeSinceLast(n,Comments),s=Math.abs(parseInt(getSetting("commentInterval",15))),a=new Date;if(!n||!canComment(n))throw new Meteor.Error(i18n.t("you_need_to_login_or_be_invited_to_post_new_comments"));if(!this.isSimulation&&s>m)throw new Meteor.Error(704,i18n.t("please_wait")+(s-m)+i18n.t("seconds_before_commenting_again"));if(!o)throw new Meteor.Error(704,i18n.t("your_comment_is_empty"));var d={postId:e,body:o,userId:n._id,createdAt:a,postedAt:a,upvotes:0,downvotes:0,baseScore:0,score:0,author:getDisplayName(n)};return t&&(d.parentCommentId=t),d=commentSubmitMethodCallbacks.reduce(function(e,t){return t(e)},d),d._id=Comments.insert(d),d=commentAfterSubmitMethodCallbacks.reduce(function(e,t){return t(e)},d),Meteor.users.update({_id:n._id},{$inc:{commentCount:1}}),Posts.update(e,{$inc:{commentCount:1},$set:{lastCommentedAt:a},$addToSet:{commenters:n._id}}),Meteor.call("upvoteComment",d),d},removeComment:function(e){var t=Comments.findOne(e);canEdit(Meteor.user(),t)?(Posts.update(t.postId,{$inc:{commentCount:-1},$pull:{commenters:t.userId}}),Meteor.users.update({_id:t.userId},{$inc:{commentCount:-1}}),Comments.update({_id:e},{$set:{body:"Deleted",htmlBody:"Deleted",isDeleted:!0}})):throwError("You don't have permission to delete this comment.")}})}();

!function(){Meteor.isClient&&(Errors=new Meteor.Collection(null))}();

!function(){InviteSchema=new SimpleSchema({_id:{type:String,optional:!0},invitingUserId:{type:String,optional:!0},invitedUserEmail:{type:String,regEx:SimpleSchema.RegEx.Email},accepted:{type:Boolean,optional:!0}}),Invites=new Meteor.Collection("invites"),Invites.attachSchema(InviteSchema),Invites.deny({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}})}();

!function(){postSchemaObject={_id:{type:String,optional:!0},createdAt:{type:Date,optional:!0},postedAt:{type:Date,optional:!0},title:{type:String,label:"Title"},url:{type:String,label:"URL",optional:!0},body:{type:String,optional:!0},htmlBody:{type:String,optional:!0},viewCount:{type:Number,optional:!1},commentCount:{type:Number,optional:!1},commenters:{type:[String],optional:!0},lastCommentedAt:{type:Date,optional:!0},clickCount:{type:Number,optional:!1},baseScore:{type:Number,decimal:!0,optional:!0},upvotes:{type:Number,optional:!0},upvoters:{type:[String],optional:!0},downvotes:{type:Number,optional:!0},downvoters:{type:[String],optional:!0},score:{type:Number,decimal:!0,optional:!0},status:{type:Number,optional:!0},sticky:{type:Boolean,optional:!0},inactive:{type:Boolean,optional:!0},userId:{type:String,optional:!0}},_.each(addToPostSchema,function(t){postSchemaObject[t.propertyName]=t.propertySchema}),Posts=new Meteor.Collection("posts"),PostSchema=new SimpleSchema(postSchemaObject),Posts.attachSchema(PostSchema),STATUS_PENDING=1,STATUS_APPROVED=2,STATUS_REJECTED=3,Posts.deny({update:function(t,e,o){return isAdminById(t)?!1:_.without(o,"title","url","body","shortUrl","shortTitle","categories").length>0}}),Posts.allow({update:canEditById,remove:canEditById}),postClicks=[],postViews=[],getPostProperties=function(t){var e=Meteor.users.findOne(t.userId),o={postAuthorName:getDisplayName(e),postTitle:cleanUp(t.title),profileUrl:getProfileUrlById(t.userId),postUrl:getPostPageUrl(t),thumbnailUrl:t.thumbnailUrl,linkUrl:t.url?getOutgoingUrl(t.url):getPostPageUrl(t._id)};return t.url&&(o.url=t.url),t.htmlBody&&(o.htmlBody=t.htmlBody),o},getPostPageUrl=function(t){return getSiteUrl()+"posts/"+t._id},getPostEditUrl=function(t){return getSiteUrl()+"posts/"+t+"/edit"},getPostLink=function(t){return t.url?getOutgoingUrl(t.url):getPostPageUrl(t)},Posts.before.insert(function(t,e){Meteor.isServer&&e.body&&(e.htmlBody=sanitize(marked(e.body)))}),Posts.before.update(function(t,e,o,s,r){Meteor.isServer&&s.$set&&s.$set.body&&(s.$set=s.$set||{},s.$set.htmlBody=sanitize(marked(s.$set.body)))}),Meteor.methods({post:function(t){var e=cleanUp(t.title),o=t.body,s=this.userId,r=Meteor.users.findOne(s),i=timeSinceLast(r,Posts),n=numberOfItemsInPast24Hours(r,Posts),a=Math.abs(parseInt(getSetting("postInterval",30))),d=Math.abs(parseInt(getSetting("maxPostsPerDay",30))),u="";if(!r||!canPost(r))throw new Meteor.Error(601,i18n.t("you_need_to_login_or_be_invited_to_post_new_stories"));if(!t.title)throw new Meteor.Error(602,i18n.t("please_fill_in_a_title"));if(t.url){var p=moment().subtract(6,"months").toDate(),l=Posts.findOne({url:t.url,postedAt:{$gte:p}});if("undefined"!=typeof l)throw Meteor.call("upvotePost",l),new Meteor.Error(603,i18n.t("this_link_has_already_been_posted"),l._id)}if(!isAdmin(Meteor.user())){if(!this.isSimulation&&a>i)throw new Meteor.Error(604,i18n.t("please_wait")+(a-i)+i18n.t("seconds_before_posting_again"));if(!this.isSimulation&&n>d)throw new Meteor.Error(605,i18n.t("sorry_you_cannot_submit_more_than")+d+i18n.t("posts_per_day"))}properties={title:e,body:o,userId:s,author:getDisplayNameById(s),upvotes:0,downvotes:0,commentCount:0,clickCount:0,viewCount:0,baseScore:0,score:0,inactive:!1},isAdmin(Meteor.user())&&t.userId&&(properties.userId=t.userId);var c=getSetting("requirePostsApproval")?STATUS_PENDING:STATUS_APPROVED;properties.status=isAdmin(Meteor.user())&&t.status?t.status:c,properties.createdAt=new Date,2==properties.status&&(properties.postedAt=isAdmin(Meteor.user())&&t.postedAt?t.postedAt:new Date),t=_.extend(t,properties),t=postSubmitMethodCallbacks.reduce(function(t,e){return e(t)},t),console.log("before insert post.medbookfiles",t.medbookfiles),t._id=Posts.insert(t),console.log("after insert post.medbookfiles",t.medbookfiles),console.log("find after insert post.medbookfiles",Posts.find({_id:t._id})),t=postAfterSubmitMethodCallbacks.reduce(function(t,e){return e(t)},t),Meteor.users.update({_id:s},{$inc:{postCount:1}});var m=Meteor.users.findOne(t.userId);return Meteor.call("upvotePost",t,m),t},setPostedAt:function(t,e){var o=new Date;isAdmin(Meteor.user())&&"undefined"!=typeof e&&(o=e),Posts.update(t._id,{$set:{postedAt:o}})},post_edit:function(t){},approvePost:function(t){if(isAdmin(Meteor.user())){var e=new Date;Posts.update(t._id,{$set:{status:2,postedAt:e}})}else throwError("You need to be an admin to do that.")},unapprovePost:function(t){isAdmin(Meteor.user())?Posts.update(t._id,{$set:{status:1}}):throwError("You need to be an admin to do that.")},increasePostViews:function(t,e){this.unblock();var o={_id:t,userId:this.userId,sessionId:e};0==_.where(postViews,o).length&&(postViews.push(o),Posts.update(t,{$inc:{viewCount:1}}))},increasePostClicks:function(t,e){this.unblock();var o={_id:t,userId:this.userId,sessionId:e};0==_.where(postClicks,o).length&&(postClicks.push(o),Posts.update(t,{$inc:{clickCount:1}}))},deletePostById:function(t){var e=Posts.findOne({_id:t});if(!Meteor.userId()||!canEditById(Meteor.userId(),e))throw new Meteor.Error(606,"You need permission to edit or delete a post");Meteor.users.update({_id:e.userId},{$inc:{postCount:-1}}),Posts.remove(t)}})}();

!function(){if(settingsSchemaObject={title:{type:String,label:"Title",optional:!0,autoform:{group:"general"}},siteUrl:{type:String,optional:!0,label:"Site URL",autoform:{group:"general",instructions:'Your site\'s URL (with trailing "/"). Will default to Meteor.absoluteUrl()'}},tagline:{type:String,label:"Tagline",optional:!0,autoform:{group:"general"}},requireViewInvite:{type:Boolean,label:"Require invite to view",optional:!0,autoform:{group:"invites"}},requirePostInvite:{type:Boolean,label:"Require invite to post",optional:!0,autoform:{group:"invites"}},requirePostsApproval:{type:Boolean,optional:!0,autoform:{group:"general",instructions:"Posts must be approved by admin"}},defaultEmail:{type:String,optional:!0,autoform:{group:"email",instructions:"The address all outgoing emails will be sent from."}},scoreUpdateInterval:{type:Number,optional:!0,defaultValue:30,autoform:{group:"scoring",instructions:"How often to recalculate scores, in seconds (default to 30)"}},defaultView:{type:String,optional:!0,autoform:{group:"posts",instructions:"The view used for the front page",options:_.map(viewNav,function(t){return{value:camelCaseify(t.label),label:t.label}})}},postInterval:{type:Number,optional:!0,defaultValue:30,autoform:{group:"posts",instructions:"Minimum time between posts, in seconds (defaults to 30)"}},commentInterval:{type:Number,optional:!0,defaultValue:15,autoform:{group:"comments",instructions:"Minimum time between comments, in seconds (defaults to 15)"}},maxPostsPerDay:{type:Number,optional:!0,defaultValue:30,autoform:{group:"posts",instructions:"Maximum number of posts a user can post in a day (default to 30)."}},startInvitesCount:{type:Number,defaultValue:3,optional:!0,autoform:{group:"invites"}},postsPerPage:{type:Number,defaultValue:10,optional:!0,autoform:{group:"posts"}},logoUrl:{type:String,optional:!0,autoform:{group:"logo"}},logoHeight:{type:Number,optional:!0,autoform:{group:"logo"}},logoWidth:{type:Number,optional:!0,autoform:{group:"logo"}},language:{type:String,defaultValue:"en",optional:!0,autoform:{group:"general",instructions:"The app's language. Defaults to English.",options:function(){var t=_.map(TAPi18n.languages_available_for_project,function(t,o){return{value:o,label:t[0]}});return t}}},backgroundCSS:{type:String,optional:!0,label:"Background CSS",autoform:{group:"extras",instructions:'CSS code for the <body>\'s "background" property',rows:5}},buttonColor:{type:String,optional:!0,autoform:{group:"colors"}},buttonTextColor:{type:String,optional:!0,autoform:{group:"colors"}},headerColor:{type:String,optional:!0,autoform:{group:"colors"}},headerTextColor:{type:String,optional:!0,autoform:{group:"colors"}},twitterAccount:{type:String,optional:!0,autoform:{group:"integrations"}},googleAnalyticsId:{type:String,optional:!0,autoform:{group:"integrations"}},mixpanelId:{type:String,optional:!0,autoform:{group:"integrations"}},clickyId:{type:String,optional:!0,autoform:{group:"integrations"}},footerCode:{type:String,optional:!0,autoform:{group:"extras",instructions:"Footer content (accepts HTML).",rows:5}},extraCode:{type:String,optional:!0,autoform:{group:"extras",instructions:"Any extra HTML code you want to include on every page.",rows:5}},emailFooter:{type:String,optional:!0,autoform:{group:"email",instructions:"Content that will appear at the bottom of outgoing emails (accepts HTML).",rows:5}},notes:{type:String,optional:!0,autoform:{group:"extras",instructions:"You can store any notes or extra information here.",rows:5}}},_.each(addToSettingsSchema,function(t){settingsSchemaObject[t.propertyName]=t.propertySchema}),Settings=new Meteor.Collection("settings"),SettingsSchema=new SimpleSchema(settingsSchemaObject),Settings.attachSchema(SettingsSchema),Settings.allow({insert:isAdminById,update:isAdminById,remove:isAdminById}),Meteor.isClient)var t=Settings.find(),o=t.observeChanges({added:function(t,o){o.language&&setLanguage(o.language)},changed:function(t,o){o.language&&setLanguage(o.language)}})}();

!function(){var e={};e.User=new SimpleSchema({_id:{type:String,optional:!0},username:{type:String,regEx:/^[a-z0-9A-Z_]{3,15}$/},emails:{type:[Object]},"emails.$.address":{type:String,regEx:SimpleSchema.RegEx.Email},"emails.$.verified":{type:Boolean},createdAt:{type:Date},profile:{type:Object,optional:!0,blackbox:!0},data:{type:Object,optional:!0,blackbox:!0},votes:{type:Object,optional:!0,blackbox:!0},services:{type:Object,optional:!0,blackbox:!0}}),Meteor.users.deny({update:function(e,t,i){return isAdminById(e)?!1:_.without(i,"profile","username","slug").length>0}}),Meteor.users.allow({update:function(e,t){return isAdminById(e)||e==t._id},remove:function(e,t){return isAdminById(e)||e==t._id}})}();

!function(){var e=Package.underscore._,a="project",n="project";"project"!=a&&(n=TAPi18n.packages[a].namespace),TAPi18n.languages_available_for_project.de=["German","Deutsch"],TAPi18n._enable({helper_name:"_",supported_languages:null,i18n_files_route:"/tap-i18n",cdn_path:null}),TAPi18n.languages_available_for_project.en=["English","English"]}();

!function(){var e=Package.underscore._,o="project",t="project";"project"!=o&&(t=TAPi18n.packages[o].namespace),TAPi18n.addResourceBundle("en",t,{menu:"Menu",view:"View",top:"Top","new":"New",best:"Best",digest:"Digest",users:"Users",settings:"Settings",admin:"Admin",post:"Post",toolbox:"Toolbox",sign_up_sign_in:"Sign Up/Sign In",my_account:"My Account",view_profile:"View Profile",edit_account:"Edit Account",new_posts:"New Posts",your_comment_has_been_deleted:"Your comment has been deleted.",comment_:"Comment",delete_comment:"Delete Comment",add_comment:"Add Comment",upvote:"upvote",downvote:"downvote",link:"link",edit:"Edit",reply:"Reply",no_comments:"No comments.",you_are_already_logged_in:"You are already logged in",sorry_this_is_a_private_site_please_sign_up_first:"Sorry, this is a private site. Please sign up first.",thanks_for_signing_up:"Thanks for signing up!",the_site_is_currently_invite_only_but_we_will_let_you_know_as_soon_as_a_spot_opens_up:"The site is currently invite-only, but we will let you know as soon as a spot opens up.",sorry_you_dont_have_the_rights_to_view_this_page:"Sorry, you don't have the rights to view this page.",not_found:"Not Found!",were_sorry_whatever_you_were_looking_for_isnt_here:"We're sorry; whatever you were looking for isn't here..",no_notifications:"No notifications","1_notification":"1 notification",notifications:"notifications",mark_all_as_read:"Mark all as read",your_post_has_been_deleted:"Your post has been deleted.",the_top_5_posts_of_each_day:"The top 5 posts of each day.",previous_day:"Previous Day",next_day:"Next Day",sorry_no_posts_for_today:"Sorry, no posts for today",sorry_no_posts_for:"Sorry, no posts for",today:"Today",yesterday:"Yesterday",created:"Created",title:"Title",suggest_title:"Suggest title",url:"URL",short_url:"Short URL",body:"Body",category:"Category",inactive_:"Inactive?",sticky_:"Sticky?",submission_date:"Submission Date",submission_time:"Submission Time",date:"Date",submission:"Submission",note_this_post_is_still_pending_so_it_has_no_submission_timestamp_yet:"Note: this post is still pending so it has no submission timestamp yet.",user:"User",status_:"Status",approved:"Approved",rejected:"Rejected",delete_post:"Delete Post",thanks_your_post_is_awaiting_approval:"Thanks, your post is awaiting approval.",sorry_couldnt_find_a_title:"Sorry, couldn't find a title...",please_fill_in_an_url_first:"Please fill in an URL first!",share:"Share",discuss:"Discuss",upvote_:"Upvote",sticky:"Sticky",status:"status",votes:"votes",basescore:"baseScore",score:"score",clicks:"clicks",views:"views",inactive:"inactive",comment:"comment",comments:"comments",point:"point",points:"points",please_complete_your_profile_below_before_continuing:"Please complete your profile below before continuing.",account:"Account",username:"Username",display_name:"Display Name",email:"Email",bio:"Bio:",password:"Password",change_password:"Change Password?",old_password:"Old Password",new_password:"New Password",email_notifications:"Email Notifications",comments_on_my_posts:"Comments on my posts",replies_to_my_comments:"Replies to my comments",forgot_password:"Forgot password?",profile_updated:"Profile updated",please_fill_in_your_email_below_to_finish_signing_up:"Please fill in your email below to finish signing up.",invite:"Invite",uninvite:"Uninvite",make_admin:"Make admin",unadmin:"Unadmin",delete_user:"Delete User",are_you_sure_you_want_to_delete:"Are you sure you want to delete ",reset_password:"Reset Password",password_reset_link_sent:"Password reset link sent!",name:"Name:",posts:"Posts",comments_:"Comments",karma:"Karma",is_invited:"Is Invited?",is_admin:"Is Admin?","delete":"Delete",member_since:"Member since",edit_profile:"Edit profile",sign_in:"Sign In",sign_in_:"Sign in!",sign_up_:"Sign up!",dont_have_an_account:"Don't have an account?",already_have_an_account:"Already have an account?",sign_up:"Sign Up",please_fill_in_all_fields:"Please fill in all fields",invite_:"Invite ",left:" left",invite_none_left:"Invite (none left)",all:"All",invited:"Invited?",uninvited:"Uninvited",filter_by:"Filter by",sort_by:"Sort by",sorry_you_do_not_have_access_to_this_page:"Sorry, you do not have access to this page",please_sign_in_first:"Please Sign In First.",sorry_you_have_to_be_an_admin_to_view_this_page:"Sorry, you  have to be an admin to view this page.",sorry_you_dont_have_permissions_to_add_new_items:"Sorry, you don't have permissions to add new items.",sorry_you_cannot_edit_this_post:"Sorry, you cannot edit this post.",sorry_you_cannot_edit_this_comment:"Sorry, you cannot edit this comment.",you_need_to_login_and_be_an_admin_to_add_a_new_category:"You need to login and be an admin to add a new category.",you_need_to_login_or_be_invited_to_post_new_comments:"You need to login or be invited to post new comments.",please_wait:"Please wait ",seconds_before_commenting_again:" seconds before commenting again",your_comment_is_empty:"Your comment is empty.",you_dont_have_permission_to_delete_this_comment:"You don't have permission to delete this comment.",you_need_to_login_or_be_invited_to_post_new_stories:"You need to login or be invited to post new stories.",please_fill_in_a_headline:"Please fill in a headline",this_link_has_already_been_posted:"This link has already been posted",sorry_you_cannot_submit_more_than:"Sorry, you cannot submit more than ",posts_per_day:" posts per day",someone_replied_to_your_comment_on:"Someone replied to your comment on",has_replied_to_your_comment_on:" has replied to your comment on",read_more:"Read more",a_new_comment_on_your_post:"A new comment on your post",you_have_a_new_comment_by:"You have a new comment by ",on_your_post:" on your post",has_created_a_new_post:" has created a new post",your_account_has_been_approved:"Your account has been approved.",welcome_to:"Welcome to ",start_posting:"Start posting.",please_fill_in_a_title:"Please fill in a title",seconds_before_posting_again:" seconds before posting again",upvoted:"Upvoted",posted_date:"Posted Date",posted_time:"Posted Time",profile:"Profile",sign_out:"Sign Out",invitedcount:"InvitedCount",invites:"Invites",actions:"Actions",invites_left:"invites left",id:"ID",github:"GitHub",site:"Site",upvoted_posts:"Upvoted Posts",downvoted_posts:"Downvoted Posts",mark_as_read:"Mark as read",pending:"Pending",loading:"Loading...",submit:"Submit",you_must_be_logged_in:"You must be logged in.",are_you_sure:"Are you sure?",please_log_in_first:"Please log in first",sign_in_sign_up_with_twitter:"Sign In/Sign Up with Twitter",load_more:"Load more"})}();

!function(){var a=Package.underscore._,e="project",c="project";"project"!=e&&(c=TAPi18n.packages[e].namespace),TAPi18n.languages_available_for_project.es=["Spanish (Spain)","Español"]}();

!function(){var a=Package.underscore._,e="project",r="project";"project"!=e&&(r=TAPi18n.packages[e].namespace),TAPi18n.languages_available_for_project.fr=["French (France)","Français"]}();

!function(){var a=Package.underscore._,e="project",c="project";"project"!=e&&(c=TAPi18n.packages[e].namespace),TAPi18n.languages_available_for_project.it=["Italian","Italiano"]}();

!function(){var a=Package.underscore._,e="project",c="project";"project"!=e&&(c=TAPi18n.packages[e].namespace),TAPi18n.languages_available_for_project.ru=["Russian","Русский"]}();

!function(){var e=Package.underscore._,a="project",r="project";"project"!=a&&(r=TAPi18n.packages[a].namespace),TAPi18n.languages_available_for_project.tr=["Turkish","Türkçe"]}();

!function(){var a=Package.underscore._,e="project",c="project";"project"!=e&&(c=TAPi18n.packages[e].namespace),TAPi18n.languages_available_for_project["zh-CN"]=["zh-CN","zh-CN"]}();

!function(){TAPi18n._enable({helper_name:"_",supported_languages:null,i18n_files_route:"/tap-i18n",cdn_path:null}),TAPi18n.languages_available_for_project.en=["English","English"]}();

!function(){Session.set("initialLoad",!0),Session.set("today",new Date),Session.set("view","top"),Session.set("postsLimit",getSetting("postsPerPage",10)),Session.set("sessionId",Meteor.default_connection._lastSessionId),STATUS_PENDING=1,STATUS_APPROVED=2,STATUS_REJECTED=3,adminNav=adminNav.concat([{route:"posts_pending",label:"Pending"},{route:"all-users",label:"Users"},{route:"settings",label:"Settings"},{route:"toolbox",label:"Toolbox"}]),postModules=_.sortBy(postModules,function(t){return _.indexOf(modulePositions,t.position)}),postHeading=_.sortBy(postHeading,"order"),postMeta=_.sortBy(postMeta,"order"),Meteor.startup(function(){$("#rss-link").attr("title",i18n.t("new_posts"))})}();